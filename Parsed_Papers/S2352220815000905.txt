@&#MAIN-TITLE@&#Product line process theory

@&#HIGHLIGHTS@&#


               
               
                  
                     
                        
                           
                           Notions of bisimulation for product line process calculi are studied.


                        
                        
                           
                           Compositionality (congruence) results are proved for the notions of bisimulation.


                        
                        
                           
                           Sound axiomatization for the a calculus of product lines (PL-CCS) is provided.


                        
                        
                           
                           The axiomatization is proved ground-complete for closed terms with finite behavior.


                        
                        
                           
                           Product line bisimulation is characterized by the multi-valued Modal mu-Calculus.


                        
                     
                  
               
            

@&#KEYPHRASES@&#

Software product line

Process theory

Product line bisimulation

Strict strong bisimulation




                     μ-Calculus

Axiomatization

@&#ABSTRACT@&#


               
               
                  Software product lines (SPLs) facilitate reuse and customization in software development by genuinely addressing the concept of variability. Product Line Calculus of Communicating Systems (PL-CCS) is a process calculus for behavioral modeling of SPLs, in which variability can be explicitly modeled by a binary variant operator. In this paper, we study different notions of behavioral equivalence for PL-CCS, based on Park and Milner's strong bisimilarity. These notions enable reasoning about the behavior of SPLs at different levels of abstraction. We study the compositionality property of these notions and the mutual relationship among them. We further show how the strengths of these notions can be consolidated in an equational reasoning method. Finally, we designate the notions of behavioral equivalence that are characterized by the property specification language for PL-CCS, called multi-valued modal μ-calculus.
               
            

@&#INTRODUCTION@&#


                     Software product line (SPL) engineering has become an established trend in software development, where a family of similar software products with minor differences are developed in tandem, instead of developing each specific software product separately [1]. SPL engineering benefits from systematic reuse throughout the system life cycle and enables mass development and customization of numerous products. Hence, the development cost and the time to market for an SPL is substantially decreased, compared to the cumulative development cost and time of the isolated products [2]. To this aim, various software engineering activities have to be adapted to cope with the differences among the artifacts for different products, called variability. Variability introduces a new complexity dimension and hence, this calls for a genuine treatment of variability in different artifacts (such as requirement specification, architectural design, detailed design, and implementation artifacts). Such a treatment should also allow for a collective analysis of product line behavior (e.g., in testing and verification [3,4]) to deal with the inherent complexity of SPLs.

At the highest level of abstraction, an SPL can be specified by a set of features that satisfy the specific needs of a particular market segment or mission [5]. A feature identifies “a prominent or distinctive unit of requirement which can be either a user-visible behavior, aspect, quality, or characteristic of a software system” [6]. Hence, a product can be specified by a subset of features. To specify an SPL, the features are organized in a hierarchical model, called a feature model. It identifies commonalities and differences among the products of the SPL in terms of their features and it identifies suitable relations among features, such as optional, mandatory, or mutually exclusive. More concrete specifications capture structural and behavioral aspects of an SPL. For instance, the architecture description languages Koala [7] and xADL [8] concentrate on structural modeling of SPLs. Modal transition systems (MTSs) [9] and Featured transition systems (FTSs) [10], however, concentrate on behavioral modeling (we refer to [11] for an overview of such behavioral models). MTSs capture the behavior of SPLs by defining state transitions as optional or mandatory, while FTSs annotate transitions with a set of features. Behavioral models typically come equipped with a product derivation method; e.g., a product, derived from a feature model, can project an FTS into a labeled transition system (LTS).

Formal verification techniques provide strong tools to analyze complex systems to guarantee their correctness. Process algebra is a formal approach to describe the behavior of communicating concurrent systems in a compositional manner. Product Line Calculus of Communicating Systems (PL-CCS) [12,13] is an extension of Milner's Calculus of Communicating Systems (CCS) [14]. PL-CCS extends CCS by adding the binary variant operator 
                        
                           
                              ⊕
                           
                           
                              i
                           
                        
                      to model behavioral variability in SPLs. More specifically, process term 
                        
                           
                              p
                           
                           
                              1
                           
                        
                        
                           
                              ⊕
                           
                           
                              1
                           
                        
                        
                           
                              p
                           
                           
                              2
                           
                        
                     , where 
                        
                           
                              p
                           
                           
                              1
                           
                        
                      and 
                        
                           
                              p
                           
                           
                              2
                           
                        
                      are CCS process terms, specifies a family of two alternative products, namely 
                        
                           
                              p
                           
                           
                              1
                           
                        
                      or 
                        
                           
                              p
                           
                           
                              2
                           
                        
                      (the index i in 
                        
                           
                              ⊕
                           
                           
                              i
                           
                        
                      is used to designate repeated choices that have to be made in the same way; when no repetition of indices is present, the indices can be safely ignored). The semantics of a PL-CCS specification is given in terms of three different models: the flat semantics, the unfolded semantics, and the configured-transition semantics 
                     [12]. A PL-CCS specification can be turned into a product, specified by a CCS term, by resolving the variability points, i.e., the variant operators, by deciding on whether their right or left process is chosen. The flat semantics of a PL-CCS term is given in terms of the semantics of all derivable products, denoted by CCS terms. A product family LTS (PF-LTS) is an extension of an LTS, where labels and states are paired with configuration vectors that maintain the configuration of variants. PF-LTSs provide the unfolded semantics of PL-CCS terms and are derived through a set of structural rules in a systematic way. The structural rules given in [12] work on a restricted set of PL-CCS terms in order to be compositional. The configured-transition semantics is defined over the unfolded semantics by merging all states that only differ in their configuration parts. This provides the most succinct model of PL-CCS terms. Hence, in the developments to come, we mostly focus on the configured-transition semantics of PL-CCS. In particular, we provide a set of structural rules that derive a configured-transition semantics for PL-CCS terms directly.

Equational reasoning is the cornerstone of the algebraic approach to process theory. To furnish PL-CCS with a proper equational theory, we study a number of notions of behavioral equivalence, based on strong bisimilarity [15]. A summary of these notions, their properties and the results establishing their relationship is depicted in Fig. 1
                     . We start with a set of axioms that we expect to be sound for a model of PL-CCS and define the notion of strict strong bisimilarity, which is a natural extension of strong bisimilarity in the SPL setting. Namely, strict strong bisimilarity requires bisimilar product lines to behave bisimilarly for all common configurations. This turns out to be a fully compositional notion for PL-CCS, but too strong of a notion for some of our intuitive axioms. For example, strict strong bisimilarity rejects 
                        p
                        
                           
                              ⊕
                           
                           
                              i
                           
                        
                        q
                        =
                        q
                        
                           
                              ⊕
                           
                           
                              i
                           
                        
                        p
                     , which is an intuitive axiom. Subsequently, we introduce a strictly coarser notion, called product line bisimilarity, which does satisfy the axioms we defined for PL-CCS. However, this notion is shown to satisfy a weaker compositionality property. Namely, it is compositional for a subset of PL-CCS terms, called fully expanded terms. To remedy the latter issue, we show that all PL-CCS term can be rewritten into this subset using a sound transformation, thanks to the strong compositional notion of strict strong bisimilarity. Since strict strong bisimilarity implies product line bisimilarity this transformation is also sound for the latter notion and hence, resolves its compositionality issue. Finally, we introduce configuration bisimilarity, which is an alternative yet equivalent notion for product line bisimilarity. The main motivation for introducing configuration bisimilarity is that it allows for reasoning about the product line behavior as a whole and hence, dispenses with scrutinizing individual products' behaviors.

Our axiomatization is useful to identify common parts (i.e., the mandatory parts) among the products of a family, to reorganize the functionality of a family specification to behaviors for which appropriate components exist, to derive products of a family to validate a model in terms of its intended systems (where each product is specified by a CCS term), and to manipulate functionalities assigned to products of a product line at the syntactic level.

Regarding an equational theory for PL-CCS, our work improves upon [13], where a number of algebraic laws to restructure a product line specification were given. However, we are not aware of any complete axiomatization of PL-CCS to date. For example, the laws of [13] are restricted to families with the same number of variants and exclude intuitive equalities like 
                        p
                        
                           
                              ⊕
                           
                           
                              i
                           
                        
                        q
                        =
                        q
                        
                           
                              ⊕
                           
                           
                              i
                           
                        
                        p
                      and 
                        p
                        
                           
                              ⊕
                           
                           
                              i
                           
                        
                        p
                        =
                        p
                     . It is worth noting that our notion of configuration bisimilarity is reminiscent of the notion of branching bisimilarity introduced in [16].

PL-CCS also comes equipped with a property specification language that is a variant of the multi-valued modal μ-calculus [12]. A configured transition system can also be viewed as a multi-valued modal Kripke structure [12] and hence, formulae in the multi-valued modal μ-calculus can be evaluated naturally in this semantic domain. The corresponding model checking method verifies a family at once, and its result defines the set of products that meet the given property. In this paper, we show that the multi-valued modal μ-calculus of [12] is the logical characterization of our notion of product line bisimilarity (and hence, also our notion of configuration bisimilarity). This provides another evidence of suitability for our main notions of behavioral equivalence.

The contributions of this paper can be summarized as follows:
                        
                           •
                           We introduce a means to specify product lines with infinite behavior, following the approach of [17], by extending PL-CCS with recursive specifications.

We provide a set of structural rules to derive the configured-transition semantics of PL-CCS directly.

We study different notions of bisimilarity over the configured-transition semantics. To this end, we provide a set of intuitive axioms that should be satisfied. We prove different compositionality (congruence) results for the notions of bisimilarity and relate them to each other.

We provide a sound axiomatization of PL-CCS terms modulo product line bisimilarity, which additionally allows one to derive any sound equation on closed terms with finite-state behavior (in technical terms, it is a ground-complete axiomatization).

We show that the multi-valued modal μ-calculus is the characterizing logic for our product line bisimilarity.

The rest of this paper is structured as follows. Section 2 introduces the PL-CCS syntax and semantics. Section 3 defines our notions of behavioral equivalence and relates them. Section 4 provides a set of sound and complete axioms to syntactically manipulate product lines. Section 5 illustrates the applicability of our axiomatization in the analysis of product lines. Section 6 presents the multi-valued modal μ-calculus as well as a logical characterization of product line bisimilarity. Section 7 provides an overview of existing approaches on modeling and verification of SPLs. Finally, Section 8 concludes the paper.

To our knowledge, PL-CCS [12,13] is the first process algebra introduced to formally specify and verify product lines in an algebraic manner. To give a semantics to PL-CCS terms in [12,13], the binary variant operators are assigned an index in a pre-processing step. Following the same principle, we index the binary variant operator of PL-CCS with a natural number. This allows for defining a unique semantic model for each PL-CCS term and also specify multiple variation points that should be resolved in the same manner. Moreover, any unnumbered PL-CCS term can be considered an indexed PL-CCS term by assigning arbitrary distinct natural numbers to each and every binary variant operator.

To specify product lines with infinite behavior, we extend PL-CCS with the recursion operator 
                        〈
                        X
                        |
                        E
                        〉
                      taken from [17]. It encompasses both the CCS recursion operator 
                        
                           rec
                        
                        X
                        .
                        t
                      (which is specified in our syntax as 
                        〈
                        X
                        |
                        X
                        
                           =
                           
                              def
                           
                        
                        t
                        〉
                     ) and the standard way to express recursion in ACP (where usually only guarded recursion is considered via systems of equations E) [17].

Let 
                           A
                         be the set of process names which are used as recursion variables in recursive specifications and ranged over by A and B. Moreover assume that Σ a finite set of input action labels, 
                           
                              Σ
                              ‾
                           
                           =
                           {
                           
                              a
                              ‾
                           
                           |
                           a
                           ∈
                           Σ
                           }
                         is the set of output actions, and 
                           τ
                           ∉
                           Σ
                           ∪
                           
                              Σ
                              ‾
                           
                         the unobservable action. Then, the set of all actions Act is defined as 
                           Σ
                           ∪
                           
                              Σ
                              ‾
                           
                           ∪
                           {
                           τ
                           }
                        . By definition, we have that 
                           
                              a
                              ̿
                           
                           =
                           a
                        .

The core syntax of PL-CCS comprises deadlock 0, action prefix 
                           a
                           .
                           −
                         (for each 
                           a
                           ∈
                           
                              Act
                           
                        ), choice +, binary variant 
                           
                              
                                 ⊕
                              
                              
                                 i
                              
                           
                         where 
                           i
                           ∈
                           N
                        , and parallel composition ∥. It also includes process renaming 
                           [
                           f
                           ]
                         where 
                           f
                           :
                           
                              Act
                           
                           ↦
                           
                              Act
                           
                         is a renaming function with 
                           f
                           (
                           
                              a
                              ‾
                           
                           )
                           =
                           
                              
                                 f
                                 (
                                 a
                                 )
                              
                              ‾
                           
                        , and 
                           f
                           (
                           τ
                           )
                           =
                           τ
                        , restriction ∖L where 
                           L
                           ⊆
                           
                              Act
                           
                        . Additionally, it has process names, and recursion operator 
                           〈
                           A
                           |
                           E
                           〉
                         where E is a recursive specification over 
                           A
                        , denoted by 
                           E
                           (
                           A
                           )
                         for short. A recursive specification is defined by a set of recursive equations that contains precisely one recursive equation 
                           A
                           
                              =
                              
                                 def
                              
                           
                           
                              
                                 t
                              
                              
                                 A
                              
                           
                         for each process name 
                           A
                           ∈
                           A
                        , where 
                           
                              
                                 t
                              
                              
                                 A
                              
                           
                         is a term over the PL-CCS signature and process names from 
                           A
                        . The PL-CCS syntax is summarized by the following grammar:
                           
                              
                                 
                                    t
                                    :
                                    :
                                    =
                                    
                                    
                                    0
                                    
                                    
                                    |
                                    
                                    
                                    a
                                    .
                                    t
                                    
                                    
                                    |
                                    
                                    
                                    t
                                    +
                                    t
                                    
                                    
                                    |
                                    
                                    
                                    t
                                    
                                       
                                          ⊕
                                       
                                       
                                          i
                                       
                                    
                                    t
                                    
                                    
                                    |
                                    
                                    
                                    t
                                    ∥
                                    t
                                    
                                    
                                    |
                                    
                                    
                                    t
                                    [
                                    f
                                    ]
                                    
                                    
                                    |
                                    
                                    
                                    t
                                    ∖
                                    L
                                    
                                    
                                    |
                                    
                                    
                                    A
                                    
                                    
                                    |
                                    
                                    
                                    〈
                                    A
                                    |
                                    E
                                    〉
                                 
                              
                           
                        
                     

Process term 
                           a
                           .
                           t
                         denotes a process that first performs action a and then behaves as t. Alternative composition 
                           
                              
                                 t
                              
                              
                                 1
                              
                           
                           +
                           
                              
                                 t
                              
                              
                                 2
                              
                           
                         nondeterministically behaves as 
                           
                              
                                 t
                              
                              
                                 1
                              
                           
                         or 
                           
                              
                                 t
                              
                              
                                 2
                              
                           
                        . Variant operator 
                           
                              
                                 ⊕
                              
                              
                                 i
                              
                           
                         defines a behavioral variation point. Family 
                           
                              
                                 t
                              
                              
                                 1
                              
                           
                           
                              
                                 ⊕
                              
                              
                                 i
                              
                           
                           
                              
                                 t
                              
                              
                                 2
                              
                           
                         consists of the two alternative families specified by 
                           
                              
                                 t
                              
                              
                                 1
                              
                           
                         and 
                           
                              
                                 t
                              
                              
                                 2
                              
                           
                        . Binary variant operators 
                           
                              
                                 ⊕
                              
                              
                                 i
                              
                           
                        , or variants for short, with identical indices i are resolved in the same manner. PL-CCS terms can be composed using the parallel composition operator ∥. Process term 
                           
                              
                                 t
                              
                              
                                 1
                              
                           
                           ∥
                           
                              
                                 t
                              
                              
                                 2
                              
                           
                         denotes the concurrent execution of two processes 
                           
                              
                                 t
                              
                              
                                 1
                              
                           
                         and 
                           
                              
                                 t
                              
                              
                                 2
                              
                           
                        , of which the actions can be interleaved or synchronized whenever 
                           
                              
                                 t
                              
                              
                                 1
                              
                           
                         and 
                           
                              
                                 t
                              
                              
                                 2
                              
                           
                         are ready to execute an input and the corresponding output action simultaneously. The process term 
                           t
                           [
                           f
                           ]
                         behaves as t, with every action renamed according to the renaming function f. The process term 
                           t
                           ∖
                           L
                         can perform any action that is not included in L. A process name A denotes a specific process, and the recursion operator 
                           〈
                           A
                           |
                           E
                           〉
                         represents a solution of the recursive specification 
                           E
                           (
                           A
                           )
                         where A acts as the initial variable. A solution of a recursive specification 
                           E
                           (
                           A
                           )
                         is a set of process terms 
                           {
                           
                              
                                 s
                              
                              
                                 A
                              
                           
                           |
                           A
                           ∈
                           A
                           }
                         such that if for all 
                           A
                           ∈
                           A
                        , 
                           
                              
                                 s
                              
                              
                                 A
                              
                           
                         is substituted for A, the equations of E correspond to equal elements (in the model of our equational theory), i.e., 
                           
                              
                                 s
                              
                              
                                 A
                              
                           
                           =
                           t
                           {
                           
                              
                                 s
                              
                              
                                 X
                              
                           
                           /
                           X
                           |
                           X
                           ∈
                           A
                           }
                        , where 
                           A
                           
                              =
                              
                                 def
                              
                           
                           t
                           ∈
                           E
                        . The guardedness criterion for recursive specifications ensures that this solution is unique. As far as unguarded recursions are concerned, following the approach of CCS and ACP [18], we consider the solution that has the least set of transitions. In Section 4, we explain the guardedness criterion. In the remainder of this paper, we use the notions of process term, product line, and family interchangeably.

Note that the term defining process name A in a recursive specification may include recursive specifications. A term is called closed, if every process name A occurs in the scope of a binding recursive specification 
                           E
                           (
                           A
                           )
                         such that 
                           A
                           ∈
                           A
                        . For instance, in the closed term 
                           〈
                           X
                           |
                           {
                           X
                           
                              =
                              
                                 def
                              
                           
                           a
                           .
                           0
                           
                              
                                 ⊕
                              
                              
                                 1
                              
                           
                           b
                           .
                           〈
                           Y
                           |
                           {
                           Y
                           
                              =
                              
                                 def
                              
                           
                           Y
                           +
                           c
                           .
                           X
                           }
                           〉
                           }
                           〉
                        , X is bound by the outer recursive specification. As usual, we use the notation 
                           t
                           {
                           s
                           /
                           A
                           }
                         to denote the substitution of a closed term s for every free occurrence of process name A in t. We use 
                           〈
                           t
                           |
                           E
                           〉
                        , where E is a recursive specification over 
                           A
                        , to denote 
                           t
                           {
                           〈
                           A
                           |
                           E
                           〉
                           /
                           A
                           |
                           A
                           ∈
                           A
                           }
                        , i.e., t where, for all 
                           A
                           ∈
                           A
                        , all free occurrences of A in t are replaced by 
                           〈
                           A
                           |
                           E
                           〉
                        .

By adopting 
                           〈
                           A
                           |
                           E
                           〉
                         instead of the CCS recursion operator, we can easily specify SPLs in which a process name definition is shared. For instance, 
                           〈
                           
                              
                                 p
                              
                              
                                 1
                              
                           
                           |
                           {
                           
                              
                                 p
                              
                              
                                 1
                              
                           
                           
                              =
                              
                                 def
                              
                           
                           
                              
                                 p
                              
                              
                                 2
                              
                           
                           ∥
                           
                              
                                 p
                              
                              
                                 2
                              
                           
                           ,
                           
                           
                              
                                 p
                              
                              
                                 2
                              
                           
                           
                              =
                              
                                 def
                              
                           
                           b
                           .
                           0
                           
                              
                                 ⊕
                              
                              
                                 1
                              
                           
                           c
                           .
                           0
                           }
                           〉
                         is equivalent to the CCS notation 
                           μ
                           X
                           .
                           (
                           μ
                           Y
                           .
                           b
                           .
                           0
                           
                              
                                 ⊕
                              
                              
                                 1
                              
                           
                           c
                           .
                           0
                           ∥
                           μ
                           Y
                           .
                           b
                           .
                           0
                           
                              
                                 ⊕
                              
                              
                                 1
                              
                           
                           c
                           .
                           0
                           )
                        .

Index i is called bounded in 
                           
                              
                                 t
                              
                              
                                 1
                              
                           
                           
                              
                                 ⊕
                              
                              
                                 i
                              
                           
                           
                              
                                 t
                              
                              
                                 2
                              
                           
                        . The bounded indices of term t, denoted by 
                           
                              bi
                           
                           (
                           t
                           )
                        , are those that are reachable from the root of its parse tree. We define 
                           
                              bi
                           
                           (
                           t
                           )
                           =
                           
                              fbi
                           
                           (
                           t
                           ,
                           ∅
                           )
                        , where the auxiliary function fbi is defined inductively as follows:
                           
                              
                                 
                                    
                                       
                                          
                                             
                                                fbi
                                             
                                             (
                                             0
                                             ,
                                             S
                                             )
                                             =
                                             ∅
                                          
                                          
                                             
                                             
                                                fbi
                                             
                                             (
                                             t
                                             ∖
                                             L
                                             ,
                                             S
                                             )
                                             =
                                             
                                                fbi
                                             
                                             (
                                             t
                                             ,
                                             S
                                             )
                                          
                                       
                                       
                                          
                                             
                                                fbi
                                             
                                             (
                                             a
                                             .
                                             t
                                             ,
                                             S
                                             )
                                             =
                                             
                                                fbi
                                             
                                             (
                                             t
                                             ,
                                             S
                                             )
                                          
                                          
                                             
                                             
                                                fbi
                                             
                                             (
                                             t
                                             [
                                             f
                                             ]
                                             ,
                                             S
                                             )
                                             =
                                             
                                                fbi
                                             
                                             (
                                             t
                                             ,
                                             S
                                             )
                                          
                                       
                                       
                                          
                                             
                                                fbi
                                             
                                             (
                                             
                                                
                                                   t
                                                
                                                
                                                   1
                                                
                                             
                                             +
                                             
                                                
                                                   t
                                                
                                                
                                                   2
                                                
                                             
                                             )
                                             =
                                             
                                                fbi
                                             
                                             (
                                             
                                                
                                                   t
                                                
                                                
                                                   1
                                                
                                             
                                             ,
                                             S
                                             )
                                             ∪
                                             
                                                fbi
                                             
                                             (
                                             
                                                
                                                   t
                                                
                                                
                                                   2
                                                
                                             
                                             ,
                                             S
                                             )
                                          
                                          
                                             
                                             
                                                fbi
                                             
                                             (
                                             
                                                
                                                   t
                                                
                                                
                                                   1
                                                
                                             
                                             ∥
                                             
                                                
                                                   t
                                                
                                                
                                                   2
                                                
                                             
                                             ,
                                             S
                                             )
                                             =
                                             
                                                fbi
                                             
                                             (
                                             
                                                
                                                   t
                                                
                                                
                                                   1
                                                
                                             
                                             ,
                                             S
                                             )
                                             ∪
                                             
                                                fbi
                                             
                                             (
                                             
                                                
                                                   t
                                                
                                                
                                                   2
                                                
                                             
                                             ,
                                             S
                                             )
                                          
                                       
                                       
                                          
                                             
                                                fbi
                                             
                                             (
                                             
                                                
                                                   t
                                                
                                                
                                                   1
                                                
                                             
                                             
                                                
                                                   ⊕
                                                
                                                
                                                   i
                                                
                                             
                                             
                                                
                                                   t
                                                
                                                
                                                   2
                                                
                                             
                                             ,
                                             S
                                             )
                                             =
                                             {
                                             i
                                             }
                                             ∪
                                             
                                                fbi
                                             
                                             (
                                             
                                                
                                                   t
                                                
                                                
                                                   1
                                                
                                             
                                             ,
                                             S
                                             )
                                             ∪
                                             
                                                fbi
                                             
                                             (
                                             
                                                
                                                   t
                                                
                                                
                                                   2
                                                
                                             
                                             ,
                                             S
                                             )
                                          
                                          
                                             
                                             
                                                fbi
                                             
                                             (
                                             A
                                             ,
                                             S
                                             )
                                             =
                                             ∅
                                          
                                       
                                       
                                          
                                             
                                                fbi
                                             
                                             (
                                             〈
                                             A
                                             |
                                             E
                                             ∪
                                             {
                                             A
                                             
                                                =
                                                
                                                   def
                                                
                                             
                                             t
                                             }
                                             〉
                                             ,
                                             S
                                             )
                                             =
                                             
                                                fbi
                                             
                                             (
                                             〈
                                             t
                                             |
                                             E
                                             ∪
                                             {
                                             A
                                             
                                                =
                                                
                                                   def
                                                
                                             
                                             t
                                             }
                                             〉
                                             ,
                                             S
                                             ∪
                                             {
                                             A
                                             }
                                             )
                                             ,
                                             
                                             if
                                             
                                             A
                                             ∉
                                             S
                                          
                                       
                                       
                                          
                                             
                                                fbi
                                             
                                             (
                                             〈
                                             A
                                             |
                                             E
                                             ∪
                                             {
                                             A
                                             
                                                =
                                                
                                                   def
                                                
                                             
                                             t
                                             }
                                             〉
                                             ,
                                             S
                                             )
                                             =
                                             ∅
                                             ,
                                             
                                             if
                                             
                                             A
                                             ∈
                                             S
                                             .
                                          
                                       
                                    
                                 
                              
                           
                         An index i is free in t, iff it is not bounded. We denote by 
                           t
                           [
                           i
                           /
                           j
                           ]
                         the term that is obtained by replacing all 
                           
                              
                                 ⊕
                              
                              
                                 j
                              
                           
                         by 
                           
                              
                                 ⊕
                              
                              
                                 i
                              
                           
                         in t (we dispense with the inductive definition as it is straightforward).

Intuitively, the behavior of a product line family is defined by the cumulative behavior of its products. These products are obtained by resolving the choice in the binary variant operators. The resolution may take place at various points of execution and hence, to record such choices the semantics needs to record whether the choice is unresolved (denoted by ?), resolved in favor of the left-hand-side product (denoted by L), or resolved in favor of the left-hand-side product (denoted by R). Also resolving one instance of a binary variant operator may resolve the choice for other instances. For instance, configuring the variant j as R in 
                           (
                           a
                           .
                           0
                           
                              
                                 ⊕
                              
                              
                                 i
                              
                           
                           b
                           .
                           0
                           )
                           
                              
                                 ⊕
                              
                              
                                 j
                              
                           
                           c
                           .
                           0
                        , makes it unnecessary to configure the variant i. Configuration status of variation points bounded in a process term with maximum index n are recorded in a configuration vector 
                           ν
                           ∈
                           
                              
                                 {
                                 L
                                 ,
                                 R
                                 ,
                                 ?
                                 }
                              
                              
                                 n
                              
                           
                        , where the ith element of the vector is denoted by 
                           ν
                           
                              
                                 |
                              
                              
                                 i
                              
                           
                        . We denote by Config the set of all possible configuration vectors, ranged over by ν and λ. Expression 
                           ν
                           
                              
                                 |
                              
                              
                                 i
                                 /
                                 x
                              
                           
                         denotes the result of replacing the ith element of ν by 
                           x
                           ∈
                           {
                           L
                           ,
                           R
                           }
                        . A configuration is called full when all its elements are configured, i.e., are in 
                           {
                           L
                           ,
                           R
                           }
                        . Two configurations ν and λ that do not have any conflict on a variation point are called consistent. This concept is formalized below.


                        
                           Definition 1
                           Consistent configuration vectors [12]
                           


                           Configuration vectors 
                                 ν
                                 ,
                                 λ
                                 ∈
                                 
                                    
                                       {
                                       L
                                       ,
                                       R
                                       ,
                                       ?
                                       }
                                    
                                    
                                       n
                                    
                                 
                               are consistent, denoted by 
                                 ν
                                 ≍
                                 λ
                              , if and only if 
                                 ∀
                                 i
                                 ∈
                                 {
                                 1
                                 ,
                                 …
                                 ,
                                 n
                                 }
                                 :
                                 (
                                 
                                    
                                       (
                                       ν
                                       |
                                    
                                    
                                       i
                                    
                                 
                                 =
                                 ?
                                 )
                                 ∨
                                 
                                    
                                       (
                                       λ
                                       |
                                    
                                    
                                       i
                                    
                                 
                                 =
                                 ?
                                 )
                                 ∨
                                 
                                    
                                       (
                                       ν
                                       |
                                    
                                    
                                       i
                                    
                                 
                                 =
                                 λ
                                 
                                    
                                       |
                                    
                                    
                                       i
                                    
                                 
                                 )
                                 )
                              .

Given two consistent configuration vectors ν and λ, their unification, denoted by 
                           ν
                           ⊙
                           λ
                         merges the configurations of their variation points as follows: 
                           (
                           ν
                           ⊙
                           λ
                           )
                           
                              
                                 |
                              
                              
                                 i
                              
                           
                           =
                           X
                           ∈
                           {
                           L
                           ,
                           R
                           ,
                           ?
                           }
                         iff either 
                           ν
                           
                              
                                 |
                              
                              
                                 i
                              
                           
                           =
                           X
                           ∧
                           λ
                           
                              
                                 |
                              
                              
                                 i
                              
                           
                           =
                           ?
                         or 
                           ν
                           
                              
                                 |
                              
                              
                                 i
                              
                           
                           =
                           ?
                           ∧
                           λ
                           
                              
                                 |
                              
                              
                                 i
                              
                           
                           =
                           X
                         or 
                           ν
                           
                              
                                 |
                              
                              
                                 i
                              
                           
                           =
                           λ
                           
                              
                                 |
                              
                              
                                 i
                              
                           
                           =
                           X
                        .

Configuration vector 
                           
                              
                                 ν
                              
                              
                                 ′
                              
                           
                         is more concrete than ν (or ν is more abstract than 
                           
                              
                                 ν
                              
                              
                                 ′
                              
                           
                        ), denoted by 
                           ν
                           ⊑
                           
                              
                                 ν
                              
                              
                                 ′
                              
                           
                        , iff 
                           ∀
                           i
                           ∈
                           {
                           1
                           ,
                           …
                           ,
                           n
                           }
                           :
                           (
                           
                              
                                 (
                                 ν
                                 |
                              
                              
                                 i
                              
                           
                           =
                           ?
                           )
                           ∨
                           
                              
                                 (
                                 ν
                                 |
                              
                              
                                 i
                              
                           
                           =
                           
                              
                                 ν
                              
                              
                                 ′
                              
                           
                           
                              
                                 |
                              
                              
                                 i
                              
                           
                           )
                           )
                         
                        [12]. Hence, each configuration vector ν represents a set of configuration vectors 
                           {
                           
                              
                                 ν
                              
                              
                                 ′
                              
                           
                           |
                           ν
                           ⊑
                           
                              
                                 ν
                              
                              
                                 ′
                              
                           
                           }
                        .

We briefly explained the three different semantic models of PL-CCS terms in Section 1: the flat semantics, the unfolded semantics, and the configured-transition semantics 
                        [12]. Since our equivalence relation and the multi-valued modal μ-calculus are defined over the configured-transition semantics, we next elaborate on how this semantics is derived directly using our structural operational semantics rules.

The configured-transition semantics induces an LTS, in which the labels are pairs in 
                           
                              Act
                           
                           ×
                           
                              Config
                           
                        . Formally, a configured-transition system (CTS) is a tuple 
                           〈
                           S
                           ,
                           
                              
                                 s
                              
                              
                                 0
                              
                           
                           ,
                           
                              Act
                           
                           ×
                           
                              Config
                           
                           ,
                           →
                           〉
                        , where S is a set of states, 
                           
                              
                                 s
                              
                              
                                 0
                              
                           
                           ∈
                           S
                         is an initial state and 
                           →
                           ⊆
                           S
                           ×
                           
                              Act
                           
                           ×
                           
                              Config
                           
                           ×
                           S
                         is a set of transition relations. The notation 
                           s
                           
                              →
                              
                                 α
                                 ,
                                 ν
                              
                           
                           
                              
                                 s
                              
                              
                                 ′
                              
                           
                         is used for 
                           (
                           s
                           ,
                           (
                           α
                           ,
                           ν
                           )
                           ,
                           
                              
                                 s
                              
                              
                                 ′
                              
                           
                           )
                           ∈
                           →
                         and is representative for all transitions 
                           s
                           
                              →
                              
                                 α
                                 ,
                                 
                                    
                                       ν
                                    
                                    
                                       ′
                                    
                                 
                              
                           
                           
                              
                                 s
                              
                              
                                 ′
                              
                           
                        , where 
                           ν
                           ⊑
                           
                              
                                 ν
                              
                              
                                 ′
                              
                           
                        . The CTS semantics of a PL-CCS term t has the set of all terms as its states, t as the initial states, and the least relation satisfying the rules in Fig. 2
                         as its transition relation.

The rule Prefix indicates the execution of a prefix action, where 
                           
                              
                                 ν
                              
                              
                                 ?
                              
                           
                         denotes a configuration vector in which no element is configured. Choice specifies the non-deterministic behavior of the choice operator in terms of its operands. Res defines that term 
                           t
                           ∖
                           L
                         is only allowed to do actions that are not in L. Select defines the behavior of a family in terms of its products, by deciding about the ith variant operator. The side condition prohibits any reconfiguration, if it was previously configured. Call defines the behavior of 
                           〈
                           A
                           |
                           E
                           〉
                         in terms of the behavior of the right-hand side of the equation 
                           A
                           
                              =
                              
                                 def
                              
                           
                           t
                         in the recursive specification E. Par explains that a process in a parallel composition can proceed independently of the other parallel component. Sync states that two processes in a parallel composition can be synchronized on an action, if both are ready to perform input and output counterparts simultaneously. Since 
                           
                              
                                 t
                              
                              
                                 1
                              
                           
                         and 
                           
                              
                                 t
                              
                              
                                 2
                              
                           
                         resolve variants in their scopes, their resolutions are unified for their parallel composition in Sync. Finally, Rename renames all actions using a function f.

The symmetric versions of rules Choice, Select, and Par are also present, but are not given explicitly here for the sake of brevity.


                        
                           Example 2
                           Using the rules in Fig. 2, the configured-transition semantics of 
                                 〈
                                 X
                                 |
                                 E
                                 〉
                              , where 
                                 E
                                 =
                                 {
                                 X
                                 
                                    =
                                    
                                       def
                                    
                                 
                                 (
                                 a
                                 .
                                 (
                                 b
                                 .
                                 X
                                 
                                    
                                       ⊕
                                    
                                    
                                       1
                                    
                                 
                                 c
                                 .
                                 0
                                 )
                                 +
                                 d
                                 .
                                 0
                                 )
                                 
                                    
                                       ⊕
                                    
                                    
                                       2
                                    
                                 
                                 e
                                 .
                                 0
                                 }
                              , is given in Fig. 3
                              a. The derivation tree inducing the transition labeled by 
                                 a
                                 ,
                                 〈
                                 ?
                                 ,
                                 L
                                 〉
                               is given below:
                                 
                                    
                                 
                               Other transitions are derived similarly. On deriving the transitions of 
                                 b
                                 .
                                 〈
                                 X
                                 |
                                 E
                                 〉
                                 
                                    
                                       ⊕
                                    
                                    
                                       1
                                    
                                 
                                 c
                                 .
                                 0
                               with the help of Prefix and Select, only the first variant point can be configured, and consequently it returns to state 
                                 〈
                                 X
                                 |
                                 E
                                 〉
                               with the action 
                                 b
                                 ,
                                 〈
                                 L
                                 ,
                                 ?
                                 〉
                               or state 0 with the action 
                                 c
                                 ,
                                 〈
                                 R
                                 ,
                                 ?
                                 〉
                              , as shown in Fig. 3a.

Returning to state 
                           〈
                           X
                           |
                           E
                           〉
                         in Example 2, makes it possible to reconfigure any previously configured variant. For the sake of compositionality, resolutions of variants are open to any possible configuration in our SOS rules. However, as it is explained in the next paragraph and Section 3.1, in deriving the behavior of a product/a set of related products only consistent resolutions are followed.

The semantic model of each product of t, identified by the full configuration 
                           
                              
                                 ν
                              
                              
                                 f
                              
                           
                        , can be derived by removing the transitions from t whose configuration vector is not consistent with 
                           
                              
                                 ν
                              
                              
                                 f
                              
                           
                        . Let 
                           Π
                           (
                           t
                           ,
                           
                              
                                 ν
                              
                              
                                 f
                              
                           
                           )
                         denote the resulting LTS. Formally speaking, 
                           Π
                           (
                           t
                           ,
                           
                              
                                 ν
                              
                              
                                 f
                              
                           
                           )
                           
                              →
                              a
                           
                           Π
                           (
                           
                              
                                 t
                              
                              
                                 ′
                              
                           
                           ,
                           
                              
                                 ν
                              
                              
                                 f
                              
                           
                           )
                         iff 
                           t
                           
                              →
                              
                                 a
                                 ,
                                 ν
                              
                           
                           
                              
                                 t
                              
                              
                                 ′
                              
                           
                         and 
                           ν
                           ⊑
                           
                              
                                 ν
                              
                              
                                 f
                              
                           
                        . Therefore, only resolutions that are consistent with the full configuration, i.e., 
                           ν
                           ⊑
                           
                              
                                 ν
                              
                              
                                 f
                              
                           
                        , are allowed and consequently reconfiguration is prohibited. See Fig. 3b, 3c, 3d, and 3e for the semantic models of products derived from X for the given configuration vectors 
                           〈
                           L
                           ,
                           L
                           〉
                        , 
                           〈
                           R
                           ,
                           L
                           〉
                        , 
                           〈
                           L
                           ,
                           R
                           〉
                        , and 
                           〈
                           R
                           ,
                           R
                           〉
                         respectively (initial states are highlighted in gray). It should be noted that the semantic models derived for the configuration vectors 
                           〈
                           L
                           ,
                           R
                           〉
                         and 
                           〈
                           R
                           ,
                           R
                           〉
                         have only one reachable state from the initial state through the action e.

Following the approach of ACP [18], we define a set of axioms (as the main part of our process theory or equational theory) as primary and then investigate the models that they have. The most intuitive model of a process theory is the term algebra (the algebra with the same operators of equational theory) modulo a congruence. In this section, we first discuss about different notions of equivalence relation to reason about product lines. Next, we discuss about the congruence property of the previously defined relations.


                     Table 1
                      summarizes the axioms we have in mind for PL-CCS. We look for an appropriate notion of bisimilarity that supports the given equations. Axioms 
                        
                           
                              A
                           
                           
                              1
                              −
                              3
                           
                        
                      define commutativity, associativity and idempotency for the binary variant operator. Axioms 
                        
                           
                              A
                           
                           
                              1
                              ,
                              2
                           
                        
                      ensure that two families are equivalent when they produce the same set of products, irrespective of their orders in variant operators. However, their application is restricted: i should be free in p and q for 
                        
                           
                              A
                           
                           
                              1
                           
                        
                     , while i should be free in r and j should be free in p for 
                        
                           
                              A
                           
                           
                              2
                           
                        
                     . For instance, 
                        a
                        .
                        0
                        
                           
                              ⊕
                           
                           
                              1
                           
                        
                        (
                        b
                        .
                        0
                        
                           
                              ⊕
                           
                           
                              1
                           
                        
                        c
                        .
                        0
                        )
                      produces two products 
                        a
                        .
                        0
                      and 
                        c
                        .
                        0
                     , but 
                        (
                        b
                        .
                        0
                        
                           
                              ⊕
                           
                           
                              1
                           
                        
                        c
                        .
                        0
                        )
                        
                           
                              ⊕
                           
                           
                              1
                           
                        
                        a
                        .
                        0
                      produces 
                        a
                        .
                        0
                      and 
                        b
                        .
                        0
                     , and consequently, as expected they are not equivalent. Axiom 
                        
                           
                              A
                           
                           
                              3
                           
                        
                      removes a repeated product from a family, and implies that two product families are equivalent iff they produce similar products, irrespective of their multiplicity. Axiom 
                        
                           
                              A
                           
                           
                              4
                           
                        
                      defines distributivity for prefix over binary variant, while axioms 
                        
                           
                              A
                           
                           
                              5
                              ,
                              6
                           
                        
                      define distributivity for choice over binary variant. These rules allow for postponing the product selection by factorizing the common initial action/behavior respectively. Axioms 
                        
                           
                              D
                           
                           
                              1
                              ,
                              2
                           
                        
                      define distributivity for parallel over binary variant. These two axioms reveal the difference between alternative choice and binary variant. Axioms 
                        
                           
                              A
                           
                           
                              5
                              ,
                              6
                           
                        
                      and 
                        
                           
                              D
                           
                           
                              1
                              ,
                              2
                           
                        
                      are useful to reduce redundancy by factorizing common parts.

Strong bisimulation [15] is very efficient to check and affords a neat theory: many other notions in the branching spectrum can be reduced to it by adding a standard set of axioms [19]. An LTS over a set of labels L is defined by 
                           〈
                           S
                           ,
                           
                              
                                 s
                              
                              
                                 0
                              
                           
                           ,
                           L
                           ,
                           →
                           〉
                        , where S is a set of states, 
                           
                              
                                 s
                              
                              
                                 0
                              
                           
                           ∈
                           S
                         is an initial state, and 
                           →
                           ⊆
                           S
                           ×
                           L
                           ×
                           S
                         is a set of transitions. The notation 
                           s
                           
                              →
                              a
                           
                           t
                         is used for 
                           (
                           s
                           ,
                           a
                           ,
                           t
                           )
                           ∈
                           →
                        . We typically identify LTSs with their initial states. Intuitively two labeled transition systems are equivalent, if they produce the same set of actions (observable behavior) and have the same branching structure:


                        
                           Definition 3
                           Strong bisimulation


                           Two LTSs s and t are strongly bisimilar, notation 
                                 s
                                 ∼
                                 t
                              , iff there is a strong bisimulation relation 
                                 R
                               over their states such that:
                                 
                                    •
                                    
                                       
                                          (
                                          s
                                          ,
                                          t
                                          )
                                          ∈
                                          R
                                       , and

for each pair 
                                          (
                                          
                                             
                                                s
                                             
                                             
                                                ′
                                             
                                          
                                          ,
                                          
                                             
                                                t
                                             
                                             
                                                ′
                                             
                                          
                                          )
                                          ∈
                                          R
                                       :
                                          
                                             –
                                             
                                                
                                                   ∀
                                                   
                                                      
                                                         s
                                                      
                                                      
                                                         ″
                                                      
                                                   
                                                   ⋅
                                                   
                                                      
                                                         s
                                                      
                                                      
                                                         ′
                                                      
                                                   
                                                   
                                                      →
                                                      α
                                                   
                                                   
                                                      
                                                         s
                                                      
                                                      
                                                         ″
                                                      
                                                   
                                                   ⇒
                                                   ∃
                                                   
                                                      
                                                         t
                                                      
                                                      
                                                         ″
                                                      
                                                   
                                                   ⋅
                                                   
                                                      
                                                         t
                                                      
                                                      
                                                         ′
                                                      
                                                   
                                                   
                                                      →
                                                      α
                                                   
                                                   
                                                      
                                                         t
                                                      
                                                      
                                                         ″
                                                      
                                                   
                                                 and 
                                                   (
                                                   
                                                      
                                                         s
                                                      
                                                      
                                                         ″
                                                      
                                                   
                                                   ,
                                                   
                                                      
                                                         t
                                                      
                                                      
                                                         ″
                                                      
                                                   
                                                   )
                                                   ∈
                                                   R
                                                , and


                                                
                                                   ∀
                                                   
                                                      
                                                         t
                                                      
                                                      
                                                         ″
                                                      
                                                   
                                                   ⋅
                                                   
                                                      
                                                         t
                                                      
                                                      
                                                         ′
                                                      
                                                   
                                                   
                                                      →
                                                      α
                                                   
                                                   
                                                      
                                                         t
                                                      
                                                      
                                                         ″
                                                      
                                                   
                                                   ⇒
                                                   ∃
                                                   
                                                      
                                                         s
                                                      
                                                      
                                                         ″
                                                      
                                                   
                                                   ⋅
                                                   
                                                      
                                                         s
                                                      
                                                      
                                                         ′
                                                      
                                                   
                                                   
                                                      →
                                                      α
                                                   
                                                   
                                                      
                                                         s
                                                      
                                                      
                                                         ″
                                                      
                                                   
                                                 and 
                                                   (
                                                   
                                                      
                                                         s
                                                      
                                                      
                                                         ″
                                                      
                                                   
                                                   ,
                                                   
                                                      
                                                         t
                                                      
                                                      
                                                         ″
                                                      
                                                   
                                                   )
                                                   ∈
                                                   R
                                                .


                        Definition 3 can be readily used for CTSs (since CTSs can be considered LTSs with a structure on the set of labels L). However, this simple adoption of Definition 3 can lead to some counter-intuitive observations.

For example, according to this definition, 
                           a
                           .
                           0
                           +
                           b
                           .
                           0
                         is strongly bisimilar to 
                           a
                           .
                           0
                           
                              
                                 ⊕
                              
                              
                                 1
                              
                           
                           b
                           .
                           0
                        . However, these two processes should not be considered equivalent intuitively. The family 
                           a
                           .
                           0
                           +
                           b
                           .
                           0
                         produces one product which has a non-deterministic behavior in performing actions a and b. By contrast, the family 
                           a
                           .
                           0
                           
                              
                                 ⊕
                              
                              
                                 1
                              
                           
                           b
                           .
                           0
                         produces two products, namely 
                           a
                           .
                           0
                         and 
                           b
                           .
                           0
                        , and each product has deterministic behavior by performing solely a or solely b. As another concern, this relation cannot identify 
                           a
                           .
                           (
                           b
                           .
                           0
                           
                              
                                 ⊕
                              
                              
                                 1
                              
                           
                           c
                           .
                           0
                           )
                         and 
                           a
                           .
                           b
                           .
                           0
                           
                              
                                 ⊕
                              
                              
                                 1
                              
                           
                           a
                           .
                           c
                           .
                           0
                        , while both have two products 
                           a
                           .
                           b
                           .
                           0
                         and 
                           a
                           .
                           c
                           .
                           0
                        ; consequently, this bisimulation relation does not support axiom 
                           
                              
                                 A
                              
                              
                                 4
                              
                           
                        . Therefore, the appropriate notion of bisimilarity over families must relate any product in one family to a product in the other such that their behaviors are strongly bisimilar.

A full configuration is called valid with respect to term t, if its length is not less than the maximum index in 
                           
                              bi
                           
                           (
                           t
                           )
                        . For instance, 
                           〈
                           L
                           〉
                         is not valid for 
                           b
                           .
                           〈
                           X
                           |
                           E
                           〉
                           
                              
                                 ⊕
                              
                              
                                 1
                              
                           
                           c
                           .
                           0
                        , where 
                           E
                           =
                           {
                           (
                           a
                           .
                           (
                           b
                           .
                           X
                           
                              
                                 ⊕
                              
                              
                                 1
                              
                           
                           c
                           .
                           0
                           )
                           +
                           d
                           .
                           0
                           )
                           
                              
                                 ⊕
                              
                              
                                 2
                              
                           
                           e
                           .
                           0
                           }
                        , while 
                           〈
                           L
                           ,
                           ?
                           ,
                           L
                           〉
                         is valid. Let 
                           
                              VFConfig
                           
                           (
                           t
                           )
                         denote the set of all valid full configurations with respect to t. Intuitively, two product families are equivalent when they produce bisimilar sets of products:


                        
                           Definition 4
                           Strict strong bisimulation


                           Two product line terms s and t are strictly strongly bisimilar, denoted by 
                                 s
                                 
                                    
                                       ≈
                                    
                                    
                                       PL
                                    
                                 
                                 t
                              , iff for any valid full configuration 
                                 
                                    
                                       ν
                                    
                                    
                                       f
                                    
                                 
                                 ∈
                                 
                                    VFConfig
                                 
                                 (
                                 s
                                 )
                                 ∩
                                 
                                    VFConfig
                                 
                                 (
                                 t
                                 )
                              , 
                                 Π
                                 (
                                 s
                                 ,
                                 
                                    
                                       ν
                                    
                                    
                                       f
                                    
                                 
                                 )
                                 ∼
                                 Π
                                 (
                                 t
                                 ,
                                 
                                    
                                       ν
                                    
                                    
                                       f
                                    
                                 
                                 )
                              .

However, strict strong bisimilarity does not support axioms 
                           
                              
                                 A
                              
                              
                                 1
                                 ,
                                 2
                              
                           
                        ; to see this, observe that 
                           Π
                           (
                           a
                           .
                           0
                           
                              
                                 ⊕
                              
                              
                                 1
                              
                           
                           b
                           .
                           0
                           ,
                           〈
                           L
                           〉
                           )
                           ≁
                           Π
                           (
                           b
                           .
                           0
                           
                              
                                 ⊕
                              
                              
                                 1
                              
                           
                           a
                           .
                           0
                           ,
                           〈
                           L
                           〉
                           )
                        , 
                           Π
                           (
                           (
                           a
                           .
                           0
                           
                              
                                 ⊕
                              
                              
                                 1
                              
                           
                           b
                           .
                           0
                           )
                           
                              
                                 ⊕
                              
                              
                                 2
                              
                           
                           c
                           .
                           0
                           ,
                           〈
                           L
                           ,
                           R
                           〉
                           )
                           ≁
                           Π
                           (
                           a
                           .
                           0
                           
                              
                                 ⊕
                              
                              
                                 1
                              
                           
                           (
                           b
                           .
                           0
                           
                              
                                 ⊕
                              
                              
                                 2
                              
                           
                           c
                           .
                           0
                           )
                           ,
                           〈
                           L
                           ,
                           R
                           〉
                           )
                         and 
                           Π
                           (
                           (
                           a
                           .
                           0
                           
                              
                                 ⊕
                              
                              
                                 2
                              
                           
                           b
                           .
                           0
                           )
                           
                              
                                 ⊕
                              
                              
                                 1
                              
                           
                           c
                           .
                           0
                           ,
                           〈
                           R
                           ,
                           L
                           〉
                           )
                           ≁
                           Π
                           (
                           a
                           .
                           0
                           
                              
                                 ⊕
                              
                              
                                 2
                              
                           
                           (
                           b
                           .
                           0
                           
                              
                                 ⊕
                              
                              
                                 1
                              
                           
                           c
                           .
                           0
                           )
                           ,
                           〈
                           R
                           ,
                           L
                           〉
                           )
                        . However, axiom 
                           
                              
                                 A
                              
                              
                                 3
                              
                           
                         is supported by strict strong bisimilarity, e.g., 
                           (
                           a
                           .
                           0
                           
                              
                                 ⊕
                              
                              
                                 1
                              
                           
                           b
                           .
                           0
                           )
                           
                              
                                 ⊕
                              
                              
                                 2
                              
                           
                           (
                           a
                           .
                           0
                           
                              
                                 ⊕
                              
                              
                                 1
                              
                           
                           b
                           .
                           0
                           )
                           
                              
                                 ≈
                              
                              
                                 PL
                              
                           
                           a
                           .
                           0
                           
                              
                                 ⊕
                              
                              
                                 1
                              
                           
                           b
                           .
                           0
                         since for any 
                           
                              
                                 ν
                              
                              
                                 f
                              
                           
                           ∈
                           {
                           〈
                           L
                           ,
                           R
                           〉
                           ,
                           〈
                           L
                           ,
                           L
                           〉
                           ,
                           〈
                           R
                           ,
                           R
                           〉
                           ,
                           〈
                           R
                           ,
                           L
                           〉
                           }
                        , 
                           Π
                           (
                           (
                           a
                           .
                           0
                           
                              
                                 ⊕
                              
                              
                                 1
                              
                           
                           b
                           .
                           0
                           )
                           
                              
                                 ⊕
                              
                              
                                 2
                              
                           
                           (
                           a
                           .
                           0
                           
                              
                                 ⊕
                              
                              
                                 1
                              
                           
                           b
                           .
                           0
                           )
                           ,
                           
                              
                                 ν
                              
                              
                                 f
                              
                           
                           )
                           ∼
                           Π
                           (
                           a
                           .
                           0
                           
                              
                                 ⊕
                              
                              
                                 1
                              
                           
                           b
                           .
                           0
                           ,
                           
                              
                                 ν
                              
                              
                                 f
                              
                           
                           )
                        .

To make Definition 4 be insensitive to the placement of families in a binary variant composition, and consequently to support axioms 
                           
                              
                                 A
                              
                              
                                 1
                                 ,
                                 2
                              
                           
                        , the notion of bisimulation can be revised as follows.


                        
                           Definition 5
                           Product line bisimulation


                           Two product line terms s and t are product line bisimilar, denoted by 
                                 s
                                 
                                    
                                       ≃
                                    
                                    
                                       PL
                                    
                                 
                                 t
                              , if and only if:
                                 
                                    •
                                    
                                       
                                          ∀
                                          
                                             
                                                ν
                                             
                                             
                                                1
                                             
                                             
                                                f
                                             
                                          
                                          ∈
                                          
                                             VFConfig
                                          
                                          (
                                          s
                                          )
                                          ⋅
                                          ∃
                                          
                                             
                                                ν
                                             
                                             
                                                2
                                             
                                             
                                                f
                                             
                                          
                                          ∈
                                          
                                             VFConfig
                                          
                                          (
                                          t
                                          )
                                          ⋅
                                          Π
                                          (
                                          s
                                          ,
                                          
                                             
                                                ν
                                             
                                             
                                                1
                                             
                                             
                                                f
                                             
                                          
                                          )
                                          ∼
                                          Π
                                          (
                                          t
                                          ,
                                          
                                             
                                                ν
                                             
                                             
                                                2
                                             
                                             
                                                f
                                             
                                          
                                          )
                                       , and


                                       
                                          ∀
                                          
                                             
                                                ν
                                             
                                             
                                                2
                                             
                                             
                                                f
                                             
                                          
                                          ∈
                                          
                                             VFConfig
                                          
                                          (
                                          t
                                          )
                                          ⋅
                                          ∃
                                          
                                             
                                                ν
                                             
                                             
                                                1
                                             
                                             
                                                f
                                             
                                          
                                          ∈
                                          
                                             VFConfig
                                          
                                          (
                                          s
                                          )
                                          ⋅
                                          Π
                                          (
                                          s
                                          ,
                                          
                                             
                                                ν
                                             
                                             
                                                1
                                             
                                             
                                                f
                                             
                                          
                                          )
                                          ∼
                                          Π
                                          (
                                          t
                                          ,
                                          
                                             
                                                ν
                                             
                                             
                                                2
                                             
                                             
                                                f
                                             
                                          
                                          )
                                       .


                        
                           Theorem 6
                           
                              Product line bisimilarity is an equivalence relation.
                           

See Appendix A for the proof. Confining the behaviors of two CTSs into full configurations disallows any reconfiguration of variants whose resolutions are left open in the semantic models (as it was explained in Section 2.2).

Matching each and every valid full configuration in the product line bisimilarity is very tedious. This process may require examining all possible pairs of configurations to find a suitable match. (Yet it does eventually reduce to checking strong bisimilarity for a large number of finite-state behaviors, which is decidable [20].) Hence, it would be appealing to have an appropriate notion of bisimilarity that decides the equivalence of PL-CCS terms at once (without considering all full configurations individually). We provide such a relation, called configuration bisimulation next and prove that it coincides with product line bisimilarity. Therefore, all the results for product line bisimilarity also hold for configuration bisimilarity. Also, to facilitate reasoning about product lines and also establish an algebraic theory for product line processes, we provide a sound and complete axiomatization for product line and configuration bisimilarity. Using this axiomatization, a term can be restructured at the syntactic level to its equivalent terms without the need to generate and compare the state spaces. In the process of providing a sound and complete axiomatization, we use product line bisimilarity which makes our proofs much simpler.

First, we define the notion of configuration inspired by [16]. As a first step, we would like to classify the transitions in terms of their configuration vectors; all transitions with consistent configurations are called a consistent transition set and they can potentially belong to a family. Subsequently, we define a bisimulation relation that relates states in terms of their consistent transition sets. In other words, it is required to relate not only states, but also their consistent transition sets. Consider Fig. 4
                        , which illustrates this by an example. The terms in this figure are not product line bisimilar, as the left one consists of four (behaviorally different) products while the right one consists of two. However, a notion of bisimulation that only considers consistent transition sets in each state (as shown in Fig. 4) cannot distinguish them. The consistent transition set 
                           {
                           (
                           d
                           ,
                           〈
                           L
                           ,
                           ?
                           〉
                           )
                           ,
                           (
                           a
                           ,
                           〈
                           ?
                           ,
                           ?
                           〉
                           )
                           }
                         can be enabled together for a product/family. For instance, consider the product 
                           d
                           .
                           0
                           +
                           a
                           .
                           c
                           .
                           0
                        , which is identified by the full configuration 
                           〈
                           L
                           ,
                           R
                           〉
                         in the left CTS. It is derived from the consistent transition sets highlighted in Fig. 4. These consistent transition sets are matched to the corresponding sets in the right CTS. However, the matched sets do not belong to a family, and consequently cannot specify a product. The reason stems from the related states 
                           b
                           .
                           0
                           
                              
                                 ⊕
                              
                              
                                 2
                              
                           
                           c
                           .
                           0
                         and 
                           b
                           .
                           0
                        . State 
                           b
                           .
                           0
                           
                              
                                 ⊕
                              
                              
                                 2
                              
                           
                           c
                           .
                           0
                         is reachable by the consistent transition set 
                           {
                           (
                           d
                           ,
                           〈
                           L
                           ,
                           ?
                           〉
                           )
                           ,
                           (
                           a
                           ,
                           〈
                           ?
                           ,
                           ?
                           〉
                           )
                           }
                         for two products (i.e., 
                           {
                           〈
                           L
                           ,
                           R
                           〉
                           ,
                           〈
                           L
                           ,
                           L
                           〉
                           }
                        ). Therefore, its consistent transition set 
                           {
                           (
                           c
                           ,
                           〈
                           ?
                           ,
                           R
                           〉
                           )
                           }
                         is enabled for product 
                           〈
                           L
                           ,
                           R
                           〉
                        . However, its related state 
                           b
                           .
                           0
                         is only reachable for one product, which does not generate a matching consistent transition set. To summarize, we need to note for which family a state is reachable in order to match its enabled consistent transition sets with respect to that family. Furthermore, this book-keeping family disallows any reconfiguration of variants which have been previously resolved.

A partitioning of a configuration vector ν consists of configuration vectors 
                           
                              
                                 ν
                              
                              
                                 1
                              
                           
                           ,
                           ⋯
                           ,
                           
                              
                                 ν
                              
                              
                                 n
                              
                           
                         such that 
                           ∀
                           i
                           ,
                           j
                           ≤
                           n
                           ⋅
                           (
                           (
                           i
                           ≠
                           j
                           )
                           ⇒
                           
                              
                                 ν
                              
                              
                                 i
                              
                           
                           ≭
                           
                              
                                 ν
                              
                              
                                 j
                              
                           
                           )
                        , and 
                           ∀
                           
                              
                                 ν
                              
                              
                                 f
                              
                           
                           ⋅
                           (
                           ν
                           ⊑
                           
                              
                                 ν
                              
                              
                                 f
                              
                           
                           ⇒
                           ∃
                           j
                           ≤
                           n
                           ⋅
                           (
                           
                              
                                 ν
                              
                              
                                 j
                              
                           
                           ⊑
                           
                              
                                 ν
                              
                              
                                 f
                              
                           
                           )
                           )
                        . For instance, 
                           {
                           〈
                           ?
                           ,
                           L
                           〉
                           ,
                           〈
                           L
                           ,
                           R
                           〉
                           ,
                           〈
                           R
                           ,
                           R
                           〉
                           }
                         is a partitioning of 
                           〈
                           ?
                           ,
                           ?
                           〉
                        . A partitioning of ν, denoted by 
                           
                              
                                 p
                              
                              
                                 ν
                              
                           
                        , regards configurations over transitions of s, denoted by 
                           
                              Par
                           
                           (
                           s
                           ,
                           ν
                           ,
                           
                              
                                 p
                              
                              
                                 ν
                              
                           
                           )
                        , if and only if 
                           ∀
                           
                              
                                 ν
                              
                              
                                 1
                              
                           
                           ∈
                           
                              
                                 p
                              
                              
                                 ν
                              
                           
                           ⇒
                           ∃
                           α
                           ,
                           
                              
                                 ν
                              
                              
                                 1
                              
                              
                                 ′
                              
                           
                           ,
                           
                              
                                 s
                              
                              
                                 ′
                              
                           
                           (
                           s
                           
                              →
                              
                                 α
                                 ,
                                 
                                    
                                       ν
                                    
                                    
                                       1
                                    
                                    
                                       ′
                                    
                                 
                              
                           
                           
                              
                                 s
                              
                              
                                 ′
                              
                           
                           ∧
                           
                              
                                 ν
                              
                              
                                 1
                              
                              
                                 ′
                              
                           
                           ⊑
                           
                              
                                 ν
                              
                              
                                 1
                              
                           
                           )
                           ∨
                           ∄
                           α
                           ,
                           
                              
                                 ν
                              
                              
                                 1
                              
                              
                                 ′
                              
                           
                           ,
                           
                              
                                 s
                              
                              
                                 ′
                              
                           
                           (
                           s
                           
                              →
                              
                                 α
                                 ,
                                 
                                    
                                       ν
                                    
                                    
                                       1
                                    
                                    
                                       ′
                                    
                                 
                              
                           
                           
                              
                                 s
                              
                              
                                 ′
                              
                           
                           ∧
                           
                              
                                 ν
                              
                              
                                 1
                              
                              
                                 ′
                              
                           
                           ≍
                           
                              
                                 ν
                              
                              
                                 1
                              
                           
                           )
                        . Transitions of s whose configurations are more abstract than 
                           ν
                           ∈
                           
                              
                                 p
                              
                              
                                 
                                    
                                       ν
                                    
                                    
                                       1
                                    
                                 
                              
                           
                        , where 
                           
                              Par
                           
                           (
                           s
                           ,
                           
                              
                                 ν
                              
                              
                                 1
                              
                           
                           ,
                           
                              
                                 p
                              
                              
                                 
                                    
                                       ν
                                    
                                    
                                       1
                                    
                                 
                              
                           
                           )
                        , constitute a consistent transition set. Assume s and t are related for families 
                           
                              
                                 ν
                              
                              
                                 1
                              
                           
                         and 
                           
                              
                                 ν
                              
                              
                                 2
                              
                           
                        , respectively. In the below-defined notion of configuration bisimulation, we match consistent transition sets of s defined by 
                           
                              
                                 p
                              
                              
                                 
                                    
                                       ν
                                    
                                    
                                       1
                                    
                                 
                              
                           
                        , where 
                           
                              Par
                           
                           (
                           s
                           ,
                           
                              
                                 ν
                              
                              
                                 1
                              
                           
                           ,
                           
                              
                                 p
                              
                              
                                 
                                    
                                       ν
                                    
                                    
                                       1
                                    
                                 
                              
                           
                           )
                        , to consistent transition sets of t defined by 
                           
                              
                                 p
                              
                              
                                 
                                    
                                       ν
                                    
                                    
                                       2
                                    
                                 
                              
                           
                        , where 
                           
                              Par
                           
                           (
                           t
                           ,
                           
                              
                                 ν
                              
                              
                                 2
                              
                           
                           ,
                           
                              
                                 p
                              
                              
                                 
                                    
                                       ν
                                    
                                    
                                       2
                                    
                                 
                              
                           
                           )
                        .


                        
                           Definition 7
                           Configuration bisimulation


                           A class of binary relations 
                                 
                                    
                                       R
                                    
                                    
                                       
                                          
                                             ν
                                          
                                          
                                             1
                                          
                                       
                                       ,
                                       
                                          
                                             ν
                                          
                                          
                                             2
                                          
                                       
                                    
                                 
                                 ⊆
                                 S
                                 ×
                                 S
                              , where 
                                 
                                    
                                       ν
                                    
                                    
                                       1
                                    
                                 
                                 ,
                                 
                                    
                                       ν
                                    
                                    
                                       2
                                    
                                 
                                 ∈
                                 
                                    Config
                                 
                              , is a configuration simulation relation if and only if for each 
                                 s
                                 ,
                                 t
                                 ∈
                                 S
                               such that 
                                 (
                                 s
                                 ,
                                 t
                                 )
                                 ∈
                                 
                                    
                                       R
                                    
                                    
                                       
                                          
                                             ν
                                          
                                          
                                             1
                                          
                                       
                                       ,
                                       
                                          
                                             ν
                                          
                                          
                                             2
                                          
                                       
                                    
                                 
                              , there exists 
                                 
                                    
                                       p
                                    
                                    
                                       
                                          
                                             ν
                                          
                                          
                                             1
                                          
                                       
                                    
                                 
                               and 
                                 
                                    
                                       p
                                    
                                    
                                       
                                          
                                             ν
                                          
                                          
                                             2
                                          
                                       
                                    
                                 
                              , where 
                                 
                                    Par
                                 
                                 (
                                 s
                                 ,
                                 
                                    
                                       ν
                                    
                                    
                                       1
                                    
                                 
                                 ,
                                 
                                    
                                       p
                                    
                                    
                                       
                                          
                                             ν
                                          
                                          
                                             1
                                          
                                       
                                    
                                 
                                 )
                               and 
                                 
                                    Par
                                 
                                 (
                                 t
                                 ,
                                 
                                    
                                       ν
                                    
                                    
                                       2
                                    
                                 
                                 ,
                                 
                                    
                                       p
                                    
                                    
                                       
                                          
                                             ν
                                          
                                          
                                             2
                                          
                                       
                                    
                                 
                                 )
                               such that for any 
                                 
                                    
                                       ν
                                    
                                    
                                       1
                                    
                                    
                                       ′
                                    
                                 
                                 ∈
                                 
                                    
                                       p
                                    
                                    
                                       
                                          
                                             ν
                                          
                                          
                                             1
                                          
                                       
                                    
                                 
                              , there exists 
                                 
                                    
                                       ν
                                    
                                    
                                       2
                                    
                                    
                                       ′
                                    
                                 
                                 ∈
                                 
                                    
                                       p
                                    
                                    
                                       
                                          
                                             ν
                                          
                                          
                                             2
                                          
                                       
                                    
                                 
                               and:
                                 
                                    •
                                    
                                       
                                          s
                                          
                                             →
                                             
                                                α
                                                ,
                                                
                                                   
                                                      ν
                                                   
                                                   
                                                      1
                                                   
                                                   
                                                      ″
                                                   
                                                
                                             
                                          
                                          
                                             
                                                s
                                             
                                             
                                                ′
                                             
                                          
                                        and 
                                          
                                             
                                                ν
                                             
                                             
                                                1
                                             
                                             
                                                ″
                                             
                                          
                                          ⊑
                                          
                                             
                                                ν
                                             
                                             
                                                1
                                             
                                             
                                                ′
                                             
                                          
                                          ⇒
                                          ∃
                                          
                                             
                                                t
                                             
                                             
                                                ′
                                             
                                          
                                          ,
                                          
                                          
                                             
                                                ν
                                             
                                             
                                                2
                                             
                                             
                                                ″
                                             
                                          
                                          ⋅
                                          t
                                          
                                             →
                                             
                                                α
                                                ,
                                                
                                                   
                                                      ν
                                                   
                                                   
                                                      2
                                                   
                                                   
                                                      ″
                                                   
                                                
                                             
                                          
                                          
                                             
                                                t
                                             
                                             
                                                ′
                                             
                                          
                                       , 
                                          
                                             
                                                ν
                                             
                                             
                                                2
                                             
                                             
                                                ″
                                             
                                          
                                          ⊑
                                          
                                             
                                                ν
                                             
                                             
                                                2
                                             
                                             
                                                ′
                                             
                                          
                                       , and 
                                          (
                                          
                                             
                                                s
                                             
                                             
                                                ′
                                             
                                          
                                          ,
                                          
                                             
                                                t
                                             
                                             
                                                ′
                                             
                                          
                                          )
                                          ∈
                                          
                                             
                                                R
                                             
                                             
                                                
                                                   
                                                      ν
                                                   
                                                   
                                                      1
                                                   
                                                   
                                                      ′
                                                   
                                                
                                                ,
                                                
                                                   
                                                      ν
                                                   
                                                   
                                                      2
                                                   
                                                   
                                                      ′
                                                   
                                                
                                             
                                          
                                       ;


                                       
                                          t
                                          
                                             →
                                             
                                                α
                                                ,
                                                
                                                   
                                                      ν
                                                   
                                                   
                                                      2
                                                   
                                                   
                                                      ″
                                                   
                                                
                                             
                                          
                                          
                                             
                                                t
                                             
                                             
                                                ′
                                             
                                          
                                        and 
                                          
                                             
                                                ν
                                             
                                             
                                                2
                                             
                                             
                                                ″
                                             
                                          
                                          ⊑
                                          
                                             
                                                ν
                                             
                                             
                                                2
                                             
                                             
                                                ′
                                             
                                          
                                          ⇒
                                          ∃
                                          
                                             
                                                s
                                             
                                             
                                                ′
                                             
                                          
                                          ,
                                          
                                          
                                             
                                                ν
                                             
                                             
                                                1
                                             
                                             
                                                ″
                                             
                                          
                                          ⋅
                                          s
                                          
                                             →
                                             
                                                α
                                                ,
                                                
                                                   
                                                      ν
                                                   
                                                   
                                                      1
                                                   
                                                   
                                                      ″
                                                   
                                                
                                             
                                          
                                          
                                             
                                                s
                                             
                                             
                                                ′
                                             
                                          
                                       , 
                                          
                                             
                                                ν
                                             
                                             
                                                1
                                             
                                             
                                                ″
                                             
                                          
                                          ⊑
                                          
                                             
                                                ν
                                             
                                             
                                                1
                                             
                                             
                                                ′
                                             
                                          
                                       , and 
                                          (
                                          
                                             
                                                s
                                             
                                             
                                                ′
                                             
                                          
                                          ,
                                          
                                             
                                                t
                                             
                                             
                                                ′
                                             
                                          
                                          )
                                          ∈
                                          
                                             
                                                R
                                             
                                             
                                                
                                                   
                                                      ν
                                                   
                                                   
                                                      1
                                                   
                                                   
                                                      ′
                                                   
                                                
                                                ,
                                                
                                                   
                                                      ν
                                                   
                                                   
                                                      2
                                                   
                                                   
                                                      ′
                                                   
                                                
                                             
                                          
                                       .

For instance, 
                           a
                           .
                           (
                           b
                           .
                           0
                           
                              
                                 ⊕
                              
                              
                                 1
                              
                           
                           c
                           .
                           0
                           )
                           
                              
                                 ≃
                              
                              
                                 C
                              
                           
                           a
                           .
                           c
                           .
                           0
                           
                              
                                 ⊕
                              
                              
                                 1
                              
                           
                           a
                           .
                           b
                           .
                           0
                         is witnessed by the configuration bisimulation relations 
                           
                              
                                 R
                              
                              
                                 〈
                                 ?
                                 〉
                                 ,
                                 〈
                                 ?
                                 〉
                              
                           
                           =
                           {
                           (
                           a
                           .
                           (
                           b
                           .
                           0
                           
                              
                                 ⊕
                              
                              
                                 1
                              
                           
                           c
                           .
                           0
                           )
                           ,
                           a
                           .
                           c
                           .
                           0
                           
                              
                                 ⊕
                              
                              
                                 1
                              
                           
                           a
                           .
                           b
                           .
                           0
                           )
                           }
                        , 
                           
                              
                                 R
                              
                              
                                 〈
                                 R
                                 〉
                                 ,
                                 〈
                                 L
                                 〉
                              
                           
                           =
                           {
                           (
                           b
                           .
                           0
                           
                              
                                 ⊕
                              
                              
                                 1
                              
                           
                           c
                           .
                           0
                           ,
                           c
                           .
                           0
                           )
                           ,
                           (
                           0
                           ,
                           0
                           )
                           }
                        , 
                           
                              
                                 R
                              
                              
                                 〈
                                 L
                                 〉
                                 ,
                                 〈
                                 R
                                 〉
                              
                           
                           =
                           {
                           (
                           b
                           .
                           0
                           
                              
                                 ⊕
                              
                              
                                 1
                              
                           
                           c
                           .
                           0
                           ,
                           b
                           .
                           0
                           )
                           ,
                           (
                           0
                           ,
                           0
                           )
                           }
                        . However 
                           a
                           .
                           (
                           b
                           .
                           0
                           
                              
                                 ⊕
                              
                              
                                 1
                              
                           
                           0
                           )
                           
                              
                                 ≄
                              
                              
                                 C
                              
                           
                           a
                           .
                           b
                           .
                           0
                         as the only partitioning of 
                           〈
                           ?
                           〉
                         regarding the state transitions of 
                           b
                           .
                           0
                           
                              
                                 ⊕
                              
                              
                                 1
                              
                           
                           0
                         is 
                           {
                           〈
                           R
                           〉
                           ,
                           〈
                           L
                           〉
                           }
                         and then the behavior 
                           b
                           .
                           0
                           
                              
                                 ⊕
                              
                              
                                 1
                              
                           
                           0
                         for family 
                           〈
                           R
                           〉
                         cannot be matched to any behavior of 
                           a
                           .
                           b
                           .
                           0
                        .


                        
                           Theorem 8
                           
                              For any PL-CCS s and t, 
                              
                                 s
                                 
                                    
                                       ≃
                                    
                                    
                                       PL
                                    
                                 
                                 t
                                 ⇔
                                 s
                                 
                                    
                                       ≃
                                    
                                    
                                       C
                                    
                                 
                                 t
                              
                              .
                           

We assume 
                                 s
                                 
                                    
                                       ≃
                                    
                                    
                                       PL
                                    
                                 
                                 t
                              , we show that 
                                 s
                                 
                                    
                                       ≃
                                    
                                    
                                       C
                                    
                                 
                                 t
                              . For all valid full configurations 
                                 
                                    
                                       ν
                                    
                                    
                                       1
                                    
                                    
                                       f
                                    
                                 
                                 ∈
                                 
                                    VFConfig
                                 
                                 (
                                 s
                                 )
                               and 
                                 
                                    
                                       ν
                                    
                                    
                                       2
                                    
                                    
                                       f
                                    
                                 
                                 ∈
                                 
                                    VFConfig
                                 
                                 (
                                 t
                                 )
                              , construct 
                                 
                                    
                                       R
                                    
                                    
                                       
                                          
                                             ν
                                          
                                          
                                             1
                                          
                                          
                                             f
                                          
                                       
                                       ,
                                       
                                          
                                             ν
                                          
                                          
                                             2
                                          
                                          
                                             f
                                          
                                       
                                    
                                 
                               as:
                                 
                                    
                                       
                                          
                                             
                                                
                                                   
                                                      
                                                         R
                                                      
                                                      
                                                         
                                                            
                                                               ν
                                                            
                                                            
                                                               1
                                                            
                                                            
                                                               f
                                                            
                                                         
                                                         ,
                                                         
                                                            
                                                               ν
                                                            
                                                            
                                                               2
                                                            
                                                            
                                                               f
                                                            
                                                         
                                                      
                                                   
                                                   =
                                                   {
                                                   (
                                                   
                                                      
                                                         s
                                                      
                                                      
                                                         ′
                                                      
                                                   
                                                   ,
                                                   
                                                      
                                                         t
                                                      
                                                      
                                                         ′
                                                      
                                                   
                                                   )
                                                   |
                                                   Π
                                                   (
                                                   s
                                                   ,
                                                   
                                                      
                                                         ν
                                                      
                                                      
                                                         1
                                                      
                                                      
                                                         f
                                                      
                                                   
                                                   )
                                                   ∼
                                                   Π
                                                   (
                                                   t
                                                   ,
                                                   
                                                      
                                                         ν
                                                      
                                                      
                                                         2
                                                      
                                                      
                                                         f
                                                      
                                                   
                                                   )
                                                    witnessed by 
                                                   
                                                      
                                                         
                                                            R
                                                         
                                                         
                                                            ′
                                                         
                                                      
                                                   
                                                    
                                                   ∧
                                                   (
                                                   Π
                                                   (
                                                   
                                                      
                                                         s
                                                      
                                                      
                                                         ′
                                                      
                                                   
                                                   ,
                                                   
                                                      
                                                         ν
                                                      
                                                      
                                                         1
                                                      
                                                      
                                                         f
                                                      
                                                   
                                                   )
                                                   ,
                                                   Π
                                                   (
                                                   
                                                      
                                                         t
                                                      
                                                      
                                                         ′
                                                      
                                                   
                                                   ,
                                                   
                                                      
                                                         ν
                                                      
                                                      
                                                         2
                                                      
                                                      
                                                         f
                                                      
                                                   
                                                   )
                                                   )
                                                   ∈
                                                   
                                                      
                                                         R
                                                      
                                                      
                                                         ′
                                                      
                                                   
                                                   }
                                                
                                             
                                          
                                       
                                    
                                 
                               It is easy to check that R is a configuration bisimulation relation.

We assume 
                                 s
                                 
                                    
                                       ≃
                                    
                                    
                                       C
                                    
                                 
                                 t
                               is witnessed by the class of configuration bisimulation relations 
                                 
                                    
                                       R
                                    
                                    
                                       
                                          
                                             ν
                                          
                                          
                                             1
                                          
                                       
                                       ,
                                       
                                          
                                             ν
                                          
                                          
                                             2
                                          
                                       
                                    
                                 
                              , where 
                                 
                                    
                                       ν
                                    
                                    
                                       1
                                    
                                 
                                 ,
                                 
                                    
                                       ν
                                    
                                    
                                       2
                                    
                                 
                                 ∈
                                 
                                    Config
                                 
                              , we show that 
                                 s
                                 
                                    
                                       ≃
                                    
                                    
                                       PL
                                    
                                 
                                 t
                              . To this aim, for any 
                                 
                                    
                                       ν
                                    
                                    
                                       1
                                    
                                    
                                       f
                                    
                                 
                                 ∈
                                 
                                    VFConfig
                                 
                                 (
                                 s
                                 )
                              , we find 
                                 
                                    
                                       ν
                                    
                                    
                                       2
                                    
                                    
                                       f
                                    
                                 
                                 ∈
                                 
                                    VFConfig
                                 
                                 (
                                 t
                                 )
                               such that 
                                 Π
                                 (
                                 s
                                 ,
                                 
                                    
                                       ν
                                    
                                    
                                       1
                                    
                                    
                                       f
                                    
                                 
                                 )
                                 ∼
                                 Π
                                 (
                                 t
                                 ,
                                 
                                    
                                       ν
                                    
                                    
                                       2
                                    
                                    
                                       f
                                    
                                 
                                 )
                               and vice versa. Let 
                                 B
                                 =
                                 {
                                 
                                    
                                       ν
                                    
                                    
                                       2
                                    
                                 
                                 |
                                 (
                                 
                                    
                                       s
                                    
                                    
                                       ′
                                    
                                 
                                 ,
                                 
                                    
                                       t
                                    
                                    
                                       ′
                                    
                                 
                                 )
                                 ∈
                                 
                                    
                                       R
                                    
                                    
                                       
                                          
                                             ν
                                          
                                          
                                             1
                                          
                                       
                                       ,
                                       
                                          
                                             ν
                                          
                                          
                                             2
                                          
                                       
                                    
                                 
                                 ∧
                                 
                                    
                                       ν
                                    
                                    
                                       1
                                    
                                 
                                 ⊑
                                 
                                    
                                       ν
                                    
                                    
                                       1
                                    
                                    
                                       f
                                    
                                 
                                 }
                              . Choose 
                                 b
                                 ∈
                                 B
                               such that 
                                 ∄
                                 ν
                                 ∈
                                 B
                                 ∖
                                 {
                                 b
                                 }
                                 ⋅
                                 b
                                 ⊑
                                 ν
                              . Take a configuration 
                                 
                                    
                                       ν
                                    
                                    
                                       2
                                    
                                    
                                       f
                                    
                                 
                               such that 
                                 b
                                 ⊑
                                 
                                    
                                       ν
                                    
                                    
                                       2
                                    
                                    
                                       f
                                    
                                 
                              . It is trivial that 
                                 
                                    
                                       R
                                    
                                    
                                       ′
                                    
                                 
                                 =
                                 {
                                 (
                                 Π
                                 (
                                 
                                    
                                       s
                                    
                                    
                                       ′
                                    
                                 
                                 ,
                                 
                                    
                                       ν
                                    
                                    
                                       1
                                    
                                    
                                       f
                                    
                                 
                                 )
                                 ,
                                 Π
                                 (
                                 
                                    
                                       t
                                    
                                    
                                       ′
                                    
                                 
                                 ,
                                 
                                    
                                       ν
                                    
                                    
                                       2
                                    
                                    
                                       f
                                    
                                 
                                 )
                                 )
                                 |
                                 (
                                 
                                    
                                       s
                                    
                                    
                                       ′
                                    
                                 
                                 ,
                                 
                                    
                                       t
                                    
                                    
                                       ′
                                    
                                 
                                 )
                                 ∈
                                 
                                    
                                       R
                                    
                                    
                                       
                                          
                                             ν
                                          
                                          
                                             1
                                          
                                       
                                       ,
                                       
                                          
                                             ν
                                          
                                          
                                             2
                                          
                                       
                                    
                                 
                                 ∧
                                 
                                    
                                       ν
                                    
                                    
                                       1
                                    
                                 
                                 ⊑
                                 
                                    
                                       ν
                                    
                                    
                                       1
                                    
                                    
                                       f
                                    
                                 
                                 ∧
                                 
                                    
                                       ν
                                    
                                    
                                       2
                                    
                                 
                                 ⊑
                                 
                                    
                                       ν
                                    
                                    
                                       2
                                    
                                    
                                       f
                                    
                                 
                                 }
                               is a strong bisimulation witnessing 
                                 Π
                                 (
                                 s
                                 ,
                                 
                                    
                                       ν
                                    
                                    
                                       1
                                    
                                    
                                       f
                                    
                                 
                                 )
                                 ∼
                                 Π
                                 (
                                 t
                                 ,
                                 
                                    
                                       ν
                                    
                                    
                                       2
                                    
                                    
                                       f
                                    
                                 
                                 )
                              .  □

Partitioning each family and then matching its consistent transition sets is very complex and may need to examine all possible partitionings to find a suitable match. Since product line and configuration bisimilarity coincide, with the aim to provide a sound and complete axiomatization, we use product line bisimilarity which makes our proofs much simpler. Therefore, all results for product line bisimilarity also hold for configuration bisimilarity.

In this section, we study the congruence property of strict and product line bisimulation relations, and provide a syntactic restriction over PL-CCS terms that makes product line bisimilarity a congruence with respect to the PL-CCS operators.

Strict strong bisimilarity is a congruence for PL-CCS terms. For instance, 
                           〈
                           
                              
                                 p
                              
                              
                                 2
                              
                              
                                 ′
                              
                           
                           |
                           {
                           
                              
                                 p
                              
                              
                                 2
                              
                              
                                 ′
                              
                           
                           
                              =
                              
                                 def
                              
                           
                           b
                           .
                           0
                           
                              
                                 ⊕
                              
                              
                                 1
                              
                           
                           c
                           .
                           0
                           }
                           〉
                           
                              
                                 ≈
                              
                              
                                 PL
                              
                           
                           b
                           .
                           0
                           
                              
                                 ⊕
                              
                              
                                 1
                              
                           
                           c
                           .
                           0
                        , induces that 
                           〈
                           
                              
                                 p
                              
                              
                                 2
                              
                              
                                 ′
                              
                           
                           |
                           {
                           
                              
                                 p
                              
                              
                                 2
                              
                              
                                 ′
                              
                           
                           
                              =
                              
                                 def
                              
                           
                           b
                           .
                           0
                           
                              
                                 ⊕
                              
                              
                                 1
                              
                           
                           c
                           .
                           0
                           }
                           〉
                           ∥
                           〈
                           
                              
                                 p
                              
                              
                                 2
                              
                              
                                 ′
                              
                           
                           |
                           {
                           
                              
                                 p
                              
                              
                                 2
                              
                              
                                 ′
                              
                           
                           
                              =
                              
                                 def
                              
                           
                           b
                           .
                           0
                           
                              
                                 ⊕
                              
                              
                                 1
                              
                           
                           c
                           .
                           0
                           }
                           〉
                           
                              
                                 ≈
                              
                              
                                 PL
                              
                           
                           (
                           b
                           .
                           0
                           
                              
                                 ⊕
                              
                              
                                 1
                              
                           
                           c
                           .
                           0
                           )
                           ∥
                           (
                           b
                           .
                           0
                           
                              
                                 ⊕
                              
                              
                                 1
                              
                           
                           c
                           .
                           0
                           )
                        .


                        
                           Theorem 9
                           
                              Strict strong bisimilarity is an equivalence and a congruence for the PL-CCS term algebra.
                           

See Appendix A for the proof.

The case for product line bisimulation is a bit more intricate. To illustrate the involved issues, observe that 
                           (
                           d
                           .
                           0
                           
                              
                                 ⊕
                              
                              
                                 1
                              
                           
                           e
                           .
                           0
                           )
                           ∥
                           (
                           b
                           .
                           0
                           
                              
                                 ⊕
                              
                              
                                 1
                              
                           
                           c
                           .
                           0
                           )
                           
                              
                                 ≄
                              
                              
                                 PL
                              
                           
                           (
                           d
                           .
                           0
                           
                              
                                 ⊕
                              
                              
                                 1
                              
                           
                           e
                           .
                           0
                           )
                           ∥
                           (
                           c
                           .
                           0
                           
                              
                                 ⊕
                              
                              
                                 1
                              
                           
                           b
                           .
                           0
                           )
                        , while 
                           b
                           .
                           0
                           
                              
                                 ⊕
                              
                              
                                 1
                              
                           
                           c
                           .
                           0
                           
                              
                                 ≃
                              
                              
                                 PL
                              
                           
                           c
                           .
                           0
                           
                              
                                 ⊕
                              
                              
                                 1
                              
                           
                           b
                           .
                           0
                        . The reason is that the configurations 
                           〈
                           R
                           〉
                         and 
                           〈
                           L
                           〉
                         of 
                           b
                           .
                           0
                           
                              
                                 ⊕
                              
                              
                                 1
                              
                           
                           c
                           .
                           0
                         are matched to the configurations 
                           〈
                           L
                           〉
                         and 
                           〈
                           R
                           〉
                         of 
                           c
                           .
                           0
                           
                              
                                 ⊕
                              
                              
                                 1
                              
                           
                           b
                           .
                           0
                         respectively, but each pair of matched configurations chooses a different product in 
                           d
                           .
                           0
                           
                              
                                 ⊕
                              
                              
                                 1
                              
                           
                           e
                           .
                           0
                        . However, 
                           (
                           d
                           .
                           0
                           
                              
                                 ⊕
                              
                              
                                 1
                              
                           
                           e
                           .
                           0
                           )
                           
                              
                                 ⊕
                              
                              
                                 2
                              
                           
                           (
                           b
                           .
                           0
                           
                              
                                 ⊕
                              
                              
                                 1
                              
                           
                           c
                           .
                           0
                           )
                           
                              
                                 ≃
                              
                              
                                 PL
                              
                           
                           (
                           d
                           .
                           0
                           
                              
                                 ⊕
                              
                              
                                 1
                              
                           
                           e
                           .
                           0
                           )
                           
                              
                                 ⊕
                              
                              
                                 2
                              
                           
                           (
                           c
                           .
                           0
                           
                              
                                 ⊕
                              
                              
                                 1
                              
                           
                           b
                           .
                           0
                           )
                        , since 
                           
                              
                                 ⊕
                              
                              
                                 2
                              
                           
                         makes the configurations of its operands independent of each other. To guarantee congruence for product line bisimilarity, we impose a constraint on the PL-CCS syntax. In 
                           (
                           d
                           .
                           0
                           
                              
                                 ⊕
                              
                              
                                 1
                              
                           
                           e
                           .
                           0
                           )
                           ∥
                           (
                           b
                           .
                           0
                           
                              
                                 ⊕
                              
                              
                                 1
                              
                           
                           c
                           .
                           0
                           )
                        , there are two binary variants indexed by 1. Hence, once one resolves the choice between 
                           d
                           .
                           0
                         and 
                           e
                           .
                           0
                        , the same choice has to made between 
                           b
                           .
                           0
                         and 
                           c
                           .
                           0
                        . We call a product line fully expanded when all its variants can be configured independently from the configuration of other variation points.

This constraint was first introduced in [12] with the different intention of compositionality for their structural rules. We revise their definition to enforce that different binary variant choices can be made independent of each other. To formally define a fully expanded term, we use its term-dependency graph which is a directed labeled graph. Its construction for a term t is explained on the term 
                           (
                           a
                           .
                           〈
                           Y
                           |
                           E
                           〉
                           +
                           e
                           .
                           0
                           )
                           ∥
                           〈
                           Z
                           |
                           E
                           〉
                        , where 
                           E
                           =
                           {
                           Y
                           
                              =
                              
                                 def
                              
                           
                           b
                           .
                           0
                           
                              
                                 ⊕
                              
                              
                                 1
                              
                           
                           c
                           .
                           Z
                           ,
                           Z
                           
                              =
                              
                                 def
                              
                           
                           c
                           .
                           Z
                           
                              
                                 ⊕
                              
                              
                                 2
                              
                           
                           d
                           .
                           Y
                           }
                        . Its nodes comprise the nodes of the parse tree of t together with additional nodes labeled 
                           〈
                           
                              
                                 A
                              
                              
                                 i
                              
                           
                           |
                           
                              
                                 E
                              
                              
                                 i
                              
                           
                           〉
                         and 
                           
                              
                                 E
                              
                              
                                 i
                              
                           
                         (i.e., the gray and the white nodes in Fig. 5
                        , respectively). Its edges comprise the edges of the parse tree of t (i.e., the thick solid edges in Fig. 5) plus edges connecting 
                           〈
                           
                              
                                 A
                              
                              
                                 i
                              
                           
                           |
                           
                              
                                 E
                              
                              
                                 i
                              
                           
                           〉
                         to the node labeled 
                           
                              
                                 A
                              
                              
                                 i
                              
                           
                         in the term-dependency graph of 
                           
                              
                                 E
                              
                              
                                 i
                              
                           
                         (i.e., the dashed edges in Fig. 5), and the edges of recursive specifications 
                           
                              
                                 E
                              
                              
                                 i
                              
                           
                        . The term-dependency graph of 
                           
                              
                                 E
                              
                              
                                 i
                              
                           
                           (
                           
                              
                                 A
                              
                              
                                 i
                              
                           
                           )
                         consists of nodes labeled 
                           
                              
                                 A
                              
                              
                                 i
                              
                           
                         for each 
                           
                              
                                 A
                              
                              
                                 i
                              
                           
                           ∈
                           
                              
                                 A
                              
                              
                                 i
                              
                           
                        , together with the nodes of the parse trees for term 
                           
                              
                                 t
                              
                              
                                 i
                              
                           
                         for each 
                           
                              
                                 A
                              
                              
                                 i
                              
                           
                           
                              =
                              
                                 def
                              
                           
                           
                              
                                 t
                              
                              
                                 i
                              
                           
                           ∈
                           
                              
                                 E
                              
                              
                                 i
                              
                           
                        . Its edges comprise the edges of the parse trees (i.e., the thin solid edges in Fig. 5) plus the edges connecting 
                           
                              
                                 A
                              
                              
                                 i
                              
                           
                         to the roots of the parse trees of the corresponding right-hand sides, i.e., 
                           
                              
                                 t
                              
                              
                                 i
                              
                           
                         (i.e., the thick dashed edges in Fig. 5). Additionally, we add edges from leaves of the parse trees labeled 
                           
                              
                                 A
                              
                              
                                 i
                              
                           
                         to the node labeled with 
                           
                              
                                 A
                              
                              
                                 i
                              
                           
                         in its binding recursive specification (i.e., the dotted edges in Fig. 5).


                        
                           Definition 10
                           Fully expanded terms


                           A PL-CCS term is fully expanded if and only if in its term-dependency graph, for each two distinct simple paths starting at an arbitrary common node and ending at (common or distinct) nodes labeled with 
                                 
                                    
                                       ⊕
                                    
                                    
                                       i
                                    
                                 
                              , they have both passed through a common node that is labeled with 
                                 
                                    
                                       ⊕
                                    
                                    
                                       j
                                    
                                 
                              , for some 
                                 j
                                 ≠
                                 i
                              .

Recall that a simple path is a path in a graph which does not have repeating vertices. This constraint rules out systems such as 
                           〈
                           
                              
                                 p
                              
                              
                                 1
                              
                           
                           |
                           {
                           
                              
                                 p
                              
                              
                                 1
                              
                           
                           
                              =
                              
                                 def
                              
                           
                           
                              
                                 p
                              
                              
                                 2
                              
                           
                           ∥
                           
                              
                                 p
                              
                              
                                 2
                              
                           
                           ,
                           
                           
                              
                                 p
                              
                              
                                 2
                              
                           
                           
                              =
                              
                                 def
                              
                           
                           b
                           .
                           0
                           
                              
                                 ⊕
                              
                              
                                 1
                              
                           
                           c
                           .
                           0
                           }
                           〉
                        , since the parallel composition in the equation of 
                           
                              
                                 p
                              
                              
                                 1
                              
                           
                         has two simple paths to 
                           
                              
                                 ⊕
                              
                              
                                 1
                              
                           
                        . However, these paths do not pass through a node labeled with 
                           
                              
                                 ⊕
                              
                              
                                 j
                              
                           
                        , 
                           j
                           ≠
                           1
                        , beforehand. Nevertheless, it accepts systems such as 
                           〈
                           
                              
                                 p
                              
                              
                                 4
                              
                           
                           |
                           {
                           
                              
                                 p
                              
                              
                                 4
                              
                           
                           
                              =
                              
                                 def
                              
                           
                           (
                           
                              
                                 p
                              
                              
                                 2
                              
                           
                           
                              
                                 ⊕
                              
                              
                                 2
                              
                           
                           
                              
                                 p
                              
                              
                                 2
                              
                           
                           )
                           ∥
                           (
                           b
                           .
                           0
                           
                              
                                 ⊕
                              
                              
                                 3
                              
                           
                           c
                           .
                           0
                           )
                           ,
                           
                              
                                 p
                              
                              
                                 2
                              
                           
                           
                              =
                              
                                 def
                              
                           
                           b
                           .
                           0
                           
                              
                                 ⊕
                              
                              
                                 1
                              
                           
                           c
                           .
                           0
                           }
                           〉
                        , since all simple paths of the parallel composition in the equation 
                           
                              
                                 p
                              
                              
                                 4
                              
                           
                         to 
                           
                              
                                 ⊕
                              
                              
                                 1
                              
                           
                         have already passed through 
                           
                              
                                 ⊕
                              
                              
                                 2
                              
                           
                        , as shown in Fig. 6
                        . The same holds for simple paths of the node labeled with 
                           
                              
                                 p
                              
                              
                                 4
                              
                           
                        . Such systems were not accepted by the Definition given in [12]. The term-dependency graph of Fig. 5 satisfies the condition of Definition 10.


                        
                           Theorem 11
                           
                              Product line bisimilarity is a congruence on the fully expanded PL-CCS term algebra.
                           

See Appendix A for the proof. Restricting to fully expanded PL-CCS terms is not important in practice (when terms are manipulated at the syntactic level), since a term can be rewritten using our axioms supported by strict strong bisimilarity into a fully expanded form (see Theorem 12 in Section 4.2). Note that the side condition of axiom 
                           
                              
                                 A
                              
                              
                                 2
                              
                           
                         guarantees that a fully expanded term remains fully expanded after being restructured by this axiom. For instance, although 
                           (
                           a
                           .
                           0
                           
                              
                                 ⊕
                              
                              
                                 1
                              
                           
                           b
                           .
                           0
                           )
                           
                              
                                 ⊕
                              
                              
                                 2
                              
                           
                           (
                           c
                           .
                           0
                           
                              
                                 ⊕
                              
                              
                                 1
                              
                           
                           d
                           .
                           0
                           )
                         is fully expanded, 
                           a
                           .
                           0
                           
                              
                                 ⊕
                              
                              
                                 1
                              
                           
                           (
                           b
                           .
                           0
                           
                              
                                 ⊕
                              
                              
                                 2
                              
                           
                           (
                           c
                           .
                           0
                           
                              
                                 ⊕
                              
                              
                                 1
                              
                           
                           d
                           .
                           0
                           )
                           )
                         is not.

We extend the axioms given in Section 3 to reason about parallel, recursive behaviors with finite-state models, and indexed binary variants. To axiomatize the interleaving behavior of parallel composition and terms with variants with an identical index, we extend the PL-CCS syntax and semantics with new operators in Section 4.1.

We provide PL-CCS axioms that are sound with respect to product line bisimilarity in Section 4.2. Furthermore, we identify those that are also valid with respect to strict strong bisimilarity. Our axiomatization in Table 2
                      subsumes standard axioms of CCS for choice operator (
                        
                           
                              C
                           
                           
                              1
                              −
                              4
                           
                        
                     , 
                        
                           
                              R
                           
                           
                              1
                              −
                              4
                           
                        
                     , 
                        
                           
                              E
                           
                           
                              1
                              −
                              4
                           
                        
                     ), axioms of ACP corresponding to the well-known elimination theorem [21] (
                        
                           
                              P
                           
                           
                              1
                              −
                              3
                              ,
                              5
                              ,
                              6
                           
                        
                      and 
                        
                           
                              S
                           
                           
                              1
                              ,
                              2
                              ,
                              4
                              −
                              6
                           
                        
                     ), and axioms of CCS to reason about recursive behaviors [22] (Fold, UnFold, and Ung). We explain that a term can be manipulated using axioms supported by strict strong bisimilarity (without changing the order of operands in binary variants) to be rewritten into a fully expanded form, and then manipulated with all axioms valid for product line bisimilarity. We prove ground-completeness (completeness over closed terms) of our axiomatization for a subset of PL-CCS terms, namely, those with finite-state behaviors in Section 4.3.

Our axiomatization borrows from the process algebra ACP 
                        [23] two auxiliary operators (left merge and communication merge) to axiomatize the interleaving and the synchronizing behavior of parallel composition, respectively. Furthermore, we extend the process theory with two new sets of indexed operators (left and right selector), to restrict the behavior of a term regarding configuration of the variant indexed by that number.

In the left merge composition 
                           
                              
                                 t
                              
                              
                                 1
                              
                           
                           
                              
                                 
                              
                           
                           
                              
                                 t
                              
                              
                                 2
                              
                           
                        , the left operand (
                           
                              
                                 t
                              
                              
                                 1
                              
                           
                        ) performs an action and then continues in parallel with 
                           
                              
                                 t
                              
                              
                                 2
                              
                           
                        . In the communication merge 
                           
                              
                                 t
                              
                              
                                 1
                              
                           
                           |
                           
                              
                                 t
                              
                              
                                 2
                              
                           
                        , both operands are synchronized on their initial actions and then continue in parallel composition. The left selector operator 
                           L
                           (
                           t
                           ,
                           i
                           )
                         makes all variants indexed by i be configured as left. Therefore, it only allows behaviors whose configurations on the variant indexed by i are consistent with left. The right selector operator 
                           R
                           (
                           t
                           ,
                           i
                           )
                         behaves symmetrically. The structural operational semantics rules of operators to derive CTSs are given in Fig. 7
                        .

We proceed to complete the axiomatization of PL-CCS modulo product line bisimilarity. The axioms are given in Table 2. Axioms 
                           
                              
                                 C
                              
                              
                                 1
                                 −
                                 4
                              
                           
                         define commutativity, associativity, idempotence, and unit element for the choice operator.

Axiom 
                           
                              
                                 P
                              
                              
                                 1
                              
                           
                         defines the parallel composition of two families in an interleaving semantics, as in the process algebra ACP 
                        [23]; Axiom 
                           
                              
                                 P
                              
                              
                                 2
                              
                           
                         explains the behavior of the left merge operator in terms of its left operand, if it can do an action. However, if it cannot do any action, the result is a deadlock, as explained by 
                           
                              
                                 P
                              
                              
                                 6
                              
                           
                        . Axioms 
                           
                              
                                 P
                              
                              
                                 3
                                 ,
                                 4
                              
                           
                         define left-distributivity of choice and binary variant over the left merge operator, respectively. Axiom 
                           
                              
                                 P
                              
                              
                                 5
                              
                           
                         defines right-distributivity of binary variant over the left merge operator. Axiom 
                           
                              
                                 S
                              
                              
                                 1
                              
                           
                         defines the commutativity property for the communication merge operator. Axioms 
                           
                              
                                 S
                              
                              
                                 2
                                 ,
                                 3
                              
                           
                         (together with 
                           
                              
                                 S
                              
                              
                                 1
                              
                           
                        ) define distributivity of choice and binary variant over the communication merge operator respectively. Axioms 
                           
                              
                                 S
                              
                              
                                 4
                                 ,
                                 5
                                 ,
                                 6
                              
                           
                         define the behavior of communication merge operator; when the operands are ready to do matched input and output communication actions, they can be synchronized and the result of their synchronization is the unobservable action τ as explained by 
                           
                              
                                 S
                              
                              
                                 4
                              
                           
                        . However, if either they are not matched (
                           
                              
                                 S
                              
                              
                                 5
                              
                           
                        ) or one of the operands cannot do any action (
                           
                              
                                 S
                              
                              
                                 6
                              
                           
                        ), the result is a deadlock.

Axioms 
                           
                              
                                 R
                              
                              
                                 1
                                 ,
                                 4
                              
                           
                         and 
                           
                              
                                 E
                              
                              
                                 1
                                 ,
                                 2
                                 ,
                                 4
                              
                           
                         define the behavior of renaming and restriction operators respectively. Axioms 
                           
                              
                                 R
                              
                              
                                 2
                                 ,
                                 3
                              
                           
                         and 
                           
                              
                                 E
                              
                              
                                 3
                                 ,
                                 5
                              
                           
                         define distributivity of choice and binary variant over the renaming and restriction operators, respectively.

Axiom Dec decomposes a recursive specification E made up of multiple (finitely-many) equations into several nested recursive specifications made up of a single equation. Axiom UnFold expresses the existence of a solution for any recursive specification E: the constant 
                           〈
                           A
                           |
                           E
                           〉
                         is a solution of the recursive specification E. Fold expresses uniqueness of a solution for a guarded recursive specification: if y is a solution for A in E, and E is guarded, then 
                           y
                           =
                           〈
                           A
                           |
                           E
                           〉
                        . Note that UnFold and Fold correspond to the Recursive Definition Principle (RDP) and Recursive Specification Principle (RSP) in ACP. An occurrence of a process name A in t is called guarded, if and only if this occurrence is in the scope of an action prefix operator. A recursive specification is called guarded, if and only if all occurrences of all its process names in the right-hand sides of all its equations are guarded, or it can be rewritten to such a recursive specification using the axioms of the theory and the equations of the specification [17]. This guardedness criterion ensures that any product line has a unique solution. Axiom Ung makes it possible to turn the unguarded recursive specification 
                           {
                           A
                           
                              =
                              
                                 def
                              
                           
                           A
                           +
                           t
                           }
                         into a guarded one. Axiom Dri derives the products of a recursive specification: the solution of a recursive specification 
                           〈
                           A
                           |
                           {
                           A
                           
                              =
                              
                                 def
                              
                           
                           
                              
                                 t
                              
                              
                                 1
                              
                           
                           
                              
                                 ⊕
                              
                              
                                 i
                              
                           
                           
                              
                                 t
                              
                              
                                 2
                              
                           
                           }
                           〉
                         is 
                           〈
                           A
                           |
                           {
                           A
                           
                              =
                              
                                 def
                              
                           
                           
                              
                                 t
                              
                              
                                 1
                              
                           
                           }
                           〉
                           
                              
                                 ⊕
                              
                              
                                 i
                              
                           
                           〈
                           A
                           |
                           {
                           A
                           
                              =
                              
                                 def
                              
                           
                           
                              
                                 t
                              
                              
                                 2
                              
                           
                           }
                           〉
                        . Axioms UnFold, Fold, and Ung are standard for CCS terms (with finite state behaviors modulo branching bisimulation) [22].

Axioms 
                           
                              
                                 N
                              
                              
                                 1
                                 −
                                 5
                              
                           
                         handle binary variants with an identical index. Whenever the left (right) operand is selected in 
                           p
                           
                              
                                 ⊕
                              
                              
                                 i
                              
                           
                           q
                        , then all i-indexed variants in p (q), should select their left (right) operands accordingly. Axiom 
                           
                              
                                 N
                              
                              
                                 5
                              
                           
                         removes all occurrences of 
                           
                              
                                 ⊕
                              
                              
                                 i
                              
                           
                         at the root of 
                           p
                           
                              
                                 ⊕
                              
                              
                                 i
                              
                           
                           q
                         in operands p and q. In other words, with the help of 
                           
                              
                                 N
                              
                              
                                 1
                                 −
                                 5
                              
                           
                        , the occurrence of i in subtrees of 
                           p
                           
                              
                                 ⊕
                              
                              
                                 i
                              
                           
                           q
                         becomes unique. For instance, consider the product line 
                           〈
                           X
                           |
                           {
                           X
                           
                              =
                              
                                 def
                              
                           
                           b
                           .
                           X
                           
                              
                                 ⊕
                              
                              
                                 1
                              
                           
                           a
                           .
                           0
                           }
                           〉
                        , with two products 
                           〈
                           X
                           |
                           {
                           X
                           
                              =
                              
                                 def
                              
                           
                           b
                           .
                           X
                           }
                           〉
                         and 
                           〈
                           X
                           |
                           {
                           X
                           
                              =
                              
                                 def
                              
                           
                           a
                           .
                           0
                           }
                           〉
                         obtained using axiom Dri. However, by applying axiom UnFold and substituting of X with its defining term, one can derive 
                           〈
                           X
                           |
                           {
                           X
                           
                              =
                              
                                 def
                              
                           
                           b
                           .
                           X
                           
                              
                                 ⊕
                              
                              
                                 1
                              
                           
                           a
                           .
                           0
                           }
                           〉
                           =
                           (
                           b
                           .
                           (
                           〈
                           X
                           |
                           {
                           X
                           
                              =
                              
                                 def
                              
                           
                           b
                           .
                           X
                           
                              
                                 ⊕
                              
                              
                                 1
                              
                           
                           a
                           .
                           0
                           }
                           〉
                           )
                           
                              
                                 ⊕
                              
                              
                                 1
                              
                           
                           a
                           .
                           0
                           )
                           =
                           b
                           .
                           (
                           〈
                           X
                           |
                           {
                           X
                           
                              =
                              
                                 def
                              
                           
                           b
                           .
                           X
                           }
                           〉
                           
                              
                                 ⊕
                              
                              
                                 1
                              
                           
                           〈
                           X
                           |
                           {
                           X
                           
                              =
                              
                                 def
                              
                           
                           a
                           .
                           0
                           }
                           〉
                           )
                           
                              
                                 ⊕
                              
                              
                                 1
                              
                           
                           a
                           .
                           0
                        . By axioms 
                           
                              
                                 A
                              
                              
                                 4
                              
                           
                         and 
                           
                              
                                 N
                              
                              
                                 1
                                 ,
                                 5
                              
                           
                        , 
                           b
                           .
                           (
                           〈
                           X
                           |
                           {
                           X
                           
                              =
                              
                                 def
                              
                           
                           b
                           .
                           X
                           }
                           〉
                           
                              
                                 ⊕
                              
                              
                                 1
                              
                           
                           〈
                           X
                           |
                           {
                           X
                           
                              =
                              
                                 def
                              
                           
                           a
                           .
                           0
                           }
                           〉
                           )
                           
                              
                                 ⊕
                              
                              
                                 1
                              
                           
                           a
                           .
                           0
                         is reduced to 
                           b
                           .
                           〈
                           X
                           |
                           {
                           X
                           
                              =
                              
                                 def
                              
                           
                           b
                           .
                           X
                           }
                           〉
                           
                              
                                 ⊕
                              
                              
                                 1
                              
                           
                           a
                           .
                           0
                        , which derives two products 
                           b
                           .
                           〈
                           X
                           |
                           {
                           X
                           
                              =
                              
                                 def
                              
                           
                           b
                           .
                           X
                           }
                           〉
                         and 
                           a
                           .
                           0
                         (that are strongly bisimilar to the products of 
                           〈
                           X
                           |
                           {
                           X
                           
                              =
                              
                                 def
                              
                           
                           b
                           .
                           X
                           
                              
                                 ⊕
                              
                              
                                 1
                              
                           
                           a
                           .
                           0
                           }
                           〉
                        ). Axiom 
                           
                              
                                 N
                              
                              
                                 6
                              
                           
                         changes the index of a binary variant term. For example, 
                           (
                           a
                           .
                           0
                           
                              
                                 ⊕
                              
                              
                                 1
                              
                           
                           b
                           .
                           0
                           )
                           
                              
                                 ⊕
                              
                              
                                 2
                              
                           
                           (
                           c
                           .
                           0
                           
                              
                                 ⊕
                              
                              
                                 1
                              
                           
                           d
                           .
                           0
                           )
                           =
                           (
                           a
                           .
                           0
                           
                              
                                 ⊕
                              
                              
                                 1
                              
                           
                           b
                           .
                           0
                           )
                           
                              
                                 ⊕
                              
                              
                                 2
                              
                           
                           (
                           c
                           .
                           0
                           
                              
                                 ⊕
                              
                              
                                 3
                              
                           
                           d
                           .
                           0
                           )
                        . Consequently, axiom 
                           
                              
                                 A
                              
                              
                                 2
                              
                           
                         can be applied, resulting 
                           (
                           a
                           .
                           0
                           
                              
                                 ⊕
                              
                              
                                 1
                              
                           
                           b
                           .
                           0
                           )
                           
                              
                                 ⊕
                              
                              
                                 2
                              
                           
                           (
                           c
                           .
                           0
                           
                              
                                 ⊕
                              
                              
                                 1
                              
                           
                           d
                           .
                           0
                           )
                           =
                           a
                           .
                           0
                           
                              
                                 ⊕
                              
                              
                                 1
                              
                           
                           (
                           b
                           .
                           0
                           
                              
                                 ⊕
                              
                              
                                 2
                              
                           
                           (
                           c
                           .
                           0
                           
                              
                                 ⊕
                              
                              
                                 3
                              
                           
                           d
                           .
                           0
                           )
                           )
                        .

It should be noted that 
                           t
                           
                              
                                 ≈
                              
                              
                                 PL
                              
                           
                           s
                         implies 
                           t
                           
                              
                                 ≃
                              
                              
                                 PL
                              
                           
                           s
                        . All axioms, except for 
                           
                              
                                 A
                              
                              
                                 1
                                 ,
                                 2
                              
                           
                         and 
                           
                              
                                 N
                              
                              
                                 6
                              
                           
                        , are supported by strict strong bisimilarity. Generally speaking, to manipulate a PL-CCS term, as stated in Theorem 12, first it can be converted into a fully expanded form with the help of axioms supported by strict strong bisimilarity, and then manipulated with all axioms.


                        
                           Theorem 12
                           
                              Any PL-CCS term t can be rewritten by axioms 
                              
                                 
                                    
                                       A
                                    
                                    
                                       4
                                       −
                                       6
                                    
                                 
                              
                              , 
                              
                                 
                                    
                                       D
                                    
                                    
                                       1
                                       ,
                                       2
                                    
                                 
                              
                              , 
                              
                                 
                                    
                                       P
                                    
                                    
                                       4
                                       ,
                                       5
                                    
                                 
                              
                              , 
                              
                                 
                                    
                                       S
                                    
                                    
                                       1
                                       ,
                                       3
                                    
                                 
                              
                              , 
                              
                                 
                                    
                                       R
                                    
                                    
                                       3
                                    
                                 
                              
                              , 
                              
                                 
                                    
                                       E
                                    
                                    
                                       5
                                    
                                 
                              
                              , Dri, and 
                              
                                 
                                    
                                       N
                                    
                                    
                                       1
                                       −
                                       5
                                    
                                 
                               
                              into a form that is fully expanded.
                           

See Appendix B for the proof. With the help of axioms 
                           
                              
                                 A
                              
                              
                                 4
                                 −
                                 6
                              
                           
                        , 
                           
                              
                                 P
                              
                              
                                 4
                                 ,
                                 5
                              
                           
                        , 
                           
                              
                                 S
                              
                              
                                 1
                                 ,
                                 3
                              
                           
                        , 
                           
                              
                                 R
                              
                              
                                 3
                              
                           
                        , 
                           
                              
                                 E
                              
                              
                                 5
                              
                           
                        , and Dri, one can convert a PL-CCS term into a term such that its binary variants do not occur in the scope of any CCS operators. Then, by axioms 
                           
                              
                                 N
                              
                              
                                 1
                                 −
                                 5
                              
                           
                        , the term becomes fully expanded. Therefore, it can be manipulated using all the axioms. The soundness of derivations, when the order of binary variants operands are fixed, follows from Theorem 9, and when terms are fully expanded, follows from Theorem 11.


                        
                           Theorem 13
                           Soundness


                           
                              The axiomatization, given in 
                              
                                 Tables 1 and 2
                              
                              , is sound for the term algebra 
                              
                                 P
                                 (
                                 
                                    PL
                                 
                                 
                                    -
                                 
                                 
                                    CCS
                                 
                                 )
                                 /
                                 
                                    
                                       ≃
                                    
                                    
                                       PL
                                    
                                 
                              
                              , i.e., for all closed PL-CCS terms 
                              
                                 
                                    
                                       t
                                    
                                    
                                       1
                                    
                                 
                               
                              and 
                              
                                 
                                    
                                       t
                                    
                                    
                                       2
                                    
                                 
                              
                              , 
                              
                                 
                                    
                                       t
                                    
                                    
                                       1
                                    
                                 
                                 =
                                 
                                    
                                       t
                                    
                                    
                                       2
                                    
                                 
                               
                              implies 
                              
                                 
                                    
                                       t
                                    
                                    
                                       1
                                    
                                 
                                 
                                    
                                       ≃
                                    
                                    
                                       PL
                                    
                                 
                                 
                                    
                                       t
                                    
                                    
                                       2
                                    
                                 
                              
                              .
                           

See Appendix C for the proof.


                        
                           Example 14
                           Axioms 
                                 
                                    
                                       D
                                    
                                    
                                       1
                                       ,
                                       2
                                    
                                 
                               in Table 1 can be derived from the other remaining axioms. The derivation for 
                                 
                                    
                                       D
                                    
                                    
                                       1
                                    
                                 
                               is:
                                 
                                    
                                       
                                          
                                             
                                                r
                                                ∥
                                                (
                                                p
                                                
                                                   
                                                      ⊕
                                                   
                                                   
                                                      i
                                                   
                                                
                                                q
                                                )
                                             
                                             
                                                
                                                   
                                                      =
                                                   
                                                   
                                                      
                                                         
                                                            P
                                                         
                                                         
                                                            1
                                                         
                                                      
                                                   
                                                
                                                r
                                                
                                                   
                                                      
                                                   
                                                
                                                (
                                                p
                                                
                                                   
                                                      ⊕
                                                   
                                                   
                                                      i
                                                   
                                                
                                                q
                                                )
                                                +
                                                (
                                                p
                                                
                                                   
                                                      ⊕
                                                   
                                                   
                                                      i
                                                   
                                                
                                                q
                                                )
                                                
                                                   
                                                      
                                                   
                                                
                                                r
                                                +
                                                r
                                                |
                                                (
                                                p
                                                
                                                   
                                                      ⊕
                                                   
                                                   
                                                      i
                                                   
                                                
                                                q
                                                )
                                             
                                          
                                          
                                             
                                             
                                                
                                                   
                                                      =
                                                   
                                                   
                                                      
                                                         
                                                            P
                                                         
                                                         
                                                            4
                                                            ,
                                                            5
                                                         
                                                      
                                                      ,
                                                      
                                                         
                                                            S
                                                         
                                                         
                                                            2
                                                            ,
                                                            3
                                                         
                                                      
                                                   
                                                
                                                (
                                                r
                                                
                                                   
                                                      
                                                   
                                                
                                                p
                                                
                                                   
                                                      ⊕
                                                   
                                                   
                                                      i
                                                   
                                                
                                                r
                                                
                                                   
                                                      
                                                   
                                                
                                                q
                                                )
                                                +
                                                (
                                                p
                                                
                                                   
                                                      
                                                   
                                                
                                                r
                                                
                                                   
                                                      ⊕
                                                   
                                                   
                                                      i
                                                   
                                                
                                                q
                                                
                                                   
                                                      
                                                   
                                                
                                                r
                                                )
                                                +
                                                (
                                                r
                                                |
                                                p
                                                
                                                   
                                                      ⊕
                                                   
                                                   
                                                      i
                                                   
                                                
                                                r
                                                |
                                                q
                                                )
                                             
                                          
                                          
                                             
                                             
                                                
                                                   
                                                      =
                                                   
                                                   
                                                      
                                                         
                                                            A
                                                         
                                                         
                                                            5
                                                            ,
                                                            6
                                                         
                                                      
                                                   
                                                
                                                (
                                                (
                                                (
                                                r
                                                
                                                   
                                                      
                                                   
                                                
                                                p
                                                +
                                                p
                                                
                                                   
                                                      
                                                   
                                                
                                                r
                                                +
                                                r
                                                |
                                                p
                                                )
                                                
                                                   
                                                      ⊕
                                                   
                                                   
                                                      i
                                                   
                                                
                                                (
                                                r
                                                
                                                   
                                                      
                                                   
                                                
                                                p
                                                +
                                                p
                                                
                                                   
                                                      
                                                   
                                                
                                                r
                                                +
                                                r
                                                |
                                                q
                                                )
                                                )
                                                
                                                   
                                                      ⊕
                                                   
                                                   
                                                      i
                                                   
                                                
                                             
                                          
                                          
                                             
                                             
                                                (
                                                (
                                                r
                                                
                                                   
                                                      
                                                   
                                                
                                                p
                                                +
                                                q
                                                
                                                   
                                                      
                                                   
                                                
                                                r
                                                +
                                                r
                                                |
                                                p
                                                )
                                                
                                                   
                                                      ⊕
                                                   
                                                   
                                                      i
                                                   
                                                
                                                (
                                                r
                                                
                                                   
                                                      
                                                   
                                                
                                                p
                                                +
                                                q
                                                
                                                   
                                                      
                                                   
                                                
                                                r
                                                +
                                                r
                                                |
                                                q
                                                )
                                                )
                                                )
                                                
                                                   
                                                      ⊕
                                                   
                                                   
                                                      i
                                                   
                                                
                                             
                                          
                                          
                                             
                                             
                                                (
                                                (
                                                (
                                                r
                                                
                                                   
                                                      
                                                   
                                                
                                                q
                                                +
                                                p
                                                
                                                   
                                                      
                                                   
                                                
                                                r
                                                +
                                                r
                                                |
                                                p
                                                )
                                                
                                                   
                                                      ⊕
                                                   
                                                   
                                                      i
                                                   
                                                
                                                (
                                                r
                                                
                                                   
                                                      
                                                   
                                                
                                                q
                                                +
                                                p
                                                
                                                   
                                                      
                                                   
                                                
                                                r
                                                +
                                                r
                                                |
                                                q
                                                )
                                                )
                                                
                                                   
                                                      ⊕
                                                   
                                                   
                                                      i
                                                   
                                                
                                             
                                          
                                          
                                             
                                             
                                                (
                                                (
                                                r
                                                
                                                   
                                                      
                                                   
                                                
                                                q
                                                +
                                                q
                                                
                                                   
                                                      
                                                   
                                                
                                                r
                                                +
                                                r
                                                |
                                                p
                                                )
                                                
                                                   
                                                      ⊕
                                                   
                                                   
                                                      i
                                                   
                                                
                                                (
                                                r
                                                
                                                   
                                                      
                                                   
                                                
                                                q
                                                +
                                                q
                                                
                                                   
                                                      
                                                   
                                                
                                                r
                                                +
                                                r
                                                |
                                                q
                                                )
                                                )
                                                )
                                             
                                          
                                          
                                             
                                             
                                                
                                                   
                                                      =
                                                   
                                                   
                                                      
                                                         
                                                            N
                                                         
                                                         
                                                            1
                                                            ,
                                                            3
                                                            ,
                                                            5
                                                         
                                                      
                                                   
                                                
                                                (
                                                r
                                                
                                                   
                                                      
                                                   
                                                
                                                p
                                                +
                                                p
                                                
                                                   
                                                      
                                                   
                                                
                                                r
                                                +
                                                r
                                                |
                                                q
                                                )
                                                
                                                   
                                                      ⊕
                                                   
                                                   
                                                      i
                                                   
                                                
                                                (
                                                r
                                                
                                                   
                                                      
                                                   
                                                
                                                q
                                                +
                                                q
                                                
                                                   
                                                      
                                                   
                                                
                                                r
                                                +
                                                r
                                                |
                                                q
                                                )
                                             
                                          
                                          
                                             
                                             
                                                
                                                   
                                                      =
                                                   
                                                   
                                                      
                                                         
                                                            P
                                                         
                                                         
                                                            1
                                                         
                                                      
                                                   
                                                
                                                (
                                                r
                                                ∥
                                                p
                                                )
                                                
                                                   
                                                      ⊕
                                                   
                                                   
                                                      i
                                                   
                                                
                                                (
                                                r
                                                ∥
                                                q
                                                )
                                                .
                                             
                                          
                                       
                                    
                                 
                              
                           

In [13], a set of algebraic laws was provided including 
                           
                              
                                 A
                              
                              
                                 4
                              
                           
                        , 
                           
                              
                                 A
                              
                              
                                 6
                              
                           
                        , 
                           
                              
                                 D
                              
                              
                                 1
                              
                           
                        , and Dri. Their algebraic laws are sensitive to the numbering of variants and the placement of their operands. Therefore, the laws do not support idempotence and commutativity properties of the binary variant (axioms 
                           
                              
                                 A
                              
                              
                                 1
                                 ,
                                 3
                              
                           
                        ). By prohibiting application of axioms 
                           
                              
                                 A
                              
                              
                                 1
                                 ,
                                 2
                              
                           
                         and 
                           
                              
                                 N
                              
                              
                                 6
                              
                           
                         while removing variants with an identical index with the help of axioms 
                           
                              
                                 N
                              
                              
                                 1
                                 −
                                 5
                              
                           
                        , we can rewrite a term into a fully expanded one. Subsequently, with the help of axioms 
                           
                              
                                 A
                              
                              
                                 1
                                 ,
                                 2
                              
                           
                         and 
                           
                              
                                 N
                              
                              
                                 6
                              
                           
                        , our axiomatization becomes insensitive to the placement of operands in binary variants or binary variant indices.

We prove that the axiomatization in Tables 1 and 2 is ground-complete for PL-CCS terms with finite-state models modulo product line bisimilarity. Following the approach of [17], to restrict to PL-CCS terms with finite-state transition systems, we provide a syntactical restriction for constants 
                           〈
                           A
                           |
                           E
                           〉
                        . We consider so-called finite-state PL-CCS, denoted by 
                           
                              PL
                           
                           -
                           
                              
                                 CCS
                              
                              
                                 f
                              
                           
                        , which is obtained by extending PL-CCS with essentially finite-state recursive specifications: a recursive specification E is essentially finite-state, if it has only finitely many equations and in the right-hand sides of all equations of E, no process name occurs in the scope of static operators, namely, parallel composition, left- and communication merge, restriction, and renaming operators.

For instance, PL-CCS term 
                           〈
                           Y
                           |
                           {
                           Y
                           
                              =
                              
                                 def
                              
                           
                           (
                           a
                           .
                           0
                           
                              
                                 ⊕
                              
                              
                                 1
                              
                           
                           b
                           .
                           0
                           )
                           ∥
                           c
                           .
                           Y
                           }
                           〉
                         is not a finite-state PL-CCS process. To see this, observe that it can derive the sequence of transitions 
                           〈
                           Y
                           |
                           {
                           Y
                           
                              =
                              
                                 def
                              
                           
                           (
                           a
                           .
                           0
                           
                              
                                 ⊕
                              
                              
                                 1
                              
                           
                           b
                           .
                           0
                           )
                           ∥
                           c
                           .
                           Y
                           }
                           〉
                           
                              →
                              
                                 c
                                 ,
                                 〈
                                 ?
                                 〉
                              
                           
                           (
                           a
                           .
                           0
                           
                              
                                 ⊕
                              
                              
                                 1
                              
                           
                           b
                           .
                           0
                           )
                           ∥
                           〈
                           Y
                           |
                           {
                           Y
                           
                              =
                              
                                 def
                              
                           
                           (
                           a
                           .
                           0
                           
                              
                                 ⊕
                              
                              
                                 1
                              
                           
                           b
                           .
                           0
                           )
                           ∥
                           c
                           .
                           Y
                           }
                           〉
                           
                              →
                              
                                 c
                                 〈
                                 ?
                                 〉
                              
                           
                           (
                           a
                           .
                           0
                           
                              
                                 ⊕
                              
                              
                                 1
                              
                           
                           b
                           .
                           0
                           )
                           ∥
                           (
                           a
                           .
                           0
                           
                              
                                 ⊕
                              
                              
                                 1
                              
                           
                           b
                           .
                           0
                           )
                           ∥
                           〈
                           Y
                           |
                           {
                           Y
                           
                              =
                              
                                 def
                              
                           
                           (
                           a
                           .
                           0
                           
                              
                                 ⊕
                              
                              
                                 1
                              
                           
                           b
                           .
                           0
                           )
                           ∥
                           c
                           .
                           Y
                           }
                           〉
                           
                              →
                              
                                 c
                                 ,
                                 〈
                                 ?
                                 〉
                              
                           
                           …
                        , which leads to an infinite state space. This sequence results from the occurrence of process name Y in the context of a parallel composition.


                        
                           Proposition 15
                           Finite-state behaviors


                           
                              Consider a 
                              
                                 
                                    PL
                                 
                                 
                                    -
                                 
                                 
                                    
                                       CCS
                                    
                                    
                                       f
                                    
                                 
                               
                              term t; the transition system for t generated by the operational rules has only finitely many states.
                           

This Proposition can be proved by resolving the binary variants, which are finite. Therefore, a finite set of CCS terms are derived such that each CCS term generates finitely many states [22].


                        
                           Theorem 16
                           Completeness


                           
                              The axiomatization, given in 
                              
                                 Tables 1 and 2
                               
                              is ground-complete for the term algebra 
                              
                                 P
                                 (
                                 
                                    PL
                                 
                                 
                                    -
                                 
                                 
                                    
                                       CCS
                                    
                                    
                                       f
                                    
                                 
                                 )
                                 /
                                 
                                    
                                       ≃
                                    
                                    
                                       PL
                                    
                                 
                              
                              , i.e., for all closed finite-state 
                              
                                 
                                    PL
                                 
                                 
                                    -
                                 
                                 
                                    
                                       CCS
                                    
                                    
                                       f
                                    
                                 
                               
                              terms 
                              
                                 
                                    
                                       t
                                    
                                    
                                       1
                                    
                                 
                               
                              and 
                              
                                 
                                    
                                       t
                                    
                                    
                                       2
                                    
                                 
                              
                              , 
                              
                                 
                                    
                                       t
                                    
                                    
                                       1
                                    
                                 
                                 
                                    
                                       ≃
                                    
                                    
                                       PL
                                    
                                 
                                 
                                    
                                       t
                                    
                                    
                                       2
                                    
                                 
                               
                              implies 
                              
                                 
                                    
                                       t
                                    
                                    
                                       1
                                    
                                 
                                 =
                                 
                                    
                                       t
                                    
                                    
                                       2
                                    
                                 
                              
                              .
                           

See Appendix D for the proof.

The advantage of our sound and complete axiomatization is that we can prove equality of PL-CCS terms at a syntactic level by transforming one term to another. Hence, one does not need to generate the huge state space, which was required to check the notions of bisimilarity introduced in Section 3. This process can be facilitated and mechanized with the help of theorem provers, or term rewriting systems. Consequently, terms can be transformed by our axiomatization into a basic form, such as linear process specifications in the mCRL2 language [24,25], over which different analyses can be performed, either manually or using tools. This basic form acts as a symbolic representation of the state space of a model, which is comparatively small. A set of tools such as model checker, state space visualizer, and behavioral simulator exist that run over this basic representation and can be adapted to our setting. Furthermore, a number of optimization approaches such as τ-confluence reduction [26], that work on the level of this basic format, can simplify it prior to any analysis. The transformation process into a basic form can be mechanized in the same way as [27] within a small amount of time. Similarly, PL-CCS terms can be reduced to their possible products (which are simple CCS terms) in a syntactic way to be validated in terms of their intended properties.

A formal framework for modeling and analyzing SPLs should support modular design, derivation (configuration) of individual systems from a product line model, and restructuring them into various syntactic forms [13]. Our process theory supports them all. In our case, we support a few different forms of restructuring: for example, we support “moving variation points throughout the hierarchical specification of an SPL towards its leaves or its root” [13]. We also support “modeling individual systems using a higher or lower degree of common parts” [13]. Therefore, a designer can model the functionality of an SPL irrespective of the existing components. Later with the aim of reuse, the functionality can be restructured to behaviors for which appropriate components exist. A restructuring mechanism is also appealing when a new functionality (which corresponds to a new feature) is added. We illustrate how our framework supports deriving products or restructuring of SPLs in following sections.

Using our axiomatization, one can derive the products of a family, i.e., rewrite a process term into a term which comprises binary variants of CCS terms.


                        
                           Example 17
                           For instance, consider CCS terms p, q, and s (which naturally do not contain the binary variant operator); the family 
                                 (
                                 q
                                 
                                    
                                       ⊕
                                    
                                    
                                       1
                                    
                                 
                                 (
                                 a
                                 .
                                 (
                                 s
                                 
                                    
                                       ⊕
                                    
                                    
                                       2
                                    
                                 
                                 p
                                 )
                                 )
                                 )
                                 
                                    
                                       ⊕
                                    
                                    
                                       3
                                    
                                 
                                 a
                                 .
                                 s
                               can generate three pairwise non-bisimilar products:
                                 
                                    
                                       
                                          
                                             
                                                (
                                                q
                                                
                                                   
                                                      ⊕
                                                   
                                                   
                                                      1
                                                   
                                                
                                             
                                             
                                                (
                                                a
                                                .
                                                (
                                                s
                                                
                                                   
                                                      ⊕
                                                   
                                                   
                                                      2
                                                   
                                                
                                                p
                                                )
                                                )
                                                )
                                                
                                                   
                                                      ⊕
                                                   
                                                   
                                                      3
                                                   
                                                
                                                a
                                                .
                                                s
                                                
                                                   
                                                      =
                                                   
                                                   
                                                      
                                                         
                                                            A
                                                         
                                                         
                                                            2
                                                         
                                                      
                                                   
                                                
                                             
                                          
                                          
                                             
                                             
                                                q
                                                
                                                   
                                                      ⊕
                                                   
                                                   
                                                      1
                                                   
                                                
                                                (
                                                (
                                                a
                                                .
                                                (
                                                s
                                                
                                                   
                                                      ⊕
                                                   
                                                   
                                                      2
                                                   
                                                
                                                p
                                                )
                                                )
                                                
                                                   
                                                      ⊕
                                                   
                                                   
                                                      3
                                                   
                                                
                                                a
                                                .
                                                s
                                                )
                                                
                                                   
                                                      =
                                                   
                                                   
                                                      
                                                         
                                                            A
                                                         
                                                         
                                                            4
                                                         
                                                      
                                                   
                                                
                                                q
                                                
                                                   
                                                      ⊕
                                                   
                                                   
                                                      1
                                                   
                                                
                                                (
                                                (
                                                a
                                                .
                                                s
                                                
                                                   
                                                      ⊕
                                                   
                                                   
                                                      2
                                                   
                                                
                                                a
                                                .
                                                p
                                                )
                                                
                                                   
                                                      ⊕
                                                   
                                                   
                                                      3
                                                   
                                                
                                                a
                                                .
                                                s
                                                )
                                                
                                                   
                                                      =
                                                   
                                                   
                                                      
                                                         
                                                            A
                                                         
                                                         
                                                            1
                                                         
                                                      
                                                   
                                                
                                             
                                          
                                          
                                             
                                             
                                                q
                                                
                                                   
                                                      ⊕
                                                   
                                                   
                                                      1
                                                   
                                                
                                                (
                                                (
                                                a
                                                .
                                                p
                                                
                                                   
                                                      ⊕
                                                   
                                                   
                                                      2
                                                   
                                                
                                                a
                                                .
                                                s
                                                )
                                                
                                                   
                                                      ⊕
                                                   
                                                   
                                                      3
                                                   
                                                
                                                a
                                                .
                                                s
                                                )
                                                
                                                   
                                                      =
                                                   
                                                   
                                                      
                                                         
                                                            A
                                                         
                                                         
                                                            2
                                                         
                                                      
                                                   
                                                
                                                q
                                                
                                                   
                                                      ⊕
                                                   
                                                   
                                                      1
                                                   
                                                
                                                (
                                                a
                                                .
                                                p
                                                
                                                   
                                                      ⊕
                                                   
                                                   
                                                      2
                                                   
                                                
                                                (
                                                a
                                                .
                                                s
                                                
                                                   
                                                      ⊕
                                                   
                                                   
                                                      3
                                                   
                                                
                                                a
                                                .
                                                s
                                                )
                                                )
                                                
                                                   
                                                      =
                                                   
                                                   
                                                      
                                                         
                                                            A
                                                         
                                                         
                                                            3
                                                         
                                                      
                                                   
                                                
                                             
                                          
                                          
                                             
                                             
                                                q
                                                
                                                   
                                                      ⊕
                                                   
                                                   
                                                      1
                                                   
                                                
                                                (
                                                a
                                                .
                                                p
                                                
                                                   
                                                      ⊕
                                                   
                                                   
                                                      2
                                                   
                                                
                                                a
                                                .
                                                s
                                                )
                                             
                                          
                                       
                                    
                                 
                              
                           


                        
                           Example 18
                           We can compare product lines 
                                 〈
                                 
                                    
                                       p
                                    
                                    
                                       1
                                    
                                 
                                 |
                                 {
                                 
                                    
                                       p
                                    
                                    
                                       1
                                    
                                 
                                 
                                    =
                                    
                                       def
                                    
                                 
                                 
                                    
                                       p
                                    
                                    
                                       2
                                    
                                 
                                 ∥
                                 
                                    
                                       p
                                    
                                    
                                       2
                                    
                                 
                                 ,
                                 
                                 
                                    
                                       p
                                    
                                    
                                       2
                                    
                                 
                                 
                                    =
                                    
                                       def
                                    
                                 
                                 b
                                 .
                                 0
                                 
                                    
                                       ⊕
                                    
                                    
                                       1
                                    
                                 
                                 c
                                 .
                                 0
                                 }
                                 〉
                               and 
                                 〈
                                 
                                    
                                       p
                                    
                                    
                                       1
                                    
                                    
                                       ′
                                    
                                 
                                 |
                                 {
                                 
                                    
                                       p
                                    
                                    
                                       1
                                    
                                    
                                       ′
                                    
                                 
                                 
                                    =
                                    
                                       def
                                    
                                 
                                 b
                                 .
                                 0
                                 
                                    
                                       ⊕
                                    
                                    
                                       1
                                    
                                 
                                 c
                                 .
                                 0
                                 ∥
                                 b
                                 .
                                 0
                                 
                                    
                                       ⊕
                                    
                                    
                                       2
                                    
                                 
                                 c
                                 .
                                 0
                                 }
                                 〉
                              . 
                                 
                                    
                                       p
                                    
                                    
                                       1
                                    
                                 
                               generates two non-bisimilar products, while 
                                 
                                    
                                       p
                                    
                                    
                                       1
                                    
                                    
                                       ′
                                    
                                 
                               generates three pairwise non-bisimilar products, concluding 
                                 
                                    
                                       p
                                    
                                    
                                       1
                                    
                                 
                                 ≠
                                 
                                    
                                       p
                                    
                                    
                                       1
                                    
                                    
                                       ′
                                    
                                 
                              . To see this, observe the following derivations:
                                 
                                    
                                       
                                          
                                             
                                                
                                                   
                                                      
                                                         p
                                                      
                                                      
                                                         1
                                                      
                                                   
                                                
                                                
                                                   
                                                      
                                                         =
                                                      
                                                      
                                                         
                                                            UnFold
                                                         
                                                      
                                                   
                                                
                                                
                                                   〈
                                                   
                                                      
                                                         p
                                                      
                                                      
                                                         2
                                                      
                                                   
                                                   |
                                                   {
                                                   
                                                      
                                                         p
                                                      
                                                      
                                                         1
                                                      
                                                   
                                                   
                                                      =
                                                      
                                                         def
                                                      
                                                   
                                                   
                                                      
                                                         p
                                                      
                                                      
                                                         2
                                                      
                                                   
                                                   ∥
                                                   
                                                      
                                                         p
                                                      
                                                      
                                                         2
                                                      
                                                   
                                                   ,
                                                
                                             
                                             
                                                
                                                
                                                
                                                   
                                                   
                                                      
                                                         p
                                                      
                                                      
                                                         2
                                                      
                                                   
                                                   
                                                      =
                                                      
                                                         def
                                                      
                                                   
                                                   b
                                                   .
                                                   0
                                                   
                                                      
                                                         ⊕
                                                      
                                                      
                                                         1
                                                      
                                                   
                                                   c
                                                   .
                                                   0
                                                   }
                                                   〉
                                                   ∥
                                                   〈
                                                   
                                                      
                                                         p
                                                      
                                                      
                                                         2
                                                      
                                                   
                                                   |
                                                   {
                                                   
                                                      
                                                         p
                                                      
                                                      
                                                         1
                                                      
                                                   
                                                   
                                                      =
                                                      
                                                         def
                                                      
                                                   
                                                   
                                                      
                                                         p
                                                      
                                                      
                                                         2
                                                      
                                                   
                                                   ∥
                                                   
                                                      
                                                         p
                                                      
                                                      
                                                         2
                                                      
                                                   
                                                   ,
                                                   
                                                   
                                                      
                                                         p
                                                      
                                                      
                                                         2
                                                      
                                                   
                                                   
                                                      =
                                                      
                                                         def
                                                      
                                                   
                                                   b
                                                   .
                                                   0
                                                   
                                                      
                                                         ⊕
                                                      
                                                      
                                                         1
                                                      
                                                   
                                                   c
                                                   .
                                                   0
                                                   }
                                                   〉
                                                
                                             
                                             
                                                
                                                
                                                   
                                                      
                                                         =
                                                      
                                                      
                                                         
                                                            UnFold
                                                         
                                                      
                                                   
                                                
                                                
                                                   (
                                                   b
                                                   .
                                                   0
                                                   
                                                      
                                                         ⊕
                                                      
                                                      
                                                         1
                                                      
                                                   
                                                   c
                                                   .
                                                   0
                                                   )
                                                   ∥
                                                   (
                                                   b
                                                   .
                                                   0
                                                   
                                                      
                                                         ⊕
                                                      
                                                      
                                                         1
                                                      
                                                   
                                                   c
                                                   .
                                                   0
                                                   )
                                                
                                             
                                             
                                                
                                                
                                                   
                                                      
                                                         =
                                                      
                                                      
                                                         
                                                            
                                                               P
                                                            
                                                            
                                                               1
                                                            
                                                         
                                                         ,
                                                         
                                                            
                                                               C
                                                            
                                                            
                                                               3
                                                            
                                                         
                                                      
                                                   
                                                
                                                
                                                   (
                                                   (
                                                   b
                                                   .
                                                   0
                                                   
                                                      
                                                         ⊕
                                                      
                                                      
                                                         1
                                                      
                                                   
                                                   c
                                                   .
                                                   0
                                                   )
                                                   
                                                      
                                                         
                                                      
                                                   
                                                   (
                                                   b
                                                   .
                                                   0
                                                   
                                                      
                                                         ⊕
                                                      
                                                      
                                                         1
                                                      
                                                   
                                                   c
                                                   .
                                                   0
                                                   )
                                                   )
                                                   +
                                                   (
                                                   (
                                                   b
                                                   .
                                                   0
                                                   
                                                      
                                                         ⊕
                                                      
                                                      
                                                         1
                                                      
                                                   
                                                   c
                                                   .
                                                   0
                                                   )
                                                   |
                                                   (
                                                   b
                                                   .
                                                   0
                                                   
                                                      
                                                         ⊕
                                                      
                                                      
                                                         1
                                                      
                                                   
                                                   c
                                                   .
                                                   0
                                                   )
                                                   )
                                                
                                             
                                             
                                                
                                                
                                                   
                                                      
                                                         =
                                                      
                                                      
                                                         
                                                            
                                                               P
                                                            
                                                            
                                                               4
                                                               ,
                                                               5
                                                            
                                                         
                                                         ,
                                                         
                                                            
                                                               S
                                                            
                                                            
                                                               3
                                                            
                                                         
                                                      
                                                   
                                                
                                                
                                                   (
                                                   (
                                                   b
                                                   .
                                                   0
                                                   
                                                      
                                                         
                                                      
                                                   
                                                   b
                                                   .
                                                   0
                                                   
                                                      
                                                         ⊕
                                                      
                                                      
                                                         1
                                                      
                                                   
                                                   c
                                                   .
                                                   0
                                                   
                                                      
                                                         
                                                      
                                                   
                                                   b
                                                   .
                                                   0
                                                   )
                                                   
                                                      
                                                         ⊕
                                                      
                                                      
                                                         1
                                                      
                                                   
                                                   (
                                                   b
                                                   .
                                                   0
                                                   
                                                      
                                                         
                                                      
                                                   
                                                   c
                                                   .
                                                   0
                                                   
                                                      
                                                         ⊕
                                                      
                                                      
                                                         1
                                                      
                                                   
                                                   c
                                                   .
                                                   0
                                                   
                                                      
                                                         
                                                      
                                                   
                                                   c
                                                   .
                                                   0
                                                   )
                                                   )
                                                   +
                                                
                                             
                                             
                                                
                                                
                                                
                                                   (
                                                   (
                                                   b
                                                   .
                                                   0
                                                   |
                                                   b
                                                   .
                                                   0
                                                   
                                                      
                                                         ⊕
                                                      
                                                      
                                                         1
                                                      
                                                   
                                                   c
                                                   .
                                                   0
                                                   |
                                                   b
                                                   .
                                                   0
                                                   )
                                                   
                                                      
                                                         ⊕
                                                      
                                                      
                                                         1
                                                      
                                                   
                                                   (
                                                   b
                                                   .
                                                   0
                                                   |
                                                   c
                                                   .
                                                   0
                                                   
                                                      
                                                         ⊕
                                                      
                                                      
                                                         1
                                                      
                                                   
                                                   c
                                                   .
                                                   0
                                                   |
                                                   c
                                                   .
                                                   0
                                                   )
                                                   )
                                                
                                             
                                             
                                                
                                                
                                                   
                                                      
                                                         =
                                                      
                                                      
                                                         
                                                            
                                                               N
                                                            
                                                            
                                                               1
                                                            
                                                         
                                                         ,
                                                         3
                                                         ,
                                                         5
                                                      
                                                   
                                                
                                                
                                                   (
                                                   b
                                                   .
                                                   0
                                                   
                                                      
                                                         
                                                      
                                                   
                                                   b
                                                   .
                                                   0
                                                   )
                                                   
                                                      
                                                         ⊕
                                                      
                                                      
                                                         1
                                                      
                                                   
                                                   (
                                                   c
                                                   .
                                                   0
                                                   
                                                      
                                                         
                                                      
                                                   
                                                   c
                                                   .
                                                   0
                                                   )
                                                   +
                                                   (
                                                   b
                                                   .
                                                   0
                                                   |
                                                   b
                                                   .
                                                   0
                                                   )
                                                   
                                                      
                                                         ⊕
                                                      
                                                      
                                                         1
                                                      
                                                   
                                                   (
                                                   c
                                                   .
                                                   0
                                                   |
                                                   c
                                                   .
                                                   0
                                                   )
                                                
                                             
                                             
                                                
                                                
                                                   
                                                      
                                                         =
                                                      
                                                      
                                                         
                                                            
                                                               P
                                                            
                                                            
                                                               2
                                                            
                                                         
                                                         ,
                                                         
                                                            
                                                               S
                                                            
                                                            
                                                               5
                                                            
                                                         
                                                         ,
                                                         
                                                            
                                                               C
                                                            
                                                            
                                                               3
                                                               ,
                                                               4
                                                            
                                                         
                                                      
                                                   
                                                
                                                
                                                   b
                                                   .
                                                   (
                                                   0
                                                   ∥
                                                   b
                                                   .
                                                   0
                                                   )
                                                   
                                                      
                                                         ⊕
                                                      
                                                      
                                                         1
                                                      
                                                   
                                                   c
                                                   .
                                                   (
                                                   0
                                                   ∥
                                                   c
                                                   .
                                                   0
                                                   )
                                                
                                             
                                             
                                                
                                                
                                                   
                                                      
                                                         =
                                                      
                                                      
                                                         
                                                            
                                                               P
                                                            
                                                            
                                                               1
                                                               ,
                                                               6
                                                            
                                                         
                                                         ,
                                                         
                                                            
                                                               S
                                                            
                                                            
                                                               6
                                                            
                                                         
                                                      
                                                   
                                                
                                                
                                                   b
                                                   .
                                                   b
                                                   .
                                                   0
                                                   
                                                      
                                                         ⊕
                                                      
                                                      
                                                         1
                                                      
                                                   
                                                   c
                                                   .
                                                   c
                                                   .
                                                   0
                                                
                                             
                                          
                                       
                                    
                                 
                              
                              
                                 
                                    
                                       
                                          
                                             
                                                
                                                   
                                                      
                                                         p
                                                      
                                                      
                                                         1
                                                      
                                                      
                                                         ′
                                                      
                                                   
                                                
                                                
                                                   
                                                      
                                                         =
                                                      
                                                      
                                                         
                                                            UnFold
                                                         
                                                      
                                                   
                                                
                                                
                                                   (
                                                   b
                                                   .
                                                   0
                                                   
                                                      
                                                         ⊕
                                                      
                                                      
                                                         1
                                                      
                                                   
                                                   c
                                                   .
                                                   0
                                                   )
                                                   ∥
                                                   (
                                                   b
                                                   .
                                                   0
                                                   
                                                      
                                                         ⊕
                                                      
                                                      
                                                         2
                                                      
                                                   
                                                   c
                                                   .
                                                   0
                                                   )
                                                
                                             
                                             
                                                
                                                
                                                   
                                                      
                                                         =
                                                      
                                                      
                                                         
                                                            
                                                               D
                                                            
                                                            
                                                               1
                                                               ,
                                                               2
                                                            
                                                         
                                                      
                                                   
                                                
                                                
                                                   (
                                                   (
                                                   b
                                                   .
                                                   0
                                                   ∥
                                                   b
                                                   .
                                                   0
                                                   )
                                                   
                                                      
                                                         ⊕
                                                      
                                                      
                                                         2
                                                      
                                                   
                                                   (
                                                   b
                                                   .
                                                   0
                                                   ∥
                                                   c
                                                   .
                                                   0
                                                   )
                                                   )
                                                   
                                                      
                                                         ⊕
                                                      
                                                      
                                                         1
                                                      
                                                   
                                                   (
                                                   (
                                                   c
                                                   .
                                                   0
                                                   ∥
                                                   b
                                                   .
                                                   0
                                                   )
                                                   
                                                      
                                                         ⊕
                                                      
                                                      
                                                         2
                                                      
                                                   
                                                   (
                                                   c
                                                   .
                                                   0
                                                   ∥
                                                   c
                                                   .
                                                   0
                                                   )
                                                   )
                                                
                                             
                                             
                                                
                                                
                                                   
                                                      
                                                         =
                                                      
                                                      
                                                         
                                                            
                                                               P
                                                            
                                                            
                                                               1
                                                               ,
                                                               6
                                                            
                                                         
                                                         ,
                                                         
                                                            
                                                               S
                                                            
                                                            
                                                               6
                                                            
                                                         
                                                      
                                                   
                                                
                                                
                                                   (
                                                   b
                                                   .
                                                   b
                                                   .
                                                   0
                                                   
                                                      
                                                         ⊕
                                                      
                                                      
                                                         2
                                                      
                                                   
                                                   (
                                                   b
                                                   .
                                                   c
                                                   .
                                                   0
                                                   +
                                                   c
                                                   .
                                                   b
                                                   .
                                                   0
                                                   )
                                                   )
                                                   
                                                      
                                                         ⊕
                                                      
                                                      
                                                         1
                                                      
                                                   
                                                   (
                                                   (
                                                   c
                                                   .
                                                   b
                                                   .
                                                   0
                                                   +
                                                   b
                                                   .
                                                   c
                                                   .
                                                   0
                                                   )
                                                   
                                                      
                                                         ⊕
                                                      
                                                      
                                                         2
                                                      
                                                   
                                                   c
                                                   .
                                                   c
                                                   .
                                                   0
                                                   )
                                                
                                             
                                             
                                                
                                                
                                                   
                                                      
                                                         =
                                                      
                                                      
                                                         
                                                            
                                                               A
                                                            
                                                            
                                                               1
                                                               −
                                                               3
                                                            
                                                         
                                                         ,
                                                         
                                                            
                                                               C
                                                            
                                                            
                                                               1
                                                            
                                                         
                                                      
                                                   
                                                
                                                
                                                   b
                                                   .
                                                   b
                                                   .
                                                   0
                                                   
                                                      
                                                         ⊕
                                                      
                                                      
                                                         1
                                                      
                                                   
                                                   (
                                                   (
                                                   b
                                                   .
                                                   c
                                                   .
                                                   0
                                                   +
                                                   c
                                                   .
                                                   b
                                                   .
                                                   0
                                                   )
                                                   
                                                      
                                                         ⊕
                                                      
                                                      
                                                         2
                                                      
                                                   
                                                   c
                                                   .
                                                   c
                                                   .
                                                   0
                                                   )
                                                
                                             
                                          
                                       
                                    
                                 
                              
                           

Next, we show that every PL-CCS term can be rewritten into a normal form comprising binary choices over CCS products.


                        
                           Theorem 19
                           
                              Let 
                              
                                 
                                    
                                       ⨁
                                    
                                    
                                       i
                                       ≤
                                       n
                                    
                                 
                                 
                                    
                                       p
                                    
                                    
                                       i
                                    
                                 
                               
                              denote 
                              
                                 (
                                 
                                    
                                       p
                                    
                                    
                                       0
                                    
                                 
                                 
                                    
                                       ⊕
                                    
                                    
                                       1
                                    
                                 
                                 (
                                 
                                    
                                       p
                                    
                                    
                                       1
                                    
                                 
                                 
                                    
                                       ⊕
                                    
                                    
                                       2
                                    
                                 
                                 (
                                 …
                                 
                                    
                                       ⊕
                                    
                                    
                                       n
                                    
                                 
                                 
                                    
                                       p
                                    
                                    
                                       n
                                    
                                 
                                 )
                                 …
                                 )
                                 )
                               
                              if 
                              
                                 n
                                 >
                                 0
                              
                              , and 
                              
                                 
                                    
                                       p
                                    
                                    
                                       0
                                    
                                 
                               
                              if 
                              
                                 n
                                 =
                                 0
                              
                              . Using the axiomatization in 
                              
                                 Tables 1 and 2
                              
                              , each PL-CCS term t can be rewritten into the form 
                              
                                 
                                    
                                       ⨁
                                    
                                    
                                       i
                                       ≤
                                       n
                                    
                                 
                                 
                                    
                                       p
                                    
                                    
                                       i
                                    
                                 
                              
                              , where 
                              
                                 
                                    
                                       p
                                    
                                    
                                       i
                                    
                                 
                              
                              s are CCS processes.
                           

See Appendix B for the proof. With the help of axioms 
                           
                              
                                 A
                              
                              
                                 4
                                 −
                                 6
                              
                           
                        , 
                           
                              
                                 D
                              
                              
                                 1
                                 ,
                                 2
                              
                           
                        , 
                           
                              
                                 P
                              
                              
                                 4
                                 ,
                                 5
                              
                           
                        , 
                           
                              
                                 S
                              
                              
                                 1
                                 ,
                                 3
                              
                           
                        , 
                           
                              
                                 R
                              
                              
                                 3
                              
                           
                        , 
                           
                              
                                 E
                              
                              
                                 5
                              
                           
                        , and Dri, one can convert a PL-CCS term into another term such that its binary variants do not occur in scope of any CCS operators. Later by axiom 
                           
                              
                                 N
                              
                              
                                 1
                                 −
                                 6
                              
                           
                        , the indices of variants become unique. Therefore, by 
                           
                              
                                 A
                              
                              
                                 1
                                 ,
                                 2
                              
                           
                        , it can be rewritten into the desired format.

With the help of our axiomatization, we can factorize the common parts and simplify the structure of product line terms. We can also identify the mandatory parts of a product line; the parts that exist in any product.


                        
                           Example 20
                           Consider a Sensor process that is replicated in different parts of a car windscreen WindScreen, such as wiper WipFam and fog remover FogFam 
                              [12]:
                                 
                                    
                                       
                                          
                                             
                                                
                                                   
                                                      WindScreen
                                                   
                                                   
                                                      =
                                                      
                                                         def
                                                      
                                                   
                                                   
                                                      WipFam
                                                   
                                                   
                                                      
                                                         ⊕
                                                      
                                                      
                                                         1
                                                      
                                                   
                                                   
                                                      FogFam
                                                   
                                                
                                             
                                             
                                                
                                                   
                                                      WipFam
                                                   
                                                   
                                                      =
                                                      
                                                         def
                                                      
                                                   
                                                   
                                                      Sensor
                                                   
                                                   ∥
                                                   
                                                      Wiper
                                                   
                                                
                                             
                                             
                                                
                                                   
                                                      FogFam
                                                   
                                                   
                                                      =
                                                      
                                                         def
                                                      
                                                   
                                                   
                                                      Sensor
                                                   
                                                   ∥
                                                   
                                                      FogRem
                                                   
                                                
                                             
                                          
                                       
                                    
                                 
                               where Sensor detects the different conditions of precipitation, Wiper and FogRem offer different operational modes for wiper arm movement, and windscreen warmer concerning environmental conditions, respectively. Using our axioms, WindScreen specification is restructured as follows:
                                 
                                    
                                       
                                          
                                             
                                                
                                                   
                                                      WindScreen
                                                   
                                                   
                                                      =
                                                      
                                                         def
                                                      
                                                   
                                                   
                                                      WipFam
                                                   
                                                   
                                                      
                                                         ⊕
                                                      
                                                      
                                                         1
                                                      
                                                   
                                                   
                                                      FogFam
                                                   
                                                
                                             
                                             
                                                
                                                   
                                                   
                                                      
                                                         =
                                                      
                                                      
                                                         
                                                            UnFold
                                                         
                                                      
                                                   
                                                   (
                                                   
                                                      Sensor
                                                   
                                                   ∥
                                                   
                                                      Wiper
                                                   
                                                   )
                                                   
                                                      
                                                         ⊕
                                                      
                                                      
                                                         1
                                                      
                                                   
                                                   (
                                                   
                                                      Sensor
                                                   
                                                   ∥
                                                   
                                                      FogRem
                                                   
                                                   )
                                                
                                             
                                             
                                                
                                                   
                                                   
                                                      
                                                         =
                                                      
                                                      
                                                         
                                                            
                                                               D
                                                            
                                                            
                                                               1
                                                            
                                                         
                                                      
                                                   
                                                   
                                                      Sensor
                                                   
                                                   ∥
                                                   (
                                                   
                                                      Wiper
                                                   
                                                   
                                                      
                                                         ⊕
                                                      
                                                      
                                                         1
                                                      
                                                   
                                                   
                                                      FogRem
                                                   
                                                   )
                                                
                                             
                                          
                                       
                                    
                                 
                               The new specification for WindScreen reveals that Sensor is the mandatory part of our windscreen family. The structural specification (i.e., the architecture) of WindScreen consists of two components, a Sensor and a component, which can be either Wiper or FogRem.

Assume that the Sensor has two qualities, namely, high and low. The low quality sensor cannot distinguish between heavy and little rain (specified by hvy and ltl actions) and can only discriminate between no rain and rain 
                              [12]. The high quality sensor can, however, make such distinctions as specified below:
                                 
                                    
                                       
                                          
                                             
                                                
                                                   
                                                      Sensor
                                                   
                                                   
                                                      =
                                                      
                                                         def
                                                      
                                                   
                                                   
                                                      SensL
                                                   
                                                   
                                                      
                                                         ⊕
                                                      
                                                      
                                                         2
                                                      
                                                   
                                                   
                                                      SensH
                                                   
                                                
                                             
                                             
                                                
                                                   
                                                      SensL
                                                   
                                                   
                                                      =
                                                      
                                                         def
                                                      
                                                   
                                                   
                                                      non
                                                   
                                                   .
                                                   
                                                      SensL
                                                   
                                                   +
                                                   
                                                      ltl
                                                   
                                                   .
                                                   
                                                      Raining
                                                   
                                                   +
                                                   
                                                      hvy
                                                   
                                                   .
                                                   
                                                      Raining
                                                   
                                                   +
                                                   
                                                      
                                                         noRain
                                                      
                                                      ‾
                                                   
                                                   .
                                                   
                                                      SensL
                                                   
                                                
                                             
                                             
                                                
                                                   
                                                      Raining
                                                   
                                                   
                                                      =
                                                      
                                                         def
                                                      
                                                   
                                                   
                                                      non
                                                   
                                                   .
                                                   
                                                      SensL
                                                   
                                                   +
                                                   
                                                      ltl
                                                   
                                                   .
                                                   
                                                      Raining
                                                   
                                                   +
                                                   
                                                      hvy
                                                   
                                                   .
                                                   
                                                      Raining
                                                   
                                                   +
                                                   
                                                      
                                                         rain
                                                      
                                                      ‾
                                                   
                                                   .
                                                   
                                                      Raining
                                                   
                                                
                                             
                                             
                                                
                                                   
                                                      SensH
                                                   
                                                   
                                                      =
                                                      
                                                         def
                                                      
                                                   
                                                   
                                                      non
                                                   
                                                   .
                                                   
                                                      SensH
                                                   
                                                   +
                                                   
                                                      ltl
                                                   
                                                   .
                                                   
                                                      Medium
                                                   
                                                   +
                                                   
                                                      hvy
                                                   
                                                   .
                                                   
                                                      Heavy
                                                   
                                                   +
                                                   
                                                      
                                                         noRain
                                                      
                                                      ‾
                                                   
                                                   .
                                                   
                                                      SensH
                                                   
                                                
                                             
                                             
                                                
                                                   
                                                      Medium
                                                   
                                                   
                                                      =
                                                      
                                                         def
                                                      
                                                   
                                                   
                                                      non
                                                   
                                                   .
                                                   
                                                      SensH
                                                   
                                                   +
                                                   
                                                      ltl
                                                   
                                                   .
                                                   
                                                      Medium
                                                   
                                                   +
                                                   
                                                      hvy
                                                   
                                                   .
                                                   
                                                      Heavy
                                                   
                                                   +
                                                   
                                                      
                                                         rain
                                                      
                                                      ‾
                                                   
                                                   .
                                                   
                                                      Medium
                                                   
                                                
                                             
                                             
                                                
                                                   
                                                      Heavy
                                                   
                                                   
                                                      =
                                                      
                                                         def
                                                      
                                                   
                                                   
                                                      non
                                                   
                                                   .
                                                   
                                                      SensH
                                                   
                                                   +
                                                   
                                                      ltl
                                                   
                                                   .
                                                   
                                                      Medium
                                                   
                                                   +
                                                   
                                                      hvy
                                                   
                                                   .
                                                   
                                                      Heavy
                                                   
                                                   +
                                                   
                                                      
                                                         hvyRain
                                                      
                                                      ‾
                                                   
                                                   .
                                                   
                                                      Heavy
                                                   
                                                
                                             
                                          
                                       
                                    
                                 
                              
                           

The specification of Sensor can be similarly examined to reveal the common behaviors. To this aim, we first restructure 
                                 
                                    SensL
                                 
                                 
                                    
                                       ⊕
                                    
                                    
                                       2
                                    
                                 
                                 
                                    SensH
                                 
                               to factor out the common behaviors:
                                 
                                    
                                       
                                          
                                             
                                                
                                                   SensL
                                                
                                             
                                             
                                                
                                                   
                                                      ⊕
                                                   
                                                   
                                                      2
                                                   
                                                
                                                
                                                   SensH
                                                
                                                
                                                   
                                                      =
                                                   
                                                   
                                                      
                                                         UnFold
                                                      
                                                   
                                                
                                             
                                          
                                          
                                             
                                             
                                                (
                                                
                                                   non
                                                
                                                .
                                                
                                                   SensL
                                                
                                                +
                                                
                                                   ltl
                                                
                                                .
                                                
                                                   Raining
                                                
                                                +
                                                
                                                   hvy
                                                
                                                .
                                                
                                                   Raining
                                                
                                                +
                                                
                                                   
                                                      noRain
                                                   
                                                   ‾
                                                
                                                .
                                                
                                                   SensL
                                                
                                                )
                                                
                                                   
                                                      ⊕
                                                   
                                                   
                                                      2
                                                   
                                                
                                             
                                          
                                          
                                             
                                             
                                                (
                                                
                                                   non
                                                
                                                .
                                                
                                                   SensH
                                                
                                                +
                                                
                                                   ltl
                                                
                                                .
                                                
                                                   Medium
                                                
                                                +
                                                
                                                   hvy
                                                
                                                .
                                                
                                                   Heavy
                                                
                                                +
                                                
                                                   
                                                      noRain
                                                   
                                                   ‾
                                                
                                                .
                                                
                                                   SensL
                                                
                                                )
                                                
                                                   
                                                      =
                                                   
                                                   
                                                      
                                                         
                                                            N
                                                         
                                                         
                                                            1
                                                            ,
                                                            3
                                                            ,
                                                            5
                                                         
                                                      
                                                   
                                                
                                             
                                          
                                          
                                             
                                             
                                                (
                                                (
                                                
                                                   non
                                                
                                                .
                                                
                                                   SensL
                                                
                                                +
                                                
                                                   ltl
                                                
                                                .
                                                
                                                   Raining
                                                
                                                +
                                                
                                                   hvy
                                                
                                                .
                                                
                                                   Raining
                                                
                                                +
                                                
                                                   
                                                      noRain
                                                   
                                                   ‾
                                                
                                                .
                                                
                                                   SensL
                                                
                                                )
                                                
                                                   
                                                      ⊕
                                                   
                                                   
                                                      2
                                                   
                                                
                                             
                                          
                                          
                                             
                                             
                                                
                                                (
                                                
                                                   non
                                                
                                                .
                                                
                                                   SensH
                                                
                                                +
                                                
                                                   ltl
                                                
                                                .
                                                
                                                   Raining
                                                
                                                +
                                                
                                                   hvy
                                                
                                                .
                                                
                                                   Raining
                                                
                                                +
                                                
                                                   
                                                      noRain
                                                   
                                                   ‾
                                                
                                                .
                                                
                                                   SensL
                                                
                                                )
                                                )
                                                
                                                   
                                                      ⊕
                                                   
                                                   
                                                      2
                                                   
                                                
                                             
                                          
                                          
                                             
                                             
                                                (
                                                (
                                                
                                                   non
                                                
                                                .
                                                
                                                   SensL
                                                
                                                +
                                                
                                                   ltl
                                                
                                                .
                                                
                                                   Medium
                                                
                                                +
                                                
                                                   hvy
                                                
                                                .
                                                
                                                   Heavy
                                                
                                                +
                                                
                                                   
                                                      noRain
                                                   
                                                   ‾
                                                
                                                .
                                                
                                                   SensH
                                                
                                                )
                                                
                                                   
                                                      ⊕
                                                   
                                                   
                                                      2
                                                   
                                                
                                             
                                          
                                          
                                             
                                             
                                                
                                                (
                                                
                                                   non
                                                
                                                .
                                                
                                                   SensH
                                                
                                                +
                                                
                                                   ltl
                                                
                                                .
                                                
                                                   Medium
                                                
                                                +
                                                
                                                   hvy
                                                
                                                .
                                                
                                                   Heavy
                                                
                                                +
                                                
                                                   
                                                      noRain
                                                   
                                                   ‾
                                                
                                                .
                                                
                                                   SensH
                                                
                                                )
                                                )
                                                
                                                   
                                                      =
                                                   
                                                   
                                                      
                                                         
                                                            A
                                                         
                                                         
                                                            4
                                                            ,
                                                            5
                                                         
                                                      
                                                   
                                                
                                             
                                          
                                          
                                             
                                             
                                                (
                                                
                                                   non
                                                
                                                .
                                                (
                                                
                                                   SensL
                                                
                                                
                                                   
                                                      ⊕
                                                   
                                                   
                                                      2
                                                   
                                                
                                                
                                                   SensH
                                                
                                                )
                                                +
                                                
                                                   ltl
                                                
                                                .
                                                
                                                   Raining
                                                
                                                +
                                                
                                                   hvy
                                                
                                                .
                                                
                                                   Raining
                                                
                                                +
                                                
                                                   
                                                      noRain
                                                   
                                                   ‾
                                                
                                                .
                                                
                                                   SensL
                                                
                                                )
                                                
                                                   
                                                      ⊕
                                                   
                                                   
                                                      2
                                                   
                                                
                                             
                                          
                                          
                                             
                                             
                                                (
                                                
                                                   non
                                                
                                                .
                                                (
                                                
                                                   SensL
                                                
                                                
                                                   
                                                      ⊕
                                                   
                                                   
                                                      2
                                                   
                                                
                                                
                                                   SensH
                                                
                                                )
                                                +
                                                
                                                   ltl
                                                
                                                .
                                                
                                                   Medium
                                                
                                                +
                                                
                                                   hvy
                                                
                                                .
                                                
                                                   Heavy
                                                
                                                +
                                                
                                                   
                                                      noRain
                                                   
                                                   ‾
                                                
                                                .
                                                
                                                   SensH
                                                
                                                )
                                                
                                                   
                                                      =
                                                   
                                                   
                                                      
                                                         UnFold
                                                      
                                                   
                                                
                                             
                                          
                                          
                                             
                                             
                                                (
                                                
                                                   non
                                                
                                                .
                                                
                                                   Sensor
                                                
                                                +
                                                
                                                   ltl
                                                
                                                .
                                                
                                                   Raining
                                                
                                                +
                                                
                                                   hvy
                                                
                                                .
                                                
                                                   Raining
                                                
                                                +
                                                
                                                   
                                                      noRain
                                                   
                                                   ‾
                                                
                                                .
                                                
                                                   SensL
                                                
                                                )
                                                
                                                   
                                                      ⊕
                                                   
                                                   
                                                      2
                                                   
                                                
                                             
                                          
                                          
                                             
                                             
                                                (
                                                
                                                   non
                                                
                                                .
                                                
                                                   Sensor
                                                
                                                +
                                                
                                                   ltl
                                                
                                                .
                                                
                                                   Medium
                                                
                                                +
                                                
                                                   hvy
                                                
                                                .
                                                
                                                   Heavy
                                                
                                                +
                                                
                                                   
                                                      noRain
                                                   
                                                   ‾
                                                
                                                .
                                                
                                                   SensH
                                                
                                                )
                                                
                                                   
                                                      =
                                                   
                                                   
                                                      
                                                         
                                                            N
                                                         
                                                         
                                                            1
                                                            ,
                                                            3
                                                            ,
                                                            5
                                                         
                                                      
                                                      ,
                                                      
                                                         
                                                            A
                                                         
                                                         
                                                            4
                                                            ,
                                                            5
                                                         
                                                      
                                                   
                                                
                                             
                                          
                                          
                                             
                                             
                                                
                                                   non
                                                
                                                .
                                                
                                                   Sensor
                                                
                                                +
                                                
                                                   ltl
                                                
                                                .
                                                (
                                                
                                                   Raining
                                                
                                                
                                                   
                                                      ⊕
                                                   
                                                   
                                                      2
                                                   
                                                
                                                
                                                   Medium
                                                
                                                )
                                                +
                                                
                                                   hvy
                                                
                                                .
                                                (
                                                
                                                   Raining
                                                
                                                
                                                   
                                                      ⊕
                                                   
                                                   
                                                      2
                                                   
                                                
                                                
                                                   Heavy
                                                
                                                )
                                                +
                                             
                                          
                                          
                                             
                                             
                                                
                                                   
                                                      noRain
                                                   
                                                   ‾
                                                
                                                .
                                                
                                                   Sensor
                                                
                                             
                                          
                                       
                                    
                                 
                               Similarly 
                                 
                                    Raining
                                 
                                 
                                    
                                       ⊕
                                    
                                    
                                       2
                                    
                                 
                                 
                                    Medium
                                 
                               and 
                                 
                                    Raining
                                 
                                 
                                    
                                       ⊕
                                    
                                    
                                       2
                                    
                                 
                                 
                                    Heavy
                                 
                               can be examined:
                                 
                                    
                                       
                                          
                                             
                                                
                                                   Raining
                                                
                                                
                                                   
                                                      ⊕
                                                   
                                                   
                                                      2
                                                   
                                                
                                                
                                                   Medium
                                                
                                                
                                                   
                                                      =
                                                   
                                                   
                                                      
                                                         UnFold
                                                      
                                                      ,
                                                      
                                                         
                                                            N
                                                         
                                                         
                                                            1
                                                            ,
                                                            3
                                                            ,
                                                            5
                                                         
                                                      
                                                      ,
                                                      
                                                         
                                                            A
                                                         
                                                         
                                                            4
                                                            ,
                                                            5
                                                         
                                                      
                                                   
                                                
                                             
                                          
                                          
                                             
                                                
                                                
                                                   non
                                                
                                                .
                                                (
                                                
                                                   SensL
                                                
                                                
                                                   
                                                      ⊕
                                                   
                                                   
                                                      2
                                                   
                                                
                                                
                                                   SensH
                                                
                                                )
                                                +
                                                
                                                   ltl
                                                
                                                .
                                                (
                                                
                                                   Raining
                                                
                                                
                                                   
                                                      ⊕
                                                   
                                                   
                                                      2
                                                   
                                                
                                                
                                                   Medium
                                                
                                                )
                                                +
                                                
                                                   hvy
                                                
                                                .
                                                (
                                                
                                                   Raining
                                                
                                                
                                                   
                                                      ⊕
                                                   
                                                   
                                                      2
                                                   
                                                
                                                
                                                   Heavy
                                                
                                                )
                                                +
                                             
                                          
                                          
                                             
                                                
                                                
                                                   
                                                      rain
                                                   
                                                   ‾
                                                
                                                .
                                                (
                                                
                                                   Raining
                                                
                                                
                                                   
                                                      ⊕
                                                   
                                                   
                                                      2
                                                   
                                                
                                                
                                                   Medium
                                                
                                                )
                                             
                                          
                                          
                                             
                                                
                                                   Raining
                                                
                                                
                                                   
                                                      ⊕
                                                   
                                                   
                                                      2
                                                   
                                                
                                                
                                                   Heavy
                                                
                                                
                                                   
                                                      =
                                                   
                                                   
                                                      
                                                         UnFold
                                                      
                                                      ,
                                                      
                                                         
                                                            N
                                                         
                                                         
                                                            1
                                                            ,
                                                            3
                                                            ,
                                                            5
                                                         
                                                      
                                                      ,
                                                      
                                                         
                                                            A
                                                         
                                                         
                                                            4
                                                            ,
                                                            5
                                                         
                                                      
                                                   
                                                
                                             
                                          
                                          
                                             
                                                
                                                
                                                   non
                                                
                                                .
                                                (
                                                
                                                   SensL
                                                
                                                
                                                   
                                                      ⊕
                                                   
                                                   
                                                      2
                                                   
                                                
                                                
                                                   SensH
                                                
                                                )
                                                +
                                                
                                                   ltl
                                                
                                                .
                                                (
                                                
                                                   Raining
                                                
                                                
                                                   
                                                      ⊕
                                                   
                                                   
                                                      2
                                                   
                                                
                                                
                                                   Medium
                                                
                                                )
                                                +
                                                
                                                   hvy
                                                
                                                .
                                                (
                                                
                                                   Raining
                                                
                                                
                                                   
                                                      ⊕
                                                   
                                                   
                                                      2
                                                   
                                                
                                                
                                                   Heavy
                                                
                                                )
                                                +
                                             
                                          
                                          
                                             
                                                
                                                (
                                                
                                                   
                                                      rain
                                                   
                                                   ‾
                                                
                                                .
                                                (
                                                
                                                   Raining
                                                
                                                
                                                   
                                                      ⊕
                                                   
                                                   
                                                      2
                                                   
                                                
                                                
                                                   Heavy
                                                
                                                )
                                                
                                                   
                                                      ⊕
                                                   
                                                   
                                                      2
                                                   
                                                
                                                
                                                   
                                                      hvyRain
                                                   
                                                   ‾
                                                
                                                .
                                                (
                                                
                                                   Raining
                                                
                                                
                                                   
                                                      ⊕
                                                   
                                                   
                                                      2
                                                   
                                                
                                                
                                                   Heavy
                                                
                                                )
                                                )
                                             
                                          
                                       
                                    
                                 
                               By applying Fold, the new specification of Sensor is obtained as follows:
                                 
                                    
                                       
                                          
                                             
                                                
                                                   
                                                      Sensor
                                                   
                                                   
                                                      =
                                                      
                                                         def
                                                      
                                                   
                                                   
                                                      non
                                                   
                                                   .
                                                   
                                                      Sensor
                                                   
                                                   +
                                                   
                                                      ltl
                                                   
                                                   .
                                                   
                                                      RainMed
                                                   
                                                   +
                                                   
                                                      hvy
                                                   
                                                   .
                                                   
                                                      RainHvy
                                                   
                                                   +
                                                   
                                                      
                                                         noRain
                                                      
                                                      ‾
                                                   
                                                   .
                                                   
                                                      Sensor
                                                   
                                                
                                             
                                             
                                                
                                                   
                                                      RainMed
                                                   
                                                   
                                                      =
                                                      
                                                         def
                                                      
                                                   
                                                   
                                                      non
                                                   
                                                   .
                                                   
                                                      Sensor
                                                   
                                                   +
                                                   
                                                      ltl
                                                   
                                                   .
                                                   
                                                      RainMed
                                                   
                                                   +
                                                   
                                                      hvy
                                                   
                                                   .
                                                   
                                                      RainHvy
                                                   
                                                   +
                                                   
                                                      
                                                         rain
                                                      
                                                      ‾
                                                   
                                                   .
                                                   
                                                      RainMed
                                                   
                                                
                                             
                                             
                                                
                                                   
                                                      RainHvy
                                                   
                                                   
                                                      =
                                                      
                                                         def
                                                      
                                                   
                                                   
                                                      non
                                                   
                                                   .
                                                   
                                                      Sensor
                                                   
                                                   +
                                                   
                                                      ltl
                                                   
                                                   .
                                                   
                                                      RainMed
                                                   
                                                   +
                                                   
                                                      hvy
                                                   
                                                   .
                                                   
                                                      RainHvy
                                                   
                                                   
                                                   +
                                                
                                             
                                             
                                                
                                                   
                                                   (
                                                   
                                                      
                                                         rain
                                                      
                                                      ‾
                                                   
                                                   .
                                                   
                                                      RainHvy
                                                   
                                                   
                                                      
                                                         ⊕
                                                      
                                                      
                                                         2
                                                      
                                                   
                                                   
                                                      
                                                         hvyRain
                                                      
                                                      ‾
                                                   
                                                   .
                                                   
                                                      RainHvy
                                                   
                                                   )
                                                
                                             
                                          
                                       
                                    
                                 
                               The new specification explains that resolving variability between SensL and SensH can be postponed until the variability between performing output actions 
                                 
                                    
                                       rain
                                    
                                    ‾
                                 
                               and 
                                 
                                    
                                       hvyRain
                                    
                                    ‾
                                 
                               is resolved in case it is possible to have heavy rain.

In [28], PL-CCS was compared with FTS in addressing variability via modeling the above-mentioned example. There, it was concluded that modeling in PL-CCS can result in verbose descriptions since common parts have to be duplicated [29]. However, in our experience, PL-CCS facilitates modular design without forcing the designer to factor out common parts. Later the specification can be restructured as illustrated by the above-given example. For instance, actions non, ltl, hvy, and 
                           
                              
                                 noRain
                              
                              ‾
                           
                         are common among SensL and SensR, while their behaviors does not change after performing actions non and 
                           
                              
                                 noRain
                              
                              ‾
                           
                        . Such common actions and behaviors are factored our by rewriting 
                           
                              SensL
                           
                           
                              
                                 ⊕
                              
                              
                                 2
                              
                           
                           
                              SensR
                           
                         to 
                           
                              non
                           
                           .
                           
                              Sensor
                           
                           +
                           
                              ltl
                           
                           .
                           (
                           
                              Raining
                           
                           
                              
                                 ⊕
                              
                              
                                 2
                              
                           
                           
                              Medium
                           
                           )
                           +
                           
                              hvy
                           
                           .
                           (
                           
                              Raining
                           
                           
                              
                                 ⊕
                              
                              
                                 2
                              
                           
                           
                              Heavy
                           
                           )
                           +
                           
                              
                                 noRain
                              
                              ‾
                           
                           .
                           
                              Sensor
                           
                        . Therefore, the modeler is not forced to identify common actions and behaviors to derive its model. The semantics of our resulting specification is even more compact than the FTS model of [28] by factorizing out common behaviors as much as possible; the part of behavior in which both sensors does not change their behaviors as long as action hvy is performed, is factored out in our case.

In this section, we show that product line bisimilarity induces the same identification of PL-CCS terms as the multi-valued modal μ-calculus. In this section, we first review the logic and then explain how it characterizes product line bisimilarity.

The multi-valued modal μ-calculus [12] combines Kozen's modal μ-calculus [30] and multi-valued μ-calculus as defined by Grumberg and Shoham [31]. Let 
                           V
                         be the set of propositional variables. The set of multi-valued modal μ-calculus formulae is given by the following grammar:
                           
                              
                                 
                                    
                                       
                                          
                                             φ
                                             
                                             :
                                             :
                                             =
                                             
                                             
                                                true
                                             
                                             
                                             
                                             |
                                             
                                             
                                             
                                                false
                                             
                                             
                                             
                                             |
                                             
                                             
                                             Z
                                             
                                             |
                                             
                                             φ
                                             ∨
                                             φ
                                             
                                             |
                                             
                                             φ
                                             ∧
                                             φ
                                             
                                             |
                                             
                                             〈
                                             a
                                             〉
                                             φ
                                             
                                             |
                                             
                                             [
                                             a
                                             ]
                                             φ
                                             
                                             |
                                             
                                             η
                                             Z
                                             .
                                             φ
                                             ,
                                             
                                             η
                                             ∈
                                             {
                                             ν
                                             ,
                                             μ
                                             }
                                          
                                       
                                    
                                 
                              
                           
                         where 
                           a
                           ∈
                           
                              Act
                           
                         and 
                           Z
                           ∈
                           V
                        , and the fixed point quantifiers μ and ν are variable binders.

Let 
                           
                              mv
                           
                           −
                           
                              
                                 L
                              
                              
                                 μ
                              
                           
                         denote the set of closed formulae generated by the above grammar. The semantics of a formula for a PL-CCS term is the set of configurations satisfying it. All configurations satisfy true in all states. A configuration 
                           
                              
                                 ν
                              
                              
                                 ′
                              
                           
                         satisfies a formula 
                           
                              
                                 ϕ
                              
                              
                                 1
                              
                           
                           ∨
                           
                              
                                 ϕ
                              
                              
                                 2
                              
                           
                         in state s if it satisfies either 
                           
                              
                                 ϕ
                              
                              
                                 1
                              
                           
                         or 
                           
                              
                                 ϕ
                              
                              
                                 2
                              
                           
                         in state s. A configuration 
                           
                              
                                 ν
                              
                              
                                 ′
                              
                           
                         satisfies a formula 
                           〈
                           a
                           〉
                           φ
                         in state s if it has a transition 
                           s
                           
                              →
                              
                                 a
                                 ,
                                 ν
                              
                           
                           
                              
                                 s
                              
                              
                                 ′
                              
                           
                         such that 
                           ν
                           ⊑
                           
                              
                                 ν
                              
                              
                                 ′
                              
                           
                         and 
                           
                              
                                 ν
                              
                              
                                 ′
                              
                           
                         satisfies φ in state 
                           
                              
                                 s
                              
                              
                                 ′
                              
                           
                        . A configuration 
                           
                              
                                 ν
                              
                              
                                 ′
                              
                           
                         satisfies a formula 
                           [
                           a
                           ]
                           φ
                         in state s if for all transitions 
                           s
                           
                              →
                              
                                 a
                                 ,
                                 ν
                              
                           
                           
                              
                                 s
                              
                              
                                 ′
                              
                           
                         such that 
                           ν
                           ⊑
                           
                              
                                 ν
                              
                              
                                 ′
                              
                           
                        , 
                           
                              
                                 ν
                              
                              
                                 ′
                              
                           
                         satisfies φ in state 
                           
                              
                                 s
                              
                              
                                 ′
                              
                           
                        . Equations with recursive variables are used to describe properties of behaviors with an infinite depth. For instance, 
                           X
                           
                              =
                              
                                 def
                              
                           
                           〈
                           a
                           〉
                           X
                           ∨
                           〈
                           b
                           〉
                           
                              true
                           
                         specifies configurations (i.e., products) that they satisfy 
                           〈
                           b
                           〉
                           
                              true
                           
                         either in the initial state, or the state reached after performing a (possibly infinite) sequence of a-actions (with consistent configurations). Since an equation may have many solutions, the maximum and minimum solutions are selected by 
                           ν
                           Z
                           .
                           ϕ
                         and 
                           μ
                           Z
                           .
                           ϕ
                        , respectively. Considering Z as a mapping from the states to a set of configurations, 
                           μ
                           Z
                           .
                           ϕ
                         is valid for the smallest mapping Z that satisfies the equation 
                           Z
                           =
                           ϕ
                        . Similarly 
                           ν
                           Z
                           .
                           ϕ
                         is valid for the largest mapping Z that satisfies equation 
                           Z
                           =
                           ϕ
                        . For instance, the property 
                           μ
                           X
                           .
                           〈
                           a
                           〉
                           X
                           ∨
                           〈
                           b
                           〉
                           
                              true
                           
                         specifies that “eventually an action b follows a (possibly empty) sequence of a actions”. This property holds for the configuration 
                           〈
                           L
                           ,
                           L
                           〉
                         in the state 
                           〈
                           X
                           |
                           E
                           〉
                         of CTS in Fig. 3a.

The semantics of φ, denoted by 
                           〚
                           φ
                           〛
                        , is a function 
                           S
                           →
                           P
                           (
                           
                              Config
                           
                           )
                         that defines the set of configurations that satisfy formula φ for each given state. Given an environment 
                           ρ
                           :
                           V
                           →
                           (
                           S
                           →
                           P
                           (
                           
                              Config
                           
                           )
                           )
                        , which maps free variables in φ to 
                           S
                           →
                           P
                           (
                           
                              Config
                           
                           )
                        , 
                           
                              
                                 〚
                                 φ
                                 〛
                              
                              
                                 ρ
                              
                           
                         defines the semantics of φ with respect to ρ in Table 3
                        .


                        
                           Example 21
                           Regarding the rules in Table 3, the semantics of 
                                 〚
                                 〈
                                 b
                                 〉
                                 
                                    true
                                 
                                 〛
                               in the state 
                                 (
                                 b
                                 .
                                 〈
                                 X
                                 |
                                 E
                                 〉
                                 
                                    
                                       ⊕
                                    
                                    
                                       1
                                    
                                 
                                 c
                                 )
                               of the CTS in Fig. 3a is 
                                 {
                                 〈
                                 L
                                 ,
                                 R
                                 〉
                                 ,
                                 〈
                                 L
                                 ,
                                 L
                                 〉
                                 }
                              , since 
                                 
                                    
                                       R
                                    
                                    
                                       b
                                    
                                 
                                 (
                                 b
                                 .
                                 〈
                                 X
                                 |
                                 E
                                 〉
                                 
                                    
                                       ⊕
                                    
                                    
                                       1
                                    
                                 
                                 c
                                 .
                                 0
                                 ,
                                 〈
                                 X
                                 |
                                 E
                                 〉
                                 )
                                 =
                                 {
                                 〈
                                 L
                                 ,
                                 R
                                 〉
                                 ,
                                 〈
                                 L
                                 ,
                                 L
                                 〉
                                 }
                               and 
                                 〚
                                 
                                    true
                                 
                                 〛
                                 (
                                 〈
                                 X
                                 |
                                 E
                                 〉
                                 )
                                 =
                                 P
                                 (
                                 
                                    Config
                                 
                                 )
                              . It can be shown that 
                                 f
                                 =
                                 {
                                 (
                                 b
                                 .
                                 〈
                                 X
                                 |
                                 E
                                 〉
                                 
                                    
                                       ⊕
                                    
                                    
                                       1
                                    
                                 
                                 c
                                 .
                                 0
                                 )
                                 ↦
                                 {
                                 〈
                                 L
                                 ,
                                 R
                                 〉
                                 ,
                                 〈
                                 L
                                 ,
                                 L
                                 〉
                                 }
                                 ,
                                 〈
                                 X
                                 |
                                 E
                                 〉
                                 ↦
                                 {
                                 〈
                                 L
                                 ,
                                 L
                                 〉
                                 }
                                 ,
                                 0
                                 ↦
                                 ∅
                                 }
                               is the semantics of 
                                 μ
                                 X
                                 .
                                 〈
                                 a
                                 〉
                                 X
                                 ∨
                                 〈
                                 b
                                 〉
                                 
                                    true
                                 
                               since 
                                 
                                    
                                       〚
                                       〈
                                       a
                                       〉
                                       X
                                       〛
                                    
                                    
                                       [
                                       X
                                       ↦
                                       f
                                       ]
                                    
                                 
                                 =
                                 λ
                                 s
                                 .
                                 ⋃
                                 {
                                 
                                    
                                       R
                                    
                                    
                                       a
                                    
                                 
                                 (
                                 s
                                 ,
                                 
                                    
                                       s
                                    
                                    
                                       ′
                                    
                                 
                                 )
                                 ∩
                                 X
                                 (
                                 
                                    
                                       s
                                    
                                    
                                       ′
                                    
                                 
                                 )
                                 }
                                 =
                                 {
                                 〈
                                 X
                                 |
                                 E
                                 〉
                                 ↦
                                 {
                                 〈
                                 L
                                 ,
                                 L
                                 〉
                                 }
                                 ,
                                 b
                                 .
                                 〈
                                 X
                                 |
                                 E
                                 〉
                                 
                                    
                                       ⊕
                                    
                                    
                                       1
                                    
                                 
                                 c
                                 ↦
                                 ∅
                                 ,
                                 0
                                 ↦
                                 ∅
                                 }
                              , 
                                 〚
                                 〈
                                 b
                                 〉
                                 
                                    true
                                 
                                 〛
                                 =
                                 {
                                 b
                                 .
                                 〈
                                 X
                                 |
                                 E
                                 〉
                                 
                                    
                                       ⊕
                                    
                                    
                                       1
                                    
                                 
                                 c
                                 ↦
                                 {
                                 〈
                                 L
                                 ,
                                 R
                                 〉
                                 ,
                                 〈
                                 L
                                 ,
                                 L
                                 〉
                                 }
                                 ,
                                 〈
                                 X
                                 |
                                 E
                                 〉
                                 ↦
                                 ∅
                                 ,
                                 0
                                 ↦
                                 ∅
                                 }
                              , 
                                 f
                                 =
                                 
                                    
                                       〚
                                       〈
                                       a
                                       〉
                                       X
                                       ∨
                                       〈
                                       b
                                       〉
                                       
                                          true
                                       
                                       〛
                                    
                                    
                                       [
                                       X
                                       ↦
                                       f
                                       ]
                                    
                                 
                              , and it is the minimum mapping that satisfies the equation 
                                 X
                                 =
                                 〈
                                 a
                                 〉
                                 X
                                 ∨
                                 〈
                                 b
                                 〉
                                 
                                    true
                                 
                              .

Model checking logical formula ϕ over a PL-CCS term is supposed to result in the set of full configurations for which the property holds. Intuitively, two PL-CCS terms are logically equivalent when for each logical formula, there exists a non-empty set of products in one product line satisfying it if and only if there exists such a non-empty set in the other. For instance, 
                           (
                           a
                           .
                           0
                           +
                           b
                           .
                           0
                           )
                           
                              
                                 ⊕
                              
                              
                                 1
                              
                           
                           b
                           .
                           0
                         is not logically equivalent to 
                           a
                           .
                           0
                           
                              
                                 ⊕
                              
                              
                                 1
                              
                           
                           b
                           .
                           0
                         as the logical formula 
                           〈
                           a
                           〉
                           
                              true
                           
                           ∧
                           〈
                           b
                           〉
                           
                              true
                           
                         is satisfied by the former for the configuration 
                           〈
                           L
                           〉
                        , but it is not satisfied by the latter for any configuration.


                        
                           Definition 22
                           Logical equivalence


                           Two PL-CCS terms s and t are logically equivalent, denoted by 
                                 s
                                 
                                    
                                       ∼
                                    
                                    
                                       L
                                    
                                 
                                 t
                              , iff 
                                 ∀
                                 φ
                                 ∈
                                 
                                    mv
                                 
                                 −
                                 
                                    
                                       L
                                    
                                    
                                       μ
                                    
                                 
                                 ⋅
                                 (
                                 〚
                                 φ
                                 〛
                                 (
                                 s
                                 )
                                 ≠
                                 ∅
                                 ⇔
                                 〚
                                 φ
                                 〛
                                 (
                                 t
                                 )
                                 ≠
                                 ∅
                                 )
                              .

As stated before, product line bisimilarity and logical equivalence coincide. The following Theorem states that if two PL-CCS terms are not product line bisimilar, then there is a logical formula that can distinguish them. 
                           Theorem 23
                           
                              For any PL-CCS terms s and t, 
                              
                                 s
                                 
                                    
                                       ≃
                                    
                                    
                                       PL
                                    
                                 
                                 t
                               
                              iff 
                              
                                 s
                                 
                                    
                                       ∼
                                    
                                    
                                       L
                                    
                                 
                                 t
                              
                              .
                           

See Appendix E for the proof.

@&#RELATED WORK@&#

There are a vast number of languages to specify software product lines for the purpose of specifying different aspects of variability [32–38,12,13,39,29,40,10,41–44]. Among them some frameworks, such as [32–35], do not directly address formal reasoning. On the other hand, there are formal frameworks to reason about some aspects of SPLs, such as [36–38,12,13,39,29,40,10,41–44].

Regarding modeling issues, several approaches are classified by [29] in terms of treating variability as either a first class citizen [34,39,38,41–44] or as part of the behavioral model [35–37,32,12,33]. In the former approaches, variability is separately modeled and related to other models (data and behavior), called base models. Therefore, variability is explicitly traceable in base models and its evolution is automatically propagated to the base models. As opposed to other process-algebraic approaches [41,42,44], PL-CCS expresses variability as part of its behavioral model; In [41,42], the cross-tree constraints of feature models are related to the behavior of products using a CCS-like process algebra, while in [44], process terms are tagged with the sets of specific products where they are enabled using a CSP-like process algebra. In [11], some of the fundamental formal behavioral models for SPLs are compared in terms of their expressiveness.

Our approach follows the line of research on process algebra for SPLs [12,13,41,42,45,44]. It also offers several reasoning capability: model-checking based on a multi-valued modal μ-calculus over CTSs given in [12], and equational reasoning based on a set of rules to restructure PL-CCS terms, extending the approach of [13]. Along these lines, the safety and liveness properties of SPLs as well as consistency of configurations are checked in [41,42] by encoding their semantic rules in the Maude rewriting logic. In [45], the algebraic framework mCRL2 [24,25], is used for modular verification of SPLs. There, tailored property-preserving reductions were applied to a product line modeled in mCRL2 using the reduction modulo branching bisimulation of mCRL2 tool set. Two pre-congruence behavioral relations to compare the behavior of a product either against a product or a family are proposed in [44]. In contrast, we offer a set of behavioral equivalence relations over CTSs supported by a sound and complete axiomatization to reason about families at the syntactic level. To this aim, a family can be restructured to another, while its functionality is preserved. Our approach is hence complementary to the aforementioned approaches in the literature.

The work of [46] is analogous to us in that it takes an axiomatic approach to software product lines. However, there approach has a different intention, namely, to axiomatizes product family concepts that characterize a generic product line formalism. Their approach indicates that all operators of a formalism are distributive over the binary variant operator. Our axioms 
                        
                           
                              D
                           
                           
                              1
                              ,
                              2
                           
                        
                     , 
                        
                           
                              A
                           
                           
                              5
                              ,
                              6
                           
                        
                     , 
                        
                           
                              P
                           
                           
                              4
                              ,
                              5
                           
                        
                     , 
                        
                           
                              S
                           
                           
                              3
                           
                        
                      (together with 
                        
                           
                              S
                           
                           
                              1
                           
                        
                     ), 
                        
                           
                              R
                           
                           
                              3
                           
                        
                     , and 
                        
                           
                              E
                           
                           
                              5
                           
                        
                      conform to this result. Furthermore, it expresses that binary variant operators with different indices are distributive and provides rules to simplify specifications when two i-indexed variants are directly nested. These rules are derivable in our setting by axioms 
                        
                           
                              A
                           
                           
                              3
                           
                        
                      and 
                        
                           
                              N
                           
                           
                              1
                              −
                              6
                           
                        
                      as follows:
                        
                           
                              
                                 
                                    
                                       (
                                       P
                                       
                                          
                                             ⊕
                                          
                                          
                                             j
                                          
                                       
                                    
                                    
                                       Q
                                       )
                                       
                                          
                                             ⊕
                                          
                                          
                                             i
                                          
                                       
                                       (
                                       P
                                       
                                          
                                             ⊕
                                          
                                          
                                             j
                                          
                                       
                                       O
                                       )
                                       
                                          
                                             =
                                          
                                          
                                             
                                                
                                                   A
                                                
                                                
                                                   3
                                                
                                             
                                          
                                       
                                    
                                 
                                 
                                    
                                    
                                       (
                                       (
                                       P
                                       
                                          
                                             ⊕
                                          
                                          
                                             j
                                          
                                       
                                       Q
                                       )
                                       
                                          
                                             ⊕
                                          
                                          
                                             i
                                          
                                       
                                       (
                                       P
                                       
                                          
                                             ⊕
                                          
                                          
                                             j
                                          
                                       
                                       O
                                       )
                                       )
                                       
                                          
                                             ⊕
                                          
                                          
                                             j
                                          
                                       
                                       (
                                       (
                                       P
                                       
                                          
                                             ⊕
                                          
                                          
                                             j
                                          
                                       
                                       Q
                                       )
                                       
                                          
                                             ⊕
                                          
                                          
                                             i
                                          
                                       
                                       (
                                       P
                                       
                                          
                                             ⊕
                                          
                                          
                                             j
                                          
                                       
                                       O
                                       )
                                       )
                                       
                                          
                                             =
                                          
                                          
                                             
                                                
                                                   N
                                                
                                                
                                                   5
                                                
                                             
                                          
                                       
                                    
                                 
                                 
                                    
                                    
                                       L
                                       (
                                       (
                                       P
                                       
                                          
                                             ⊕
                                          
                                          
                                             j
                                          
                                       
                                       Q
                                       )
                                       
                                          
                                             ⊕
                                          
                                          
                                             i
                                          
                                       
                                       (
                                       P
                                       
                                          
                                             ⊕
                                          
                                          
                                             j
                                          
                                       
                                       O
                                       )
                                       ,
                                       j
                                       )
                                       
                                          
                                             ⊕
                                          
                                          
                                             j
                                          
                                       
                                       R
                                       (
                                       (
                                       P
                                       
                                          
                                             ⊕
                                          
                                          
                                             j
                                          
                                       
                                       Q
                                       )
                                       
                                          
                                             ⊕
                                          
                                          
                                             i
                                          
                                       
                                       (
                                       P
                                       
                                          
                                             ⊕
                                          
                                          
                                             j
                                          
                                       
                                       O
                                       )
                                       ,
                                       j
                                       )
                                       
                                          
                                             =
                                          
                                          
                                             
                                                
                                                   N
                                                
                                                
                                                   1
                                                   −
                                                   4
                                                
                                             
                                          
                                       
                                    
                                 
                                 
                                    
                                    
                                       (
                                       L
                                       (
                                       P
                                       ,
                                       j
                                       )
                                       
                                          
                                             ⊕
                                          
                                          
                                             i
                                          
                                       
                                       L
                                       (
                                       P
                                       ,
                                       j
                                       )
                                       )
                                       
                                          
                                             ⊕
                                          
                                          
                                             j
                                          
                                       
                                       (
                                       R
                                       (
                                       Q
                                       ,
                                       j
                                       )
                                       
                                          
                                             ⊕
                                          
                                          
                                             i
                                          
                                       
                                       R
                                       (
                                       O
                                       ,
                                       j
                                       )
                                       )
                                       
                                          
                                             =
                                          
                                          
                                             
                                                
                                                   N
                                                
                                                
                                                   2
                                                
                                             
                                             ,
                                             
                                                
                                                   N
                                                
                                                
                                                   4
                                                
                                             
                                          
                                       
                                    
                                 
                                 
                                    
                                    
                                       L
                                       (
                                       P
                                       
                                          
                                             ⊕
                                          
                                          
                                             i
                                          
                                       
                                       P
                                       ,
                                       j
                                       )
                                       
                                          
                                             ⊕
                                          
                                          
                                             j
                                          
                                       
                                       R
                                       (
                                       Q
                                       
                                          
                                             ⊕
                                          
                                          
                                             i
                                          
                                       
                                       O
                                       ,
                                       j
                                       )
                                       
                                          
                                             =
                                          
                                          
                                             
                                                
                                                   A
                                                
                                                
                                                   3
                                                
                                             
                                             ,
                                             
                                                
                                                   N
                                                
                                                
                                                   5
                                                
                                             
                                          
                                       
                                       P
                                       
                                          
                                             ⊕
                                          
                                          
                                             j
                                          
                                       
                                       (
                                       Q
                                       
                                          
                                             ⊕
                                          
                                          
                                             i
                                          
                                       
                                       O
                                       )
                                    
                                 
                                 
                                    
                                       P
                                       
                                          
                                             ⊕
                                          
                                          
                                             i
                                          
                                       
                                    
                                    
                                       (
                                       Q
                                       
                                          
                                             ⊕
                                          
                                          
                                             i
                                          
                                       
                                       O
                                       )
                                       
                                          
                                             =
                                          
                                          
                                             
                                                
                                                   N
                                                
                                                
                                                   5
                                                
                                             
                                          
                                       
                                       L
                                       (
                                       P
                                       ,
                                       i
                                       )
                                       
                                          
                                             ⊕
                                          
                                          
                                             i
                                          
                                       
                                       R
                                       (
                                       Q
                                       
                                          
                                             ⊕
                                          
                                          
                                             i
                                          
                                       
                                       O
                                       ,
                                       i
                                       )
                                       
                                          
                                             =
                                          
                                          
                                             
                                                
                                                   N
                                                
                                                
                                                   4
                                                
                                             
                                          
                                       
                                    
                                 
                                 
                                    
                                    
                                       L
                                       (
                                       P
                                       ,
                                       i
                                       )
                                       
                                          
                                             ⊕
                                          
                                          
                                             i
                                          
                                       
                                       R
                                       (
                                       O
                                       ,
                                       i
                                       )
                                       
                                          
                                             =
                                          
                                          
                                             
                                                
                                                   N
                                                
                                                
                                                   5
                                                
                                             
                                          
                                       
                                       P
                                       
                                          
                                             ⊕
                                          
                                          
                                             i
                                          
                                       
                                       O
                                    
                                 
                              
                           
                        
                      Similarly, 
                        (
                        P
                        
                           
                              ⊕
                           
                           
                              j
                           
                        
                        O
                        )
                        
                           
                              ⊕
                           
                           
                              i
                           
                        
                        (
                        Q
                        
                           
                              ⊕
                           
                           
                              j
                           
                        
                        O
                        )
                        =
                        (
                        P
                        
                           
                              ⊕
                           
                           
                              j
                           
                        
                        Q
                        )
                        
                           
                              ⊕
                           
                           
                              i
                           
                        
                        O
                      and 
                        (
                        P
                        
                           
                              ⊕
                           
                           
                              i
                           
                        
                        Q
                        )
                        
                           
                              ⊕
                           
                           
                              i
                           
                        
                        O
                        =
                        P
                        
                           
                              ⊕
                           
                           
                              i
                           
                        
                        O
                      can be derived from our equational theory.

Other related techniques to our behavioral equivalence are conformance notions that are used to iteratively refine partial behavioral models; they can consequently be used to relate a product behavior to a family model. Refinement as well as conformance between SPLs modeled by modal I/O automata is studied in [37]. A notion of behavioral conformance on MTS-based specifications is defined in [36], which preserves 3-valued weak μ-calculus. Modal transition systems (MTS) [36] and I/O modal automata [37] capture variability by defining transitions as optional and mandatory. A notion of input–output conformance on FTSs is defined in [47,48] with the aim of devising a model-based testing trajectory for SPLs. In [49], pre-orders over FTSs preserving LTL properties are given with respect to specific products. As opposed to these approaches, our equivalence relation is defined over CTS and preserves multi-valued modal μ-calculus. Providing a comprehensive and formal comparison of the different notions of SPL pre-orders in the literature is among our future work. In [16], a feature-oriented notion of branching bisimulation over FTSs and its associated minimization algorithm were introduced in order to reduce a model prior to its verification. Our configuration bisimulation was inspired by [16] and adopting its minimization algorithm is also among our future directions for research.

Remaining approaches mainly use a model checking technique to reason about SPLs; these include checking safety properties over Statecharts in [38], LTL over FTSs [29], CTL over modal I/O automata [39], MHML, a deontic logic interpreted over MTSs [40], and fLTL (an extension of LTL) over FTSs in [10].

@&#CONCLUSIONS AND FUTURE WORK@&#

We proposed an equational reasoning technique to reason about software product lines at the syntactic level. To this aim, we defined product line bisimilarity by finding a mapping between products of two terms, identified by their configuration vectors. We also introduced a configuration-oriented bisimilarity that compares families at once. We proved that product line and configuration bisimilarity coincide. To facilitate checking the bisimilarity relations, we provided a sound and complete axiomatization over closed and finite-state behaviors. We characterized the distinguishing power of our equivalence relations in terms of a multi-valued modal μ-calculus.

Instead of working at the semantic level and finding a mapping between products, one can use our axioms and restructure a term to its equivalent terms, e.g., such that the mandatory and optional parts are factored out separately. The restructuring mechanism can also be initiated to group the functionality of an SPL to behaviors for which appropriate components exist. Furthermore, one can derive the possible products of a term, specified by CCS terms to validate an SPL model in terms of its various products.

We intend to exploit the PL-CCS process theory as a formal framework for specifying the structural and behavioral aspects of product lines, following the approach of [50]. We intend to investigate a basic form, such as linear process specification in mCRL2, over which different analysis and optimizations can be executed. Then, PL-CCS terms can be automatically transformed into the basic form in the same way of [27]. Finding a minimization algorithm for configuration bisimulation is another line of research. Furthermore, pre-order notions of literature can be compared in the general setting of FTS, which is a very expressive model for SPLs [11].

@&#ACKNOWLEDGEMENTS@&#

We would like to thank Wan Fokkink for his valuable comments on the earlier version of this paper.

We first prove that product line bisimilarity is an equivalence relation, and then prove its congruence property on fully expanded PL-CCS terms. Later, we show that strict strong bisimilarity is an equivalence relation and constitutes a congruence on PL-CCS terms.


                        
                           Theorem 6
                           
                              Product line bisimilarity is an equivalence relation.
                           


                        
                           Proof
                           To show that product line bisimilarity is an equivalence, we must show that it is reflexive, symmetric, and transitive. Reflexivity and symmetry follow immediately from the reflexivity and symmetry properties of strong bisimilarity. Hence, it only remains to prove transitivity.

Consider PL-CCS terms 
                                 s
                                 ,
                                 t
                                 ,
                                 r
                               such that 
                                 s
                                 
                                    
                                       ≃
                                    
                                    
                                       PL
                                    
                                 
                                 t
                              , and 
                                 t
                                 
                                    
                                       ≃
                                    
                                    
                                       PL
                                    
                                 
                                 r
                              . Following Definition 5, for any valid full configuration 
                                 
                                    
                                       ν
                                    
                                    
                                       1
                                    
                                    
                                       f
                                    
                                 
                               with respect to s, there exists a valid full configuration 
                                 
                                    
                                       ν
                                    
                                    
                                       2
                                    
                                    
                                       f
                                    
                                 
                               with respect to t such that 
                                 Π
                                 (
                                 s
                                 ,
                                 
                                    
                                       ν
                                    
                                    
                                       1
                                    
                                    
                                       f
                                    
                                 
                                 )
                                 ∼
                                 Π
                                 (
                                 t
                                 ,
                                 
                                    
                                       ν
                                    
                                    
                                       2
                                    
                                    
                                       f
                                    
                                 
                                 )
                              . For any 
                                 
                                    
                                       ν
                                    
                                    
                                       2
                                    
                                    
                                       f
                                    
                                 
                              , there exists a valid full configuration 
                                 
                                    
                                       ν
                                    
                                    
                                       3
                                    
                                    
                                       f
                                    
                                 
                               with respect to r such that 
                                 Π
                                 (
                                 t
                                 ,
                                 
                                    
                                       ν
                                    
                                    
                                       2
                                    
                                    
                                       f
                                    
                                 
                                 )
                                 ∼
                                 Π
                                 (
                                 r
                                 ,
                                 
                                    
                                       ν
                                    
                                    
                                       3
                                    
                                    
                                       f
                                    
                                 
                                 )
                              . Transitivity of strong bisimilarity results in 
                                 Π
                                 (
                                 s
                                 ,
                                 
                                    
                                       ν
                                    
                                    
                                       1
                                    
                                    
                                       f
                                    
                                 
                                 )
                                 ∼
                                 Π
                                 (
                                 r
                                 ,
                                 
                                    
                                       ν
                                    
                                    
                                       3
                                    
                                    
                                       f
                                    
                                 
                                 )
                              . The same argument holds for any valid full configuration 
                                 
                                    
                                       ν
                                    
                                    
                                       3
                                    
                                    
                                       f
                                    
                                 
                               with respect to r, concluding that 
                                 s
                                 
                                    
                                       ≃
                                    
                                    
                                       PL
                                    
                                 
                                 r
                              . □


                        
                           Theorem 11
                           
                              Product line bisimilarity constitutes a congruence on fully expanded PL-CCS terms.
                           


                        
                           Proof
                           Consider arbitrary product line r such that 
                                 s
                                 ⊙
                                 r
                               and 
                                 t
                                 ⊙
                                 r
                               are fully expanded, where 
                                 ⊙
                                 ∈
                                 {
                                 +
                                 ,
                                 ⊕
                                 ,
                                 ∥
                                 }
                               and 
                                 s
                                 
                                    
                                       ≃
                                    
                                    
                                       PL
                                    
                                 
                                 t
                              ; also consider renaming function ϕ, 
                                 L
                                 ⊆
                                 
                                    Act
                                 
                              ; to show that product line bisimilarity is a congruence on fully expanded PL-CCS terms we need to prove the following statements:
                                 
                                    1.
                                    
                                       
                                          α
                                          .
                                          s
                                          
                                             
                                                ≃
                                             
                                             
                                                PL
                                             
                                          
                                          α
                                          .
                                          t
                                       ;


                                       
                                          s
                                          +
                                          r
                                          
                                             
                                                ≃
                                             
                                             
                                                PL
                                             
                                          
                                          t
                                          +
                                          r
                                       ;


                                       
                                          s
                                          
                                             
                                                ⊕
                                             
                                             
                                                i
                                             
                                          
                                          r
                                          
                                             
                                                ≃
                                             
                                             
                                                PL
                                             
                                          
                                          t
                                          
                                             
                                                ⊕
                                             
                                             
                                                i
                                             
                                          
                                          r
                                       ;


                                       
                                          s
                                          ∖
                                          L
                                          
                                             
                                                ≃
                                             
                                             
                                                PL
                                             
                                          
                                          t
                                          ∖
                                          L
                                       ;


                                       
                                          s
                                          [
                                          ϕ
                                          ]
                                          
                                             
                                                ≃
                                             
                                             
                                                PL
                                             
                                          
                                          t
                                          [
                                          ϕ
                                          ]
                                       ;


                                       
                                          s
                                          ∥
                                          r
                                          
                                             
                                                ≃
                                             
                                             
                                                PL
                                             
                                          
                                          t
                                          ∥
                                          r
                                       ;


                        
                           Lemma 24
                           
                              For each PL-CCS term t, 
                              
                                 t
                                 
                                    →
                                    
                                       a
                                       ,
                                       ν
                                    
                                 
                                 
                                    
                                       t
                                    
                                    
                                       ′
                                    
                                 
                              
                              , where 
                              
                                 |
                                 ν
                                 |
                                 ≥
                                 
                                    max
                                 
                                 (
                                 
                                    bi
                                 
                                 (
                                 t
                                 )
                                 )
                              
                              , implies 
                              
                                 t
                                 
                                    →
                                    
                                       a
                                       ,
                                       ν
                                       ⋅
                                       
                                          
                                             λ
                                          
                                          
                                             ?
                                          
                                       
                                    
                                 
                                 t
                              
                              .
                           


                        
                           Proof
                           The proof is straightforward by induction on the structure of t. The only interesting cases are given below:
                                 
                                    •
                                    
                                       
                                          t
                                          ≡
                                          
                                             
                                                t
                                             
                                             
                                                1
                                             
                                          
                                          
                                             
                                                ⊕
                                             
                                             
                                                i
                                             
                                          
                                          
                                             
                                                t
                                             
                                             
                                                2
                                             
                                          
                                       : by SOS rule Select, 
                                          t
                                          
                                             →
                                             
                                                a
                                                ,
                                                ν
                                             
                                          
                                          
                                             
                                                t
                                             
                                             
                                                1
                                             
                                             
                                                ′
                                             
                                          
                                       , since 
                                          
                                             
                                                t
                                             
                                             
                                                1
                                             
                                          
                                          
                                             →
                                             
                                                a
                                                ,
                                                
                                                   
                                                      ν
                                                   
                                                   
                                                      ′
                                                   
                                                
                                             
                                          
                                          
                                             
                                                t
                                             
                                             
                                                1
                                             
                                             
                                                ′
                                             
                                          
                                        and 
                                          
                                             
                                                ν
                                             
                                             
                                                ′
                                             
                                          
                                          
                                             
                                                |
                                             
                                             
                                                i
                                             
                                          
                                          ≠
                                          R
                                       , and 
                                          ν
                                          =
                                          
                                             
                                                ν
                                             
                                             
                                                ′
                                             
                                          
                                          
                                             
                                                |
                                             
                                             
                                                i
                                                /
                                                L
                                             
                                          
                                       . By induction, 
                                          
                                             
                                                t
                                             
                                             
                                                1
                                             
                                          
                                          
                                             →
                                             
                                                a
                                                ,
                                                
                                                   
                                                      ν
                                                   
                                                   
                                                      ′
                                                   
                                                
                                                ⋅
                                                
                                                   
                                                      λ
                                                   
                                                   
                                                      ?
                                                   
                                                
                                             
                                          
                                          
                                             
                                                t
                                             
                                             
                                                1
                                             
                                             
                                                ′
                                             
                                          
                                        while 
                                          
                                             
                                                ν
                                             
                                             
                                                ′
                                             
                                          
                                          
                                             
                                                |
                                             
                                             
                                                i
                                             
                                          
                                          ≠
                                          R
                                          ⇒
                                          (
                                          
                                             
                                                ν
                                             
                                             
                                                ′
                                             
                                          
                                          ⋅
                                          
                                             
                                                λ
                                             
                                             
                                                ?
                                             
                                          
                                          )
                                          
                                             
                                                |
                                             
                                             
                                                i
                                             
                                          
                                          ≠
                                          R
                                       . Consequently by SOS rule Select, 
                                          t
                                          
                                             →
                                             
                                                a
                                                ,
                                                ν
                                                ⋅
                                                
                                                   
                                                      λ
                                                   
                                                   
                                                      ?
                                                   
                                                
                                             
                                          
                                          
                                             
                                                t
                                             
                                             
                                                1
                                             
                                             
                                                ′
                                             
                                          
                                        holds. The same discussion holds when 
                                          t
                                          
                                             →
                                             
                                                a
                                                ,
                                                ν
                                             
                                          
                                          
                                             
                                                t
                                             
                                             
                                                2
                                             
                                             
                                                ′
                                             
                                          
                                        as the result of 
                                          
                                             
                                                t
                                             
                                             
                                                2
                                             
                                          
                                          
                                             →
                                             
                                                a
                                                ,
                                                
                                                   
                                                      ν
                                                   
                                                   
                                                      ′
                                                   
                                                
                                             
                                          
                                          
                                             
                                                t
                                             
                                             
                                                2
                                             
                                             
                                                ′
                                             
                                          
                                       .


                                       
                                          t
                                          ≡
                                          
                                             
                                                t
                                             
                                             
                                                1
                                             
                                          
                                          ∥
                                          
                                             
                                                t
                                             
                                             
                                                2
                                             
                                          
                                       : by SOS rule Sync, we have 
                                          t
                                          
                                             →
                                             
                                                τ
                                                ,
                                                
                                                   
                                                      ν
                                                   
                                                   
                                                      ′
                                                   
                                                
                                                ⊙
                                                
                                                   
                                                      ν
                                                   
                                                   
                                                      ″
                                                   
                                                
                                             
                                          
                                          
                                             
                                                t
                                             
                                             
                                                1
                                             
                                             
                                                ′
                                             
                                          
                                          ∥
                                          
                                             
                                                t
                                             
                                             
                                                2
                                             
                                             
                                                ′
                                             
                                          
                                       , since 
                                          
                                             
                                                t
                                             
                                             
                                                1
                                             
                                          
                                          
                                             →
                                             
                                                a
                                                ,
                                                
                                                   
                                                      ν
                                                   
                                                   
                                                      ′
                                                   
                                                
                                             
                                          
                                          
                                             
                                                t
                                             
                                             
                                                1
                                             
                                             
                                                ′
                                             
                                          
                                        and 
                                          
                                             
                                                t
                                             
                                             
                                                2
                                             
                                          
                                          
                                             →
                                             
                                                
                                                   a
                                                   ‾
                                                
                                                ,
                                                
                                                   
                                                      ν
                                                   
                                                   
                                                      ″
                                                   
                                                
                                             
                                          
                                          
                                             
                                                t
                                             
                                             
                                                2
                                             
                                             
                                                ′
                                             
                                          
                                       , and 
                                          
                                             
                                                ν
                                             
                                             
                                                ′
                                             
                                          
                                          ≍
                                          
                                             
                                                ν
                                             
                                             
                                                ″
                                             
                                          
                                       . By induction, 
                                          
                                             
                                                t
                                             
                                             
                                                1
                                             
                                          
                                          
                                             →
                                             
                                                a
                                                ,
                                                
                                                   
                                                      ν
                                                   
                                                   
                                                      ′
                                                   
                                                
                                                ⋅
                                                
                                                   
                                                      λ
                                                   
                                                   
                                                      ?
                                                   
                                                
                                             
                                          
                                          
                                             
                                                t
                                             
                                             
                                                1
                                             
                                             
                                                ′
                                             
                                          
                                        and 
                                          
                                             
                                                t
                                             
                                             
                                                2
                                             
                                          
                                          
                                             →
                                             
                                                
                                                   a
                                                   ‾
                                                
                                                ,
                                                
                                                   
                                                      ν
                                                   
                                                   
                                                      ″
                                                   
                                                
                                                ⋅
                                                
                                                   
                                                      λ
                                                   
                                                   
                                                      ?
                                                   
                                                
                                             
                                          
                                          
                                             
                                                t
                                             
                                             
                                                2
                                             
                                             
                                                ′
                                             
                                          
                                       . Since 
                                          (
                                          
                                             
                                                ν
                                             
                                             
                                                ′
                                             
                                          
                                          ⋅
                                          
                                             
                                                λ
                                             
                                             
                                                ?
                                             
                                          
                                          )
                                          ≍
                                          (
                                          
                                             
                                                ν
                                             
                                             
                                                ″
                                             
                                          
                                          ⋅
                                          
                                             
                                                λ
                                             
                                             
                                                ?
                                             
                                          
                                          )
                                       , then by SOS role Sync, we have 
                                          t
                                          
                                             →
                                             
                                                τ
                                                ,
                                                (
                                                
                                                   
                                                      ν
                                                   
                                                   
                                                      ′
                                                   
                                                
                                                ⊙
                                                
                                                   
                                                      ν
                                                   
                                                   
                                                      ″
                                                   
                                                
                                                )
                                                ⋅
                                                
                                                   
                                                      λ
                                                   
                                                   
                                                      ?
                                                   
                                                
                                             
                                          
                                          
                                             
                                                t
                                             
                                             
                                                1
                                             
                                             
                                                ′
                                             
                                          
                                          ∥
                                          
                                             
                                                t
                                             
                                             
                                                2
                                             
                                             
                                                ′
                                             
                                          
                                       . The same argument holds when 
                                          t
                                          
                                             →
                                             
                                                a
                                                ,
                                                ν
                                             
                                          
                                          
                                             
                                                t
                                             
                                             
                                                1
                                             
                                             
                                                ′
                                             
                                          
                                          ∥
                                          
                                             
                                                t
                                             
                                             
                                                2
                                             
                                          
                                        or 
                                          t
                                          
                                             →
                                             
                                                a
                                                ,
                                                ν
                                             
                                          
                                          
                                             
                                                t
                                             
                                             
                                                1
                                             
                                          
                                          ∥
                                          
                                             
                                                t
                                             
                                             
                                                2
                                             
                                             
                                                ′
                                             
                                          
                                        by SOS rule Par as the results of 
                                          
                                             
                                                t
                                             
                                             
                                                1
                                             
                                          
                                          
                                             →
                                             
                                                a
                                                ,
                                                
                                                   
                                                      ν
                                                   
                                                   
                                                      ′
                                                   
                                                
                                             
                                          
                                          
                                             
                                                t
                                             
                                             
                                                1
                                             
                                             
                                                ′
                                             
                                          
                                        or 
                                          
                                             
                                                t
                                             
                                             
                                                2
                                             
                                          
                                          
                                             →
                                             
                                                a
                                                ,
                                                
                                                   
                                                      ν
                                                   
                                                   
                                                      ′
                                                   
                                                
                                             
                                          
                                          
                                             
                                                t
                                             
                                             
                                                2
                                             
                                             
                                                ′
                                             
                                          
                                       , respectively. □


                        
                           Lemma 25
                           
                              For each PL-CCS term t, 
                              
                                 t
                                 
                                    →
                                    
                                       a
                                       ,
                                       ν
                                    
                                 
                                 
                                    
                                       t
                                    
                                    
                                       ′
                                    
                                 
                               
                              implies 
                              
                                 t
                                 
                                    →
                                    
                                       a
                                       ,
                                       
                                          
                                             ν
                                          
                                          
                                             ′
                                          
                                       
                                    
                                 
                                 t
                              
                              , where 
                              
                                 ν
                                 =
                                 
                                    
                                       ν
                                    
                                    
                                       ′
                                    
                                 
                                 ⋅
                                 
                                    
                                       λ
                                    
                                    
                                       ?
                                    
                                 
                               
                              and 
                              
                                 |
                                 
                                    
                                       ν
                                    
                                    
                                       ′
                                    
                                 
                                 |
                                 ≥
                                 
                                    max
                                 
                                 (
                                 
                                    bi
                                 
                                 (
                                 t
                                 )
                                 )
                              
                              .
                           


                        
                           Proof
                           By induction on the structure of t. The only interesting cases are:
                                 
                                    •
                                    
                                       
                                          t
                                          ≡
                                          
                                             
                                                t
                                             
                                             
                                                1
                                             
                                          
                                          
                                             
                                                ⊕
                                             
                                             
                                                i
                                             
                                          
                                          
                                             
                                                t
                                             
                                             
                                                2
                                             
                                          
                                       : by SOS rule Select, we have 
                                          t
                                          
                                             →
                                             
                                                a
                                                ,
                                                ν
                                             
                                          
                                          
                                             
                                                t
                                             
                                             
                                                1
                                             
                                             
                                                ′
                                             
                                          
                                       , since 
                                          
                                             
                                                t
                                             
                                             
                                                1
                                             
                                          
                                          
                                             →
                                             
                                                a
                                                ,
                                                
                                                   
                                                      ν
                                                   
                                                   
                                                      ′
                                                   
                                                
                                             
                                          
                                          
                                             
                                                t
                                             
                                             
                                                ′
                                             
                                          
                                        and 
                                          
                                             
                                                ν
                                             
                                             
                                                ′
                                             
                                          
                                          
                                             
                                                |
                                             
                                             
                                                i
                                             
                                          
                                          ≠
                                          R
                                       , and 
                                          ν
                                          ≡
                                          
                                             
                                                ν
                                             
                                             
                                                ′
                                             
                                          
                                          
                                             
                                                |
                                             
                                             
                                                i
                                                /
                                                L
                                             
                                          
                                       . By induction, we obtain 
                                          
                                             
                                                t
                                             
                                             
                                                1
                                             
                                          
                                          
                                             →
                                             
                                                a
                                                ,
                                                
                                                   
                                                      ν
                                                   
                                                   
                                                      ″
                                                   
                                                
                                             
                                          
                                          
                                             
                                                t
                                             
                                             
                                                ′
                                             
                                          
                                       , where 
                                          
                                             
                                                ν
                                             
                                             
                                                ′
                                             
                                          
                                          ≡
                                          
                                             
                                                ν
                                             
                                             
                                                ″
                                             
                                          
                                          ⋅
                                          
                                             
                                                λ
                                             
                                             
                                                ?
                                             
                                          
                                        and 
                                          |
                                          
                                             
                                                ν
                                             
                                             
                                                ″
                                             
                                          
                                          |
                                          ≥
                                          
                                             max
                                          
                                          (
                                          
                                             bi
                                          
                                          (
                                          t
                                          )
                                          )
                                       . Since 
                                          i
                                          ∈
                                          
                                             bi
                                          
                                          (
                                          t
                                          )
                                       , then 
                                          i
                                          <
                                          |
                                          
                                             
                                                ν
                                             
                                             
                                                ″
                                             
                                          
                                          |
                                       , and consequently 
                                          
                                             
                                                ν
                                             
                                             
                                                ″
                                             
                                          
                                          
                                             
                                                |
                                             
                                             
                                                i
                                             
                                          
                                          ≠
                                          R
                                       . Therefore by SOS rule Select, 
                                          t
                                          
                                             →
                                             
                                                a
                                                ,
                                                
                                                   
                                                      ν
                                                   
                                                   
                                                      ″
                                                   
                                                
                                                
                                                   
                                                      |
                                                   
                                                   
                                                      i
                                                      /
                                                      L
                                                   
                                                
                                             
                                          
                                          
                                             
                                                t
                                             
                                             
                                                1
                                             
                                             
                                                ′
                                             
                                          
                                        holds. The same argument holds when 
                                          t
                                          
                                             →
                                             
                                                a
                                                ,
                                                ν
                                             
                                          
                                          
                                             
                                                t
                                             
                                             
                                                2
                                             
                                             
                                                ′
                                             
                                          
                                        as the result of 
                                          
                                             
                                                t
                                             
                                             
                                                2
                                             
                                          
                                          
                                             →
                                             
                                                a
                                                ,
                                                
                                                   
                                                      ν
                                                   
                                                   
                                                      ′
                                                   
                                                
                                             
                                          
                                          
                                             
                                                t
                                             
                                             
                                                2
                                             
                                             
                                                ′
                                             
                                          
                                       .


                                       
                                          t
                                          ≡
                                          
                                             
                                                t
                                             
                                             
                                                1
                                             
                                          
                                          ∥
                                          
                                             
                                                t
                                             
                                             
                                                2
                                             
                                          
                                       : by SOS rule Sync, we obtain 
                                          t
                                          
                                             →
                                             
                                                τ
                                                ,
                                                
                                                   
                                                      ν
                                                   
                                                   
                                                      1
                                                   
                                                
                                                ⊙
                                                
                                                   
                                                      ν
                                                   
                                                   
                                                      2
                                                   
                                                
                                             
                                          
                                          
                                             
                                                t
                                             
                                             
                                                1
                                             
                                             
                                                ′
                                             
                                          
                                          ∥
                                          
                                             
                                                t
                                             
                                             
                                                2
                                             
                                             
                                                ′
                                             
                                          
                                       , since 
                                          
                                             
                                                t
                                             
                                             
                                                1
                                             
                                          
                                          
                                             →
                                             
                                                a
                                                ,
                                                
                                                   
                                                      ν
                                                   
                                                   
                                                      1
                                                   
                                                
                                             
                                          
                                          
                                             
                                                t
                                             
                                             
                                                1
                                             
                                             
                                                ′
                                             
                                          
                                        and 
                                          
                                             
                                                t
                                             
                                             
                                                2
                                             
                                          
                                          
                                             →
                                             
                                                
                                                   a
                                                   ‾
                                                
                                                ,
                                                
                                                   
                                                      ν
                                                   
                                                   
                                                      2
                                                   
                                                
                                             
                                          
                                          
                                             
                                                t
                                             
                                             
                                                2
                                             
                                             
                                                ′
                                             
                                          
                                       , and 
                                          
                                             
                                                ν
                                             
                                             
                                                1
                                             
                                          
                                          ≍
                                          
                                             
                                                ν
                                             
                                             
                                                2
                                             
                                          
                                       . By induction, 
                                          
                                             
                                                t
                                             
                                             
                                                1
                                             
                                          
                                          
                                             →
                                             
                                                a
                                                ,
                                                
                                                   
                                                      ν
                                                   
                                                   
                                                      1
                                                   
                                                   
                                                      ′
                                                   
                                                
                                             
                                          
                                          
                                             
                                                t
                                             
                                             
                                                1
                                             
                                             
                                                ′
                                             
                                          
                                        and 
                                          
                                             
                                                t
                                             
                                             
                                                2
                                             
                                          
                                          
                                             →
                                             
                                                
                                                   a
                                                   ‾
                                                
                                                ,
                                                
                                                   
                                                      ν
                                                   
                                                   
                                                      2
                                                   
                                                   
                                                      ′
                                                   
                                                
                                             
                                          
                                          
                                             
                                                t
                                             
                                             
                                                2
                                             
                                             
                                                ′
                                             
                                          
                                       , where 
                                          
                                             
                                                ν
                                             
                                             
                                                1
                                             
                                          
                                          =
                                          
                                             
                                                ν
                                             
                                             
                                                1
                                             
                                             
                                                ′
                                             
                                          
                                          ⋅
                                          
                                             
                                                λ
                                             
                                             
                                                ?
                                             
                                          
                                       , 
                                          
                                             
                                                ν
                                             
                                             
                                                2
                                             
                                          
                                          =
                                          
                                             
                                                ν
                                             
                                             
                                                2
                                             
                                             
                                                ′
                                             
                                          
                                          ⋅
                                          
                                             
                                                λ
                                             
                                             
                                                ?
                                             
                                          
                                       , and 
                                          |
                                          
                                             
                                                ν
                                             
                                             
                                                1
                                             
                                             
                                                ′
                                             
                                          
                                          |
                                          ,
                                          |
                                          
                                             
                                                ν
                                             
                                             
                                                2
                                             
                                             
                                                ′
                                             
                                          
                                          |
                                          ≥
                                          
                                             max
                                          
                                          (
                                          
                                             bi
                                          
                                          (
                                          t
                                          )
                                          )
                                       . Therefore, 
                                          
                                             
                                                ν
                                             
                                             
                                                1
                                             
                                          
                                          ≍
                                          
                                             
                                                ν
                                             
                                             
                                                2
                                             
                                          
                                        implies 
                                          
                                             
                                                ν
                                             
                                             
                                                1
                                             
                                             
                                                ′
                                             
                                          
                                          ≍
                                          
                                             
                                                ν
                                             
                                             
                                                2
                                             
                                             
                                                ′
                                             
                                          
                                       , and by SOS rule Sync, we have that 
                                          t
                                          
                                             →
                                             
                                                a
                                                ,
                                                
                                                   
                                                      ν
                                                   
                                                   
                                                      1
                                                   
                                                   
                                                      ′
                                                   
                                                
                                                ⊙
                                                
                                                   
                                                      ν
                                                   
                                                   
                                                      2
                                                   
                                                   
                                                      ′
                                                   
                                                
                                             
                                          
                                          
                                             
                                                t
                                             
                                             
                                                1
                                             
                                             
                                                ′
                                             
                                          
                                          ∥
                                          
                                             
                                                t
                                             
                                             
                                                2
                                             
                                             
                                                ′
                                             
                                          
                                       . The same argument holds when 
                                          t
                                          
                                             →
                                             
                                                a
                                                ,
                                                ν
                                             
                                          
                                          
                                             
                                                t
                                             
                                             
                                                1
                                             
                                             
                                                ′
                                             
                                          
                                          ∥
                                          
                                             
                                                t
                                             
                                             
                                                2
                                             
                                          
                                        or 
                                          t
                                          
                                             →
                                             
                                                a
                                                ,
                                                ν
                                             
                                          
                                          
                                             
                                                t
                                             
                                             
                                                1
                                             
                                          
                                          ∥
                                          
                                             
                                                t
                                             
                                             
                                                2
                                             
                                             
                                                ′
                                             
                                          
                                        by SOS rule Par as the results of 
                                          
                                             
                                                t
                                             
                                             
                                                1
                                             
                                          
                                          
                                             →
                                             
                                                a
                                                ,
                                                
                                                   
                                                      ν
                                                   
                                                   
                                                      ′
                                                   
                                                
                                             
                                          
                                          
                                             
                                                t
                                             
                                             
                                                1
                                             
                                             
                                                ′
                                             
                                          
                                        or 
                                          
                                             
                                                t
                                             
                                             
                                                2
                                             
                                          
                                          
                                             →
                                             
                                                a
                                                ,
                                                
                                                   
                                                      ν
                                                   
                                                   
                                                      ′
                                                   
                                                
                                             
                                          
                                          
                                             
                                                t
                                             
                                             
                                                2
                                             
                                             
                                                ′
                                             
                                          
                                       , respectively. □

We now proceed with the proof of Theorem 11. Following Definition 5, 
                           s
                           
                              
                                 ≃
                              
                              
                                 PL
                              
                           
                           t
                         implies that for any full configuration 
                           
                              
                                 ν
                              
                              
                                 1
                              
                              
                                 f
                              
                           
                         with respect to s, there exists a valid full configuration 
                           
                              
                                 ν
                              
                              
                                 2
                              
                              
                                 f
                              
                           
                         with respect to t such that 
                           Π
                           (
                           s
                           ,
                           
                              
                                 ν
                              
                              
                                 1
                              
                              
                                 f
                              
                           
                           )
                           ∼
                           Π
                           (
                           t
                           ,
                           
                              
                                 ν
                              
                              
                                 2
                              
                              
                                 f
                              
                           
                           )
                         holds. In the remainder of the proof, we assume that 
                           Π
                           (
                           s
                           ,
                           
                              
                                 ν
                              
                              
                                 1
                              
                              
                                 f
                              
                           
                           )
                           ∼
                           Π
                           (
                           t
                           ,
                           
                              
                                 ν
                              
                              
                                 2
                              
                              
                                 f
                              
                           
                           )
                         is witnessed by strong bisimulation relation 
                           R
                        .


                        Case 1. We have that 
                           
                              
                                 ν
                              
                              
                                 1
                              
                              
                                 f
                              
                           
                           ∈
                           
                              VFConfig
                           
                           (
                           s
                           )
                         and 
                           
                              
                                 ν
                              
                              
                                 2
                              
                              
                                 f
                              
                           
                           ∈
                           
                              VFConfig
                           
                           (
                           t
                           )
                         and hence, 
                           
                              
                                 ν
                              
                              
                                 1
                              
                              
                                 f
                              
                           
                           ∈
                           
                              VFConfig
                           
                           (
                           a
                           .
                           s
                           )
                         and 
                           
                              
                                 ν
                              
                              
                                 2
                              
                              
                                 f
                              
                           
                           ∈
                           
                              VFConfig
                           
                           (
                           a
                           .
                           t
                           )
                        . Therefore, we only need to prove that 
                           Π
                           (
                           a
                           .
                           s
                           ,
                           
                              
                                 ν
                              
                              
                                 1
                              
                              
                                 f
                              
                           
                           )
                           ∼
                           Π
                           (
                           a
                           .
                           t
                           ,
                           
                              
                                 ν
                              
                              
                                 2
                              
                              
                                 f
                              
                           
                           )
                        . To this end, we prove that the closure of 
                           R
                         with action prefixing, denoted by 
                           
                              
                                 R
                              
                              
                                 ′
                              
                           
                         is a strong bisimulation relation. We formally define 
                           
                              
                                 R
                              
                              
                                 ′
                              
                           
                         as 
                           R
                           ∪
                           {
                           (
                           Π
                           (
                           a
                           .
                           s
                           ,
                           
                              
                                 ν
                              
                              
                                 1
                              
                              
                                 f
                              
                           
                           )
                           ,
                           Π
                           (
                           a
                           .
                           t
                           ,
                           
                              
                                 ν
                              
                              
                                 2
                              
                              
                                 f
                              
                           
                           )
                           )
                           |
                           (
                           Π
                           (
                           s
                           ,
                           
                              
                                 ν
                              
                              
                                 1
                              
                              
                                 f
                              
                           
                           )
                           ,
                           Π
                           (
                           t
                           ,
                           
                              
                                 ν
                              
                              
                                 2
                              
                              
                                 f
                              
                           
                           )
                           )
                           ∈
                           R
                           }
                        . It remains to show the transfer conditions of Definition 3 for each pair in 
                           
                              
                                 R
                              
                              
                                 ′
                              
                           
                        . The case for the pairs in 
                           R
                         holds vacuously. We only need to show the transfer conditions for an arbitrary pair 
                           (
                           Π
                           (
                           a
                           .
                           s
                           ,
                           
                              
                                 ν
                              
                              
                                 1
                              
                              
                                 f
                              
                           
                           )
                           ,
                           Π
                           (
                           a
                           .
                           t
                           ,
                           
                              
                                 ν
                              
                              
                                 2
                              
                              
                                 f
                              
                           
                           )
                           )
                           ∈
                           
                              
                                 R
                              
                              
                                 ′
                              
                           
                        . Assume that 
                           Π
                           (
                           a
                           .
                           s
                           ,
                           
                              
                                 ν
                              
                              
                                 1
                              
                              
                                 f
                              
                           
                           )
                           
                              →
                              a
                           
                           (
                           
                              
                                 s
                              
                              
                                 ′
                              
                           
                           ,
                           
                              
                                 ν
                              
                              
                                 1
                              
                              
                                 f
                              
                           
                           )
                         for some 
                           
                              
                                 s
                              
                              
                                 ′
                              
                           
                        . This transition can only be due to SOS rule Prefix and 
                           
                              
                                 s
                              
                              
                                 ′
                              
                           
                         must be s. Hence, we have that 
                           a
                           .
                           s
                           
                              →
                              
                                 a
                                 ,
                                 
                                    
                                       ν
                                    
                                    
                                       ?
                                    
                                 
                              
                           
                           s
                         and 
                           
                              
                                 ν
                              
                              
                                 ?
                              
                           
                           ⊑
                           
                              
                                 ν
                              
                              
                                 1
                              
                              
                                 f
                              
                           
                        . Similarly, it follows from SOS rule Prefix and the definition of the LTS semantic of product lines that 
                           Π
                           (
                           a
                           .
                           t
                           ,
                           
                              
                                 ν
                              
                              
                                 2
                              
                              
                                 f
                              
                           
                           )
                           
                              →
                              a
                           
                           Π
                           (
                           t
                           ,
                           
                              
                                 ν
                              
                              
                                 2
                              
                              
                                 f
                              
                           
                           )
                        . Due to the definition of 
                           
                              
                                 R
                              
                              
                                 ′
                              
                           
                        , we have that 
                           (
                           Π
                           (
                           s
                           ,
                           
                              
                                 ν
                              
                              
                                 1
                              
                              
                                 f
                              
                           
                           )
                           ,
                           Π
                           (
                           t
                           ,
                           
                              
                                 ν
                              
                              
                                 2
                              
                              
                                 f
                              
                           
                           )
                           )
                           ∈
                           R
                         and hence 
                           (
                           Π
                           (
                           s
                           ,
                           
                              
                                 ν
                              
                              
                                 1
                              
                              
                                 f
                              
                           
                           )
                           ,
                           Π
                           (
                           t
                           ,
                           
                              
                                 ν
                              
                              
                                 2
                              
                              
                                 f
                              
                           
                           )
                           )
                           ∈
                           
                              
                                 R
                              
                              
                                 ′
                              
                           
                        , which was to be shown.


                        Case 3. Following the Definition 5, we prove that for any valid full configuration 
                           
                              
                                 
                                    
                                       ν
                                    
                                    
                                       f
                                    
                                 
                              
                              
                                 1
                              
                              
                                 ′
                              
                           
                         with respect to 
                           s
                           
                              
                                 ⊕
                              
                              
                                 i
                              
                           
                           r
                        , there exists a valid full configuration 
                           
                              
                                 
                                    
                                       ν
                                    
                                    
                                       f
                                    
                                 
                              
                              
                                 2
                              
                              
                                 ′
                              
                           
                         with respect to 
                           t
                           
                              
                                 ⊕
                              
                              
                                 i
                              
                           
                           r
                         such that 
                           Π
                           (
                           s
                           
                              
                                 ⊕
                              
                              
                                 i
                              
                           
                           r
                           ,
                           
                              
                                 
                                    
                                       ν
                                    
                                    
                                       f
                                    
                                 
                              
                              
                                 1
                              
                              
                                 ′
                              
                           
                           )
                           ∼
                           Π
                           (
                           t
                           
                              
                                 ⊕
                              
                              
                                 i
                              
                           
                           r
                           ,
                           
                              
                                 
                                    
                                       ν
                                    
                                    
                                       f
                                    
                                 
                              
                              
                                 2
                              
                              
                                 ′
                              
                           
                           )
                         holds. Since 
                           s
                           
                              
                                 ⊕
                              
                              
                                 i
                              
                           
                           r
                         and 
                           t
                           
                              
                                 ⊕
                              
                              
                                 i
                              
                           
                           r
                         are fully expanded, then i is fresh in s, t, and r. Regarding the value of 
                           
                              
                                 
                                    
                                       ν
                                    
                                    
                                       f
                                    
                                 
                              
                              
                                 1
                              
                              
                                 ′
                              
                           
                           
                              
                                 |
                              
                              
                                 i
                              
                           
                        , two cases can be considered:
                           
                              1.
                              
                                 
                                    
                                       
                                          
                                             
                                                ν
                                             
                                             
                                                f
                                             
                                          
                                       
                                       
                                          1
                                       
                                       
                                          ′
                                       
                                    
                                    
                                       
                                          |
                                       
                                       
                                          i
                                       
                                    
                                    =
                                    L
                                 : Let 
                                    
                                       
                                          
                                             
                                                ν
                                             
                                             
                                                f
                                             
                                          
                                       
                                       
                                          1
                                       
                                       
                                          ′
                                       
                                    
                                    =
                                    
                                       
                                          ν
                                       
                                       
                                          1
                                       
                                       
                                          f
                                       
                                    
                                    ⋅
                                    
                                       
                                          λ
                                       
                                       
                                          1
                                       
                                    
                                 , then take 
                                    
                                       
                                          
                                             
                                                ν
                                             
                                             
                                                f
                                             
                                          
                                       
                                       
                                          2
                                       
                                       
                                          ′
                                       
                                    
                                    =
                                    
                                       
                                          ν
                                       
                                       
                                          1
                                       
                                       
                                          f
                                       
                                    
                                    ⋅
                                    
                                       
                                          λ
                                       
                                       
                                          2
                                       
                                    
                                  such that 
                                    Π
                                    (
                                    s
                                    ,
                                    
                                       
                                          ν
                                       
                                       
                                          1
                                       
                                       
                                          f
                                       
                                    
                                    )
                                    ∼
                                    Π
                                    (
                                    t
                                    ,
                                    
                                       
                                          ν
                                       
                                       
                                          2
                                       
                                       
                                          f
                                       
                                    
                                    )
                                  and 
                                    
                                       
                                          
                                             
                                                ν
                                             
                                             
                                                f
                                             
                                          
                                       
                                       
                                          1
                                       
                                       
                                          ′
                                       
                                    
                                    
                                       
                                          |
                                       
                                       
                                          i
                                       
                                    
                                    =
                                    
                                       
                                          
                                             
                                                ν
                                             
                                             
                                                f
                                             
                                          
                                       
                                       
                                          2
                                       
                                       
                                          ′
                                       
                                    
                                    
                                       
                                          |
                                       
                                       
                                          i
                                       
                                    
                                 . Construct 
                                    
                                       
                                          R
                                       
                                       
                                          1
                                       
                                       
                                          ′
                                       
                                    
                                  as:
                                    
                                       
                                          
                                             
                                                
                                                   
                                                      
                                                         R
                                                      
                                                      
                                                         1
                                                      
                                                      
                                                         ′
                                                      
                                                   
                                                
                                                
                                                   =
                                                
                                                
                                                   {
                                                   (
                                                   Π
                                                   (
                                                   s
                                                   
                                                      
                                                         ⊕
                                                      
                                                      
                                                         i
                                                      
                                                   
                                                   r
                                                   ,
                                                   
                                                      
                                                         
                                                            
                                                               ν
                                                            
                                                            
                                                               f
                                                            
                                                         
                                                      
                                                      
                                                         1
                                                      
                                                      
                                                         ′
                                                      
                                                   
                                                   )
                                                   ,
                                                   Π
                                                   (
                                                   t
                                                   
                                                      
                                                         ⊕
                                                      
                                                      
                                                         i
                                                      
                                                   
                                                   r
                                                   ,
                                                   
                                                      
                                                         
                                                            
                                                               ν
                                                            
                                                            
                                                               f
                                                            
                                                         
                                                      
                                                      
                                                         2
                                                      
                                                      
                                                         ′
                                                      
                                                   
                                                   )
                                                   )
                                                   }
                                                   ∪
                                                
                                             
                                             
                                                
                                                
                                                
                                                   
                                                   {
                                                   (
                                                   Π
                                                   (
                                                   
                                                      
                                                         s
                                                      
                                                      
                                                         ′
                                                      
                                                   
                                                   ,
                                                   
                                                      
                                                         
                                                            
                                                               ν
                                                            
                                                            
                                                               f
                                                            
                                                         
                                                      
                                                      
                                                         1
                                                      
                                                      
                                                         ′
                                                      
                                                   
                                                   )
                                                   ,
                                                   Π
                                                   (
                                                   
                                                      
                                                         t
                                                      
                                                      
                                                         ′
                                                      
                                                   
                                                   ,
                                                   
                                                      
                                                         
                                                            
                                                               ν
                                                            
                                                            
                                                               f
                                                            
                                                         
                                                      
                                                      
                                                         2
                                                      
                                                      
                                                         ′
                                                      
                                                   
                                                   )
                                                   )
                                                   |
                                                   (
                                                   Π
                                                   (
                                                   
                                                      
                                                         s
                                                      
                                                      
                                                         ′
                                                      
                                                   
                                                   ,
                                                   
                                                      
                                                         ν
                                                      
                                                      
                                                         1
                                                      
                                                      
                                                         f
                                                      
                                                   
                                                   )
                                                   ,
                                                   Π
                                                   (
                                                   
                                                      
                                                         t
                                                      
                                                      
                                                         ′
                                                      
                                                   
                                                   ,
                                                   
                                                      
                                                         ν
                                                      
                                                      
                                                         2
                                                      
                                                      
                                                         f
                                                      
                                                   
                                                   )
                                                   )
                                                   ∈
                                                   R
                                                   }
                                                   .
                                                
                                             
                                          
                                       
                                    
                                  We prove that 
                                    
                                       
                                          R
                                       
                                       
                                          1
                                       
                                       
                                          ′
                                       
                                    
                                  satisfies the transfer conditions of Definition 3. We only examine the transfer conditions for an arbitrary pair 
                                    (
                                    Π
                                    (
                                    s
                                    
                                       
                                          ⊕
                                       
                                       
                                          i
                                       
                                    
                                    r
                                    ,
                                    
                                       
                                          
                                             
                                                ν
                                             
                                             
                                                f
                                             
                                          
                                       
                                       
                                          1
                                       
                                       
                                          ′
                                       
                                    
                                    )
                                    ,
                                    Π
                                    (
                                    t
                                    
                                       
                                          ⊕
                                       
                                       
                                          i
                                       
                                    
                                    r
                                    ,
                                    
                                       
                                          
                                             
                                                ν
                                             
                                             
                                                f
                                             
                                          
                                       
                                       
                                          2
                                       
                                       
                                          ′
                                       
                                    
                                    )
                                    )
                                    ∈
                                    
                                       
                                          R
                                       
                                       
                                          1
                                       
                                       
                                          ′
                                       
                                    
                                  as the pairs in 
                                    R
                                  trivially satisfy the transfer conditions. Suppose that 
                                    Π
                                    (
                                    s
                                    
                                       
                                          ⊕
                                       
                                       
                                          i
                                       
                                    
                                    r
                                    ,
                                    
                                       
                                          
                                             
                                                ν
                                             
                                             
                                                f
                                             
                                          
                                       
                                       
                                          1
                                       
                                       
                                          ′
                                       
                                    
                                    )
                                    
                                       →
                                       a
                                    
                                    p
                                 . This transition can only be due to SOS rule Select and transition 
                                    s
                                    
                                       →
                                       
                                          a
                                          ,
                                          ν
                                       
                                    
                                    
                                       
                                          s
                                       
                                       
                                          ′
                                       
                                    
                                 , where 
                                    ν
                                    ⊑
                                    
                                       
                                          
                                             
                                                ν
                                             
                                             
                                                f
                                             
                                          
                                       
                                       
                                          1
                                       
                                       
                                          ′
                                       
                                    
                                 , and 
                                    p
                                    ≡
                                    Π
                                    (
                                    
                                       
                                          s
                                       
                                       
                                          ′
                                       
                                    
                                    ,
                                    
                                       
                                          
                                             
                                                ν
                                             
                                             
                                                f
                                             
                                          
                                       
                                       
                                          1
                                       
                                       
                                          ′
                                       
                                    
                                    )
                                 . Hence, we have that 
                                    s
                                    
                                       
                                          ⊕
                                       
                                       
                                          i
                                       
                                    
                                    r
                                    
                                       →
                                       
                                          a
                                          ,
                                          ν
                                          
                                             
                                                |
                                             
                                             
                                                i
                                                /
                                                L
                                             
                                          
                                       
                                    
                                    
                                       
                                          s
                                       
                                       
                                          ′
                                       
                                    
                                 . By Lemma 25, 
                                    s
                                    
                                       →
                                       
                                          a
                                          ,
                                          
                                             
                                                ν
                                             
                                             
                                                s
                                             
                                          
                                       
                                    
                                    
                                       
                                          s
                                       
                                       
                                          ′
                                       
                                    
                                 , where 
                                    ν
                                    =
                                    
                                       
                                          ν
                                       
                                       
                                          s
                                       
                                    
                                    ⋅
                                    
                                       
                                          λ
                                       
                                       
                                          ?
                                       
                                    
                                 , 
                                    
                                       
                                          ν
                                       
                                       
                                          s
                                       
                                    
                                    ⊑
                                    
                                       
                                          ν
                                       
                                       
                                          1
                                       
                                       
                                          f
                                       
                                    
                                  and 
                                    
                                       
                                          ν
                                       
                                       
                                          s
                                       
                                    
                                    
                                       
                                          |
                                       
                                       
                                          i
                                       
                                    
                                    =
                                    ?
                                 . Therefore, it follows from the definition of the LTS semantic of product lines that 
                                    Π
                                    (
                                    s
                                    ,
                                    
                                       
                                          ν
                                       
                                       
                                          1
                                       
                                       
                                          f
                                       
                                    
                                    )
                                    
                                       →
                                       a
                                    
                                    Π
                                    (
                                    
                                       
                                          s
                                       
                                       
                                          ′
                                       
                                    
                                    ,
                                    
                                       
                                          ν
                                       
                                       
                                          1
                                       
                                       
                                          f
                                       
                                    
                                    )
                                 . Furthermore, 
                                    Π
                                    (
                                    s
                                    ,
                                    
                                       
                                          ν
                                       
                                       
                                          1
                                       
                                       
                                          f
                                       
                                    
                                    )
                                    ∼
                                    Π
                                    (
                                    t
                                    ,
                                    
                                       
                                          ν
                                       
                                       
                                          2
                                       
                                       
                                          f
                                       
                                    
                                    )
                                  implies that 
                                    Π
                                    (
                                    t
                                    ,
                                    
                                       
                                          ν
                                       
                                       
                                          2
                                       
                                       
                                          f
                                       
                                    
                                    )
                                    
                                       →
                                       a
                                    
                                    Π
                                    (
                                    
                                       
                                          t
                                       
                                       
                                          ′
                                       
                                    
                                    ,
                                    
                                       
                                          ν
                                       
                                       
                                          2
                                       
                                       
                                          f
                                       
                                    
                                    )
                                 , and 
                                    Π
                                    (
                                    
                                       
                                          s
                                       
                                       
                                          ′
                                       
                                    
                                    ,
                                    
                                       
                                          ν
                                       
                                       
                                          1
                                       
                                       
                                          f
                                       
                                    
                                    )
                                    
                                    R
                                    
                                    Π
                                    (
                                    
                                       
                                          t
                                       
                                       
                                          ′
                                       
                                    
                                    ,
                                    
                                       
                                          ν
                                       
                                       
                                          2
                                       
                                       
                                          f
                                       
                                    
                                    )
                                 . Similarly, it follows from the definition of the LTS semantic of product lines that 
                                    t
                                    
                                       →
                                       
                                          a
                                          ,
                                          
                                             
                                                ν
                                             
                                             
                                                t
                                             
                                          
                                       
                                    
                                    
                                       
                                          t
                                       
                                       
                                          ′
                                       
                                    
                                 , where 
                                    
                                       
                                          ν
                                       
                                       
                                          t
                                       
                                    
                                    ⊑
                                    
                                       
                                          ν
                                       
                                       
                                          2
                                       
                                       
                                          f
                                       
                                    
                                 , 
                                    
                                       
                                          ν
                                       
                                       
                                          t
                                       
                                    
                                    
                                       
                                          |
                                       
                                       
                                          i
                                       
                                    
                                    =
                                    ?
                                 . Thus, by Lemma 24, 
                                    t
                                    
                                       →
                                       
                                          a
                                          ,
                                          
                                             
                                                ν
                                             
                                             
                                                ′
                                             
                                          
                                       
                                    
                                    
                                       
                                          t
                                       
                                       
                                          ′
                                       
                                    
                                 , where 
                                    
                                       
                                          ν
                                       
                                       
                                          ′
                                       
                                    
                                    =
                                    
                                       
                                          ν
                                       
                                       
                                          t
                                       
                                    
                                    ⋅
                                    
                                       
                                          λ
                                       
                                       
                                          ?
                                       
                                    
                                  and 
                                    
                                       
                                          ν
                                       
                                       
                                          ′
                                       
                                    
                                    ⊑
                                    
                                       
                                          
                                             
                                                ν
                                             
                                             
                                                f
                                             
                                          
                                       
                                       
                                          2
                                       
                                       
                                          ′
                                       
                                    
                                 . From SOS rule Select and the definition of the LTS semantic of product lines, it follows that 
                                    Π
                                    (
                                    t
                                    
                                       
                                          ⊕
                                       
                                       
                                          i
                                       
                                    
                                    r
                                    ,
                                    
                                       
                                          
                                             
                                                ν
                                             
                                             
                                                f
                                             
                                          
                                       
                                       
                                          2
                                       
                                       
                                          ′
                                       
                                    
                                    )
                                    
                                       →
                                       a
                                    
                                    Π
                                    (
                                    
                                       
                                          t
                                       
                                       
                                          ′
                                       
                                    
                                    ,
                                    
                                       
                                          
                                             
                                                ν
                                             
                                             
                                                f
                                             
                                          
                                       
                                       
                                          2
                                       
                                       
                                          ′
                                       
                                    
                                    )
                                 . Due to the definition of 
                                    
                                       
                                          R
                                       
                                       
                                          ′
                                       
                                    
                                 , we have that 
                                    (
                                    Π
                                    (
                                    
                                       
                                          s
                                       
                                       
                                          ′
                                       
                                    
                                    ,
                                    
                                       
                                          ν
                                       
                                       
                                          1
                                       
                                       
                                          f
                                       
                                    
                                    )
                                    ,
                                    Π
                                    (
                                    
                                       
                                          t
                                       
                                       
                                          ′
                                       
                                    
                                    ,
                                    
                                       
                                          ν
                                       
                                       
                                          2
                                       
                                       
                                          f
                                       
                                    
                                    )
                                    )
                                    ∈
                                    R
                                  and hence 
                                    (
                                    Π
                                    (
                                    
                                       
                                          s
                                       
                                       
                                          ′
                                       
                                    
                                    ,
                                    
                                       
                                          ν
                                       
                                       
                                          1
                                       
                                       
                                          f
                                       
                                    
                                    )
                                    ,
                                    Π
                                    (
                                    
                                       
                                          t
                                       
                                       
                                          ′
                                       
                                    
                                    ,
                                    
                                       
                                          ν
                                       
                                       
                                          2
                                       
                                       
                                          f
                                       
                                    
                                    )
                                    )
                                    ∈
                                    
                                       
                                          R
                                       
                                       
                                          ′
                                       
                                    
                                 , which was to be shown. The same discussion holds when 
                                    Π
                                    (
                                    t
                                    
                                       
                                          ⊕
                                       
                                       
                                          i
                                       
                                    
                                    r
                                    ,
                                    
                                       
                                          
                                             
                                                ν
                                             
                                             
                                                f
                                             
                                          
                                       
                                       
                                          2
                                       
                                       
                                          ′
                                       
                                    
                                    )
                                    
                                       →
                                       a
                                    
                                    p
                                 . Concluding that 
                                    
                                       
                                          R
                                       
                                       
                                          1
                                       
                                       
                                          ′
                                       
                                    
                                  is a strong bisimulation.


                                 
                                    
                                       
                                          
                                             
                                                ν
                                             
                                             
                                                f
                                             
                                          
                                       
                                       
                                          1
                                       
                                       
                                          ′
                                       
                                    
                                    
                                       
                                          |
                                       
                                       
                                          i
                                       
                                    
                                    =
                                    R
                                 : Let 
                                    
                                       
                                          
                                             
                                                ν
                                             
                                             
                                                f
                                             
                                          
                                       
                                       
                                          1
                                       
                                       
                                          ′
                                       
                                    
                                    =
                                    
                                       
                                          ν
                                       
                                       
                                          f
                                       
                                    
                                    ⋅
                                    
                                       
                                          λ
                                       
                                       
                                          1
                                       
                                    
                                 , where 
                                    
                                       
                                          ν
                                       
                                       
                                          f
                                       
                                    
                                  is a valid configured configuration with respect to r, then take 
                                    
                                       
                                          
                                             
                                                ν
                                             
                                             
                                                f
                                             
                                          
                                       
                                       
                                          2
                                       
                                       
                                          ′
                                       
                                    
                                    =
                                    
                                       
                                          ν
                                       
                                       
                                          f
                                       
                                    
                                    ⋅
                                    
                                       
                                          λ
                                       
                                       
                                          2
                                       
                                    
                                  such that 
                                    
                                       
                                          
                                             
                                                ν
                                             
                                             
                                                f
                                             
                                          
                                       
                                       
                                          1
                                       
                                       
                                          ′
                                       
                                    
                                    
                                       
                                          |
                                       
                                       
                                          i
                                       
                                    
                                    =
                                    
                                       
                                          
                                             
                                                ν
                                             
                                             
                                                f
                                             
                                          
                                       
                                       
                                          2
                                       
                                       
                                          ′
                                       
                                    
                                    
                                       
                                          |
                                       
                                       
                                          i
                                       
                                    
                                 . Construct 
                                    
                                       
                                          R
                                       
                                       
                                          2
                                       
                                       
                                          ′
                                       
                                    
                                  as:
                                    
                                       
                                          
                                             
                                                
                                                   
                                                      
                                                         
                                                            R
                                                         
                                                         
                                                            2
                                                         
                                                         
                                                            ′
                                                         
                                                      
                                                      =
                                                      {
                                                      (
                                                      Π
                                                      (
                                                      s
                                                      
                                                         
                                                            ⊕
                                                         
                                                         
                                                            i
                                                         
                                                      
                                                      r
                                                      ,
                                                      
                                                         
                                                            
                                                               
                                                                  ν
                                                               
                                                               
                                                                  f
                                                               
                                                            
                                                         
                                                         
                                                            1
                                                         
                                                         
                                                            ′
                                                         
                                                      
                                                      )
                                                      ,
                                                      Π
                                                      (
                                                      t
                                                      
                                                         
                                                            ⊕
                                                         
                                                         
                                                            i
                                                         
                                                      
                                                      r
                                                      ,
                                                      
                                                         
                                                            
                                                               
                                                                  ν
                                                               
                                                               
                                                                  f
                                                               
                                                            
                                                         
                                                         
                                                            2
                                                         
                                                         
                                                            ′
                                                         
                                                      
                                                      )
                                                      )
                                                      }
                                                      ∪
                                                      {
                                                      (
                                                      Π
                                                      (
                                                      
                                                         
                                                            r
                                                         
                                                         
                                                            ′
                                                         
                                                      
                                                      ,
                                                      
                                                         
                                                            
                                                               
                                                                  ν
                                                               
                                                               
                                                                  f
                                                               
                                                            
                                                         
                                                         
                                                            1
                                                         
                                                         
                                                            ′
                                                         
                                                      
                                                      )
                                                      ,
                                                      Π
                                                      (
                                                      
                                                         
                                                            r
                                                         
                                                         
                                                            ′
                                                         
                                                      
                                                      ,
                                                      
                                                         
                                                            
                                                               
                                                                  ν
                                                               
                                                               
                                                                  f
                                                               
                                                            
                                                         
                                                         
                                                            2
                                                         
                                                         
                                                            ′
                                                         
                                                      
                                                      )
                                                      )
                                                      }
                                                   
                                                
                                             
                                             .
                                          
                                       
                                    
                                  We prove that 
                                    
                                       
                                          R
                                       
                                       
                                          2
                                       
                                       
                                          ′
                                       
                                    
                                  satisfies the transfer conditions of Definition 3. We only examine the transfer conditions for an arbitrary pair 
                                    (
                                    Π
                                    (
                                    s
                                    
                                       
                                          ⊕
                                       
                                       
                                          i
                                       
                                    
                                    r
                                    ,
                                    
                                       
                                          
                                             
                                                ν
                                             
                                             
                                                f
                                             
                                          
                                       
                                       
                                          1
                                       
                                       
                                          ′
                                       
                                    
                                    )
                                    ,
                                    Π
                                    (
                                    t
                                    
                                       
                                          ⊕
                                       
                                       
                                          i
                                       
                                    
                                    r
                                    ,
                                    
                                       
                                          
                                             
                                                ν
                                             
                                             
                                                f
                                             
                                          
                                       
                                       
                                          2
                                       
                                       
                                          ′
                                       
                                    
                                    )
                                    )
                                    ∈
                                    
                                       
                                          R
                                       
                                       
                                          2
                                       
                                       
                                          ′
                                       
                                    
                                  as the pairs in 
                                    {
                                    (
                                    Π
                                    (
                                    
                                       
                                          r
                                       
                                       
                                          ′
                                       
                                    
                                    ,
                                    
                                       
                                          
                                             
                                                ν
                                             
                                             
                                                f
                                             
                                          
                                       
                                       
                                          1
                                       
                                       
                                          ′
                                       
                                    
                                    )
                                    ,
                                    Π
                                    (
                                    
                                       
                                          r
                                       
                                       
                                          ′
                                       
                                    
                                    ,
                                    
                                       
                                          
                                             
                                                ν
                                             
                                             
                                                f
                                             
                                          
                                       
                                       
                                          2
                                       
                                       
                                          ′
                                       
                                    
                                    )
                                    )
                                    }
                                  trivially satisfy the transfer conditions. Suppose that 
                                    Π
                                    (
                                    s
                                    
                                       
                                          ⊕
                                       
                                       
                                          i
                                       
                                    
                                    r
                                    ,
                                    
                                       
                                          
                                             
                                                ν
                                             
                                             
                                                f
                                             
                                          
                                       
                                       
                                          1
                                       
                                       
                                          ′
                                       
                                    
                                    )
                                    
                                       →
                                       a
                                    
                                    p
                                 . This transition can only be due to SOS rule Select and transition 
                                    r
                                    
                                       →
                                       
                                          a
                                          ,
                                          ν
                                       
                                    
                                    
                                       
                                          r
                                       
                                       
                                          ′
                                       
                                    
                                 , where 
                                    ν
                                    ⊑
                                    
                                       
                                          
                                             
                                                ν
                                             
                                             
                                                f
                                             
                                          
                                       
                                       
                                          1
                                       
                                       
                                          ′
                                       
                                    
                                 , and 
                                    p
                                    ≡
                                    Π
                                    (
                                    
                                       
                                          r
                                       
                                       
                                          ′
                                       
                                    
                                    ,
                                    
                                       
                                          
                                             
                                                ν
                                             
                                             
                                                f
                                             
                                          
                                       
                                       
                                          1
                                       
                                       
                                          ′
                                       
                                    
                                    )
                                 . Hence, we have that 
                                    s
                                    
                                       
                                          ⊕
                                       
                                       
                                          i
                                       
                                    
                                    r
                                    
                                       →
                                       
                                          a
                                          ,
                                          ν
                                          
                                             
                                                |
                                             
                                             
                                                i
                                                /
                                                R
                                             
                                          
                                       
                                    
                                    
                                       
                                          r
                                       
                                       
                                          ′
                                       
                                    
                                 . By Lemma 25, 
                                    r
                                    
                                       →
                                       
                                          a
                                          ,
                                          
                                             
                                                ν
                                             
                                             
                                                r
                                             
                                          
                                       
                                    
                                    
                                       
                                          r
                                       
                                       
                                          ′
                                       
                                    
                                 , where 
                                    ν
                                    =
                                    
                                       
                                          ν
                                       
                                       
                                          r
                                       
                                    
                                    ⋅
                                    
                                       
                                          λ
                                       
                                       
                                          ?
                                       
                                    
                                  and 
                                    
                                       
                                          ν
                                       
                                       
                                          r
                                       
                                    
                                    ⊑
                                    
                                       
                                          ν
                                       
                                       
                                          f
                                       
                                    
                                 . Hence, by Lemma 24, 
                                    r
                                    
                                       →
                                       
                                          a
                                          ,
                                          
                                             
                                                ν
                                             
                                             
                                                ′
                                             
                                          
                                       
                                    
                                    
                                       
                                          r
                                       
                                       
                                          ′
                                       
                                    
                                 , where 
                                    
                                       
                                          ν
                                       
                                       
                                          ′
                                       
                                    
                                    =
                                    
                                       
                                          ν
                                       
                                       
                                          r
                                       
                                    
                                    ⋅
                                    
                                       
                                          λ
                                       
                                       
                                          ?
                                       
                                    
                                 , and 
                                    
                                       
                                          ν
                                       
                                       
                                          ′
                                       
                                    
                                    ⊑
                                    
                                       
                                          
                                             
                                                ν
                                             
                                             
                                                f
                                             
                                          
                                       
                                       
                                          2
                                       
                                       
                                          ′
                                       
                                    
                                 . From SOS rule Select and the definition of the LTS semantic of product lines, it follows that 
                                    Π
                                    (
                                    t
                                    
                                       
                                          ⊕
                                       
                                       
                                          i
                                       
                                    
                                    r
                                    ,
                                    
                                       
                                          
                                             
                                                ν
                                             
                                             
                                                f
                                             
                                          
                                       
                                       
                                          2
                                       
                                       
                                          ′
                                       
                                    
                                    )
                                    
                                       →
                                       a
                                    
                                    Π
                                    (
                                    
                                       
                                          r
                                       
                                       
                                          ′
                                       
                                    
                                    ,
                                    
                                       
                                          
                                             
                                                ν
                                             
                                             
                                                f
                                             
                                          
                                       
                                       
                                          2
                                       
                                       
                                          ′
                                       
                                    
                                    )
                                 , and by the definition of 
                                    
                                       
                                          R
                                       
                                       
                                          2
                                       
                                       
                                          ′
                                       
                                    
                                  we have that 
                                    Π
                                    (
                                    
                                       
                                          r
                                       
                                       
                                          ′
                                       
                                    
                                    ,
                                    
                                       
                                          
                                             
                                                ν
                                             
                                             
                                                f
                                             
                                          
                                       
                                       
                                          1
                                       
                                       
                                          ′
                                       
                                    
                                    )
                                    
                                    
                                       
                                          R
                                       
                                       
                                          2
                                       
                                       
                                          ′
                                       
                                    
                                    
                                    Π
                                    (
                                    
                                       
                                          r
                                       
                                       
                                          ′
                                       
                                    
                                    ,
                                    
                                       
                                          
                                             
                                                ν
                                             
                                             
                                                f
                                             
                                          
                                       
                                       
                                          2
                                       
                                       
                                          ′
                                       
                                    
                                    )
                                 , which was to be shown. The same discussion holds when 
                                    Π
                                    (
                                    t
                                    
                                       
                                          ⊕
                                       
                                       
                                          i
                                       
                                    
                                    r
                                    ,
                                    
                                       
                                          
                                             
                                                ν
                                             
                                             
                                                f
                                             
                                          
                                       
                                       
                                          2
                                       
                                       
                                          ′
                                       
                                    
                                    )
                                    
                                       →
                                       a
                                    
                                    p
                                 . Concluding that 
                                    
                                       
                                          R
                                       
                                       
                                          2
                                       
                                       
                                          ′
                                       
                                    
                                  is a strong bisimulation.


                        Case 6. Since 
                           s
                           ∥
                           r
                         and 
                           t
                           ∥
                           r
                         are fully expanded and the root of their parse tree is parallel composition, s and t cannot have any binary variant in common with r, i.e., 
                           
                              bi
                           
                           (
                           s
                           )
                           ∩
                           
                              bi
                           
                           (
                           r
                           )
                           =
                           ∅
                         and 
                           
                              bi
                           
                           (
                           t
                           )
                           ∩
                           
                              bi
                           
                           (
                           r
                           )
                           =
                           ∅
                        . Consequently, for any 
                           
                              
                                 ν
                              
                              
                                 1
                              
                              
                                 f
                              
                           
                           ∈
                           
                              VFConfig
                           
                           (
                           s
                           )
                        , there exists a 
                           
                              
                                 ν
                              
                              
                                 2
                              
                              
                                 f
                              
                           
                           ∈
                           
                              VFConfig
                           
                           (
                           t
                           )
                         such that 
                           ∀
                           i
                           ∈
                           
                              bi
                           
                           (
                           r
                           )
                           
                              
                                 (
                                 
                                    
                                       ν
                                    
                                    
                                       1
                                    
                                    
                                       f
                                    
                                 
                                 |
                              
                              
                                 i
                              
                           
                           =
                           
                              
                                 ν
                              
                              
                                 2
                              
                              
                                 f
                              
                           
                           
                              
                                 |
                              
                              
                                 i
                              
                           
                           )
                        . Following the Definition 5, we prove that for any 
                           
                              
                                 
                                    
                                       ν
                                    
                                    
                                       f
                                    
                                 
                              
                              
                                 1
                              
                              
                                 ′
                              
                           
                           ∈
                           
                              VFConfig
                           
                           (
                           s
                           ∥
                           r
                           )
                        , there exists 
                           
                              
                                 
                                    
                                       ν
                                    
                                    
                                       f
                                    
                                 
                              
                              
                                 2
                              
                              
                                 ′
                              
                           
                           ∈
                           
                              VFConfig
                           
                           (
                           t
                           ∥
                           r
                           )
                         such that 
                           Π
                           (
                           s
                           ∥
                           r
                           ,
                           
                              
                                 
                                    
                                       ν
                                    
                                    
                                       f
                                    
                                 
                              
                              
                                 1
                              
                              
                                 ′
                              
                           
                           )
                           ∼
                           Π
                           (
                           t
                           ∥
                           r
                           ,
                           
                              
                                 
                                    
                                       ν
                                    
                                    
                                       f
                                    
                                 
                              
                              
                                 2
                              
                              
                                 ′
                              
                           
                           )
                         holds. To this aim, for any 
                           
                              
                                 
                                    
                                       ν
                                    
                                    
                                       f
                                    
                                 
                              
                              
                                 1
                              
                              
                                 ′
                              
                           
                           =
                           
                              
                                 ν
                              
                              
                                 1
                              
                              
                                 f
                              
                           
                           ⋅
                           
                              
                                 λ
                              
                              
                                 1
                              
                           
                        , take 
                           
                              
                                 
                                    
                                       ν
                                    
                                    
                                       f
                                    
                                 
                              
                              
                                 2
                              
                              
                                 ′
                              
                           
                           =
                           
                              
                                 ν
                              
                              
                                 2
                              
                              
                                 f
                              
                           
                           ⋅
                           
                              
                                 λ
                              
                              
                                 2
                              
                           
                         such that 
                           Π
                           (
                           s
                           ,
                           
                              
                                 ν
                              
                              
                                 1
                              
                              
                                 f
                              
                           
                           )
                           ∼
                           Π
                           (
                           t
                           ,
                           
                              
                                 ν
                              
                              
                                 1
                              
                              
                                 f
                              
                           
                           )
                         and 
                           ∀
                           i
                           ∈
                           
                              bi
                           
                           (
                           r
                           )
                           
                              
                                 (
                                 
                                    
                                       ν
                                    
                                    
                                       1
                                    
                                    
                                       f
                                    
                                 
                                 |
                              
                              
                                 i
                              
                           
                           =
                           
                              
                                 ν
                              
                              
                                 2
                              
                              
                                 f
                              
                           
                           
                              
                                 |
                              
                              
                                 i
                              
                           
                           )
                        . Construct 
                           
                              
                                 R
                              
                              
                                 ′
                              
                           
                         as
                           
                              
                                 
                                    
                                       
                                          
                                             
                                                
                                                   R
                                                
                                                
                                                   ′
                                                
                                             
                                             =
                                             {
                                             (
                                             Π
                                             (
                                             
                                                
                                                   s
                                                
                                                
                                                   ′
                                                
                                             
                                             ∥
                                             
                                                
                                                   r
                                                
                                                
                                                   ′
                                                
                                             
                                             ,
                                             
                                                
                                                   
                                                      
                                                         ν
                                                      
                                                      
                                                         f
                                                      
                                                   
                                                
                                                
                                                   1
                                                
                                                
                                                   ′
                                                
                                             
                                             )
                                             ,
                                             Π
                                             (
                                             
                                                
                                                   t
                                                
                                                
                                                   ′
                                                
                                             
                                             ∥
                                             
                                                
                                                   r
                                                
                                                
                                                   ′
                                                
                                             
                                             ,
                                             
                                                
                                                   
                                                      
                                                         ν
                                                      
                                                      
                                                         f
                                                      
                                                   
                                                
                                                
                                                   2
                                                
                                                
                                                   ′
                                                
                                             
                                             )
                                             )
                                             |
                                             (
                                             Π
                                             (
                                             
                                                
                                                   s
                                                
                                                
                                                   ′
                                                
                                             
                                             ,
                                             
                                                
                                                   ν
                                                
                                                
                                                   1
                                                
                                                
                                                   f
                                                
                                             
                                             )
                                             ,
                                             Π
                                             (
                                             
                                                
                                                   t
                                                
                                                
                                                   ′
                                                
                                             
                                             ,
                                             
                                                
                                                   ν
                                                
                                                
                                                   2
                                                
                                                
                                                   f
                                                
                                             
                                             )
                                             )
                                             ∈
                                             R
                                             }
                                          
                                       
                                    
                                 
                              
                           
                         We show that it satisfies the transfer conditions of Definition 3.

For an arbitrary pair 
                           Π
                           (
                           
                              
                                 s
                              
                              
                                 ′
                              
                           
                           ∥
                           
                              
                                 r
                              
                              
                                 ′
                              
                           
                           ,
                           
                              
                                 
                                    
                                       ν
                                    
                                    
                                       f
                                    
                                 
                              
                              
                                 1
                              
                              
                                 ′
                              
                           
                           )
                           
                           
                              
                                 R
                              
                              
                                 ′
                              
                           
                           
                           Π
                           (
                           
                              
                                 t
                              
                              
                                 ′
                              
                           
                           ∥
                           
                              
                                 r
                              
                              
                                 ′
                              
                           
                           ,
                           
                              
                                 
                                    
                                       ν
                                    
                                    
                                       f
                                    
                                 
                              
                              
                                 1
                              
                              
                                 ′
                              
                           
                           )
                        , suppose that 
                           Π
                           (
                           
                              
                                 s
                              
                              
                                 ′
                              
                           
                           ∥
                           
                              
                                 r
                              
                              
                                 ′
                              
                           
                           ,
                           
                              
                                 
                                    
                                       ν
                                    
                                    
                                       f
                                    
                                 
                              
                              
                                 1
                              
                              
                                 ′
                              
                           
                           )
                           
                              →
                              a
                           
                           p
                        . Using the SOS rules Par and Sync, three cases can be considered:
                           
                              1.
                              This transition can be due to SOS rule Par and 
                                    
                                       
                                          s
                                       
                                       
                                          ′
                                       
                                    
                                    
                                       →
                                       
                                          a
                                          ,
                                          
                                             
                                                ν
                                             
                                             
                                                1
                                             
                                             
                                                ′
                                             
                                          
                                       
                                    
                                    
                                       
                                          s
                                       
                                       
                                          ″
                                       
                                    
                                 , where 
                                    
                                       
                                          ν
                                       
                                       
                                          1
                                       
                                       
                                          ′
                                       
                                    
                                    ⊑
                                    
                                       
                                          
                                             
                                                ν
                                             
                                             
                                                f
                                             
                                          
                                       
                                       
                                          1
                                       
                                       
                                          ′
                                       
                                    
                                 . Hence, we have that 
                                    
                                       
                                          s
                                       
                                       
                                          ′
                                       
                                    
                                    ∥
                                    
                                       
                                          r
                                       
                                       
                                          ′
                                       
                                    
                                    
                                       →
                                       
                                          a
                                          ,
                                          
                                             
                                                ν
                                             
                                             
                                                1
                                             
                                             
                                                ′
                                             
                                          
                                       
                                    
                                    
                                       
                                          s
                                       
                                       
                                          ″
                                       
                                    
                                    ∥
                                    
                                       
                                          r
                                       
                                       
                                          ′
                                       
                                    
                                 , and 
                                    p
                                    ≡
                                    Π
                                    (
                                    
                                       
                                          s
                                       
                                       
                                          ″
                                       
                                    
                                    ∥
                                    
                                       
                                          r
                                       
                                       
                                          ′
                                       
                                    
                                    ,
                                    
                                       
                                          
                                             
                                                ν
                                             
                                             
                                                f
                                             
                                          
                                       
                                       
                                          1
                                       
                                       
                                          ′
                                       
                                    
                                    )
                                 . By Lemma 25, 
                                    
                                       
                                          s
                                       
                                       
                                          ′
                                       
                                    
                                    
                                       →
                                       
                                          a
                                          ,
                                          
                                             
                                                ν
                                             
                                             
                                                s
                                             
                                          
                                       
                                    
                                    
                                       
                                          s
                                       
                                       
                                          ″
                                       
                                    
                                 , where 
                                    
                                       
                                          ν
                                       
                                       
                                          1
                                       
                                       
                                          ′
                                       
                                    
                                    =
                                    
                                       
                                          ν
                                       
                                       
                                          s
                                       
                                    
                                    ⋅
                                    
                                       
                                          λ
                                       
                                       
                                          ?
                                       
                                    
                                  and 
                                    
                                       
                                          ν
                                       
                                       
                                          s
                                       
                                    
                                    ⊑
                                    
                                       
                                          ν
                                       
                                       
                                          1
                                       
                                       
                                          f
                                       
                                    
                                 . Thus, it follows from the definition of the LTS semantic of product lines that 
                                    Π
                                    (
                                    
                                       
                                          s
                                       
                                       
                                          ′
                                       
                                    
                                    ,
                                    
                                       
                                          ν
                                       
                                       
                                          1
                                       
                                       
                                          f
                                       
                                    
                                    )
                                    
                                       →
                                       a
                                    
                                    Π
                                    (
                                    
                                       
                                          s
                                       
                                       
                                          ″
                                       
                                    
                                    ,
                                    
                                       
                                          ν
                                       
                                       
                                          1
                                       
                                       
                                          f
                                       
                                    
                                    )
                                 . Furthermore, 
                                    Π
                                    (
                                    
                                       
                                          s
                                       
                                       
                                          ′
                                       
                                    
                                    ,
                                    
                                       
                                          ν
                                       
                                       
                                          1
                                       
                                       
                                          f
                                       
                                    
                                    )
                                    
                                    R
                                    
                                    Π
                                    (
                                    
                                       
                                          t
                                       
                                       
                                          ′
                                       
                                    
                                    ,
                                    
                                       
                                          ν
                                       
                                       
                                          2
                                       
                                       
                                          f
                                       
                                    
                                    )
                                  implies that 
                                    Π
                                    (
                                    
                                       
                                          t
                                       
                                       
                                          ′
                                       
                                    
                                    ,
                                    
                                       
                                          ν
                                       
                                       
                                          2
                                       
                                       
                                          f
                                       
                                    
                                    )
                                    
                                       →
                                       a
                                    
                                    Π
                                    (
                                    
                                       
                                          t
                                       
                                       
                                          ″
                                       
                                    
                                    ,
                                    
                                       
                                          ν
                                       
                                       
                                          2
                                       
                                       
                                          f
                                       
                                    
                                    )
                                  and 
                                    Π
                                    (
                                    
                                       
                                          s
                                       
                                       
                                          ″
                                       
                                    
                                    ,
                                    
                                       
                                          ν
                                       
                                       
                                          1
                                       
                                       
                                          f
                                       
                                    
                                    )
                                    
                                    R
                                    
                                    Π
                                    (
                                    
                                       
                                          t
                                       
                                       
                                          ″
                                       
                                    
                                    ,
                                    
                                       
                                          ν
                                       
                                       
                                          2
                                       
                                       
                                          f
                                       
                                    
                                    )
                                 . Similarly, it follows from the definition of the LTS semantic of product lines that 
                                    
                                       
                                          t
                                       
                                       
                                          ′
                                       
                                    
                                    
                                       →
                                       
                                          a
                                          ,
                                          
                                             
                                                ν
                                             
                                             
                                                t
                                             
                                          
                                       
                                    
                                    
                                       
                                          t
                                       
                                       
                                          ″
                                       
                                    
                                 , where 
                                    
                                       
                                          ν
                                       
                                       
                                          t
                                       
                                    
                                    ⊑
                                    
                                       
                                          ν
                                       
                                       
                                          2
                                       
                                       
                                          f
                                       
                                    
                                  and consequently by Lemma 24, 
                                    
                                       
                                          t
                                       
                                       
                                          ′
                                       
                                    
                                    
                                       →
                                       
                                          a
                                          ,
                                          
                                             
                                                ν
                                             
                                             
                                                2
                                             
                                             
                                                ′
                                             
                                          
                                       
                                    
                                    
                                       
                                          t
                                       
                                       
                                          ″
                                       
                                    
                                 , where 
                                    
                                       
                                          ν
                                       
                                       
                                          2
                                       
                                       
                                          ′
                                       
                                    
                                    =
                                    
                                       
                                          ν
                                       
                                       
                                          t
                                       
                                    
                                    ⋅
                                    
                                       
                                          λ
                                       
                                       
                                          ?
                                       
                                    
                                  and 
                                    
                                       
                                          ν
                                       
                                       
                                          2
                                       
                                       
                                          ′
                                       
                                    
                                    ⊑
                                    
                                       
                                          
                                             
                                                ν
                                             
                                             
                                                f
                                             
                                          
                                       
                                       
                                          2
                                       
                                       
                                          ′
                                       
                                    
                                 . By SOS rule Par, 
                                    
                                       
                                          t
                                       
                                       
                                          ′
                                       
                                    
                                    ∥
                                    
                                       
                                          r
                                       
                                       
                                          ′
                                       
                                    
                                    
                                       →
                                       
                                          a
                                          ,
                                          
                                             
                                                ν
                                             
                                             
                                                2
                                             
                                             
                                                ′
                                             
                                          
                                       
                                    
                                    
                                       
                                          t
                                       
                                       
                                          ″
                                       
                                    
                                    ∥
                                    
                                       
                                          r
                                       
                                       
                                          ′
                                       
                                    
                                  and consequently, 
                                    Π
                                    (
                                    
                                       
                                          t
                                       
                                       
                                          ′
                                       
                                    
                                    ∥
                                    
                                       
                                          r
                                       
                                       
                                          ′
                                       
                                    
                                    ,
                                    
                                       
                                          
                                             
                                                ν
                                             
                                             
                                                f
                                             
                                          
                                       
                                       
                                          2
                                       
                                       
                                          ′
                                       
                                    
                                    )
                                    
                                       →
                                       a
                                    
                                    Π
                                    (
                                    
                                       
                                          t
                                       
                                       
                                          ″
                                       
                                    
                                    ∥
                                    
                                       
                                          r
                                       
                                       
                                          ′
                                       
                                    
                                    ,
                                    
                                       
                                          
                                             
                                                ν
                                             
                                             
                                                f
                                             
                                          
                                       
                                       
                                          2
                                       
                                       
                                          ′
                                       
                                    
                                    )
                                 . Due to the definition of 
                                    
                                       
                                          R
                                       
                                       
                                          ′
                                       
                                    
                                  we have that 
                                    Π
                                    (
                                    
                                       
                                          s
                                       
                                       
                                          ″
                                       
                                    
                                    ,
                                    
                                       
                                          ν
                                       
                                       
                                          1
                                       
                                       
                                          f
                                       
                                    
                                    )
                                    
                                    R
                                    
                                    Π
                                    (
                                    
                                       
                                          t
                                       
                                       
                                          ″
                                       
                                    
                                    ,
                                    
                                       
                                          ν
                                       
                                       
                                          2
                                       
                                       
                                          f
                                       
                                    
                                    )
                                 , and hence 
                                    Π
                                    (
                                    
                                       
                                          s
                                       
                                       
                                          ″
                                       
                                    
                                    ∥
                                    
                                       
                                          r
                                       
                                       
                                          ′
                                       
                                    
                                    ,
                                    
                                       
                                          
                                             
                                                ν
                                             
                                             
                                                f
                                             
                                          
                                       
                                       
                                          1
                                       
                                       
                                          ′
                                       
                                    
                                    )
                                    
                                    
                                       
                                          R
                                       
                                       
                                          ′
                                       
                                    
                                    
                                    Π
                                    (
                                    
                                       
                                          t
                                       
                                       
                                          ″
                                       
                                    
                                    ∥
                                    
                                       
                                          r
                                       
                                       
                                          ′
                                       
                                    
                                    ,
                                    
                                       
                                          
                                             
                                                ν
                                             
                                             
                                                f
                                             
                                          
                                       
                                       
                                          2
                                       
                                       
                                          ′
                                       
                                    
                                    )
                                 , which was to be shown.

This transition can be due to SOS rule Par and 
                                    
                                       
                                          r
                                       
                                       
                                          ′
                                       
                                    
                                    
                                       →
                                       
                                          a
                                          ,
                                          
                                             
                                                ν
                                             
                                             
                                                ′
                                             
                                          
                                       
                                    
                                    
                                       
                                          r
                                       
                                       
                                          ″
                                       
                                    
                                 , where 
                                    
                                       
                                          ν
                                       
                                       
                                          ′
                                       
                                    
                                    ⊑
                                    
                                       
                                          
                                             
                                                ν
                                             
                                             
                                                f
                                             
                                          
                                       
                                       
                                          1
                                       
                                       
                                          ′
                                       
                                    
                                 . Hence, we have that 
                                    
                                       
                                          s
                                       
                                       
                                          ′
                                       
                                    
                                    ∥
                                    
                                       
                                          r
                                       
                                       
                                          ′
                                       
                                    
                                    
                                       →
                                       
                                          a
                                          ,
                                          
                                             
                                                ν
                                             
                                             
                                                ′
                                             
                                          
                                       
                                    
                                    
                                       
                                          s
                                       
                                       
                                          ′
                                       
                                    
                                    ∥
                                    
                                       
                                          r
                                       
                                       
                                          ″
                                       
                                    
                                  and 
                                    p
                                    ≡
                                    Π
                                    (
                                    
                                       
                                          s
                                       
                                       
                                          ′
                                       
                                    
                                    ∥
                                    
                                       
                                          r
                                       
                                       
                                          ″
                                       
                                    
                                    ,
                                    
                                       
                                          
                                             
                                                ν
                                             
                                             
                                                f
                                             
                                          
                                       
                                       
                                          1
                                       
                                       
                                          ′
                                       
                                    
                                    )
                                 . Therefore, by Lemmas 25 and 24, 
                                    
                                       
                                          r
                                       
                                       
                                          ′
                                       
                                    
                                    
                                       →
                                       
                                          a
                                          ,
                                          
                                             
                                                ν
                                             
                                             
                                                ″
                                             
                                          
                                       
                                    
                                    
                                       
                                          r
                                       
                                       
                                          ″
                                       
                                    
                                 , where 
                                    
                                       
                                          ν
                                       
                                       
                                          ″
                                       
                                    
                                    ⊑
                                    
                                       
                                          
                                             
                                                ν
                                             
                                             
                                                f
                                             
                                          
                                       
                                       
                                          2
                                       
                                       
                                          ′
                                       
                                    
                                 . Thus, by SOS rule Par, 
                                    
                                       
                                          t
                                       
                                       
                                          ′
                                       
                                    
                                    ∥
                                    
                                       
                                          r
                                       
                                       
                                          ′
                                       
                                    
                                    
                                       →
                                       
                                          a
                                          ,
                                          
                                             
                                                ν
                                             
                                             
                                                ″
                                             
                                          
                                       
                                    
                                    
                                       
                                          t
                                       
                                       
                                          ′
                                       
                                    
                                    ∥
                                    
                                       
                                          r
                                       
                                       
                                          ″
                                       
                                    
                                 , where 
                                    
                                       
                                          ν
                                       
                                       
                                          ″
                                       
                                    
                                    ⊑
                                    
                                       
                                          
                                             
                                                ν
                                             
                                             
                                                f
                                             
                                          
                                       
                                       
                                          2
                                       
                                       
                                          ′
                                       
                                    
                                 , and consequently, 
                                    Π
                                    (
                                    
                                       
                                          t
                                       
                                       
                                          ′
                                       
                                    
                                    ∥
                                    
                                       
                                          r
                                       
                                       
                                          ′
                                       
                                    
                                    ,
                                    
                                       
                                          
                                             
                                                ν
                                             
                                             
                                                f
                                             
                                          
                                       
                                       
                                          2
                                       
                                       
                                          ′
                                       
                                    
                                    )
                                    
                                       →
                                       a
                                    
                                    Π
                                    (
                                    
                                       
                                          t
                                       
                                       
                                          ′
                                       
                                    
                                    ∥
                                    
                                       
                                          r
                                       
                                       
                                          ″
                                       
                                    
                                    ,
                                    
                                       
                                          
                                             
                                                ν
                                             
                                             
                                                f
                                             
                                          
                                       
                                       
                                          2
                                       
                                       
                                          ′
                                       
                                    
                                    )
                                 . Due to the definition of 
                                    
                                       
                                          R
                                       
                                       
                                          ′
                                       
                                    
                                  we have that 
                                    Π
                                    (
                                    
                                       
                                          s
                                       
                                       
                                          ′
                                       
                                    
                                    ,
                                    
                                       
                                          ν
                                       
                                       
                                          1
                                       
                                       
                                          f
                                       
                                    
                                    )
                                    
                                    R
                                    
                                    Π
                                    (
                                    
                                       
                                          t
                                       
                                       
                                          ′
                                       
                                    
                                    ,
                                    
                                       
                                          ν
                                       
                                       
                                          2
                                       
                                       
                                          f
                                       
                                    
                                    )
                                 , and hence 
                                    Π
                                    (
                                    
                                       
                                          s
                                       
                                       
                                          ′
                                       
                                    
                                    ∥
                                    
                                       
                                          r
                                       
                                       
                                          ″
                                       
                                    
                                    ,
                                    
                                       
                                          
                                             
                                                ν
                                             
                                             
                                                f
                                             
                                          
                                       
                                       
                                          1
                                       
                                       
                                          ′
                                       
                                    
                                    )
                                    
                                    
                                       
                                          R
                                       
                                       
                                          ′
                                       
                                    
                                    
                                    Π
                                    (
                                    
                                       
                                          t
                                       
                                       
                                          ′
                                       
                                    
                                    ∥
                                    
                                       
                                          r
                                       
                                       
                                          ″
                                       
                                    
                                    ,
                                    
                                       
                                          
                                             
                                                ν
                                             
                                             
                                                f
                                             
                                          
                                       
                                       
                                          2
                                       
                                       
                                          ′
                                       
                                    
                                    )
                                 , which was to be shown.

This transition can be due to SOS rule Sync and transitions 
                                    
                                       
                                          s
                                       
                                       
                                          ′
                                       
                                    
                                    
                                       →
                                       
                                          a
                                          ,
                                          
                                             
                                                ν
                                             
                                             
                                                1
                                             
                                             
                                                ′
                                             
                                          
                                       
                                    
                                    
                                       
                                          s
                                       
                                       
                                          ″
                                       
                                    
                                  and 
                                    
                                       
                                          r
                                       
                                       
                                          ′
                                       
                                    
                                    
                                       →
                                       
                                          
                                             a
                                             ‾
                                          
                                          ,
                                          
                                             
                                                ν
                                             
                                             
                                                ′
                                             
                                          
                                       
                                    
                                    
                                       
                                          r
                                       
                                       
                                          ″
                                       
                                    
                                 , where 
                                    
                                       
                                          ν
                                       
                                       
                                          1
                                       
                                       
                                          ′
                                       
                                    
                                    ⊑
                                    
                                       
                                          
                                             
                                                ν
                                             
                                             
                                                f
                                             
                                          
                                       
                                       
                                          1
                                       
                                       
                                          ′
                                       
                                    
                                 , 
                                    
                                       
                                          ν
                                       
                                       
                                          ′
                                       
                                    
                                    ⊑
                                    
                                       
                                          
                                             
                                                ν
                                             
                                             
                                                f
                                             
                                          
                                       
                                       
                                          1
                                       
                                       
                                          ′
                                       
                                    
                                 , and 
                                    
                                       
                                          ν
                                       
                                       
                                          1
                                       
                                       
                                          ′
                                       
                                    
                                    ≍
                                    
                                       
                                          ν
                                       
                                       
                                          ′
                                       
                                    
                                 , and consequently 
                                    p
                                    ≡
                                    Π
                                    (
                                    
                                       
                                          s
                                       
                                       
                                          ″
                                       
                                    
                                    ∥
                                    
                                       
                                          r
                                       
                                       
                                          ″
                                       
                                    
                                    ,
                                    
                                       
                                          
                                             
                                                ν
                                             
                                             
                                                f
                                             
                                          
                                       
                                       
                                          1
                                       
                                       
                                          ′
                                       
                                    
                                    )
                                 . Hence, we have that 
                                    
                                       
                                          s
                                       
                                       
                                          ′
                                       
                                    
                                    ∥
                                    
                                       
                                          r
                                       
                                       
                                          ′
                                       
                                    
                                    
                                       →
                                       
                                          τ
                                          ,
                                          
                                             
                                                ν
                                             
                                             
                                                1
                                             
                                             
                                                ′
                                             
                                          
                                          ⊙
                                          
                                             
                                                ν
                                             
                                             
                                                ′
                                             
                                          
                                       
                                    
                                    
                                       
                                          s
                                       
                                       
                                          ″
                                       
                                    
                                    ∥
                                    
                                       
                                          r
                                       
                                       
                                          ″
                                       
                                    
                                 . By Lemma 25, 
                                    
                                       
                                          s
                                       
                                       
                                          ′
                                       
                                    
                                    
                                       →
                                       
                                          a
                                          ,
                                          
                                             
                                                ν
                                             
                                             
                                                s
                                             
                                          
                                       
                                    
                                    
                                       
                                          s
                                       
                                       
                                          ″
                                       
                                    
                                 , where 
                                    
                                       
                                          ν
                                       
                                       
                                          1
                                       
                                       
                                          ′
                                       
                                    
                                    =
                                    
                                       
                                          ν
                                       
                                       
                                          s
                                       
                                    
                                    ⋅
                                    
                                       
                                          λ
                                       
                                       
                                          ?
                                       
                                    
                                  and 
                                    
                                       
                                          ν
                                       
                                       
                                          s
                                       
                                    
                                    ⊑
                                    
                                       
                                          ν
                                       
                                       
                                          1
                                       
                                       
                                          f
                                       
                                    
                                 . It follows from the definition of the LTS semantic of product lines that 
                                    Π
                                    (
                                    
                                       
                                          s
                                       
                                       
                                          ′
                                       
                                    
                                    ,
                                    
                                       
                                          ν
                                       
                                       
                                          1
                                       
                                       
                                          f
                                       
                                    
                                    )
                                    
                                       →
                                       a
                                    
                                    Π
                                    (
                                    
                                       
                                          s
                                       
                                       
                                          ″
                                       
                                    
                                    ,
                                    
                                       
                                          ν
                                       
                                       
                                          1
                                       
                                       
                                          f
                                       
                                    
                                    )
                                 . Furthermore, 
                                    Π
                                    (
                                    
                                       
                                          s
                                       
                                       
                                          ′
                                       
                                    
                                    ,
                                    
                                       
                                          ν
                                       
                                       
                                          1
                                       
                                       
                                          f
                                       
                                    
                                    )
                                    
                                    R
                                    
                                    Π
                                    (
                                    
                                       
                                          t
                                       
                                       
                                          ′
                                       
                                    
                                    ,
                                    
                                       
                                          ν
                                       
                                       
                                          2
                                       
                                       
                                          f
                                       
                                    
                                    )
                                  implies that 
                                    Π
                                    (
                                    
                                       
                                          t
                                       
                                       
                                          ′
                                       
                                    
                                    ,
                                    
                                       
                                          ν
                                       
                                       
                                          2
                                       
                                       
                                          f
                                       
                                    
                                    )
                                    
                                       →
                                       a
                                    
                                    Π
                                    (
                                    
                                       
                                          t
                                       
                                       
                                          ″
                                       
                                    
                                    ,
                                    
                                       
                                          ν
                                       
                                       
                                          2
                                       
                                       
                                          f
                                       
                                    
                                    )
                                  and 
                                    Π
                                    (
                                    
                                       
                                          s
                                       
                                       
                                          ″
                                       
                                    
                                    ,
                                    
                                       
                                          ν
                                       
                                       
                                          1
                                       
                                       
                                          f
                                       
                                    
                                    )
                                    
                                    R
                                    
                                    Π
                                    (
                                    
                                       
                                          t
                                       
                                       
                                          ″
                                       
                                    
                                    ,
                                    
                                       
                                          ν
                                       
                                       
                                          2
                                       
                                       
                                          f
                                       
                                    
                                    )
                                 . It follows that 
                                    
                                       
                                          t
                                       
                                       
                                          ′
                                       
                                    
                                    
                                       →
                                       
                                          a
                                          ,
                                          
                                             
                                                ν
                                             
                                             
                                                t
                                             
                                          
                                       
                                    
                                    
                                       
                                          t
                                       
                                       
                                          ″
                                       
                                    
                                 , where 
                                    
                                       
                                          ν
                                       
                                       
                                          t
                                       
                                    
                                    ⊑
                                    
                                       
                                          ν
                                       
                                       
                                          2
                                       
                                       
                                          f
                                       
                                    
                                 , and consequently, by Lemma 24
                                 
                                    ,
                                    
                                       
                                          t
                                       
                                       
                                          ′
                                       
                                    
                                    
                                       →
                                       
                                          a
                                          ,
                                          
                                             
                                                ν
                                             
                                             
                                                2
                                             
                                             
                                                ′
                                             
                                          
                                       
                                    
                                    
                                       
                                          t
                                       
                                       
                                          ″
                                       
                                    
                                 , where 
                                    
                                       
                                          ν
                                       
                                       
                                          2
                                       
                                       
                                          ′
                                       
                                    
                                    =
                                    
                                       
                                          ν
                                       
                                       
                                          t
                                       
                                    
                                    ⋅
                                    
                                       
                                          λ
                                       
                                       
                                          ?
                                       
                                    
                                  and 
                                    
                                       
                                          ν
                                       
                                       
                                          2
                                       
                                       
                                          ′
                                       
                                    
                                    ⊑
                                    
                                       
                                          
                                             
                                                ν
                                             
                                             
                                                f
                                             
                                          
                                       
                                       
                                          2
                                       
                                       
                                          ′
                                       
                                    
                                 . Since 
                                    
                                       
                                          ν
                                       
                                       
                                          s
                                       
                                    
                                    ⊑
                                    
                                       
                                          ν
                                       
                                       
                                          1
                                       
                                       
                                          f
                                       
                                    
                                  and 
                                    
                                       
                                          ν
                                       
                                       
                                          t
                                       
                                    
                                    ⊑
                                    
                                       
                                          ν
                                       
                                       
                                          2
                                       
                                       
                                          f
                                       
                                    
                                 , then 
                                    
                                       
                                          ν
                                       
                                       
                                          1
                                       
                                       
                                          ′
                                       
                                    
                                    ≍
                                    
                                       
                                          ν
                                       
                                       
                                          ′
                                       
                                    
                                  and 
                                    ∀
                                    i
                                    ∈
                                    
                                       bi
                                    
                                    (
                                    r
                                    )
                                    
                                       
                                          (
                                          
                                             
                                                ν
                                             
                                             
                                                1
                                             
                                             
                                                f
                                             
                                          
                                          |
                                       
                                       
                                          i
                                       
                                    
                                    =
                                    
                                       
                                          ν
                                       
                                       
                                          2
                                       
                                       
                                          f
                                       
                                    
                                    
                                       
                                          |
                                       
                                       
                                          i
                                       
                                    
                                    )
                                  imply that 
                                    
                                       
                                          ν
                                       
                                       
                                          2
                                       
                                       
                                          ′
                                       
                                    
                                    ≍
                                    
                                       
                                          ν
                                       
                                       
                                          ′
                                       
                                    
                                  and 
                                    
                                       
                                          ν
                                       
                                       
                                          2
                                       
                                       
                                          ′
                                       
                                    
                                    ⊙
                                    
                                       
                                          ν
                                       
                                       
                                          ′
                                       
                                    
                                    ⊑
                                    
                                       
                                          
                                             
                                                ν
                                             
                                             
                                                f
                                             
                                          
                                       
                                       
                                          2
                                       
                                       
                                          ′
                                       
                                    
                                 . By SOS rule Sync, we have that 
                                    
                                       
                                          t
                                       
                                       
                                          ′
                                       
                                    
                                    ∥
                                    
                                       
                                          r
                                       
                                       
                                          ′
                                       
                                    
                                    
                                       →
                                       
                                          τ
                                          ,
                                          
                                             
                                                ν
                                             
                                             
                                                2
                                             
                                             
                                                ′
                                             
                                          
                                          ⊙
                                          
                                             
                                                ν
                                             
                                             
                                                ′
                                             
                                          
                                       
                                    
                                    
                                       
                                          t
                                       
                                       
                                          ″
                                       
                                    
                                    ∥
                                    
                                       
                                          r
                                       
                                       
                                          ″
                                       
                                    
                                  and hence, 
                                    Π
                                    (
                                    
                                       
                                          t
                                       
                                       
                                          ′
                                       
                                    
                                    ∥
                                    
                                       
                                          r
                                       
                                       
                                          ′
                                       
                                    
                                    ,
                                    
                                       
                                          
                                             
                                                ν
                                             
                                             
                                                f
                                             
                                          
                                       
                                       
                                          2
                                       
                                       
                                          ′
                                       
                                    
                                    )
                                    
                                       →
                                       τ
                                    
                                    Π
                                    (
                                    
                                       
                                          t
                                       
                                       
                                          ″
                                       
                                    
                                    ∥
                                    
                                       
                                          r
                                       
                                       
                                          ″
                                       
                                    
                                    ,
                                    
                                       
                                          
                                             
                                                ν
                                             
                                             
                                                f
                                             
                                          
                                       
                                       
                                          2
                                       
                                       
                                          ′
                                       
                                    
                                    )
                                 . Due to the Definition of 
                                    
                                       
                                          R
                                       
                                       
                                          ′
                                       
                                    
                                 , we have that 
                                    Π
                                    (
                                    
                                       
                                          s
                                       
                                       
                                          ″
                                       
                                    
                                    ,
                                    
                                       
                                          ν
                                       
                                       
                                          1
                                       
                                       
                                          f
                                       
                                    
                                    )
                                    
                                    R
                                    
                                    Π
                                    (
                                    
                                       
                                          t
                                       
                                       
                                          ″
                                       
                                    
                                    ,
                                    
                                       
                                          ν
                                       
                                       
                                          2
                                       
                                       
                                          f
                                       
                                    
                                    )
                                  and hence, 
                                    Π
                                    (
                                    
                                       
                                          s
                                       
                                       
                                          ″
                                       
                                    
                                    ∥
                                    
                                       
                                          r
                                       
                                       
                                          ″
                                       
                                    
                                    ,
                                    
                                       
                                          
                                             
                                                ν
                                             
                                             
                                                f
                                             
                                          
                                       
                                       
                                          1
                                       
                                       
                                          ′
                                       
                                    
                                    )
                                    
                                    
                                       
                                          R
                                       
                                       
                                          ′
                                       
                                    
                                    
                                    Π
                                    (
                                    
                                       
                                          t
                                       
                                       
                                          ″
                                       
                                    
                                    ∥
                                    
                                       
                                          r
                                       
                                       
                                          ″
                                       
                                    
                                    ,
                                    
                                       
                                          
                                             
                                                ν
                                             
                                             
                                                f
                                             
                                          
                                       
                                       
                                          2
                                       
                                       
                                          ′
                                       
                                    
                                    )
                                 .


                        
                           Theorem 9
                           Part 1


                           
                              Strict strong bisimilarity is an equivalence relation.
                           


                        
                           Proof
                           To show that strict strong bisimilarity is an equivalence, we must show that it is reflexive, symmetric, and transitive. Reflexivity and symmetry follow immediately from the reflexivity and symmetry properties of strong bisimilarity. Hence, it only remains to prove transitivity.

Consider PL-CCS terms s, t, and r such that 
                                 s
                                 
                                    
                                       ≈
                                    
                                    
                                       PL
                                    
                                 
                                 t
                              , and 
                                 t
                                 
                                    
                                       ≈
                                    
                                    
                                       PL
                                    
                                 
                                 r
                              ; following Definition 4 for any valid full configuration 
                                 
                                    
                                       ν
                                    
                                    
                                       1
                                    
                                    
                                       f
                                    
                                 
                                 ∈
                                 
                                    VFConfig
                                 
                                 (
                                 s
                                 )
                                 ∩
                                 
                                    VFConfig
                                 
                                 (
                                 t
                                 )
                               and 
                                 
                                    
                                       ν
                                    
                                    
                                       2
                                    
                                    
                                       f
                                    
                                 
                                 ∈
                                 
                                    VFConfig
                                 
                                 (
                                 t
                                 )
                                 ∩
                                 
                                    VFConfig
                                 
                                 (
                                 r
                                 )
                              , it holds that 
                                 Π
                                 (
                                 s
                                 ,
                                 
                                    
                                       ν
                                    
                                    
                                       1
                                    
                                    
                                       f
                                    
                                 
                                 )
                                 ∼
                                 Π
                                 (
                                 t
                                 ,
                                 
                                    
                                       ν
                                    
                                    
                                       1
                                    
                                    
                                       f
                                    
                                 
                                 )
                              , and 
                                 Π
                                 (
                                 t
                                 ,
                                 
                                    
                                       ν
                                    
                                    
                                       2
                                    
                                    
                                       f
                                    
                                 
                                 )
                                 ∼
                                 Π
                                 (
                                 r
                                 ,
                                 
                                    
                                       ν
                                    
                                    
                                       2
                                    
                                    
                                       f
                                    
                                 
                                 )
                              . Without loss of generality, we assume that 
                                 
                                    max
                                 
                                 (
                                 
                                    bi
                                 
                                 (
                                 s
                                 )
                                 )
                                 ≥
                                 
                                    max
                                 
                                 (
                                 
                                    bi
                                 
                                 (
                                 t
                                 )
                                 )
                                 ≥
                                 
                                    max
                                 
                                 (
                                 
                                    bi
                                 
                                 (
                                 r
                                 )
                                 )
                               (the proof of all other cases is almost identical). Therefore, 
                                 
                                    
                                       ν
                                    
                                    
                                       1
                                    
                                    
                                       f
                                    
                                 
                                 =
                                 
                                    
                                       ν
                                    
                                    
                                       r
                                    
                                 
                                 ⋅
                                 
                                    
                                       λ
                                    
                                    
                                       1
                                    
                                 
                                 ⋅
                                 
                                    
                                       λ
                                    
                                    
                                       2
                                    
                                 
                              , 
                                 
                                    
                                       ν
                                    
                                    
                                       2
                                    
                                    
                                       f
                                    
                                 
                                 =
                                 
                                    
                                       ν
                                    
                                    
                                       r
                                    
                                 
                                 ⋅
                                 
                                    
                                       λ
                                    
                                    
                                       2
                                    
                                 
                              , where 
                                 
                                    
                                       ν
                                    
                                    
                                       r
                                    
                                 
                                 ∈
                                 
                                    VFConfig
                                 
                                 (
                                 r
                                 )
                              . We prove that 
                                 Π
                                 (
                                 s
                                 ,
                                 
                                    
                                       ν
                                    
                                    
                                       1
                                    
                                    
                                       f
                                    
                                 
                                 )
                                 ∼
                                 Π
                                 (
                                 r
                                 ,
                                 
                                    
                                       ν
                                    
                                    
                                       1
                                    
                                    
                                       f
                                    
                                 
                                 )
                              . Construct 
                                 R
                               as
                                 
                                    
                                       
                                          R
                                          =
                                          {
                                          (
                                          Π
                                          (
                                          
                                             
                                                s
                                             
                                             
                                                ′
                                             
                                          
                                          ,
                                          
                                             
                                                ν
                                             
                                             
                                                1
                                             
                                             
                                                f
                                             
                                          
                                          )
                                          ,
                                          Π
                                          (
                                          
                                             
                                                r
                                             
                                             
                                                ′
                                             
                                          
                                          ,
                                          
                                             
                                                ν
                                             
                                             
                                                1
                                             
                                             
                                                f
                                             
                                          
                                          )
                                          )
                                          |
                                          Π
                                          (
                                          
                                             
                                                s
                                             
                                             
                                                ′
                                             
                                          
                                          ,
                                          
                                             
                                                ν
                                             
                                             
                                                1
                                             
                                             
                                                f
                                             
                                          
                                          )
                                          ∼
                                          Π
                                          (
                                          
                                             
                                                t
                                             
                                             
                                                ′
                                             
                                          
                                          ,
                                          
                                             
                                                ν
                                             
                                             
                                                1
                                             
                                             
                                                f
                                             
                                          
                                          )
                                          ∧
                                          Π
                                          (
                                          
                                             
                                                t
                                             
                                             
                                                ′
                                             
                                          
                                          ,
                                          
                                             
                                                ν
                                             
                                             
                                                2
                                             
                                             
                                                f
                                             
                                          
                                          )
                                          ∼
                                          Π
                                          (
                                          
                                             
                                                r
                                             
                                             
                                                ′
                                             
                                          
                                          ,
                                          
                                             
                                                ν
                                             
                                             
                                                2
                                             
                                             
                                                f
                                             
                                          
                                          )
                                          }
                                       
                                    
                                 
                              
                           

We prove that 
                                 R
                               satisfies the transfer conditions of Definition 3.

For an arbitrary pair 
                                 (
                                 Π
                                 (
                                 
                                    
                                       s
                                    
                                    
                                       ′
                                    
                                 
                                 ,
                                 
                                    
                                       ν
                                    
                                    
                                       1
                                    
                                    
                                       f
                                    
                                 
                                 )
                                 ,
                                 Π
                                 (
                                 
                                    
                                       r
                                    
                                    
                                       ′
                                    
                                 
                                 ,
                                 
                                    
                                       ν
                                    
                                    
                                       1
                                    
                                    
                                       f
                                    
                                 
                                 )
                                 )
                                 ∈
                                 R
                              , consider that 
                                 Π
                                 (
                                 
                                    
                                       s
                                    
                                    
                                       ′
                                    
                                 
                                 ,
                                 
                                    
                                       ν
                                    
                                    
                                       1
                                    
                                    
                                       f
                                    
                                 
                                 )
                                 
                                    →
                                    α
                                 
                                 Π
                                 (
                                 
                                    
                                       s
                                    
                                    
                                       ″
                                    
                                 
                                 ,
                                 
                                    
                                       ν
                                    
                                    
                                       1
                                    
                                    
                                       f
                                    
                                 
                                 )
                               since 
                                 
                                    
                                       s
                                    
                                    
                                       ′
                                    
                                 
                                 
                                    →
                                    
                                       α
                                       ,
                                       
                                          
                                             ν
                                          
                                          
                                             1
                                          
                                          
                                             ′
                                          
                                       
                                    
                                 
                                 
                                    
                                       s
                                    
                                    
                                       ″
                                    
                                 
                              , where 
                                 
                                    
                                       ν
                                    
                                    
                                       1
                                    
                                    
                                       ′
                                    
                                 
                                 ⊑
                                 
                                    
                                       ν
                                    
                                    
                                       1
                                    
                                    
                                       f
                                    
                                 
                              . Hence, 
                                 Π
                                 (
                                 
                                    
                                       s
                                    
                                    
                                       ′
                                    
                                 
                                 ,
                                 
                                    
                                       ν
                                    
                                    
                                       1
                                    
                                    
                                       f
                                    
                                 
                                 )
                                 ∼
                                 Π
                                 (
                                 
                                    
                                       t
                                    
                                    
                                       ′
                                    
                                 
                                 ,
                                 
                                    
                                       ν
                                    
                                    
                                       1
                                    
                                    
                                       f
                                    
                                 
                                 )
                               implies that 
                                 Π
                                 (
                                 
                                    
                                       t
                                    
                                    
                                       ′
                                    
                                 
                                 ,
                                 
                                    
                                       ν
                                    
                                    
                                       1
                                    
                                    
                                       f
                                    
                                 
                                 )
                                 
                                    →
                                    α
                                 
                                 Π
                                 (
                                 
                                    
                                       t
                                    
                                    
                                       ″
                                    
                                 
                                 ,
                                 
                                    
                                       ν
                                    
                                    
                                       1
                                    
                                    
                                       f
                                    
                                 
                                 )
                               and 
                                 Π
                                 (
                                 
                                    
                                       s
                                    
                                    
                                       ″
                                    
                                 
                                 ,
                                 
                                    
                                       ν
                                    
                                    
                                       1
                                    
                                    
                                       f
                                    
                                 
                                 )
                                 ∼
                                 Π
                                 (
                                 
                                    
                                       t
                                    
                                    
                                       ″
                                    
                                 
                                 ,
                                 
                                    
                                       ν
                                    
                                    
                                       1
                                    
                                    
                                       f
                                    
                                 
                                 )
                              . It follows that 
                                 
                                    
                                       t
                                    
                                    
                                       ′
                                    
                                 
                                 
                                    →
                                    
                                       α
                                       ,
                                       
                                          
                                             ν
                                          
                                          
                                             2
                                          
                                       
                                    
                                 
                                 
                                    
                                       t
                                    
                                    
                                       ″
                                    
                                 
                              , where 
                                 
                                    
                                       ν
                                    
                                    
                                       2
                                    
                                 
                                 ⊑
                                 
                                    
                                       ν
                                    
                                    
                                       1
                                    
                                    
                                       f
                                    
                                 
                              . By Lemma 25, it holds that 
                                 
                                    
                                       t
                                    
                                    
                                       ′
                                    
                                 
                                 
                                    →
                                    
                                       α
                                       ,
                                       
                                          
                                             ν
                                          
                                          
                                             2
                                          
                                          
                                             ′
                                          
                                       
                                    
                                 
                                 
                                    
                                       t
                                    
                                    
                                       ″
                                    
                                 
                              , where 
                                 
                                    
                                       ν
                                    
                                    
                                       2
                                    
                                 
                                 =
                                 
                                    
                                       ν
                                    
                                    
                                       2
                                    
                                    
                                       ′
                                    
                                 
                                 ⋅
                                 
                                    
                                       λ
                                    
                                    
                                       ?
                                    
                                 
                               and 
                                 
                                    
                                       ν
                                    
                                    
                                       2
                                    
                                    
                                       ′
                                    
                                 
                                 ⊑
                                 
                                    
                                       ν
                                    
                                    
                                       2
                                    
                                    
                                       f
                                    
                                 
                               and consequently 
                                 Π
                                 (
                                 
                                    
                                       t
                                    
                                    
                                       ′
                                    
                                 
                                 ,
                                 
                                    
                                       ν
                                    
                                    
                                       2
                                    
                                    
                                       f
                                    
                                 
                                 )
                                 
                                    →
                                    α
                                 
                                 Π
                                 (
                                 
                                    
                                       t
                                    
                                    
                                       ″
                                    
                                 
                                 ,
                                 
                                    
                                       ν
                                    
                                    
                                       2
                                    
                                    
                                       f
                                    
                                 
                                 )
                              . Therefore, 
                                 Π
                                 (
                                 
                                    
                                       t
                                    
                                    
                                       ′
                                    
                                 
                                 ,
                                 
                                    
                                       ν
                                    
                                    
                                       2
                                    
                                    
                                       f
                                    
                                 
                                 )
                                 ∼
                                 Π
                                 (
                                 
                                    
                                       r
                                    
                                    
                                       ′
                                    
                                 
                                 ,
                                 
                                    
                                       ν
                                    
                                    
                                       2
                                    
                                    
                                       f
                                    
                                 
                                 )
                               implies that 
                                 Π
                                 (
                                 
                                    
                                       r
                                    
                                    
                                       ′
                                    
                                 
                                 ,
                                 
                                    
                                       ν
                                    
                                    
                                       2
                                    
                                    
                                       f
                                    
                                 
                                 )
                                 
                                    →
                                    α
                                 
                                 Π
                                 (
                                 
                                    
                                       r
                                    
                                    
                                       ″
                                    
                                 
                                 ,
                                 
                                    
                                       ν
                                    
                                    
                                       2
                                    
                                    
                                       f
                                    
                                 
                                 )
                               and 
                                 Π
                                 (
                                 
                                    
                                       t
                                    
                                    
                                       ″
                                    
                                 
                                 ,
                                 
                                    
                                       ν
                                    
                                    
                                       2
                                    
                                    
                                       f
                                    
                                 
                                 )
                                 ∼
                                 Π
                                 (
                                 
                                    
                                       r
                                    
                                    
                                       ″
                                    
                                 
                                 ,
                                 
                                    
                                       ν
                                    
                                    
                                       2
                                    
                                    
                                       f
                                    
                                 
                                 )
                              . It follows that 
                                 
                                    
                                       r
                                    
                                    
                                       ′
                                    
                                 
                                 
                                    →
                                    
                                       α
                                       ,
                                       
                                          
                                             ν
                                          
                                          
                                             3
                                          
                                          
                                             ′
                                          
                                       
                                    
                                 
                                 
                                    
                                       r
                                    
                                    
                                       ″
                                    
                                 
                              , where 
                                 
                                    
                                       ν
                                    
                                    
                                       3
                                    
                                    
                                       ′
                                    
                                 
                                 ⊑
                                 
                                    
                                       ν
                                    
                                    
                                       2
                                    
                                    
                                       f
                                    
                                 
                              . Consequently, by Lemma 24, 
                                 
                                    
                                       r
                                    
                                    
                                       ′
                                    
                                 
                                 
                                    →
                                    
                                       α
                                       ,
                                       
                                          
                                             ν
                                          
                                          
                                             3
                                          
                                       
                                    
                                 
                                 
                                    
                                       r
                                    
                                    
                                       ″
                                    
                                 
                              , where 
                                 
                                    
                                       ν
                                    
                                    
                                       3
                                    
                                 
                                 =
                                 
                                    
                                       ν
                                    
                                    
                                       3
                                    
                                    
                                       ′
                                    
                                 
                                 ⋅
                                 
                                    
                                       λ
                                    
                                    
                                       ?
                                    
                                 
                               and 
                                 
                                    
                                       ν
                                    
                                    
                                       3
                                    
                                 
                                 ⊑
                                 
                                    
                                       ν
                                    
                                    
                                       1
                                    
                                    
                                       f
                                    
                                 
                              . Hence, 
                                 Π
                                 (
                                 
                                    
                                       r
                                    
                                    
                                       ′
                                    
                                 
                                 ,
                                 
                                    
                                       ν
                                    
                                    
                                       1
                                    
                                    
                                       f
                                    
                                 
                                 )
                                 
                                    →
                                    α
                                 
                                 Π
                                 (
                                 
                                    
                                       r
                                    
                                    
                                       ″
                                    
                                 
                                 ,
                                 
                                    
                                       ν
                                    
                                    
                                       1
                                    
                                    
                                       f
                                    
                                 
                                 )
                              . Due to the Definition of 
                                 R
                              , we have that 
                                 Π
                                 (
                                 
                                    
                                       s
                                    
                                    
                                       ″
                                    
                                 
                                 ,
                                 
                                    
                                       ν
                                    
                                    
                                       1
                                    
                                    
                                       f
                                    
                                 
                                 )
                                 ∼
                                 Π
                                 (
                                 
                                    
                                       t
                                    
                                    
                                       ″
                                    
                                 
                                 ,
                                 
                                    
                                       ν
                                    
                                    
                                       1
                                    
                                    
                                       f
                                    
                                 
                                 )
                               and 
                                 Π
                                 (
                                 
                                    
                                       t
                                    
                                    
                                       ″
                                    
                                 
                                 ,
                                 
                                    
                                       ν
                                    
                                    
                                       2
                                    
                                    
                                       f
                                    
                                 
                                 )
                                 ∼
                                 Π
                                 (
                                 
                                    
                                       r
                                    
                                    
                                       ″
                                    
                                 
                                 ,
                                 
                                    
                                       ν
                                    
                                    
                                       2
                                    
                                    
                                       f
                                    
                                 
                                 )
                               and hence, 
                                 (
                                 Π
                                 (
                                 
                                    
                                       s
                                    
                                    
                                       ″
                                    
                                 
                                 ,
                                 
                                    
                                       ν
                                    
                                    
                                       1
                                    
                                    
                                       f
                                    
                                 
                                 )
                                 ,
                                 Π
                                 (
                                 
                                    
                                       r
                                    
                                    
                                       ″
                                    
                                 
                                 ,
                                 
                                    
                                       ν
                                    
                                    
                                       1
                                    
                                    
                                       f
                                    
                                 
                                 )
                                 )
                                 ∈
                                 R
                              , which was to be shown. The same discussion holds when 
                                 
                                    
                                       r
                                    
                                    
                                       ′
                                    
                                 
                                 
                                    →
                                    
                                       α
                                       ,
                                       
                                          
                                             ν
                                          
                                          
                                             3
                                          
                                       
                                    
                                 
                                 
                                    
                                       r
                                    
                                    
                                       ″
                                    
                                 
                              , where 
                                 
                                    
                                       ν
                                    
                                    
                                       3
                                    
                                 
                                 ⊑
                                 
                                    
                                       ν
                                    
                                    
                                       1
                                    
                                    
                                       f
                                    
                                 
                              . Concluding that 
                                 R
                               is a strong bisimulation, and consequently 
                                 s
                                 
                                    
                                       ≈
                                    
                                    
                                       PL
                                    
                                 
                                 r
                              . □


                        
                           Theorem 9
                           Part 2


                           
                              Strict strong bisimilarity is congruence on PL-CCS terms.
                           


                        
                           Proof
                           To show that strict strong bisimilarity is a congruence on PL-CCS terms with respect to the PL-CCS operators, we need to prove that for any arbitrary product line r, renaming function ϕ, and 
                                 L
                                 ⊆
                                 
                                    Act
                                 
                              , 
                                 s
                                 
                                    
                                       ≈
                                    
                                    
                                       PL
                                    
                                 
                                 t
                               implies following cases:
                                 
                                    1.
                                    
                                       
                                          α
                                          .
                                          s
                                          
                                             
                                                ≈
                                             
                                             
                                                PL
                                             
                                          
                                          α
                                          .
                                          t
                                       ;


                                       
                                          s
                                          +
                                          r
                                          
                                             
                                                ≈
                                             
                                             
                                                PL
                                             
                                          
                                          t
                                          +
                                          r
                                       ;


                                       
                                          s
                                          
                                             
                                                ⊕
                                             
                                             
                                                i
                                             
                                          
                                          r
                                          
                                             
                                                ≈
                                             
                                             
                                                PL
                                             
                                          
                                          t
                                          
                                             
                                                ⊕
                                             
                                             
                                                i
                                             
                                          
                                          r
                                       ;


                                       
                                          s
                                          ∖
                                          L
                                          
                                             
                                                ≈
                                             
                                             
                                                PL
                                             
                                          
                                          t
                                          ∖
                                          L
                                       ;


                                       
                                          s
                                          [
                                          ϕ
                                          ]
                                          
                                             
                                                ≈
                                             
                                             
                                                PL
                                             
                                          
                                          t
                                          [
                                          ϕ
                                          ]
                                       ;


                                       
                                          s
                                          ∥
                                          r
                                          
                                             
                                                ≈
                                             
                                             
                                                PL
                                             
                                          
                                          t
                                          ∥
                                          r
                                       ;


                              Case 1. We have that 
                                 
                                    
                                       ν
                                    
                                    
                                       f
                                    
                                 
                                 ∈
                                 
                                    VFConfig
                                 
                                 (
                                 s
                                 )
                                 ∩
                                 
                                    VFConfig
                                 
                                 (
                                 t
                                 )
                              , and hence, 
                                 
                                    
                                       ν
                                    
                                    
                                       f
                                    
                                 
                                 ∈
                                 
                                    VFConfig
                                 
                                 (
                                 a
                                 .
                                 s
                                 )
                                 ∩
                                 
                                    VFConfig
                                 
                                 (
                                 a
                                 .
                                 t
                                 )
                              . Therefore, we only need to prove that 
                                 Π
                                 (
                                 a
                                 .
                                 s
                                 ,
                                 
                                    
                                       ν
                                    
                                    
                                       f
                                    
                                 
                                 )
                                 ∼
                                 Π
                                 (
                                 a
                                 .
                                 t
                                 ,
                                 
                                    
                                       ν
                                    
                                    
                                       f
                                    
                                 
                                 )
                              . To this end, we prove that the closure of 
                                 R
                               with action prefixing, denoted by 
                                 
                                    
                                       R
                                    
                                    
                                       ′
                                    
                                 
                               is a strong bisimulation relation. It remains to show the transfer conditions of Definition 3 for each pair in 
                                 
                                    
                                       R
                                    
                                    
                                       ′
                                    
                                 
                              . The case for the pairs in 
                                 R
                               holds vacuously. We only need to show the transfer conditions for an arbitrary pair 
                                 (
                                 Π
                                 (
                                 a
                                 .
                                 s
                                 ,
                                 
                                    
                                       ν
                                    
                                    
                                       1
                                    
                                    
                                       f
                                    
                                 
                                 )
                                 ,
                                 Π
                                 (
                                 a
                                 .
                                 t
                                 ,
                                 
                                    
                                       ν
                                    
                                    
                                       2
                                    
                                    
                                       f
                                    
                                 
                                 )
                                 )
                                 ∈
                                 
                                    
                                       R
                                    
                                    
                                       ′
                                    
                                 
                              . Assume that 
                                 Π
                                 (
                                 a
                                 .
                                 s
                                 ,
                                 
                                    
                                       ν
                                    
                                    
                                       f
                                    
                                 
                                 )
                                 
                                    →
                                    a
                                 
                                 (
                                 
                                    
                                       s
                                    
                                    
                                       ′
                                    
                                 
                                 ,
                                 
                                    
                                       ν
                                    
                                    
                                       f
                                    
                                 
                                 )
                               for some 
                                 
                                    
                                       s
                                    
                                    
                                       ′
                                    
                                 
                              . This transition can only be due to SOS rule Prefix and 
                                 
                                    
                                       s
                                    
                                    
                                       ′
                                    
                                 
                               must be s. Hence, we have that 
                                 a
                                 .
                                 s
                                 
                                    →
                                    
                                       a
                                       ,
                                       
                                          
                                             ν
                                          
                                          
                                             ?
                                          
                                       
                                    
                                 
                                 s
                               and 
                                 
                                    
                                       ν
                                    
                                    
                                       ?
                                    
                                 
                                 ⊑
                                 
                                    
                                       ν
                                    
                                    
                                       f
                                    
                                 
                              . Similarly, it follows from SOS rule Prefix and the definition of the LTS semantic of product lines that 
                                 Π
                                 (
                                 a
                                 .
                                 t
                                 ,
                                 
                                    
                                       ν
                                    
                                    
                                       f
                                    
                                 
                                 )
                                 
                                    →
                                    a
                                 
                                 Π
                                 (
                                 t
                                 ,
                                 
                                    
                                       ν
                                    
                                    
                                       f
                                    
                                 
                                 )
                              . Due to the definition of 
                                 
                                    
                                       R
                                    
                                    
                                       ′
                                    
                                 
                              , we have that 
                                 (
                                 Π
                                 (
                                 s
                                 ,
                                 
                                    
                                       ν
                                    
                                    
                                       f
                                    
                                 
                                 )
                                 ,
                                 Π
                                 (
                                 t
                                 ,
                                 
                                    
                                       ν
                                    
                                    
                                       f
                                    
                                 
                                 )
                                 )
                                 ∈
                                 R
                               and hence 
                                 (
                                 Π
                                 (
                                 s
                                 ,
                                 
                                    
                                       ν
                                    
                                    
                                       f
                                    
                                 
                                 )
                                 ,
                                 Π
                                 (
                                 t
                                 ,
                                 
                                    
                                       ν
                                    
                                    
                                       f
                                    
                                 
                                 )
                                 )
                                 ∈
                                 
                                    
                                       R
                                    
                                    
                                       ′
                                    
                                 
                              , which was to be shown.


                              Case 3. Following the Definition 4, we prove that for any valid full configuration 
                                 
                                    
                                       
                                          
                                             ν
                                          
                                          
                                             f
                                          
                                       
                                    
                                    
                                       ′
                                    
                                 
                               with respect to 
                                 s
                                 
                                    
                                       ⊕
                                    
                                    
                                       i
                                    
                                 
                                 r
                               and 
                                 t
                                 
                                    
                                       ⊕
                                    
                                    
                                       i
                                    
                                 
                                 r
                              , 
                                 Π
                                 (
                                 s
                                 
                                    
                                       ⊕
                                    
                                    
                                       i
                                    
                                 
                                 r
                                 ,
                                 
                                    
                                       
                                          
                                             ν
                                          
                                          
                                             f
                                          
                                       
                                    
                                    
                                       ′
                                    
                                 
                                 )
                                 ∼
                                 Π
                                 (
                                 t
                                 
                                    
                                       ⊕
                                    
                                    
                                       i
                                    
                                 
                                 r
                                 ,
                                 
                                    
                                       
                                          
                                             ν
                                          
                                          
                                             f
                                          
                                       
                                    
                                    
                                       ′
                                    
                                 
                                 )
                               holds. Construct 
                                 
                                    
                                       R
                                    
                                    
                                       ′
                                    
                                 
                               as:
                                 
                                    
                                       
                                          
                                             
                                                
                                                   
                                                      R
                                                   
                                                   
                                                      ′
                                                   
                                                
                                             
                                             
                                                =
                                             
                                             
                                                {
                                                (
                                                Π
                                                (
                                                s
                                                
                                                   
                                                      ⊕
                                                   
                                                   
                                                      i
                                                   
                                                
                                                r
                                                ,
                                                
                                                   
                                                      
                                                         
                                                            ν
                                                         
                                                         
                                                            f
                                                         
                                                      
                                                   
                                                   
                                                      ′
                                                   
                                                
                                                )
                                                ,
                                                Π
                                                (
                                                t
                                                
                                                   
                                                      ⊕
                                                   
                                                   
                                                      i
                                                   
                                                
                                                r
                                                ,
                                                
                                                   
                                                      
                                                         
                                                            ν
                                                         
                                                         
                                                            f
                                                         
                                                      
                                                   
                                                   
                                                      ′
                                                   
                                                
                                                )
                                                )
                                                }
                                                ∪
                                                {
                                                (
                                                Π
                                                (
                                                
                                                   
                                                      t
                                                   
                                                   
                                                      ′
                                                   
                                                
                                                ,
                                                
                                                   
                                                      
                                                         
                                                            ν
                                                         
                                                         
                                                            f
                                                         
                                                      
                                                   
                                                   
                                                      ′
                                                   
                                                
                                                )
                                                ,
                                                Π
                                                (
                                                
                                                   
                                                      t
                                                   
                                                   
                                                      ′
                                                   
                                                
                                                ,
                                                
                                                   
                                                      
                                                         
                                                            ν
                                                         
                                                         
                                                            f
                                                         
                                                      
                                                   
                                                   
                                                      ′
                                                   
                                                
                                                )
                                                )
                                                }
                                                ∪
                                             
                                          
                                          
                                             
                                             
                                             
                                                
                                                {
                                                (
                                                Π
                                                (
                                                
                                                   
                                                      s
                                                   
                                                   
                                                      ′
                                                   
                                                
                                                ,
                                                
                                                   
                                                      
                                                         
                                                            ν
                                                         
                                                         
                                                            f
                                                         
                                                      
                                                   
                                                   
                                                      ′
                                                   
                                                
                                                )
                                                ,
                                                Π
                                                (
                                                
                                                   
                                                      t
                                                   
                                                   
                                                      ′
                                                   
                                                
                                                ,
                                                
                                                   
                                                      
                                                         
                                                            ν
                                                         
                                                         
                                                            f
                                                         
                                                      
                                                   
                                                   
                                                      ′
                                                   
                                                
                                                )
                                                )
                                                |
                                                (
                                                Π
                                                (
                                                
                                                   
                                                      s
                                                   
                                                   
                                                      ′
                                                   
                                                
                                                ,
                                                
                                                   
                                                      ν
                                                   
                                                   
                                                      f
                                                   
                                                
                                                )
                                                ,
                                                Π
                                                (
                                                
                                                   
                                                      t
                                                   
                                                   
                                                      ′
                                                   
                                                
                                                ,
                                                
                                                   
                                                      ν
                                                   
                                                   
                                                      f
                                                   
                                                
                                                )
                                                )
                                                ∈
                                                R
                                                }
                                                .
                                             
                                          
                                       
                                    
                                 
                               We prove that 
                                 
                                    
                                       R
                                    
                                    
                                       ′
                                    
                                 
                               satisfies the transfer conditions of Definition 3. We only prove the transfer conditions for the pair 
                                 (
                                 Π
                                 (
                                 s
                                 
                                    
                                       ⊕
                                    
                                    
                                       i
                                    
                                 
                                 r
                                 ,
                                 
                                    
                                       
                                          
                                             ν
                                          
                                          
                                             f
                                          
                                       
                                    
                                    
                                       ′
                                    
                                 
                                 )
                                 ,
                                 Π
                                 (
                                 t
                                 
                                    
                                       ⊕
                                    
                                    
                                       i
                                    
                                 
                                 r
                                 ,
                                 
                                    
                                       
                                          
                                             ν
                                          
                                          
                                             f
                                          
                                       
                                    
                                    
                                       ′
                                    
                                 
                                 )
                                 )
                                 ∈
                                 
                                    
                                       R
                                    
                                    
                                       ′
                                    
                                 
                               as for others, the proof is trivial (the proof for pairs such as 
                                 (
                                 Π
                                 (
                                 
                                    
                                       s
                                    
                                    
                                       ′
                                    
                                 
                                 ,
                                 
                                    
                                       
                                          
                                             ν
                                          
                                          
                                             f
                                          
                                       
                                    
                                    
                                       ′
                                    
                                 
                                 )
                                 ,
                                 Π
                                 (
                                 
                                    
                                       t
                                    
                                    
                                       ′
                                    
                                 
                                 ,
                                 
                                    
                                       
                                          
                                             ν
                                          
                                          
                                             f
                                          
                                       
                                    
                                    
                                       ′
                                    
                                 
                                 )
                                 )
                                 ∈
                                 
                                    
                                       R
                                    
                                    
                                       ′
                                    
                                 
                               follows from Lemmas 24 and 25).

Suppose that 
                                 Π
                                 (
                                 s
                                 
                                    
                                       ⊕
                                    
                                    
                                       i
                                    
                                 
                                 r
                                 ,
                                 
                                    
                                       
                                          
                                             ν
                                          
                                          
                                             f
                                          
                                       
                                    
                                    
                                       ′
                                    
                                 
                                 )
                                 
                                    →
                                    a
                                 
                                 p
                              . Regarding the value of 
                                 
                                    
                                       
                                          
                                             ν
                                          
                                          
                                             f
                                          
                                       
                                    
                                    
                                       ′
                                    
                                 
                                 
                                    
                                       |
                                    
                                    
                                       i
                                    
                                 
                               two cases can be considered:
                                 
                                    1.
                                    
                                       
                                          
                                             
                                                
                                                   
                                                      ν
                                                   
                                                   
                                                      f
                                                   
                                                
                                             
                                             
                                                ′
                                             
                                          
                                          
                                             
                                                |
                                             
                                             
                                                i
                                             
                                          
                                          =
                                          L
                                       : This transition can be due to SOS rule Select and 
                                          s
                                          
                                             →
                                             
                                                a
                                                ,
                                                ν
                                             
                                          
                                          
                                             
                                                s
                                             
                                             
                                                ′
                                             
                                          
                                       , where 
                                          ν
                                          ⊑
                                          
                                             
                                                
                                                   
                                                      ν
                                                   
                                                   
                                                      f
                                                   
                                                
                                             
                                             
                                                ′
                                             
                                          
                                       , and 
                                          p
                                          ≡
                                          Π
                                          (
                                          
                                             
                                                s
                                             
                                             
                                                ′
                                             
                                          
                                          ,
                                          
                                             
                                                
                                                   
                                                      ν
                                                   
                                                   
                                                      f
                                                   
                                                
                                             
                                             
                                                ′
                                             
                                          
                                          )
                                       . Hence, we have that 
                                          s
                                          
                                             
                                                ⊕
                                             
                                             
                                                i
                                             
                                          
                                          r
                                          
                                             →
                                             
                                                a
                                                ,
                                                ν
                                                
                                                   
                                                      |
                                                   
                                                   
                                                      i
                                                      /
                                                      L
                                                   
                                                
                                             
                                          
                                          
                                             
                                                s
                                             
                                             
                                                ′
                                             
                                          
                                       . By Lemma 25, 
                                          s
                                          
                                             →
                                             
                                                a
                                                ,
                                                
                                                   
                                                      ν
                                                   
                                                   
                                                      s
                                                   
                                                
                                             
                                          
                                          
                                             
                                                s
                                             
                                             
                                                ′
                                             
                                          
                                       , where 
                                          ν
                                          =
                                          
                                             
                                                ν
                                             
                                             
                                                s
                                             
                                          
                                          ⋅
                                          
                                             
                                                λ
                                             
                                             
                                                ?
                                             
                                          
                                       , and 
                                          
                                             
                                                ν
                                             
                                             
                                                s
                                             
                                          
                                          ⊑
                                          
                                             
                                                ν
                                             
                                             
                                                f
                                             
                                          
                                       . Therefore, from the definition of the LTS semantic of product lines it follows that 
                                          Π
                                          (
                                          s
                                          ,
                                          
                                             
                                                ν
                                             
                                             
                                                f
                                             
                                          
                                          )
                                          
                                             →
                                             a
                                          
                                          Π
                                          (
                                          
                                             
                                                s
                                             
                                             
                                                ′
                                             
                                          
                                          ,
                                          
                                             
                                                ν
                                             
                                             
                                                f
                                             
                                          
                                          )
                                       . Furthermore, 
                                          Π
                                          (
                                          s
                                          ,
                                          
                                             
                                                ν
                                             
                                             
                                                f
                                             
                                          
                                          )
                                          ∼
                                          Π
                                          (
                                          t
                                          ,
                                          
                                             
                                                ν
                                             
                                             
                                                f
                                             
                                          
                                          )
                                        implies that 
                                          Π
                                          (
                                          t
                                          ,
                                          
                                             
                                                ν
                                             
                                             
                                                f
                                             
                                          
                                          )
                                          
                                             →
                                             a
                                          
                                          Π
                                          (
                                          
                                             
                                                t
                                             
                                             
                                                ′
                                             
                                          
                                          ,
                                          
                                             
                                                ν
                                             
                                             
                                                f
                                             
                                          
                                          )
                                        and 
                                          Π
                                          (
                                          
                                             
                                                s
                                             
                                             
                                                ′
                                             
                                          
                                          ,
                                          
                                             
                                                ν
                                             
                                             
                                                f
                                             
                                          
                                          )
                                          ∼
                                          Π
                                          (
                                          
                                             
                                                t
                                             
                                             
                                                ′
                                             
                                          
                                          ,
                                          
                                             
                                                ν
                                             
                                             
                                                f
                                             
                                          
                                          )
                                       . Similarly, it follows that 
                                          t
                                          
                                             →
                                             
                                                a
                                                ,
                                                
                                                   
                                                      ν
                                                   
                                                   
                                                      t
                                                   
                                                
                                             
                                          
                                          
                                             
                                                t
                                             
                                             
                                                ′
                                             
                                          
                                       , where 
                                          
                                             
                                                ν
                                             
                                             
                                                t
                                             
                                          
                                          ⊑
                                          
                                             
                                                ν
                                             
                                             
                                                f
                                             
                                          
                                       . Thus, by Lemma 24, 
                                          t
                                          
                                             →
                                             
                                                a
                                                ,
                                                
                                                   
                                                      ν
                                                   
                                                   
                                                      ′
                                                   
                                                
                                             
                                          
                                          
                                             
                                                t
                                             
                                             
                                                ′
                                             
                                          
                                       , where 
                                          
                                             
                                                ν
                                             
                                             
                                                ′
                                             
                                          
                                          =
                                          
                                             
                                                ν
                                             
                                             
                                                t
                                             
                                          
                                          ⋅
                                          
                                             
                                                λ
                                             
                                             
                                                ?
                                             
                                          
                                       , and 
                                          
                                             
                                                ν
                                             
                                             
                                                ′
                                             
                                          
                                          ⊑
                                          
                                             
                                                
                                                   
                                                      ν
                                                   
                                                   
                                                      f
                                                   
                                                
                                             
                                             
                                                ′
                                             
                                          
                                       . By Select, 
                                          t
                                          
                                             
                                                ⊕
                                             
                                             
                                                i
                                             
                                          
                                          r
                                          
                                             →
                                             
                                                a
                                                ,
                                                
                                                   
                                                      ν
                                                   
                                                   
                                                      ′
                                                   
                                                
                                                
                                                   
                                                      |
                                                   
                                                   
                                                      i
                                                      /
                                                      L
                                                   
                                                
                                             
                                          
                                          
                                             
                                                t
                                             
                                             
                                                ′
                                             
                                          
                                        and consequently 
                                          Π
                                          (
                                          t
                                          
                                             
                                                ⊕
                                             
                                             
                                                i
                                             
                                          
                                          r
                                          ,
                                          
                                             
                                                
                                                   
                                                      ν
                                                   
                                                   
                                                      f
                                                   
                                                
                                             
                                             
                                                ′
                                             
                                          
                                          )
                                          
                                             →
                                             a
                                          
                                          Π
                                          (
                                          
                                             
                                                t
                                             
                                             
                                                ′
                                             
                                          
                                          ,
                                          
                                             
                                                
                                                   
                                                      ν
                                                   
                                                   
                                                      f
                                                   
                                                
                                             
                                             
                                                ′
                                             
                                          
                                          )
                                       . Due to the definition of 
                                          
                                             
                                                R
                                             
                                             
                                                ′
                                             
                                          
                                       , we have that 
                                          Π
                                          (
                                          
                                             
                                                s
                                             
                                             
                                                ′
                                             
                                          
                                          ,
                                          
                                             
                                                ν
                                             
                                             
                                                f
                                             
                                          
                                          )
                                          ∼
                                          Π
                                          (
                                          
                                             
                                                t
                                             
                                             
                                                ′
                                             
                                          
                                          ,
                                          
                                             
                                                ν
                                             
                                             
                                                f
                                             
                                          
                                          )
                                        and hence, 
                                          Π
                                          (
                                          
                                             
                                                s
                                             
                                             
                                                ′
                                             
                                          
                                          ,
                                          
                                             
                                                
                                                   
                                                      ν
                                                   
                                                   
                                                      f
                                                   
                                                
                                             
                                             
                                                ′
                                             
                                          
                                          )
                                          
                                          
                                             
                                                R
                                             
                                             
                                                ′
                                             
                                          
                                          
                                          Π
                                          (
                                          
                                             
                                                t
                                             
                                             
                                                ′
                                             
                                          
                                          ,
                                          
                                             
                                                
                                                   
                                                      ν
                                                   
                                                   
                                                      f
                                                   
                                                
                                             
                                             
                                                ′
                                             
                                          
                                          )
                                       , which was to be shown.


                                       
                                          
                                             
                                                ν
                                             
                                             
                                                f
                                             
                                          
                                          
                                             
                                                |
                                             
                                             
                                                i
                                             
                                          
                                          =
                                          R
                                       : This transition can be due to SOS rule Select and 
                                          r
                                          
                                             →
                                             
                                                a
                                                ,
                                                ν
                                             
                                          
                                          
                                             
                                                r
                                             
                                             
                                                ′
                                             
                                          
                                       , where 
                                          ν
                                          ⊑
                                          
                                             
                                                
                                                   
                                                      ν
                                                   
                                                   
                                                      f
                                                   
                                                
                                             
                                             
                                                ′
                                             
                                          
                                       , and 
                                          p
                                          ≡
                                          Π
                                          (
                                          
                                             
                                                r
                                             
                                             
                                                ′
                                             
                                          
                                          ,
                                          
                                             
                                                
                                                   
                                                      ν
                                                   
                                                   
                                                      f
                                                   
                                                
                                             
                                             
                                                ′
                                             
                                          
                                          )
                                       . Hence, we have that 
                                          s
                                          
                                             
                                                ⊕
                                             
                                             
                                                i
                                             
                                          
                                          r
                                          
                                             →
                                             
                                                a
                                                ,
                                                ν
                                                
                                                   
                                                      |
                                                   
                                                   
                                                      i
                                                      /
                                                      R
                                                   
                                                
                                             
                                          
                                          
                                             
                                                r
                                             
                                             
                                                ′
                                             
                                          
                                        and similarly, 
                                          t
                                          
                                             
                                                ⊕
                                             
                                             
                                                i
                                             
                                          
                                          r
                                          
                                             →
                                             
                                                a
                                                ,
                                                ν
                                                
                                                   
                                                      |
                                                   
                                                   
                                                      i
                                                      /
                                                      R
                                                   
                                                
                                             
                                          
                                          
                                             
                                                t
                                             
                                             
                                                ′
                                             
                                          
                                       . It follows from the definition of the LTS semantic of product lines that 
                                          Π
                                          (
                                          t
                                          
                                             
                                                ⊕
                                             
                                             
                                                i
                                             
                                          
                                          r
                                          ,
                                          
                                             
                                                
                                                   
                                                      ν
                                                   
                                                   
                                                      f
                                                   
                                                
                                             
                                             
                                                ′
                                             
                                          
                                          )
                                          
                                             →
                                             a
                                          
                                          Π
                                          (
                                          
                                             
                                                r
                                             
                                             
                                                ′
                                             
                                          
                                          ,
                                          
                                             
                                                
                                                   
                                                      ν
                                                   
                                                   
                                                      f
                                                   
                                                
                                             
                                             
                                                ′
                                             
                                          
                                          )
                                       . By the definition of 
                                          
                                             
                                                R
                                             
                                             
                                                ′
                                             
                                          
                                       , 
                                          Π
                                          (
                                          
                                             
                                                r
                                             
                                             
                                                ′
                                             
                                          
                                          ,
                                          
                                             
                                                
                                                   
                                                      ν
                                                   
                                                   
                                                      f
                                                   
                                                
                                             
                                             
                                                ′
                                             
                                          
                                          )
                                          
                                          
                                             
                                                R
                                             
                                             
                                                ′
                                             
                                          
                                          
                                          Π
                                          (
                                          
                                             
                                                r
                                             
                                             
                                                ′
                                             
                                          
                                          ,
                                          
                                             
                                                
                                                   
                                                      ν
                                                   
                                                   
                                                      f
                                                   
                                                
                                             
                                             
                                                ′
                                             
                                          
                                          )
                                       .


                              Case 6. Following the Definition 4, we prove that for any valid full configuration 
                                 
                                    
                                       
                                          
                                             ν
                                          
                                          
                                             f
                                          
                                       
                                    
                                    
                                       ′
                                    
                                 
                               with respect to 
                                 s
                                 ∥
                                 r
                               and 
                                 t
                                 ∥
                                 r
                              , 
                                 Π
                                 (
                                 s
                                 ∥
                                 r
                                 ,
                                 
                                    
                                       
                                          
                                             ν
                                          
                                          
                                             f
                                          
                                       
                                    
                                    
                                       ′
                                    
                                 
                                 )
                                 ∼
                                 Π
                                 (
                                 t
                                 ∥
                                 r
                                 ,
                                 
                                    
                                       
                                          
                                             ν
                                          
                                          
                                             f
                                          
                                       
                                    
                                    
                                       ′
                                    
                                 
                                 )
                               holds. Construct 
                                 
                                    
                                       R
                                    
                                    
                                       ′
                                    
                                 
                               as
                                 
                                    
                                       
                                          
                                             
                                                
                                                   
                                                      
                                                         R
                                                      
                                                      
                                                         ′
                                                      
                                                   
                                                   =
                                                   {
                                                   (
                                                   Π
                                                   (
                                                   
                                                      
                                                         s
                                                      
                                                      
                                                         ′
                                                      
                                                   
                                                   ∥
                                                   
                                                      
                                                         r
                                                      
                                                      
                                                         ′
                                                      
                                                   
                                                   ,
                                                   
                                                      
                                                         
                                                            
                                                               ν
                                                            
                                                            
                                                               f
                                                            
                                                         
                                                      
                                                      
                                                         ′
                                                      
                                                   
                                                   )
                                                   ,
                                                   Π
                                                   (
                                                   
                                                      
                                                         t
                                                      
                                                      
                                                         ′
                                                      
                                                   
                                                   ∥
                                                   
                                                      
                                                         r
                                                      
                                                      
                                                         ′
                                                      
                                                   
                                                   ,
                                                   
                                                      
                                                         
                                                            
                                                               ν
                                                            
                                                            
                                                               f
                                                            
                                                         
                                                      
                                                      
                                                         ′
                                                      
                                                   
                                                   )
                                                   )
                                                   |
                                                   (
                                                   Π
                                                   (
                                                   
                                                      
                                                         s
                                                      
                                                      
                                                         ′
                                                      
                                                   
                                                   ,
                                                   
                                                      
                                                         ν
                                                      
                                                      
                                                         f
                                                      
                                                   
                                                   )
                                                   ,
                                                   Π
                                                   (
                                                   
                                                      
                                                         t
                                                      
                                                      
                                                         ′
                                                      
                                                   
                                                   ,
                                                   
                                                      
                                                         ν
                                                      
                                                      
                                                         f
                                                      
                                                   
                                                   )
                                                   )
                                                   ∈
                                                   R
                                                   }
                                                
                                             
                                          
                                       
                                    
                                 
                               We show that it satisfies the transfer conditions of Definition 3.

For an arbitrary pair 
                                 Π
                                 (
                                 
                                    
                                       s
                                    
                                    
                                       ′
                                    
                                 
                                 ∥
                                 
                                    
                                       r
                                    
                                    
                                       ′
                                    
                                 
                                 ,
                                 
                                    
                                       
                                          
                                             ν
                                          
                                          
                                             f
                                          
                                       
                                    
                                    
                                       ′
                                    
                                 
                                 )
                                 
                                 
                                    
                                       R
                                    
                                    
                                       ′
                                    
                                 
                                 
                                 Π
                                 (
                                 
                                    
                                       t
                                    
                                    
                                       ′
                                    
                                 
                                 ∥
                                 
                                    
                                       r
                                    
                                    
                                       ′
                                    
                                 
                                 ,
                                 
                                    
                                       
                                          
                                             ν
                                          
                                          
                                             f
                                          
                                       
                                    
                                    
                                       ′
                                    
                                 
                                 )
                              , suppose that 
                                 Π
                                 (
                                 
                                    
                                       s
                                    
                                    
                                       ′
                                    
                                 
                                 ∥
                                 
                                    
                                       r
                                    
                                    
                                       ′
                                    
                                 
                                 ,
                                 
                                    
                                       
                                          
                                             ν
                                          
                                          
                                             f
                                          
                                       
                                    
                                    
                                       ′
                                    
                                 
                                 )
                                 
                                    →
                                    a
                                 
                                 p
                              . Using the SOS rules Par and Sync, three cases can be considered:
                                 
                                    1.
                                    This transition can be due to SOS rule Par and 
                                          
                                             
                                                s
                                             
                                             
                                                ′
                                             
                                          
                                          
                                             →
                                             
                                                a
                                                ,
                                                
                                                   
                                                      ν
                                                   
                                                   
                                                      1
                                                   
                                                   
                                                      ′
                                                   
                                                
                                             
                                          
                                          
                                             
                                                s
                                             
                                             
                                                ″
                                             
                                          
                                       , where 
                                          
                                             
                                                ν
                                             
                                             
                                                1
                                             
                                             
                                                ′
                                             
                                          
                                          ⊑
                                          
                                             
                                                
                                                   
                                                      ν
                                                   
                                                   
                                                      f
                                                   
                                                
                                             
                                             
                                                ′
                                             
                                          
                                       , and 
                                          p
                                          ≡
                                          Π
                                          (
                                          
                                             
                                                s
                                             
                                             
                                                ″
                                             
                                          
                                          ∥
                                          
                                             
                                                r
                                             
                                             
                                                ′
                                             
                                          
                                          ,
                                          
                                             
                                                
                                                   
                                                      ν
                                                   
                                                   
                                                      f
                                                   
                                                
                                             
                                             
                                                ′
                                             
                                          
                                          )
                                       . Hence, we have that 
                                          
                                             
                                                s
                                             
                                             
                                                ′
                                             
                                          
                                          ∥
                                          
                                             
                                                r
                                             
                                             
                                                ′
                                             
                                          
                                          
                                             →
                                             
                                                a
                                                ,
                                                
                                                   
                                                      ν
                                                   
                                                   
                                                      1
                                                   
                                                   
                                                      ′
                                                   
                                                
                                             
                                          
                                          
                                             
                                                s
                                             
                                             
                                                ″
                                             
                                          
                                          ∥
                                          
                                             
                                                r
                                             
                                             
                                                ′
                                             
                                          
                                       . By Lemma 25, 
                                          
                                             
                                                s
                                             
                                             
                                                ′
                                             
                                          
                                          
                                             →
                                             
                                                a
                                                ,
                                                
                                                   
                                                      ν
                                                   
                                                   
                                                      s
                                                   
                                                
                                             
                                          
                                          
                                             
                                                s
                                             
                                             
                                                ″
                                             
                                          
                                       , where 
                                          
                                             
                                                ν
                                             
                                             
                                                1
                                             
                                             
                                                ′
                                             
                                          
                                          =
                                          
                                             
                                                ν
                                             
                                             
                                                s
                                             
                                          
                                          ⋅
                                          
                                             
                                                λ
                                             
                                             
                                                ?
                                             
                                          
                                        and 
                                          
                                             
                                                ν
                                             
                                             
                                                s
                                             
                                          
                                          ⊑
                                          
                                             
                                                ν
                                             
                                             
                                                f
                                             
                                          
                                       . It follows from the definition of the LTS semantic of product lines that 
                                          Π
                                          (
                                          
                                             
                                                s
                                             
                                             
                                                ′
                                             
                                          
                                          ,
                                          
                                             
                                                ν
                                             
                                             
                                                f
                                             
                                          
                                          )
                                          
                                             →
                                             a
                                          
                                          Π
                                          (
                                          
                                             
                                                s
                                             
                                             
                                                ″
                                             
                                          
                                          ,
                                          
                                             
                                                ν
                                             
                                             
                                                f
                                             
                                          
                                          )
                                       . Furthermore, 
                                          Π
                                          (
                                          
                                             
                                                s
                                             
                                             
                                                ′
                                             
                                          
                                          ,
                                          
                                             
                                                ν
                                             
                                             
                                                f
                                             
                                          
                                          )
                                          
                                          R
                                          
                                          Π
                                          (
                                          
                                             
                                                t
                                             
                                             
                                                ′
                                             
                                          
                                          ,
                                          
                                             
                                                ν
                                             
                                             
                                                f
                                             
                                          
                                          )
                                        implies that 
                                          Π
                                          (
                                          
                                             
                                                t
                                             
                                             
                                                ′
                                             
                                          
                                          ,
                                          
                                             
                                                ν
                                             
                                             
                                                f
                                             
                                          
                                          )
                                          
                                             →
                                             a
                                          
                                          Π
                                          (
                                          
                                             
                                                t
                                             
                                             
                                                ″
                                             
                                          
                                          ,
                                          
                                             
                                                ν
                                             
                                             
                                                f
                                             
                                          
                                          )
                                        and 
                                          Π
                                          (
                                          
                                             
                                                s
                                             
                                             
                                                ″
                                             
                                          
                                          ,
                                          
                                             
                                                ν
                                             
                                             
                                                f
                                             
                                          
                                          )
                                          
                                          R
                                          
                                          Π
                                          (
                                          
                                             
                                                t
                                             
                                             
                                                ″
                                             
                                          
                                          ,
                                          
                                             
                                                ν
                                             
                                             
                                                f
                                             
                                          
                                          )
                                       . It follows that 
                                          
                                             
                                                t
                                             
                                             
                                                ′
                                             
                                          
                                          
                                             →
                                             
                                                a
                                                ,
                                                
                                                   
                                                      ν
                                                   
                                                   
                                                      t
                                                   
                                                
                                             
                                          
                                          
                                             
                                                t
                                             
                                             
                                                ″
                                             
                                          
                                       , where 
                                          
                                             
                                                ν
                                             
                                             
                                                t
                                             
                                          
                                          ⊑
                                          
                                             
                                                ν
                                             
                                             
                                                f
                                             
                                          
                                       , and consequently by Lemma 24
                                       
                                          ,
                                          
                                             
                                                t
                                             
                                             
                                                ′
                                             
                                          
                                          
                                             →
                                             
                                                a
                                                ,
                                                
                                                   
                                                      ν
                                                   
                                                   
                                                      2
                                                   
                                                   
                                                      ′
                                                   
                                                
                                             
                                          
                                          
                                             
                                                t
                                             
                                             
                                                ″
                                             
                                          
                                       , where 
                                          
                                             
                                                ν
                                             
                                             
                                                2
                                             
                                             
                                                ′
                                             
                                          
                                          =
                                          
                                             
                                                ν
                                             
                                             
                                                t
                                             
                                          
                                          ⋅
                                          
                                             
                                                λ
                                             
                                             
                                                ?
                                             
                                          
                                        and 
                                          
                                             
                                                ν
                                             
                                             
                                                2
                                             
                                             
                                                ′
                                             
                                          
                                          ⊑
                                          
                                             
                                                
                                                   
                                                      ν
                                                   
                                                   
                                                      f
                                                   
                                                
                                             
                                             
                                                ′
                                             
                                          
                                       . By SOS rule Par, 
                                          
                                             
                                                t
                                             
                                             
                                                ′
                                             
                                          
                                          ∥
                                          
                                             
                                                r
                                             
                                             
                                                ′
                                             
                                          
                                          
                                             →
                                             
                                                a
                                                ,
                                                
                                                   
                                                      ν
                                                   
                                                   
                                                      2
                                                   
                                                   
                                                      ′
                                                   
                                                
                                             
                                          
                                          
                                             
                                                t
                                             
                                             
                                                ″
                                             
                                          
                                          ∥
                                          
                                             
                                                r
                                             
                                             
                                                ′
                                             
                                          
                                        and hence, 
                                          Π
                                          (
                                          
                                             
                                                t
                                             
                                             
                                                ′
                                             
                                          
                                          ∥
                                          
                                             
                                                r
                                             
                                             
                                                ′
                                             
                                          
                                          ,
                                          
                                             
                                                
                                                   
                                                      ν
                                                   
                                                   
                                                      f
                                                   
                                                
                                             
                                             
                                                ′
                                             
                                          
                                          )
                                          
                                             →
                                             a
                                          
                                          Π
                                          (
                                          
                                             
                                                t
                                             
                                             
                                                ″
                                             
                                          
                                          ∥
                                          
                                             
                                                r
                                             
                                             
                                                ′
                                             
                                          
                                          ,
                                          
                                             
                                                
                                                   
                                                      ν
                                                   
                                                   
                                                      f
                                                   
                                                
                                             
                                             
                                                ′
                                             
                                          
                                          )
                                       . Due to the Definition of 
                                          
                                             
                                                R
                                             
                                             
                                                ′
                                             
                                          
                                       , we have that 
                                          Π
                                          (
                                          
                                             
                                                s
                                             
                                             
                                                ″
                                             
                                          
                                          ,
                                          
                                             
                                                ν
                                             
                                             
                                                f
                                             
                                          
                                          )
                                          
                                          R
                                          
                                          Π
                                          (
                                          
                                             
                                                t
                                             
                                             
                                                ″
                                             
                                          
                                          ,
                                          
                                             
                                                ν
                                             
                                             
                                                f
                                             
                                          
                                          )
                                        and hence 
                                          Π
                                          (
                                          
                                             
                                                s
                                             
                                             
                                                ″
                                             
                                          
                                          ∥
                                          
                                             
                                                r
                                             
                                             
                                                ′
                                             
                                          
                                          ,
                                          
                                             
                                                
                                                   
                                                      ν
                                                   
                                                   
                                                      f
                                                   
                                                
                                             
                                             
                                                ′
                                             
                                          
                                          )
                                          
                                          
                                             
                                                R
                                             
                                             
                                                ′
                                             
                                          
                                          
                                          Π
                                          (
                                          
                                             
                                                t
                                             
                                             
                                                ″
                                             
                                          
                                          ∥
                                          
                                             
                                                r
                                             
                                             
                                                ′
                                             
                                          
                                          ,
                                          
                                             
                                                
                                                   
                                                      ν
                                                   
                                                   
                                                      f
                                                   
                                                
                                             
                                             
                                                ′
                                             
                                          
                                          )
                                       , which was to be shown.

This transition can be due to SOS rule Par and 
                                          
                                             
                                                r
                                             
                                             
                                                ′
                                             
                                          
                                          
                                             →
                                             
                                                a
                                                ,
                                                
                                                   
                                                      ν
                                                   
                                                   
                                                      ′
                                                   
                                                
                                             
                                          
                                          
                                             
                                                r
                                             
                                             
                                                ″
                                             
                                          
                                       , where 
                                          
                                             
                                                ν
                                             
                                             
                                                ′
                                             
                                          
                                          ⊑
                                          
                                             
                                                
                                                   
                                                      ν
                                                   
                                                   
                                                      f
                                                   
                                                
                                             
                                             
                                                ′
                                             
                                          
                                       , and 
                                          p
                                          ≡
                                          Π
                                          (
                                          
                                             
                                                s
                                             
                                             
                                                ′
                                             
                                          
                                          ∥
                                          
                                             
                                                r
                                             
                                             
                                                ″
                                             
                                          
                                          ,
                                          
                                             
                                                
                                                   
                                                      ν
                                                   
                                                   
                                                      f
                                                   
                                                
                                             
                                             
                                                ′
                                             
                                          
                                          )
                                       . Hence, we have that 
                                          
                                             
                                                s
                                             
                                             
                                                ′
                                             
                                          
                                          ∥
                                          
                                             
                                                r
                                             
                                             
                                                ′
                                             
                                          
                                          
                                             →
                                             
                                                a
                                                ,
                                                
                                                   
                                                      ν
                                                   
                                                   
                                                      ′
                                                   
                                                
                                             
                                          
                                          
                                             
                                                s
                                             
                                             
                                                ′
                                             
                                          
                                          ∥
                                          
                                             
                                                r
                                             
                                             
                                                ″
                                             
                                          
                                        and similarly, 
                                          
                                             
                                                t
                                             
                                             
                                                ′
                                             
                                          
                                          ∥
                                          
                                             
                                                r
                                             
                                             
                                                ′
                                             
                                          
                                          
                                             →
                                             
                                                a
                                                ,
                                                
                                                   
                                                      ν
                                                   
                                                   
                                                      ′
                                                   
                                                
                                             
                                          
                                          
                                             
                                                t
                                             
                                             
                                                ′
                                             
                                          
                                          ∥
                                          
                                             
                                                r
                                             
                                             
                                                ″
                                             
                                          
                                       , where 
                                          
                                             
                                                ν
                                             
                                             
                                                ′
                                             
                                          
                                          ⊑
                                          
                                             
                                                
                                                   
                                                      ν
                                                   
                                                   
                                                      f
                                                   
                                                
                                             
                                             
                                                ′
                                             
                                          
                                       . Therefore, it follows that 
                                          Π
                                          (
                                          
                                             
                                                t
                                             
                                             
                                                ′
                                             
                                          
                                          ∥
                                          
                                             
                                                r
                                             
                                             
                                                ′
                                             
                                          
                                          ,
                                          
                                             
                                                
                                                   
                                                      ν
                                                   
                                                   
                                                      f
                                                   
                                                
                                             
                                             
                                                ′
                                             
                                          
                                          )
                                          
                                             →
                                             a
                                          
                                          Π
                                          (
                                          
                                             
                                                t
                                             
                                             
                                                ′
                                             
                                          
                                          ∥
                                          
                                             
                                                r
                                             
                                             
                                                ″
                                             
                                          
                                          ,
                                          
                                             
                                                
                                                   
                                                      ν
                                                   
                                                   
                                                      f
                                                   
                                                
                                             
                                             
                                                ′
                                             
                                          
                                          )
                                       . Due to the Definition of 
                                          
                                             
                                                R
                                             
                                             
                                                ′
                                             
                                          
                                       , we have that 
                                          Π
                                          (
                                          
                                             
                                                s
                                             
                                             
                                                ′
                                             
                                          
                                          ∥
                                          
                                             
                                                r
                                             
                                             
                                                ″
                                             
                                          
                                          ,
                                          
                                             
                                                
                                                   
                                                      ν
                                                   
                                                   
                                                      f
                                                   
                                                
                                             
                                             
                                                ′
                                             
                                          
                                          )
                                          
                                          
                                             
                                                R
                                             
                                             
                                                ′
                                             
                                          
                                          
                                          Π
                                          (
                                          
                                             
                                                t
                                             
                                             
                                                ′
                                             
                                          
                                          ∥
                                          
                                             
                                                r
                                             
                                             
                                                ′
                                             
                                          
                                          ,
                                          
                                             
                                                
                                                   
                                                      ν
                                                   
                                                   
                                                      f
                                                   
                                                
                                             
                                             
                                                ″
                                             
                                          
                                          )
                                       , which was to be shown.

This transition can be due to SOS rule Sync and transitions 
                                          
                                             
                                                s
                                             
                                             
                                                ′
                                             
                                          
                                          
                                             →
                                             
                                                a
                                                ,
                                                
                                                   
                                                      ν
                                                   
                                                   
                                                      1
                                                   
                                                   
                                                      ′
                                                   
                                                
                                             
                                          
                                          
                                             
                                                s
                                             
                                             
                                                ″
                                             
                                          
                                        and 
                                          
                                             
                                                r
                                             
                                             
                                                ′
                                             
                                          
                                          
                                             →
                                             
                                                
                                                   a
                                                   ‾
                                                
                                                ,
                                                
                                                   
                                                      ν
                                                   
                                                   
                                                      ′
                                                   
                                                
                                             
                                          
                                          
                                             
                                                r
                                             
                                             
                                                ″
                                             
                                          
                                       , where 
                                          
                                             
                                                ν
                                             
                                             
                                                1
                                             
                                             
                                                ′
                                             
                                          
                                          ⊑
                                          
                                             
                                                
                                                   
                                                      ν
                                                   
                                                   
                                                      f
                                                   
                                                
                                             
                                             
                                                ′
                                             
                                          
                                       , 
                                          
                                             
                                                ν
                                             
                                             
                                                ′
                                             
                                          
                                          ⊑
                                          
                                             
                                                
                                                   
                                                      ν
                                                   
                                                   
                                                      f
                                                   
                                                
                                             
                                             
                                                ′
                                             
                                          
                                       , and 
                                          
                                             
                                                ν
                                             
                                             
                                                1
                                             
                                             
                                                ′
                                             
                                          
                                          ≍
                                          
                                             
                                                ν
                                             
                                             
                                                ′
                                             
                                          
                                       , and consequently 
                                          p
                                          ≡
                                          Π
                                          (
                                          
                                             
                                                s
                                             
                                             
                                                ″
                                             
                                          
                                          ∥
                                          
                                             
                                                r
                                             
                                             
                                                ″
                                             
                                          
                                          ,
                                          
                                             
                                                
                                                   
                                                      ν
                                                   
                                                   
                                                      f
                                                   
                                                
                                             
                                             
                                                ′
                                             
                                          
                                          )
                                       . Hence, we have that 
                                          
                                             
                                                s
                                             
                                             
                                                ′
                                             
                                          
                                          ∥
                                          
                                             
                                                r
                                             
                                             
                                                ′
                                             
                                          
                                          
                                             →
                                             
                                                τ
                                                ,
                                                
                                                   
                                                      ν
                                                   
                                                   
                                                      1
                                                   
                                                   
                                                      ′
                                                   
                                                
                                                ⊙
                                                
                                                   
                                                      ν
                                                   
                                                   
                                                      ′
                                                   
                                                
                                             
                                          
                                          
                                             
                                                s
                                             
                                             
                                                ″
                                             
                                          
                                          ∥
                                          
                                             
                                                r
                                             
                                             
                                                ″
                                             
                                          
                                       . By Lemma 25, 
                                          
                                             
                                                s
                                             
                                             
                                                ′
                                             
                                          
                                          
                                             →
                                             
                                                a
                                                ,
                                                
                                                   
                                                      ν
                                                   
                                                   
                                                      s
                                                   
                                                
                                             
                                          
                                          
                                             
                                                s
                                             
                                             
                                                ″
                                             
                                          
                                       , where 
                                          
                                             
                                                ν
                                             
                                             
                                                1
                                             
                                             
                                                ′
                                             
                                          
                                          =
                                          
                                             
                                                ν
                                             
                                             
                                                s
                                             
                                          
                                          ⋅
                                          
                                             
                                                λ
                                             
                                             
                                                ?
                                             
                                          
                                        and 
                                          
                                             
                                                ν
                                             
                                             
                                                s
                                             
                                          
                                          ⊑
                                          
                                             
                                                ν
                                             
                                             
                                                f
                                             
                                          
                                       . It follows from the definition of the LTS semantic of product lines that 
                                          Π
                                          (
                                          
                                             
                                                s
                                             
                                             
                                                ′
                                             
                                          
                                          ,
                                          
                                             
                                                ν
                                             
                                             
                                                f
                                             
                                          
                                          )
                                          
                                             →
                                             a
                                          
                                          Π
                                          (
                                          
                                             
                                                s
                                             
                                             
                                                ″
                                             
                                          
                                          ,
                                          
                                             
                                                ν
                                             
                                             
                                                f
                                             
                                          
                                          )
                                       . Furthermore, 
                                          Π
                                          (
                                          
                                             
                                                s
                                             
                                             
                                                ′
                                             
                                          
                                          ,
                                          
                                             
                                                ν
                                             
                                             
                                                f
                                             
                                          
                                          )
                                          
                                          R
                                          
                                          Π
                                          (
                                          
                                             
                                                t
                                             
                                             
                                                ′
                                             
                                          
                                          ,
                                          
                                             
                                                ν
                                             
                                             
                                                f
                                             
                                          
                                          )
                                        implies that 
                                          Π
                                          (
                                          
                                             
                                                t
                                             
                                             
                                                ′
                                             
                                          
                                          ,
                                          
                                             
                                                ν
                                             
                                             
                                                f
                                             
                                          
                                          )
                                          
                                             →
                                             a
                                          
                                          Π
                                          (
                                          
                                             
                                                t
                                             
                                             
                                                ″
                                             
                                          
                                          ,
                                          
                                             
                                                ν
                                             
                                             
                                                f
                                             
                                          
                                          )
                                        and 
                                          Π
                                          (
                                          
                                             
                                                s
                                             
                                             
                                                ″
                                             
                                          
                                          ,
                                          
                                             
                                                ν
                                             
                                             
                                                f
                                             
                                          
                                          )
                                          
                                          R
                                          
                                          Π
                                          (
                                          
                                             
                                                t
                                             
                                             
                                                ″
                                             
                                          
                                          ,
                                          
                                             
                                                ν
                                             
                                             
                                                f
                                             
                                          
                                          )
                                       . It follows that 
                                          
                                             
                                                t
                                             
                                             
                                                ′
                                             
                                          
                                          
                                             →
                                             
                                                a
                                                ,
                                                
                                                   
                                                      ν
                                                   
                                                   
                                                      t
                                                   
                                                
                                             
                                          
                                          
                                             
                                                t
                                             
                                             
                                                ″
                                             
                                          
                                       , where 
                                          
                                             
                                                ν
                                             
                                             
                                                t
                                             
                                          
                                          ⊑
                                          
                                             
                                                ν
                                             
                                             
                                                f
                                             
                                          
                                       , and consequently, by Lemma 24
                                       
                                          ,
                                          
                                             
                                                t
                                             
                                             
                                                ′
                                             
                                          
                                          
                                             →
                                             
                                                a
                                                ,
                                                
                                                   
                                                      ν
                                                   
                                                   
                                                      2
                                                   
                                                   
                                                      ′
                                                   
                                                
                                             
                                          
                                          
                                             
                                                t
                                             
                                             
                                                ″
                                             
                                          
                                       , where 
                                          
                                             
                                                ν
                                             
                                             
                                                2
                                             
                                             
                                                ′
                                             
                                          
                                          =
                                          
                                             
                                                ν
                                             
                                             
                                                t
                                             
                                          
                                          ⋅
                                          
                                             
                                                λ
                                             
                                             
                                                ?
                                             
                                          
                                        and 
                                          
                                             
                                                ν
                                             
                                             
                                                2
                                             
                                             
                                                ′
                                             
                                          
                                          ⊑
                                          
                                             
                                                
                                                   
                                                      ν
                                                   
                                                   
                                                      f
                                                   
                                                
                                             
                                             
                                                ′
                                             
                                          
                                       . Since 
                                          
                                             
                                                ν
                                             
                                             
                                                s
                                             
                                          
                                          ⊑
                                          
                                             
                                                ν
                                             
                                             
                                                f
                                             
                                          
                                        and 
                                          
                                             
                                                ν
                                             
                                             
                                                t
                                             
                                          
                                          ⊑
                                          
                                             
                                                ν
                                             
                                             
                                                f
                                             
                                          
                                       , then 
                                          
                                             
                                                ν
                                             
                                             
                                                s
                                             
                                          
                                          ≍
                                          
                                             
                                                ν
                                             
                                             
                                                t
                                             
                                          
                                       . Therefore, 
                                          
                                             
                                                ν
                                             
                                             
                                                1
                                             
                                             
                                                ′
                                             
                                          
                                          ≍
                                          
                                             
                                                ν
                                             
                                             
                                                ′
                                             
                                          
                                        implies 
                                          
                                             
                                                ν
                                             
                                             
                                                2
                                             
                                             
                                                ′
                                             
                                          
                                          ≍
                                          
                                             
                                                ν
                                             
                                             
                                                ′
                                             
                                          
                                        and 
                                          
                                             
                                                ν
                                             
                                             
                                                2
                                             
                                             
                                                ′
                                             
                                          
                                          ⊙
                                          
                                             
                                                ν
                                             
                                             
                                                ′
                                             
                                          
                                          ⊑
                                          
                                             
                                                
                                                   
                                                      ν
                                                   
                                                   
                                                      f
                                                   
                                                
                                             
                                             
                                                ′
                                             
                                          
                                       . By SOS rule Sync, we have that 
                                          
                                             
                                                t
                                             
                                             
                                                ′
                                             
                                          
                                          ∥
                                          
                                             
                                                r
                                             
                                             
                                                ′
                                             
                                          
                                          
                                             →
                                             
                                                τ
                                                ,
                                                
                                                   
                                                      ν
                                                   
                                                   
                                                      2
                                                   
                                                   
                                                      ′
                                                   
                                                
                                                ⊙
                                                
                                                   
                                                      ν
                                                   
                                                   
                                                      ′
                                                   
                                                
                                             
                                          
                                          
                                             
                                                t
                                             
                                             
                                                ″
                                             
                                          
                                          ∥
                                          
                                             
                                                r
                                             
                                             
                                                ″
                                             
                                          
                                        and hence, 
                                          Π
                                          (
                                          
                                             
                                                t
                                             
                                             
                                                ′
                                             
                                          
                                          ∥
                                          
                                             
                                                r
                                             
                                             
                                                ′
                                             
                                          
                                          ,
                                          
                                             
                                                
                                                   
                                                      ν
                                                   
                                                   
                                                      f
                                                   
                                                
                                             
                                             
                                                ′
                                             
                                          
                                          )
                                          
                                             →
                                             τ
                                          
                                          Π
                                          (
                                          
                                             
                                                t
                                             
                                             
                                                ″
                                             
                                          
                                          ∥
                                          
                                             
                                                r
                                             
                                             
                                                ″
                                             
                                          
                                          ,
                                          
                                             
                                                
                                                   
                                                      ν
                                                   
                                                   
                                                      f
                                                   
                                                
                                             
                                             
                                                ′
                                             
                                          
                                          )
                                       . Due to the Definition of 
                                          
                                             
                                                R
                                             
                                             
                                                ′
                                             
                                          
                                       , we have that 
                                          Π
                                          (
                                          
                                             
                                                s
                                             
                                             
                                                ″
                                             
                                          
                                          ,
                                          
                                             
                                                ν
                                             
                                             
                                                f
                                             
                                          
                                          )
                                          
                                          R
                                          
                                          Π
                                          (
                                          
                                             
                                                t
                                             
                                             
                                                ″
                                             
                                          
                                          ,
                                          
                                             
                                                ν
                                             
                                             
                                                f
                                             
                                          
                                          )
                                        and hence, 
                                          Π
                                          (
                                          
                                             
                                                s
                                             
                                             
                                                ″
                                             
                                          
                                          ∥
                                          
                                             
                                                r
                                             
                                             
                                                ″
                                             
                                          
                                          ,
                                          
                                             
                                                
                                                   
                                                      ν
                                                   
                                                   
                                                      f
                                                   
                                                
                                             
                                             
                                                ′
                                             
                                          
                                          )
                                          
                                          
                                             
                                                R
                                             
                                             
                                                ′
                                             
                                          
                                          
                                          Π
                                          (
                                          
                                             
                                                t
                                             
                                             
                                                ″
                                             
                                          
                                          ∥
                                          
                                             
                                                r
                                             
                                             
                                                ″
                                             
                                          
                                          ,
                                          
                                             
                                                
                                                   
                                                      ν
                                                   
                                                   
                                                      f
                                                   
                                                
                                             
                                             
                                                ′
                                             
                                          
                                          )
                                       .

In this section, we first prove Theorem 12 and then we provide a proof for Theorem 19. To this aim, we prove that each PL-CCS term can be rewritten by axioms 
                        
                           
                              A
                           
                           
                              4
                              −
                              6
                           
                        
                     , 
                        
                           
                              D
                           
                           
                              1
                              ,
                              2
                           
                        
                     , 
                        
                           
                              P
                           
                           
                              4
                              ,
                              5
                           
                        
                     , 
                        
                           
                              S
                           
                           
                              1
                              ,
                              3
                           
                        
                     , 
                        
                           
                              R
                           
                           
                              3
                           
                        
                     , 
                        
                           
                              E
                           
                           
                              5
                           
                        
                     , Dri, and 
                        
                           
                              N
                           
                           
                              1
                              −
                              5
                           
                        
                      into a form where no binary variant occurs in the scope of a CCS-operator.

We prove this by structural induction on the syntax of term t. The base case of the induction, where 
                        t
                        ≡
                        0
                     , holds trivially. We distinguish the following cases based on the structure of t:
                        
                           •
                           if 
                                 t
                                 ≡
                                 a
                                 .
                                 
                                    
                                       t
                                    
                                    
                                       ′
                                    
                                 
                              , then t can be rewritten into the required form by applying the induction hypothesis on 
                                 
                                    
                                       t
                                    
                                    
                                       ′
                                    
                                 
                              , and subsequently applying axiom 
                                 
                                    
                                       A
                                    
                                    
                                       4
                                    
                                 
                              .

if 
                                 t
                                 ≡
                                 
                                    
                                       t
                                    
                                    
                                       1
                                    
                                    
                                       ′
                                    
                                 
                                 +
                                 
                                    
                                       t
                                    
                                    
                                       2
                                    
                                    
                                       ′
                                    
                                 
                              , then t can be rewritten into the required format by applying the induction hypothesis on 
                                 
                                    
                                       t
                                    
                                    
                                       1
                                    
                                    
                                       ′
                                    
                                 
                               and 
                                 
                                    
                                       t
                                    
                                    
                                       2
                                    
                                    
                                       ′
                                    
                                 
                              , and then applying axioms 
                                 
                                    
                                       A
                                    
                                    
                                       5
                                       ,
                                       6
                                    
                                 
                              . Assume that 
                                 ⊢
                                 
                                    
                                       t
                                    
                                    
                                       1
                                    
                                    
                                       ′
                                    
                                 
                                 =
                                 
                                    
                                       p
                                    
                                    
                                       1
                                    
                                 
                                 
                                    
                                       ⊕
                                    
                                    
                                       i
                                    
                                 
                                 
                                    
                                       p
                                    
                                    
                                       2
                                    
                                 
                               and 
                                 ⊢
                                 
                                    
                                       t
                                    
                                    
                                       2
                                    
                                    
                                       ′
                                    
                                 
                                 =
                                 
                                    
                                       q
                                    
                                    
                                       1
                                    
                                 
                                 
                                    
                                       ⊕
                                    
                                    
                                       j
                                    
                                 
                                 
                                    
                                       q
                                    
                                    
                                       2
                                    
                                 
                              . By axioms 
                                 
                                    
                                       A
                                    
                                    
                                       5
                                       ,
                                       6
                                    
                                 
                                 ⊢
                                 t
                                 =
                                 (
                                 (
                                 
                                    
                                       p
                                    
                                    
                                       1
                                    
                                 
                                 +
                                 
                                    
                                       q
                                    
                                    
                                       1
                                    
                                 
                                 )
                                 
                                    
                                       ⊕
                                    
                                    
                                       j
                                    
                                 
                                 (
                                 
                                    
                                       p
                                    
                                    
                                       1
                                    
                                 
                                 +
                                 
                                    
                                       q
                                    
                                    
                                       2
                                    
                                 
                                 )
                                 )
                                 
                                    
                                       ⊕
                                    
                                    
                                       i
                                    
                                 
                                 (
                                 (
                                 
                                    
                                       p
                                    
                                    
                                       2
                                    
                                 
                                 +
                                 
                                    
                                       q
                                    
                                    
                                       1
                                    
                                 
                                 )
                                 
                                    
                                       ⊕
                                    
                                    
                                       j
                                    
                                 
                                 (
                                 
                                    
                                       p
                                    
                                    
                                       2
                                    
                                 
                                 +
                                 
                                    
                                       q
                                    
                                    
                                       2
                                    
                                 
                                 )
                                 )
                              . These two axioms are applied to each 
                                 
                                    
                                       p
                                    
                                    
                                       i
                                    
                                 
                                 +
                                 
                                    
                                       q
                                    
                                    
                                       j
                                    
                                 
                              , where 
                                 i
                                 ,
                                 j
                                 ∈
                                 {
                                 1
                                 ,
                                 2
                                 }
                               repeatedly until the operands of + become CCS terms.

if 
                                 t
                                 ≡
                                 
                                    
                                       t
                                    
                                    
                                       1
                                    
                                    
                                       ′
                                    
                                 
                                 ⊕
                                 
                                    
                                       t
                                    
                                    
                                       2
                                    
                                    
                                       ′
                                    
                                 
                              , t can be rewritten into the required format by applying the induction hypothesis on 
                                 
                                    
                                       t
                                    
                                    
                                       1
                                    
                                    
                                       ′
                                    
                                 
                               and 
                                 
                                    
                                       t
                                    
                                    
                                       2
                                    
                                    
                                       ′
                                    
                                 
                              .

if 
                                 t
                                 ≡
                                 
                                    
                                       t
                                    
                                    
                                       1
                                    
                                    
                                       ′
                                    
                                 
                                 ∥
                                 
                                    
                                       t
                                    
                                    
                                       2
                                    
                                    
                                       ′
                                    
                                 
                              , then t can be rewritten into the required format by applying the induction hypothesis on 
                                 
                                    
                                       t
                                    
                                    
                                       1
                                    
                                    
                                       ′
                                    
                                 
                               and 
                                 
                                    
                                       t
                                    
                                    
                                       2
                                    
                                    
                                       ′
                                    
                                 
                              , and then applying axioms 
                                 
                                    
                                       D
                                    
                                    
                                       1
                                       ,
                                       2
                                    
                                 
                              . Assume 
                                 ⊢
                                 
                                    
                                       t
                                    
                                    
                                       1
                                    
                                    
                                       ′
                                    
                                 
                                 =
                                 
                                    
                                       p
                                    
                                    
                                       1
                                    
                                 
                                 
                                    
                                       ⊕
                                    
                                    
                                       i
                                    
                                 
                                 
                                    
                                       p
                                    
                                    
                                       2
                                    
                                 
                               and 
                                 ⊢
                                 
                                    
                                       t
                                    
                                    
                                       2
                                    
                                    
                                       ′
                                    
                                 
                                 =
                                 
                                    
                                       q
                                    
                                    
                                       1
                                    
                                 
                                 
                                    
                                       ⊕
                                    
                                    
                                       j
                                    
                                 
                                 
                                    
                                       q
                                    
                                    
                                       2
                                    
                                 
                              . By axioms 
                                 
                                    
                                       D
                                    
                                    
                                       1
                                       ,
                                       2
                                    
                                 
                                 ⊢
                                 t
                                 =
                                 (
                                 (
                                 
                                    
                                       p
                                    
                                    
                                       1
                                    
                                 
                                 ∥
                                 
                                    
                                       q
                                    
                                    
                                       1
                                    
                                 
                                 )
                                 
                                    
                                       ⊕
                                    
                                    
                                       j
                                    
                                 
                                 (
                                 
                                    
                                       p
                                    
                                    
                                       1
                                    
                                 
                                 ∥
                                 
                                    
                                       q
                                    
                                    
                                       2
                                    
                                 
                                 )
                                 )
                                 
                                    
                                       ⊕
                                    
                                    
                                       i
                                    
                                 
                                 (
                                 (
                                 
                                    
                                       p
                                    
                                    
                                       2
                                    
                                 
                                 ∥
                                 
                                    
                                       q
                                    
                                    
                                       1
                                    
                                 
                                 )
                                 
                                    
                                       ⊕
                                    
                                    
                                       j
                                    
                                 
                                 (
                                 
                                    
                                       p
                                    
                                    
                                       2
                                    
                                 
                                 ∥
                                 
                                    
                                       q
                                    
                                    
                                       2
                                    
                                 
                                 )
                                 )
                              . These two axioms are applied to each 
                                 
                                    
                                       p
                                    
                                    
                                       i
                                    
                                 
                                 ∥
                                 
                                    
                                       q
                                    
                                    
                                       j
                                    
                                 
                              , where 
                                 i
                                 ,
                                 j
                                 ∈
                                 {
                                 1
                                 ,
                                 2
                                 }
                               repeatedly until the operands of ∥ become CCS terms.

if 
                                 t
                                 ≡
                                 
                                    
                                       t
                                    
                                    
                                       1
                                    
                                    
                                       ′
                                    
                                 
                                 
                                    
                                       
                                    
                                 
                                 
                                    
                                       t
                                    
                                    
                                       2
                                    
                                    
                                       ′
                                    
                                 
                              , then t can be rewritten into the required format by applying the induction hypothesis on 
                                 
                                    
                                       t
                                    
                                    
                                       1
                                    
                                    
                                       ′
                                    
                                 
                               and 
                                 
                                    
                                       t
                                    
                                    
                                       2
                                    
                                    
                                       ′
                                    
                                 
                              , and then applying axioms 
                                 
                                    
                                       P
                                    
                                    
                                       4
                                       ,
                                       5
                                    
                                 
                              . Assume 
                                 ⊢
                                 
                                    
                                       t
                                    
                                    
                                       1
                                    
                                    
                                       ′
                                    
                                 
                                 =
                                 
                                    
                                       p
                                    
                                    
                                       1
                                    
                                 
                                 
                                    
                                       ⊕
                                    
                                    
                                       i
                                    
                                 
                                 
                                    
                                       p
                                    
                                    
                                       2
                                    
                                 
                               and 
                                 ⊢
                                 
                                    
                                       t
                                    
                                    
                                       2
                                    
                                    
                                       ′
                                    
                                 
                                 =
                                 
                                    
                                       q
                                    
                                    
                                       1
                                    
                                 
                                 
                                    
                                       ⊕
                                    
                                    
                                       j
                                    
                                 
                                 
                                    
                                       q
                                    
                                    
                                       2
                                    
                                 
                              . By axioms 
                                 
                                    
                                       P
                                    
                                    
                                       4
                                       ,
                                       5
                                    
                                 
                                 ⊢
                                 t
                                 =
                                 (
                                 (
                                 
                                    
                                       p
                                    
                                    
                                       1
                                    
                                 
                                 
                                    
                                       
                                    
                                 
                                 
                                    
                                       q
                                    
                                    
                                       1
                                    
                                 
                                 )
                                 
                                    
                                       ⊕
                                    
                                    
                                       j
                                    
                                 
                                 (
                                 
                                    
                                       p
                                    
                                    
                                       1
                                    
                                 
                                 
                                    
                                       
                                    
                                 
                                 
                                    
                                       q
                                    
                                    
                                       2
                                    
                                 
                                 )
                                 )
                                 
                                    
                                       ⊕
                                    
                                    
                                       i
                                    
                                 
                                 (
                                 (
                                 
                                    
                                       p
                                    
                                    
                                       2
                                    
                                 
                                 
                                    
                                       
                                    
                                 
                                 
                                    
                                       q
                                    
                                    
                                       1
                                    
                                 
                                 )
                                 
                                    
                                       ⊕
                                    
                                    
                                       j
                                    
                                 
                                 (
                                 
                                    
                                       p
                                    
                                    
                                       2
                                    
                                 
                                 
                                    
                                       
                                    
                                 
                                 
                                    
                                       q
                                    
                                    
                                       2
                                    
                                 
                                 )
                                 )
                              . These two axioms are applied to each 
                                 
                                    
                                       p
                                    
                                    
                                       i
                                    
                                 
                                 
                                    
                                       
                                    
                                 
                                 
                                    
                                       q
                                    
                                    
                                       j
                                    
                                 
                              , where 
                                 i
                                 ,
                                 j
                                 ∈
                                 {
                                 1
                                 ,
                                 2
                                 }
                               repeatedly until the operands of 
                                 
                               become CCS terms.

if 
                                 t
                                 ≡
                                 
                                    
                                       t
                                    
                                    
                                       1
                                    
                                    
                                       ′
                                    
                                 
                                 |
                                 
                                    
                                       t
                                    
                                    
                                       2
                                    
                                    
                                       ′
                                    
                                 
                              , then t can be rewritten into the required format by applying the induction hypothesis on 
                                 
                                    
                                       t
                                    
                                    
                                       1
                                    
                                    
                                       ′
                                    
                                 
                               and 
                                 
                                    
                                       t
                                    
                                    
                                       2
                                    
                                    
                                       ′
                                    
                                 
                              , and then applying axioms 
                                 
                                    
                                       S
                                    
                                    
                                       1
                                       ,
                                       3
                                    
                                 
                              . Assume 
                                 ⊢
                                 
                                    
                                       t
                                    
                                    
                                       1
                                    
                                    
                                       ′
                                    
                                 
                                 =
                                 
                                    
                                       p
                                    
                                    
                                       1
                                    
                                 
                                 
                                    
                                       ⊕
                                    
                                    
                                       i
                                    
                                 
                                 
                                    
                                       p
                                    
                                    
                                       2
                                    
                                 
                               and 
                                 ⊢
                                 
                                    
                                       t
                                    
                                    
                                       2
                                    
                                    
                                       ′
                                    
                                 
                                 =
                                 
                                    
                                       q
                                    
                                    
                                       1
                                    
                                 
                                 
                                    
                                       ⊕
                                    
                                    
                                       j
                                    
                                 
                                 
                                    
                                       q
                                    
                                    
                                       2
                                    
                                 
                              . By axioms 
                                 
                                    
                                       S
                                    
                                    
                                       1
                                       ,
                                       3
                                    
                                 
                                 ⊢
                                 t
                                 =
                                 (
                                 (
                                 
                                    
                                       p
                                    
                                    
                                       1
                                    
                                 
                                 |
                                 
                                    
                                       q
                                    
                                    
                                       1
                                    
                                 
                                 )
                                 
                                    
                                       ⊕
                                    
                                    
                                       j
                                    
                                 
                                 (
                                 
                                    
                                       p
                                    
                                    
                                       1
                                    
                                 
                                 |
                                 
                                    
                                       q
                                    
                                    
                                       2
                                    
                                 
                                 )
                                 )
                                 
                                    
                                       ⊕
                                    
                                    
                                       i
                                    
                                 
                                 (
                                 (
                                 
                                    
                                       p
                                    
                                    
                                       2
                                    
                                 
                                 |
                                 
                                    
                                       q
                                    
                                    
                                       1
                                    
                                 
                                 )
                                 
                                    
                                       ⊕
                                    
                                    
                                       j
                                    
                                 
                                 (
                                 
                                    
                                       p
                                    
                                    
                                       2
                                    
                                 
                                 |
                                 
                                    
                                       q
                                    
                                    
                                       2
                                    
                                 
                                 )
                                 )
                              . These two axioms are applied to each 
                                 
                                    
                                       p
                                    
                                    
                                       i
                                    
                                 
                                 |
                                 
                                    
                                       q
                                    
                                    
                                       j
                                    
                                 
                              , where 
                                 i
                                 ,
                                 j
                                 ∈
                                 {
                                 1
                                 ,
                                 2
                                 }
                               repeatedly until the operands of | become CCS terms.

if 
                                 t
                                 ≡
                                 〈
                                 A
                                 |
                                 {
                                 A
                                 
                                    =
                                    
                                       def
                                    
                                 
                                 
                                    
                                       t
                                    
                                    
                                       ′
                                    
                                 
                                 }
                                 〉
                              , then by applying the induction hypothesis, we obtain 
                                 ⊢
                                 
                                    
                                       t
                                    
                                    
                                       ′
                                    
                                 
                                 =
                                 
                                    
                                       p
                                    
                                    
                                       1
                                    
                                 
                                 
                                    
                                       ⊕
                                    
                                    
                                       i
                                    
                                 
                                 
                                    
                                       p
                                    
                                    
                                       2
                                    
                                 
                              . By axiom 
                                 
                                    Dri
                                 
                                 ⊢
                                 t
                                 =
                                 〈
                                 A
                                 |
                                 {
                                 A
                                 
                                    =
                                    
                                       def
                                    
                                 
                                 
                                    
                                       p
                                    
                                    
                                       1
                                    
                                 
                                 }
                                 〉
                                 
                                    
                                       ⊕
                                    
                                    
                                       i
                                    
                                 
                                 〈
                                 A
                                 |
                                 {
                                 A
                                 
                                    =
                                    
                                       def
                                    
                                 
                                 
                                    
                                       p
                                    
                                    
                                       2
                                    
                                 
                                 }
                                 〉
                              . We apply this axiom repeatedly to 
                                 
                                    
                                       p
                                    
                                    
                                       1
                                    
                                 
                               and 
                                 
                                    
                                       p
                                    
                                    
                                       2
                                    
                                 
                              , until no binary variant operator occurs in the equations defining A.

For all 
                        j
                        ∈
                        
                           bi
                        
                        (
                        
                           
                              p
                           
                           
                              1
                           
                           
                              ′
                           
                        
                        )
                        ∩
                        
                           bi
                        
                        (
                        
                           
                              p
                           
                           
                              2
                           
                           
                              ′
                           
                        
                        )
                     , apply 
                        
                           
                              N
                           
                           
                              6
                           
                        
                      to 
                        
                           
                              p
                           
                           
                              2
                           
                           
                              ′
                           
                        
                     , and replace all occurrences of j by a fresh index 
                        k
                        ∉
                        
                           bi
                        
                        (
                        
                           
                              p
                           
                           
                              1
                           
                           
                              ′
                           
                        
                        )
                        ∪
                        
                           bi
                        
                        (
                        
                           
                              p
                           
                           
                              2
                           
                           
                              ′
                           
                        
                        )
                      to derive 
                        
                           
                              t
                           
                           
                              ‴
                           
                        
                     . Hence, all indices are unique, and the term is fully expanded. Theorem 19 is proved by applying axioms 
                        
                           
                              A
                           
                           
                              1
                              ,
                              2
                           
                        
                      to 
                        
                           
                              t
                           
                           
                              ‴
                           
                        
                     .

To prove the soundness of axioms, we show that all axioms except 
                        
                           
                              A
                           
                           
                              1
                              ,
                              2
                           
                        
                      and 
                        
                           
                              N
                           
                           
                              6
                           
                        
                      are sound with respect to strict strong bisimilarity, while 
                        
                           
                              A
                           
                           
                              1
                              ,
                              2
                           
                        
                      and 
                        
                           
                              N
                           
                           
                              6
                           
                        
                      are sound with respect to product line bisimilarity.

To show the soundness of 
                        
                           
                              A
                           
                           
                              1
                           
                        
                     , for any 
                        
                           
                              ν
                           
                           
                              1
                           
                           
                              f
                           
                        
                        ∈
                        
                           VFConfig
                        
                        (
                        p
                        
                           
                              ⊕
                           
                           
                              i
                           
                        
                        q
                        )
                     , we define 
                        
                           
                              ν
                           
                           
                              2
                           
                           
                              f
                           
                        
                        ∈
                        
                           VFConfig
                        
                        (
                        q
                        
                           
                              ⊕
                           
                           
                              i
                           
                        
                        p
                        )
                      such that 
                        |
                        
                           
                              ν
                           
                           
                              1
                           
                           
                              f
                           
                        
                        |
                        =
                        |
                        
                           
                              ν
                           
                           
                              2
                           
                           
                              f
                           
                        
                        |
                      and 
                        
                           
                              ∀
                           
                           
                              j
                              ≠
                              i
                           
                        
                        
                           
                              (
                              
                                 
                                    ν
                                 
                                 
                                    1
                                 
                                 
                                    f
                                 
                              
                              |
                           
                           
                              j
                           
                        
                        =
                        
                           
                              ν
                           
                           
                              2
                           
                           
                              f
                           
                        
                        
                           
                              |
                           
                           
                              j
                           
                        
                        )
                     , 
                        
                           
                              (
                              
                                 
                                    ν
                                 
                                 
                                    1
                                 
                                 
                                    f
                                 
                              
                              |
                           
                           
                              i
                           
                        
                        =
                        R
                        ⇒
                        
                           
                              ν
                           
                           
                              2
                           
                           
                              f
                           
                        
                        
                           
                              |
                           
                           
                              i
                           
                        
                        =
                        L
                        )
                     , and 
                        
                           
                              (
                              
                                 
                                    ν
                                 
                                 
                                    1
                                 
                                 
                                    f
                                 
                              
                              |
                           
                           
                              i
                           
                        
                        =
                        L
                        ⇒
                        
                           
                              ν
                           
                           
                              1
                           
                           
                              f
                           
                        
                        
                           
                              |
                           
                           
                              i
                           
                        
                        =
                        R
                        )
                     . We show that 
                        Π
                        (
                        p
                        
                           
                              ⊕
                           
                           
                              i
                           
                        
                        q
                        ,
                        
                           
                              ν
                           
                           
                              1
                           
                           
                              f
                           
                        
                        )
                        ∼
                        Π
                        (
                        q
                        
                           
                              ⊕
                           
                           
                              i
                           
                        
                        p
                        ,
                        
                           
                              ν
                           
                           
                              2
                           
                           
                              f
                           
                        
                        )
                     . To this aim, we show that 
                        R
                        =
                        {
                        (
                        Π
                        (
                        p
                        
                           
                              ⊕
                           
                           
                              i
                           
                        
                        q
                        ,
                        
                           
                              ν
                           
                           
                              1
                           
                           
                              f
                           
                        
                        )
                        ,
                        Π
                        (
                        q
                        
                           
                              ⊕
                           
                           
                              i
                           
                        
                        p
                        ,
                        
                           
                              ν
                           
                           
                              2
                           
                           
                              f
                           
                        
                        )
                        )
                        }
                        ∪
                        {
                        (
                        Π
                        (
                        t
                        ,
                        
                           
                              ν
                           
                           
                              1
                           
                           
                              f
                           
                        
                        )
                        ,
                        Π
                        (
                        t
                        ,
                        
                           
                              ν
                           
                           
                              2
                           
                           
                              f
                           
                        
                        )
                        )
                        }
                      is a strong bisimulation. Regarding 
                        
                           
                              ν
                           
                           
                              1
                           
                           
                              f
                           
                        
                        
                           
                              |
                           
                           
                              i
                           
                        
                     , two cases can be distinguished. We only discuss the case where 
                        
                           
                              ν
                           
                           
                              1
                           
                           
                              f
                           
                        
                        
                           
                              |
                           
                           
                              i
                           
                        
                        =
                        L
                     , as the other can be dealt with in the same fashion.

We show that the transfer conditions hold for the pair 
                        (
                        Π
                        (
                        p
                        
                           
                              ⊕
                           
                           
                              i
                           
                        
                        q
                        ,
                        
                           
                              ν
                           
                           
                              1
                           
                           
                              f
                           
                        
                        )
                        ,
                        Π
                        (
                        q
                        
                           
                              ⊕
                           
                           
                              i
                           
                        
                        p
                        ,
                        
                           
                              ν
                           
                           
                              2
                           
                           
                              f
                           
                        
                        )
                        )
                        ∈
                        R
                     , as for others, the proof is straightforward. Suppose 
                        Π
                        (
                        p
                        
                           
                              ⊕
                           
                           
                              i
                           
                        
                        q
                        ,
                        
                           
                              ν
                           
                           
                              1
                           
                           
                              f
                           
                        
                        )
                        
                           →
                           a
                        
                        Π
                        (
                        
                           
                              p
                           
                           
                              ′
                           
                        
                        ,
                        
                           
                              ν
                           
                           
                              1
                           
                           
                              f
                           
                        
                        )
                     , since 
                        p
                        
                           →
                           
                              a
                              ,
                              
                                 
                                    ν
                                 
                                 
                                    1
                                 
                              
                           
                        
                        
                           
                              p
                           
                           
                              ′
                           
                        
                     , where 
                        
                           
                              ν
                           
                           
                              1
                           
                        
                        ⊑
                        
                           
                              ν
                           
                           
                              1
                           
                           
                              f
                           
                        
                      and 
                        
                           
                              ν
                           
                           
                              1
                           
                        
                        
                           
                              |
                           
                           
                              i
                           
                        
                        =
                        ?
                     . Therefore, 
                        
                           
                              ν
                           
                           
                              1
                           
                        
                        ⊑
                        
                           
                              ν
                           
                           
                              2
                           
                           
                              f
                           
                        
                     . By SOS rule Select, 
                        q
                        
                           
                              ⊕
                           
                           
                              i
                           
                        
                        p
                        
                           →
                           
                              a
                              ,
                              
                                 
                                    ν
                                 
                                 
                                    2
                                 
                              
                           
                        
                        
                           
                              p
                           
                           
                              ′
                           
                        
                     , where 
                        
                           
                              ν
                           
                           
                              2
                           
                        
                        =
                        
                           
                              ν
                           
                           
                              1
                           
                        
                        
                           
                              |
                           
                           
                              i
                              /
                              R
                           
                        
                     , 
                        
                           
                              ν
                           
                           
                              2
                           
                        
                        ⊑
                        
                           
                              ν
                           
                           
                              2
                           
                           
                              f
                           
                        
                     , and 
                        Π
                        (
                        
                           
                              p
                           
                           
                              ′
                           
                        
                        ,
                        
                           
                              ν
                           
                           
                              1
                           
                           
                              f
                           
                        
                        )
                        
                        R
                        
                        Π
                        (
                        
                           
                              p
                           
                           
                              ′
                           
                        
                        ,
                        
                           
                              ν
                           
                           
                              2
                           
                           
                              f
                           
                        
                        )
                     . The same discussion holds when 
                        Π
                        (
                        q
                        
                           
                              ⊕
                           
                           
                              i
                           
                        
                        p
                        ,
                        
                           
                              ν
                           
                           
                              2
                           
                           
                              f
                           
                        
                        )
                        
                           →
                           a
                        
                        Π
                        (
                        
                           
                              p
                           
                           
                              ′
                           
                        
                        ,
                        
                           
                              ν
                           
                           
                              2
                           
                           
                              f
                           
                        
                        )
                     . Similarly, for any 
                        
                           
                              ν
                           
                           
                              2
                           
                           
                              f
                           
                        
                        ∈
                        
                           VFConfig
                        
                        (
                        q
                        
                           
                              ⊕
                           
                           
                              i
                           
                        
                        p
                        )
                     , we define 
                        
                           
                              ν
                           
                           
                              1
                           
                           
                              f
                           
                        
                        ∈
                        
                           VFConfig
                        
                        (
                        q
                        
                           
                              ⊕
                           
                           
                              i
                           
                        
                        p
                        )
                      as discussed in above. Concluding that 
                        p
                        
                           
                              ⊕
                           
                           
                              i
                           
                        
                        q
                        
                           
                              ≃
                           
                           
                              PL
                           
                        
                        q
                        
                           
                              ⊕
                           
                           
                              i
                           
                        
                        p
                     . Axiom 
                        
                           
                              A
                           
                           
                              2
                           
                        
                      is proved similar to 
                        
                           
                              A
                           
                           
                              1
                           
                        
                     : for any 
                        
                           
                              ν
                           
                           
                              1
                           
                           
                              f
                           
                        
                        ∈
                        
                           VFConfig
                        
                        (
                        (
                        p
                        
                           
                              ⊕
                           
                           
                              i
                           
                        
                        q
                        )
                        
                           
                              ⊕
                           
                           
                              j
                           
                        
                        r
                        )
                     , we define 
                        
                           
                              ν
                           
                           
                              2
                           
                           
                              f
                           
                        
                        ∈
                        
                           VFConfig
                        
                        (
                        p
                        
                           
                              ⊕
                           
                           
                              i
                           
                        
                        (
                        q
                        
                           
                              ⊕
                           
                           
                              j
                           
                        
                        r
                        )
                        )
                      such that 
                        |
                        
                           
                              ν
                           
                           
                              1
                           
                           
                              f
                           
                        
                        |
                        =
                        |
                        
                           
                              ν
                           
                           
                              2
                           
                           
                              f
                           
                        
                        |
                      and 
                        
                           
                              ∀
                           
                           
                              k
                              ≠
                              i
                              ,
                              k
                              ≠
                              j
                           
                        
                        
                           
                              (
                              
                                 
                                    ν
                                 
                                 
                                    1
                                 
                                 
                                    f
                                 
                              
                              |
                           
                           
                              k
                           
                        
                        =
                        
                           
                              ν
                           
                           
                              2
                           
                           
                              f
                           
                        
                        
                           
                              |
                           
                           
                              k
                           
                        
                        )
                     , 
                        
                           
                              (
                              
                                 
                                    ν
                                 
                                 
                                    1
                                 
                                 
                                    f
                                 
                              
                              |
                           
                           
                              i
                           
                        
                        =
                        R
                        ∧
                        
                           
                              ν
                           
                           
                              1
                           
                           
                              f
                           
                        
                        
                           
                              |
                           
                           
                              j
                           
                        
                        =
                        R
                        )
                        ⇒
                        
                           
                              (
                              
                                 
                                    ν
                                 
                                 
                                    2
                                 
                                 
                                    f
                                 
                              
                              |
                           
                           
                              i
                           
                        
                        =
                        R
                        ∧
                        
                           
                              ν
                           
                           
                              2
                           
                           
                              f
                           
                        
                        
                           
                              |
                           
                           
                              j
                           
                        
                        =
                        R
                        )
                     , 
                        
                           
                              (
                              
                                 
                                    ν
                                 
                                 
                                    1
                                 
                                 
                                    f
                                 
                              
                              |
                           
                           
                              i
                           
                        
                        =
                        L
                        ∧
                        
                           
                              ν
                           
                           
                              1
                           
                           
                              f
                           
                        
                        
                           
                              |
                           
                           
                              j
                           
                        
                        =
                        R
                        )
                        ⇒
                        
                           
                              (
                              
                                 
                                    ν
                                 
                                 
                                    2
                                 
                                 
                                    f
                                 
                              
                              |
                           
                           
                              i
                           
                        
                        =
                        R
                        ∧
                        
                           
                              ν
                           
                           
                              2
                           
                           
                              f
                           
                        
                        
                           
                              |
                           
                           
                              j
                           
                        
                        =
                        R
                        )
                     , 
                        
                           
                              (
                              
                                 
                                    ν
                                 
                                 
                                    1
                                 
                                 
                                    f
                                 
                              
                              |
                           
                           
                              i
                           
                        
                        =
                        R
                        ∧
                        
                           
                              ν
                           
                           
                              1
                           
                           
                              f
                           
                        
                        
                           
                              |
                           
                           
                              j
                           
                        
                        =
                        L
                        )
                        ⇒
                        
                           
                              (
                              
                                 
                                    ν
                                 
                                 
                                    2
                                 
                                 
                                    f
                                 
                              
                              |
                           
                           
                              i
                           
                        
                        =
                        R
                        ∧
                        
                           
                              ν
                           
                           
                              2
                           
                           
                              f
                           
                        
                        
                           
                              |
                           
                           
                              j
                           
                        
                        =
                        L
                        )
                     , and 
                        
                           
                              (
                              
                                 
                                    ν
                                 
                                 
                                    1
                                 
                                 
                                    f
                                 
                              
                              |
                           
                           
                              i
                           
                        
                        =
                        L
                        ∧
                        
                           
                              ν
                           
                           
                              1
                           
                           
                              f
                           
                        
                        
                           
                              |
                           
                           
                              j
                           
                        
                        =
                        L
                        )
                        ⇒
                        
                           
                              (
                              
                                 
                                    ν
                                 
                                 
                                    2
                                 
                                 
                                    f
                                 
                              
                              |
                           
                           
                              i
                           
                        
                        =
                        L
                        ∧
                        
                           
                              ν
                           
                           
                              2
                           
                           
                              f
                           
                        
                        
                           
                              |
                           
                           
                              j
                           
                        
                        =
                        L
                        )
                     . It can be easily shown that 
                        Π
                        (
                        (
                        p
                        
                           
                              ⊕
                           
                           
                              i
                           
                        
                        q
                        )
                        
                           
                              ⊕
                           
                           
                              j
                           
                        
                        r
                        ,
                        
                           
                              ν
                           
                           
                              1
                           
                           
                              f
                           
                        
                        )
                        ∼
                        Π
                        (
                        p
                        
                           
                              ⊕
                           
                           
                              i
                           
                        
                        (
                        q
                        
                           
                              ⊕
                           
                           
                              j
                           
                        
                        r
                        )
                        ,
                        
                           
                              ν
                           
                           
                              2
                           
                           
                              f
                           
                        
                        )
                     . Axiom 
                        
                           
                              N
                           
                           
                              6
                           
                        
                      is proved similar to 
                        
                           
                              A
                           
                           
                              1
                              ,
                              2
                           
                        
                     : for any 
                        
                           
                              ν
                           
                           
                              1
                           
                           
                              f
                           
                        
                        ∈
                        
                           VFConfig
                        
                        (
                        p
                        )
                     , we define 
                        
                           
                              ν
                           
                           
                              2
                           
                           
                              f
                           
                        
                        ∈
                        
                           VFConfig
                        
                        (
                        p
                        [
                        k
                        /
                        i
                        ]
                        )
                      such that 
                        
                           
                              ν
                           
                           
                              2
                           
                           
                              f
                           
                        
                        =
                        
                           
                              ν
                           
                           
                              1
                           
                           
                              f
                           
                        
                        ⋅
                        λ
                      and 
                        
                           
                              ν
                           
                           
                              1
                           
                           
                              f
                           
                        
                        
                           
                              |
                           
                           
                              i
                           
                        
                        =
                        
                           
                              ν
                           
                           
                              2
                           
                           
                              f
                           
                        
                        
                           
                              |
                           
                           
                              k
                           
                        
                     .

For axiom 
                        
                           
                              A
                           
                           
                              3
                           
                        
                     , we show that for any 
                        
                           
                              ν
                           
                           
                              f
                           
                        
                        ∈
                        
                           VFConfig
                        
                        (
                        p
                        
                           
                              ⊕
                           
                           
                              i
                           
                        
                        p
                        )
                      (which implicitly implies 
                        
                           
                              ν
                           
                           
                              f
                           
                        
                        ∈
                        
                           VFConfig
                        
                        (
                        p
                        )
                     ), 
                        Π
                        (
                        (
                        p
                        
                           
                              ⊕
                           
                           
                              i
                           
                        
                        p
                        )
                        ,
                        
                           
                              ν
                           
                           
                              f
                           
                        
                        )
                        ∼
                        Π
                        (
                        p
                        ,
                        
                           
                              ν
                           
                           
                              f
                           
                        
                        )
                     . It is trivial that 
                        R
                        =
                        {
                        (
                        Π
                        (
                        (
                        p
                        
                           
                              ⊕
                           
                           
                              i
                           
                        
                        p
                        )
                        ,
                        
                           
                              ν
                           
                           
                              f
                           
                        
                        )
                        }
                        ∪
                        {
                        (
                        Π
                        (
                        t
                        ,
                        
                           
                              ν
                           
                           
                              f
                           
                        
                        )
                        ,
                        Π
                        (
                        t
                        ,
                        
                           
                              ν
                           
                           
                              f
                           
                        
                        )
                        )
                        }
                      is a strong bisimulation. Axioms 
                        
                           
                              N
                           
                           
                              1
                              ,
                              3
                           
                        
                      are proved similarly.

For axiom 
                        
                           
                              A
                           
                           
                              4
                           
                        
                     , for any 
                        
                           
                              ν
                           
                           
                              f
                           
                        
                        ∈
                        
                           VFConfig
                        
                        (
                        a
                        .
                        (
                        p
                        
                           
                              ⊕
                           
                           
                              i
                           
                        
                        q
                        )
                        )
                      (which implicitly implies 
                        
                           
                              ν
                           
                           
                              f
                           
                        
                        ∈
                        
                           VFConfig
                        
                        (
                        a
                        .
                        p
                        
                           
                              ⊕
                           
                           
                              i
                           
                        
                        a
                        .
                        q
                        )
                     ), 
                        Π
                        (
                        a
                        .
                        (
                        p
                        
                           
                              ⊕
                           
                           
                              i
                           
                        
                        q
                        )
                        ,
                        
                           
                              ν
                           
                           
                              f
                           
                        
                        )
                        ∼
                        Π
                        (
                        a
                        .
                        p
                        
                           
                              ⊕
                           
                           
                              i
                           
                        
                        a
                        .
                        q
                        ,
                        
                           
                              ν
                           
                           
                              f
                           
                        
                        )
                     . Regarding the value of 
                        
                           
                              ν
                           
                           
                              f
                           
                        
                        
                           
                              |
                           
                           
                              i
                           
                        
                     , two cases can be distinguished. We only discuss the case that 
                        
                           
                              ν
                           
                           
                              f
                           
                        
                        
                           
                              |
                           
                           
                              i
                           
                        
                        =
                        L
                     , as the other cases can be proven identically. Therefore, we show that
                        
                           
                              
                                 
                                    
                                       
                                          R
                                          =
                                          {
                                          (
                                          Π
                                          (
                                          a
                                          .
                                          (
                                          p
                                          
                                             
                                                ⊕
                                             
                                             
                                                i
                                             
                                          
                                          q
                                          )
                                          ,
                                          
                                             
                                                ν
                                             
                                             
                                                f
                                             
                                          
                                          )
                                          ,
                                          Π
                                          (
                                          a
                                          .
                                          p
                                          
                                             
                                                ⊕
                                             
                                             
                                                i
                                             
                                          
                                          a
                                          .
                                          q
                                          ,
                                          
                                             
                                                ν
                                             
                                             
                                                f
                                             
                                          
                                          )
                                          )
                                          ,
                                          (
                                          Π
                                          (
                                          (
                                          p
                                          
                                             
                                                ⊕
                                             
                                             
                                                i
                                             
                                          
                                          q
                                          )
                                          ,
                                          
                                             
                                                ν
                                             
                                             
                                                f
                                             
                                          
                                          )
                                          ,
                                          Π
                                          (
                                          p
                                          ,
                                          
                                             
                                                ν
                                             
                                             
                                                f
                                             
                                          
                                          )
                                          )
                                          }
                                          ∪
                                       
                                    
                                    
                                       
                                          
                                          {
                                          (
                                          Π
                                          (
                                          t
                                          ,
                                          
                                             
                                                ν
                                             
                                             
                                                f
                                             
                                          
                                          )
                                          ,
                                          Π
                                          (
                                          t
                                          ,
                                          
                                             
                                                ν
                                             
                                             
                                                f
                                             
                                          
                                          )
                                          )
                                          }
                                       
                                    
                                 
                              
                           
                        
                      is a strong bisimulation and satisfies the transfer conditions of Definition 3. For the pair 
                        (
                        Π
                        (
                        a
                        .
                        (
                        p
                        
                           
                              ⊕
                           
                           
                              i
                           
                        
                        q
                        )
                        ,
                        
                           
                              ν
                           
                           
                              f
                           
                        
                        )
                        ,
                        Π
                        (
                        a
                        .
                        p
                        
                           
                              ⊕
                           
                           
                              i
                           
                        
                        a
                        .
                        q
                        ,
                        
                           
                              ν
                           
                           
                              f
                           
                        
                        )
                        )
                        ∈
                        R
                     , suppose 
                        Π
                        (
                        a
                        .
                        (
                        p
                        
                           
                              ⊕
                           
                           
                              i
                           
                        
                        q
                        )
                        ,
                        
                           
                              ν
                           
                           
                              f
                           
                        
                        )
                        
                           →
                           a
                        
                        Π
                        (
                        p
                        ⊕
                        
                           
                              q
                           
                           
                              i
                           
                        
                        ,
                        
                           
                              ν
                           
                           
                              f
                           
                        
                        )
                      since by SOS rule Prefix 
                     
                        a
                        .
                        (
                        p
                        
                           
                              ⊕
                           
                           
                              i
                           
                        
                        q
                        )
                        
                           →
                           
                              a
                              ,
                              
                                 
                                    ν
                                 
                                 
                                    ?
                                 
                              
                           
                        
                        p
                        
                           
                              ⊕
                           
                           
                              i
                           
                        
                        q
                     , where 
                        
                           
                              ν
                           
                           
                              ?
                           
                        
                        ⊑
                        
                           
                              ν
                           
                           
                              f
                           
                        
                     . By SOS rules Prefix and Select, 
                        a
                        .
                        p
                        
                           
                              ⊕
                           
                           
                              i
                           
                        
                        a
                        .
                        q
                        
                           →
                           
                              a
                              ,
                              
                                 
                                    ν
                                 
                                 
                                    ?
                                 
                              
                              
                                 
                                    |
                                 
                                 
                                    i
                                    /
                                    L
                                 
                              
                           
                        
                        p
                     , 
                        
                           
                              ν
                           
                           
                              ?
                           
                        
                        
                           
                              |
                           
                           
                              i
                              /
                              L
                           
                        
                        ⊑
                        
                           
                              ν
                           
                           
                              f
                           
                        
                     . Therefore, 
                        Π
                        (
                        a
                        .
                        p
                        
                           
                              ⊕
                           
                           
                              i
                           
                        
                        a
                        .
                        q
                        ,
                        
                           
                              ν
                           
                           
                              f
                           
                        
                        )
                        
                           →
                           a
                        
                        Π
                        (
                        p
                        ,
                        
                           
                              ν
                           
                           
                              f
                           
                        
                        )
                     , and 
                        Π
                        (
                        (
                        p
                        
                           
                              ⊕
                           
                           
                              i
                           
                        
                        q
                        )
                        ,
                        
                           
                              ν
                           
                           
                              f
                           
                        
                        )
                        
                        R
                        
                        Π
                        (
                        p
                        ,
                        
                           
                              ν
                           
                           
                              f
                           
                        
                        )
                     . The same discussion holds when 
                        Π
                        (
                        a
                        .
                        p
                        ⊕
                        a
                        .
                        q
                        ,
                        
                           
                              ν
                           
                           
                              f
                           
                        
                        )
                        
                           →
                           a
                        
                        Π
                        (
                        p
                        ,
                        
                           
                              ν
                           
                           
                              f
                           
                        
                        )
                     . Furthermore, for the pair 
                        (
                        Π
                        (
                        (
                        p
                        
                           
                              ⊕
                           
                           
                              i
                           
                        
                        q
                        )
                        ,
                        
                           
                              ν
                           
                           
                              f
                           
                        
                        )
                        ,
                        Π
                        (
                        p
                        ,
                        
                           
                              ν
                           
                           
                              f
                           
                        
                        )
                        )
                        ∈
                        R
                     , assume that 
                        Π
                        (
                        (
                        p
                        
                           
                              ⊕
                           
                           
                              i
                           
                        
                        q
                        )
                        ,
                        
                           
                              ν
                           
                           
                              f
                           
                        
                        )
                        
                           →
                           a
                        
                        Π
                        (
                        
                           
                              p
                           
                           
                              ′
                           
                        
                        ,
                        
                           
                              ν
                           
                           
                              f
                           
                        
                        )
                      since 
                        p
                        
                           
                              ⊕
                           
                           
                              i
                           
                        
                        q
                        
                           →
                           
                              a
                              ,
                              ν
                           
                        
                        
                           
                              p
                           
                           
                              ′
                           
                        
                      and 
                        ν
                        ⊑
                        
                           
                              ν
                           
                           
                              f
                           
                        
                     . Therefore, 
                        p
                        
                           →
                           
                              a
                              ,
                              
                                 
                                    ν
                                 
                                 
                                    ′
                                 
                              
                           
                        
                        
                           
                              p
                           
                           
                              ′
                           
                        
                     , where 
                        
                           
                              ν
                           
                           
                              ′
                           
                        
                        
                           
                              |
                           
                           
                              i
                              /
                              L
                           
                        
                        =
                        ν
                     , and 
                        
                           
                              ν
                           
                           
                              ′
                           
                        
                        ⊑
                        
                           
                              ν
                           
                           
                              f
                           
                        
                     . Consequently 
                        Π
                        (
                        p
                        ,
                        
                           
                              ν
                           
                           
                              f
                           
                        
                        )
                        
                           →
                           a
                        
                        Π
                        (
                        
                           
                              p
                           
                           
                              ′
                           
                        
                        ,
                        
                           
                              ν
                           
                           
                              f
                           
                        
                        )
                      and 
                        Π
                        (
                        
                           
                              p
                           
                           
                              ′
                           
                        
                        ,
                        
                           
                              ν
                           
                           
                              f
                           
                        
                        )
                        
                        R
                        
                        Π
                        (
                        
                           
                              p
                           
                           
                              ′
                           
                        
                        ,
                        
                           
                              ν
                           
                           
                              f
                           
                        
                        )
                     . The same discussion holds when 
                        Π
                        (
                        p
                        ,
                        
                           
                              ν
                           
                           
                              f
                           
                        
                        )
                        
                           →
                           a
                        
                        Π
                        (
                        
                           
                              p
                           
                           
                              ′
                           
                        
                        ,
                        
                           
                              ν
                           
                           
                              f
                           
                        
                        )
                     . Transfer conditions trivially hold for pairs like 
                        (
                        Π
                        (
                        t
                        ,
                        
                           
                              ν
                           
                           
                              f
                           
                        
                        )
                        ,
                        Π
                        (
                        t
                        ,
                        
                           
                              ν
                           
                           
                              f
                           
                        
                        )
                        )
                        ∈
                        R
                     . Consequently 
                        R
                      is a strong bisimulation, concluding that 
                        a
                        .
                        (
                        p
                        
                           
                              ⊕
                           
                           
                              i
                           
                        
                        q
                        )
                        
                           
                              ≈
                           
                           
                              PL
                           
                        
                        a
                        .
                        p
                        
                           
                              ⊕
                           
                           
                              i
                           
                        
                        a
                        .
                        q
                     .

To prove axiom 
                        
                           
                              A
                           
                           
                              5
                           
                        
                     , for any 
                        
                           
                              ν
                           
                           
                              f
                           
                        
                        ∈
                        
                           VFConfig
                        
                        (
                        (
                        p
                        
                           
                              ⊕
                           
                           
                              i
                           
                        
                        q
                        )
                        +
                        r
                        )
                      (which implicitly implies 
                        
                           
                              ν
                           
                           
                              f
                           
                        
                        ∈
                        
                           VFConfig
                        
                        (
                        (
                        p
                        +
                        r
                        )
                        
                           
                              ⊕
                           
                           
                              i
                           
                        
                        (
                        q
                        +
                        r
                        )
                        )
                     ), it is straightforward to show that 
                        Π
                        (
                        (
                        p
                        
                           
                              ⊕
                           
                           
                              i
                           
                        
                        q
                        )
                        +
                        r
                        ,
                        
                           
                              ν
                           
                           
                              f
                           
                        
                        )
                        ∼
                        Π
                        (
                        (
                        p
                        +
                        r
                        )
                        
                           
                              ⊕
                           
                           
                              i
                           
                        
                        (
                        q
                        +
                        r
                        )
                        ,
                        
                           
                              ν
                           
                           
                              f
                           
                        
                        )
                      witnessed by the strong bisimulation relation 
                        R
                        =
                        {
                        (
                        Π
                        (
                        (
                        p
                        
                           
                              ⊕
                           
                           
                              i
                           
                        
                        q
                        )
                        +
                        r
                        ,
                        
                           
                              ν
                           
                           
                              f
                           
                        
                        )
                        ,
                        Π
                        (
                        (
                        p
                        +
                        r
                        )
                        
                           
                              ⊕
                           
                           
                              i
                           
                        
                        (
                        q
                        +
                        r
                        )
                        ,
                        
                           
                              ν
                           
                           
                              f
                           
                        
                        )
                        )
                        }
                        ∪
                        {
                        (
                        Π
                        (
                        t
                        ,
                        
                           
                              ν
                           
                           
                              f
                           
                        
                        )
                        ,
                        Π
                        (
                        t
                        ,
                        
                           
                              ν
                           
                           
                              f
                           
                        
                        )
                        )
                        }
                     . Axioms 
                        
                           
                              A
                           
                           
                              6
                           
                        
                     , 
                        
                           
                              P
                           
                           
                              4
                              ,
                              5
                           
                        
                      
                     
                        
                           
                              R
                           
                           
                              3
                           
                        
                     , 
                        
                           
                              E
                           
                           
                              5
                           
                        
                     , 
                        
                           
                              N
                           
                           
                              2
                              ,
                              4
                              ,
                              5
                           
                        
                     , 
                        
                           
                              S
                           
                           
                              3
                           
                        
                      are proved similar to 
                        
                           
                              A
                           
                           
                              5
                           
                        
                     .

For axiom 
                        
                           
                              C
                           
                           
                              1
                           
                        
                     , it can be proved that for any 
                        
                           
                              ν
                           
                           
                              f
                           
                        
                        ∈
                        
                           VFConfig
                        
                        (
                        p
                        +
                        q
                        )
                      (which implicitly implies 
                        
                           
                              ν
                           
                           
                              f
                           
                        
                        ∈
                        
                           VFConfig
                        
                        (
                        q
                        +
                        p
                        )
                     ) 
                        Π
                        (
                        p
                        +
                        q
                        ,
                        
                           
                              ν
                           
                           
                              f
                           
                        
                        )
                        ∼
                        Π
                        (
                        q
                        +
                        p
                        ,
                        
                           
                              ν
                           
                           
                              f
                           
                        
                        )
                     . It is easy to show that 
                        R
                        =
                        {
                        (
                        Π
                        (
                        p
                        +
                        q
                        ,
                        
                           
                              ν
                           
                           
                              f
                           
                        
                        )
                        ,
                        Π
                        (
                        q
                        +
                        p
                        ,
                        
                           
                              ν
                           
                           
                              f
                           
                        
                        )
                        )
                        }
                        ∪
                        {
                        (
                        Π
                        (
                        t
                        ,
                        
                           
                              ν
                           
                           
                              f
                           
                        
                        )
                        ,
                        Π
                        (
                        t
                        ,
                        
                           
                              ν
                           
                           
                              f
                           
                        
                        )
                        )
                        }
                      is a strong bisimulation. Axioms 
                        
                           
                              C
                           
                           
                              2
                              −
                              4
                           
                        
                     , 
                        
                           
                              P
                           
                           
                              1
                              −
                              3
                              ,
                              6
                           
                        
                     , 
                        
                           
                              S
                           
                           
                              1
                              ,
                              2
                              ,
                              4
                              ,
                              5
                              ,
                              6
                           
                        
                     , 
                        
                           
                              R
                           
                           
                              1
                              ,
                              2
                              ,
                              4
                           
                        
                     , and 
                        
                           
                              E
                           
                           
                              1
                              −
                              4
                           
                        
                      are proved similarly.

Axioms Dec, UnFold, Fold, and Ung are standard [17]. We provide a full proof for the new axiom Dri. To prove axiom Dri, we show that for any 
                        
                           
                              ν
                           
                           
                              f
                           
                        
                        ∈
                        
                           VFConfig
                        
                        (
                        〈
                        A
                        |
                        {
                        A
                        
                           =
                           
                              def
                           
                        
                        
                           
                              t
                           
                           
                              1
                           
                        
                        
                           
                              ⊕
                           
                           
                              i
                           
                        
                        
                           
                              t
                           
                           
                              2
                           
                        
                        }
                        〉
                        )
                      (which implicitly implies 
                        
                           
                              ν
                           
                           
                              f
                           
                        
                        ∈
                        
                           VFConfig
                        
                        (
                        〈
                        A
                        |
                        {
                        A
                        
                           =
                           
                              def
                           
                        
                        
                           
                              t
                           
                           
                              1
                           
                        
                        }
                        〉
                        
                           
                              ⊕
                           
                           
                              i
                           
                        
                        〈
                        A
                        |
                        {
                        A
                        
                           =
                           
                              def
                           
                        
                        
                           
                              t
                           
                           
                              2
                           
                        
                        }
                        〉
                        )
                     ), 
                        Π
                        (
                        〈
                        A
                        |
                        {
                        A
                        
                           =
                           
                              def
                           
                        
                        
                           
                              t
                           
                           
                              1
                           
                        
                        
                           
                              ⊕
                           
                           
                              i
                           
                        
                        
                           
                              t
                           
                           
                              2
                           
                        
                        }
                        〉
                        ,
                        
                           
                              ν
                           
                           
                              f
                           
                        
                        )
                        ∼
                        Π
                        (
                        〈
                        A
                        |
                        {
                        A
                        
                           =
                           
                              def
                           
                        
                        
                           
                              t
                           
                           
                              1
                           
                        
                        }
                        〉
                        
                           
                              ⊕
                           
                           
                              i
                           
                        
                        〈
                        A
                        |
                        {
                        A
                        
                           =
                           
                              def
                           
                        
                        
                           
                              t
                           
                           
                              2
                           
                        
                        }
                        〉
                        ,
                        
                           
                              ν
                           
                           
                              f
                           
                        
                        )
                     . We only discuss on the case when 
                        
                           
                              ν
                           
                           
                              f
                           
                        
                        
                           
                              |
                           
                           
                              i
                           
                        
                        =
                        L
                      as the other can be dealt with in the same way. To this aim, we prove that 
                        R
                        =
                        {
                        (
                        Π
                        (
                        〈
                        t
                        |
                        {
                        A
                        
                           =
                           
                              def
                           
                        
                        
                           
                              t
                           
                           
                              1
                           
                        
                        
                           
                              ⊕
                           
                           
                              i
                           
                        
                        
                           
                              t
                           
                           
                              2
                           
                        
                        }
                        〉
                        )
                        ,
                        Π
                        (
                        〈
                        t
                        |
                        {
                        A
                        
                           =
                           
                              def
                           
                        
                        
                           
                              t
                           
                           
                              1
                           
                        
                        }
                        〉
                        
                           
                              ⊕
                           
                           
                              i
                           
                        
                        〈
                        t
                        |
                        {
                        A
                        
                           =
                           
                              def
                           
                        
                        
                           
                              t
                           
                           
                              2
                           
                        
                        }
                        〉
                        ,
                        
                           
                              ν
                           
                           
                              f
                           
                        
                        )
                        )
                        }
                        ∪
                        {
                        (
                        Π
                        (
                        〈
                        t
                        |
                        {
                        A
                        
                           =
                           
                              def
                           
                        
                        
                           
                              t
                           
                           
                              1
                           
                        
                        
                           
                              ⊕
                           
                           
                              i
                           
                        
                        
                           
                              t
                           
                           
                              2
                           
                        
                        }
                        〉
                        )
                        ,
                        Π
                        (
                        〈
                        t
                        |
                        {
                        A
                        
                           =
                           
                              def
                           
                        
                        
                           
                              t
                           
                           
                              1
                           
                        
                        }
                        〉
                        ,
                        
                           
                              ν
                           
                           
                              f
                           
                        
                        )
                        )
                        }
                      is a strong bisimulation.

The transfer conditions of Definition 3 for the pair 
                        (
                        Π
                        (
                        〈
                        t
                        |
                        {
                        A
                        
                           =
                           
                              def
                           
                        
                        
                           
                              t
                           
                           
                              1
                           
                        
                        
                           
                              ⊕
                           
                           
                              i
                           
                        
                        
                           
                              t
                           
                           
                              2
                           
                        
                        }
                        〉
                        ,
                        
                           
                              ν
                           
                           
                              f
                           
                        
                        )
                        ,
                        Π
                        (
                        〈
                        t
                        |
                        {
                        A
                        
                           =
                           
                              def
                           
                        
                        
                           
                              t
                           
                           
                              1
                           
                        
                        }
                        〉
                        
                           
                              ⊕
                           
                           
                              i
                           
                        
                        〈
                        t
                        |
                        {
                        A
                        
                           =
                           
                              def
                           
                        
                        
                           
                              t
                           
                           
                              2
                           
                        
                        }
                        〉
                        ,
                        
                           
                              ν
                           
                           
                              f
                           
                        
                        )
                        )
                      can be examined by structural induction over the syntax of t. The base case of induction for 
                        t
                        ≡
                        0
                      is trivial.
                        
                           •
                           if 
                                 t
                                 ≡
                                 a
                                 .
                                 
                                    
                                       t
                                    
                                    
                                       ′
                                    
                                 
                              , then by rule Prefix, 
                                 〈
                                 a
                                 .
                                 
                                    
                                       t
                                    
                                    
                                       ′
                                    
                                 
                                 |
                                 {
                                 A
                                 
                                    =
                                    
                                       def
                                    
                                 
                                 
                                    
                                       t
                                    
                                    
                                       1
                                    
                                 
                                 
                                    
                                       ⊕
                                    
                                    
                                       i
                                    
                                 
                                 
                                    
                                       t
                                    
                                    
                                       2
                                    
                                 
                                 }
                                 〉
                                 
                                    →
                                    
                                       a
                                       ,
                                       
                                          
                                             ν
                                          
                                          
                                             ?
                                          
                                       
                                    
                                 
                                 〈
                                 
                                    
                                       t
                                    
                                    
                                       ′
                                    
                                 
                                 |
                                 {
                                 A
                                 
                                    =
                                    
                                       def
                                    
                                 
                                 
                                    
                                       t
                                    
                                    
                                       1
                                    
                                 
                                 
                                    
                                       ⊕
                                    
                                    
                                       i
                                    
                                 
                                 
                                    
                                       t
                                    
                                    
                                       2
                                    
                                 
                                 }
                                 〉
                               and 
                                 
                                    
                                       ν
                                    
                                    
                                       ?
                                    
                                 
                                 ⊑
                                 
                                    
                                       ν
                                    
                                    
                                       f
                                    
                                 
                              . Similarly, 
                                 〈
                                 a
                                 .
                                 
                                    
                                       t
                                    
                                    
                                       ′
                                    
                                 
                                 |
                                 {
                                 A
                                 
                                    =
                                    
                                       def
                                    
                                 
                                 
                                    
                                       t
                                    
                                    
                                       1
                                    
                                 
                                 }
                                 〉
                                 
                                    
                                       ⊕
                                    
                                    
                                       i
                                    
                                 
                                 〈
                                 a
                                 .
                                 
                                    
                                       t
                                    
                                    
                                       ′
                                    
                                 
                                 |
                                 {
                                 A
                                 
                                    =
                                    
                                       def
                                    
                                 
                                 
                                    
                                       t
                                    
                                    
                                       2
                                    
                                 
                                 }
                                 〉
                                 
                                    →
                                    
                                       a
                                       ,
                                       
                                          
                                             ν
                                          
                                          
                                             ?
                                          
                                       
                                       
                                          
                                             |
                                          
                                          
                                             i
                                             /
                                             L
                                          
                                       
                                    
                                 
                                 〈
                                 
                                    
                                       t
                                    
                                    
                                       ′
                                    
                                 
                                 |
                                 {
                                 A
                                 
                                    =
                                    
                                       def
                                    
                                 
                                 
                                    
                                       t
                                    
                                    
                                       1
                                    
                                 
                                 }
                                 〉
                              . Hence, 
                                 Π
                                 (
                                 〈
                                 a
                                 .
                                 
                                    
                                       t
                                    
                                    
                                       ′
                                    
                                 
                                 |
                                 {
                                 A
                                 
                                    =
                                    
                                       def
                                    
                                 
                                 
                                    
                                       t
                                    
                                    
                                       1
                                    
                                 
                                 
                                    
                                       ⊕
                                    
                                    
                                       i
                                    
                                 
                                 
                                    
                                       t
                                    
                                    
                                       2
                                    
                                 
                                 }
                                 〉
                                 ,
                                 
                                    
                                       ν
                                    
                                    
                                       f
                                    
                                 
                                 )
                                 
                                    →
                                    a
                                 
                                 Π
                                 (
                                 〈
                                 
                                    
                                       t
                                    
                                    
                                       ′
                                    
                                 
                                 |
                                 {
                                 A
                                 
                                    =
                                    
                                       def
                                    
                                 
                                 
                                    
                                       t
                                    
                                    
                                       1
                                    
                                 
                                 
                                    
                                       ⊕
                                    
                                    
                                       i
                                    
                                 
                                 
                                    
                                       t
                                    
                                    
                                       2
                                    
                                 
                                 }
                                 〉
                                 ,
                                 
                                    
                                       ν
                                    
                                    
                                       f
                                    
                                 
                                 )
                              , 
                                 Π
                                 (
                                 〈
                                 a
                                 .
                                 
                                    
                                       t
                                    
                                    
                                       ′
                                    
                                 
                                 |
                                 {
                                 A
                                 
                                    =
                                    
                                       def
                                    
                                 
                                 
                                    
                                       t
                                    
                                    
                                       1
                                    
                                 
                                 }
                                 〉
                                 
                                    
                                       ⊕
                                    
                                    
                                       i
                                    
                                 
                                 〈
                                 a
                                 .
                                 
                                    
                                       t
                                    
                                    
                                       ′
                                    
                                 
                                 |
                                 {
                                 A
                                 
                                    =
                                    
                                       def
                                    
                                 
                                 
                                    
                                       t
                                    
                                    
                                       2
                                    
                                 
                                 }
                                 〉
                                 ,
                                 
                                    
                                       ν
                                    
                                    
                                       f
                                    
                                 
                                 )
                                 
                                    →
                                    a
                                 
                                 Π
                                 (
                                 〈
                                 
                                    
                                       t
                                    
                                    
                                       ′
                                    
                                 
                                 |
                                 {
                                 A
                                 
                                    =
                                    
                                       def
                                    
                                 
                                 
                                    
                                       t
                                    
                                    
                                       1
                                    
                                 
                                 }
                                 〉
                                 ,
                                 
                                    
                                       ν
                                    
                                    
                                       f
                                    
                                 
                                 )
                              , and 
                                 Π
                                 (
                                 〈
                                 
                                    
                                       t
                                    
                                    
                                       ′
                                    
                                 
                                 |
                                 {
                                 A
                                 
                                    =
                                    
                                       def
                                    
                                 
                                 
                                    
                                       t
                                    
                                    
                                       1
                                    
                                 
                                 
                                    
                                       ⊕
                                    
                                    
                                       i
                                    
                                 
                                 
                                    
                                       t
                                    
                                    
                                       2
                                    
                                 
                                 }
                                 〉
                                 ,
                                 
                                    
                                       ν
                                    
                                    
                                       f
                                    
                                 
                                 )
                                 
                                 R
                                 
                                 Π
                                 (
                                 〈
                                 
                                    
                                       t
                                    
                                    
                                       ′
                                    
                                 
                                 |
                                 {
                                 A
                                 
                                    =
                                    
                                       def
                                    
                                 
                                 
                                    
                                       t
                                    
                                    
                                       1
                                    
                                 
                                 }
                                 〉
                                 ,
                                 
                                    
                                       ν
                                    
                                    
                                       f
                                    
                                 
                                 )
                              .

if 
                                 t
                                 ≡
                                 
                                    
                                       t
                                    
                                    
                                       1
                                    
                                 
                                 +
                                 
                                    
                                       t
                                    
                                    
                                       2
                                    
                                 
                              , then by rule Choice, either 
                                 〈
                                 
                                    
                                       t
                                    
                                    
                                       1
                                    
                                 
                                 +
                                 
                                    
                                       t
                                    
                                    
                                       2
                                    
                                 
                                 |
                                 {
                                 A
                                 
                                    =
                                    
                                       def
                                    
                                 
                                 p
                                 
                                    
                                       ⊕
                                    
                                    
                                       i
                                    
                                 
                                 q
                                 }
                                 〉
                                 
                                    →
                                    
                                       a
                                       ,
                                       
                                          
                                             ν
                                          
                                          
                                             1
                                          
                                       
                                    
                                 
                                 〈
                                 
                                    
                                       t
                                    
                                    
                                       1
                                    
                                    
                                       ′
                                    
                                 
                                 |
                                 {
                                 A
                                 
                                    =
                                    
                                       def
                                    
                                 
                                 p
                                 
                                    
                                       ⊕
                                    
                                    
                                       i
                                    
                                 
                                 q
                                 }
                                 〉
                               or 
                                 〈
                                 
                                    
                                       t
                                    
                                    
                                       1
                                    
                                 
                                 +
                                 
                                    
                                       t
                                    
                                    
                                       2
                                    
                                 
                                 |
                                 {
                                 A
                                 
                                    =
                                    
                                       def
                                    
                                 
                                 p
                                 
                                    
                                       ⊕
                                    
                                    
                                       i
                                    
                                 
                                 q
                                 }
                                 〉
                                 
                                    →
                                    
                                       b
                                       ,
                                       
                                          
                                             ν
                                          
                                          
                                             2
                                          
                                       
                                    
                                 
                                 〈
                                 
                                    
                                       t
                                    
                                    
                                       2
                                    
                                    
                                       ′
                                    
                                 
                                 |
                                 {
                                 A
                                 
                                    =
                                    
                                       def
                                    
                                 
                                 p
                                 
                                    
                                       ⊕
                                    
                                    
                                       i
                                    
                                 
                                 q
                                 }
                                 〉
                              , and 
                                 
                                    
                                       ν
                                    
                                    
                                       1
                                    
                                 
                                 ⊑
                                 
                                    
                                       ν
                                    
                                    
                                       f
                                    
                                 
                               or 
                                 
                                    
                                       ν
                                    
                                    
                                       2
                                    
                                 
                                 ⊑
                                 
                                    
                                       ν
                                    
                                    
                                       f
                                    
                                 
                              , since 
                                 〈
                                 
                                    
                                       t
                                    
                                    
                                       1
                                    
                                 
                                 |
                                 {
                                 A
                                 
                                    =
                                    
                                       def
                                    
                                 
                                 p
                                 
                                    
                                       ⊕
                                    
                                    
                                       i
                                    
                                 
                                 q
                                 }
                                 〉
                                 
                                    →
                                    
                                       a
                                       ,
                                       
                                          
                                             ν
                                          
                                          
                                             1
                                          
                                       
                                    
                                 
                                 〈
                                 
                                    
                                       t
                                    
                                    
                                       1
                                    
                                    
                                       ′
                                    
                                 
                                 |
                                 {
                                 A
                                 
                                    =
                                    
                                       def
                                    
                                 
                                 p
                                 
                                    
                                       ⊕
                                    
                                    
                                       i
                                    
                                 
                                 q
                                 }
                                 〉
                               or 
                                 〈
                                 
                                    
                                       t
                                    
                                    
                                       2
                                    
                                 
                                 |
                                 {
                                 A
                                 
                                    =
                                    
                                       def
                                    
                                 
                                 p
                                 
                                    
                                       ⊕
                                    
                                    
                                       i
                                    
                                 
                                 q
                                 }
                                 〉
                                 
                                    →
                                    
                                       b
                                       ,
                                       
                                          
                                             ν
                                          
                                          
                                             2
                                          
                                       
                                    
                                 
                                 〈
                                 
                                    
                                       t
                                    
                                    
                                       2
                                    
                                    
                                       ′
                                    
                                 
                                 |
                                 {
                                 A
                                 
                                    =
                                    
                                       def
                                    
                                 
                                 p
                                 
                                    
                                       ⊕
                                    
                                    
                                       i
                                    
                                 
                                 q
                                 }
                                 〉
                              . Hence, 
                                 Π
                                 (
                                 〈
                                 
                                    
                                       t
                                    
                                    
                                       1
                                    
                                 
                                 +
                                 
                                    
                                       t
                                    
                                    
                                       2
                                    
                                 
                                 |
                                 {
                                 A
                                 
                                    =
                                    
                                       def
                                    
                                 
                                 p
                                 
                                    
                                       ⊕
                                    
                                    
                                       i
                                    
                                 
                                 q
                                 }
                                 〉
                                 ,
                                 
                                    
                                       ν
                                    
                                    
                                       f
                                    
                                 
                                 )
                                 
                                    →
                                    a
                                 
                                 Π
                                 (
                                 〈
                                 
                                    
                                       t
                                    
                                    
                                       1
                                    
                                    
                                       ′
                                    
                                 
                                 |
                                 {
                                 A
                                 
                                    =
                                    
                                       def
                                    
                                 
                                 p
                                 
                                    
                                       ⊕
                                    
                                    
                                       i
                                    
                                 
                                 q
                                 }
                                 〉
                                 ,
                                 
                                    
                                       ν
                                    
                                    
                                       f
                                    
                                 
                                 )
                               or 
                                 Π
                                 (
                                 〈
                                 
                                    
                                       t
                                    
                                    
                                       1
                                    
                                 
                                 +
                                 
                                    
                                       t
                                    
                                    
                                       2
                                    
                                 
                                 |
                                 {
                                 A
                                 
                                    =
                                    
                                       def
                                    
                                 
                                 p
                                 
                                    
                                       ⊕
                                    
                                    
                                       i
                                    
                                 
                                 q
                                 }
                                 〉
                                 ,
                                 
                                    
                                       ν
                                    
                                    
                                       f
                                    
                                 
                                 )
                                 
                                    →
                                    b
                                 
                                 Π
                                 (
                                 〈
                                 
                                    
                                       t
                                    
                                    
                                       2
                                    
                                    
                                       ′
                                    
                                 
                                 |
                                 {
                                 A
                                 
                                    =
                                    
                                       def
                                    
                                 
                                 p
                                 
                                    
                                       ⊕
                                    
                                    
                                       i
                                    
                                 
                                 q
                                 }
                                 〉
                                 ,
                                 
                                    
                                       ν
                                    
                                    
                                       f
                                    
                                 
                                 )
                              . By induction, 
                                 Π
                                 (
                                 〈
                                 
                                    
                                       t
                                    
                                    
                                       1
                                    
                                 
                                 |
                                 {
                                 A
                                 
                                    =
                                    
                                       def
                                    
                                 
                                 p
                                 
                                    
                                       ⊕
                                    
                                    
                                       i
                                    
                                 
                                 q
                                 }
                                 〉
                                 ,
                                 
                                    
                                       ν
                                    
                                    
                                       f
                                    
                                 
                                 )
                                 ∼
                                 Π
                                 (
                                 〈
                                 
                                    
                                       t
                                    
                                    
                                       1
                                    
                                 
                                 |
                                 {
                                 A
                                 
                                    =
                                    
                                       def
                                    
                                 
                                 p
                                 }
                                 〉
                                 
                                    
                                       ⊕
                                    
                                    
                                       i
                                    
                                 
                                 〈
                                 
                                    
                                       t
                                    
                                    
                                       1
                                    
                                 
                                 |
                                 {
                                 A
                                 
                                    =
                                    
                                       def
                                    
                                 
                                 q
                                 }
                                 〉
                                 ,
                                 
                                    
                                       ν
                                    
                                    
                                       f
                                    
                                 
                                 )
                               and 
                                 Π
                                 (
                                 〈
                                 
                                    
                                       t
                                    
                                    
                                       2
                                    
                                 
                                 |
                                 {
                                 A
                                 
                                    =
                                    
                                       def
                                    
                                 
                                 p
                                 
                                    
                                       ⊕
                                    
                                    
                                       i
                                    
                                 
                                 q
                                 }
                                 〉
                                 ,
                                 
                                    
                                       ν
                                    
                                    
                                       f
                                    
                                 
                                 )
                                 ∼
                                 Π
                                 (
                                 〈
                                 
                                    
                                       t
                                    
                                    
                                       2
                                    
                                 
                                 |
                                 {
                                 A
                                 
                                    =
                                    
                                       def
                                    
                                 
                                 p
                                 }
                                 〉
                                 
                                    
                                       ⊕
                                    
                                    
                                       i
                                    
                                 
                                 〈
                                 
                                    
                                       t
                                    
                                    
                                       2
                                    
                                 
                                 |
                                 {
                                 A
                                 
                                    =
                                    
                                       def
                                    
                                 
                                 q
                                 }
                                 〉
                                 ,
                                 
                                    
                                       ν
                                    
                                    
                                       f
                                    
                                 
                                 )
                              . Therefore, 
                                 Π
                                 (
                                 〈
                                 
                                    
                                       t
                                    
                                    
                                       1
                                    
                                 
                                 |
                                 {
                                 A
                                 
                                    =
                                    
                                       def
                                    
                                 
                                 p
                                 }
                                 〉
                                 
                                    
                                       ⊕
                                    
                                    
                                       i
                                    
                                 
                                 〈
                                 
                                    
                                       t
                                    
                                    
                                       1
                                    
                                 
                                 |
                                 {
                                 A
                                 
                                    =
                                    
                                       def
                                    
                                 
                                 q
                                 }
                                 〉
                                 ,
                                 
                                    
                                       ν
                                    
                                    
                                       f
                                    
                                 
                                 )
                                 
                                    →
                                    a
                                 
                                 Π
                                 (
                                 〈
                                 
                                    
                                       t
                                    
                                    
                                       1
                                    
                                    
                                       ′
                                    
                                 
                                 |
                                 {
                                 A
                                 
                                    =
                                    
                                       def
                                    
                                 
                                 p
                                 }
                                 〉
                                 ,
                                 
                                    
                                       ν
                                    
                                    
                                       f
                                    
                                 
                                 )
                              , or 
                                 Π
                                 (
                                 〈
                                 
                                    
                                       t
                                    
                                    
                                       2
                                    
                                 
                                 |
                                 {
                                 A
                                 
                                    =
                                    
                                       def
                                    
                                 
                                 p
                                 }
                                 〉
                                 
                                    
                                       ⊕
                                    
                                    
                                       i
                                    
                                 
                                 〈
                                 
                                    
                                       t
                                    
                                    
                                       2
                                    
                                 
                                 |
                                 {
                                 A
                                 
                                    =
                                    
                                       def
                                    
                                 
                                 q
                                 }
                                 〉
                                 ,
                                 
                                    
                                       ν
                                    
                                    
                                       f
                                    
                                 
                                 )
                                 
                                    →
                                    b
                                 
                                 Π
                                 (
                                 〈
                                 
                                    
                                       t
                                    
                                    
                                       2
                                    
                                    
                                       ′
                                    
                                 
                                 |
                                 {
                                 A
                                 
                                    =
                                    
                                       def
                                    
                                 
                                 p
                                 }
                                 〉
                                 ,
                                 
                                    
                                       ν
                                    
                                    
                                       f
                                    
                                 
                                 )
                              , and 
                                 Π
                                 (
                                 〈
                                 
                                    
                                       t
                                    
                                    
                                       1
                                    
                                    
                                       ′
                                    
                                 
                                 |
                                 {
                                 A
                                 
                                    =
                                    
                                       def
                                    
                                 
                                 p
                                 
                                    
                                       ⊕
                                    
                                    
                                       i
                                    
                                 
                                 q
                                 }
                                 〉
                                 ,
                                 
                                    
                                       ν
                                    
                                    
                                       f
                                    
                                 
                                 )
                                 
                                 R
                                 
                                 Π
                                 (
                                 〈
                                 
                                    
                                       t
                                    
                                    
                                       1
                                    
                                    
                                       ′
                                    
                                 
                                 |
                                 {
                                 A
                                 
                                    =
                                    
                                       def
                                    
                                 
                                 p
                                 }
                                 〉
                                 ,
                                 
                                    
                                       ν
                                    
                                    
                                       f
                                    
                                 
                                 )
                              , and 
                                 Π
                                 (
                                 〈
                                 
                                    
                                       t
                                    
                                    
                                       2
                                    
                                    
                                       ′
                                    
                                 
                                 |
                                 {
                                 A
                                 
                                    =
                                    
                                       def
                                    
                                 
                                 p
                                 
                                    
                                       ⊕
                                    
                                    
                                       i
                                    
                                 
                                 q
                                 }
                                 〉
                                 ,
                                 
                                    
                                       ν
                                    
                                    
                                       f
                                    
                                 
                                 )
                                 
                                 R
                                 
                                 Π
                                 (
                                 〈
                                 
                                    
                                       t
                                    
                                    
                                       2
                                    
                                    
                                       ′
                                    
                                 
                                 |
                                 {
                                 A
                                 
                                    =
                                    
                                       def
                                    
                                 
                                 p
                                 }
                                 〉
                                 ,
                                 
                                    
                                       ν
                                    
                                    
                                       f
                                    
                                 
                                 )
                              . Consequently, 
                                 Π
                                 (
                                 〈
                                 
                                    
                                       t
                                    
                                    
                                       1
                                    
                                 
                                 +
                                 
                                    
                                       t
                                    
                                    
                                       2
                                    
                                 
                                 |
                                 {
                                 A
                                 
                                    =
                                    
                                       def
                                    
                                 
                                 p
                                 }
                                 〉
                                 
                                    
                                       ⊕
                                    
                                    
                                       i
                                    
                                 
                                 〈
                                 
                                    
                                       t
                                    
                                    
                                       1
                                    
                                 
                                 +
                                 
                                    
                                       t
                                    
                                    
                                       2
                                    
                                 
                                 |
                                 {
                                 A
                                 
                                    =
                                    
                                       def
                                    
                                 
                                 q
                                 }
                                 〉
                                 ,
                                 
                                    
                                       ν
                                    
                                    
                                       f
                                    
                                 
                                 )
                                 
                                    →
                                    a
                                 
                                 Π
                                 (
                                 〈
                                 
                                    
                                       t
                                    
                                    
                                       1
                                    
                                    
                                       ′
                                    
                                 
                                 |
                                 {
                                 A
                                 
                                    =
                                    
                                       def
                                    
                                 
                                 p
                                 }
                                 〉
                                 ,
                                 
                                    
                                       ν
                                    
                                    
                                       f
                                    
                                 
                                 )
                               or 
                                 Π
                                 (
                                 〈
                                 
                                    
                                       t
                                    
                                    
                                       1
                                    
                                 
                                 +
                                 
                                    
                                       t
                                    
                                    
                                       2
                                    
                                 
                                 |
                                 {
                                 A
                                 
                                    =
                                    
                                       def
                                    
                                 
                                 p
                                 }
                                 〉
                                 
                                    
                                       ⊕
                                    
                                    
                                       i
                                    
                                 
                                 〈
                                 
                                    
                                       t
                                    
                                    
                                       1
                                    
                                 
                                 +
                                 
                                    
                                       t
                                    
                                    
                                       2
                                    
                                 
                                 |
                                 {
                                 A
                                 
                                    =
                                    
                                       def
                                    
                                 
                                 q
                                 }
                                 〉
                                 
                                    →
                                    b
                                 
                                 Π
                                 (
                                 〈
                                 
                                    
                                       t
                                    
                                    
                                       2
                                    
                                    
                                       ′
                                    
                                 
                                 |
                                 {
                                 A
                                 
                                    =
                                    
                                       def
                                    
                                 
                                 p
                                 }
                                 〉
                                 ,
                                 
                                    
                                       ν
                                    
                                    
                                       f
                                    
                                 
                                 )
                              . The same discussion holds when 
                                 〈
                                 
                                    
                                       t
                                    
                                    
                                       1
                                    
                                 
                                 +
                                 
                                    
                                       t
                                    
                                    
                                       2
                                    
                                 
                                 |
                                 {
                                 A
                                 
                                    =
                                    
                                       def
                                    
                                 
                                 p
                                 }
                                 〉
                                 
                                    
                                       ⊕
                                    
                                    
                                       i
                                    
                                 
                                 〈
                                 
                                    
                                       t
                                    
                                    
                                       1
                                    
                                 
                                 +
                                 
                                    
                                       t
                                    
                                    
                                       2
                                    
                                 
                                 |
                                 {
                                 A
                                 
                                    =
                                    
                                       def
                                    
                                 
                                 q
                                 }
                                 〉
                                 
                                    →
                                    
                                       a
                                       ,
                                       
                                          
                                             ν
                                          
                                          
                                             1
                                          
                                       
                                    
                                 
                                 〈
                                 
                                    
                                       t
                                    
                                    
                                       1
                                    
                                    
                                       ′
                                    
                                 
                                 |
                                 {
                                 A
                                 
                                    =
                                    
                                       def
                                    
                                 
                                 p
                                 }
                                 〉
                               or 
                                 〈
                                 
                                    
                                       t
                                    
                                    
                                       1
                                    
                                 
                                 +
                                 
                                    
                                       t
                                    
                                    
                                       2
                                    
                                 
                                 |
                                 {
                                 A
                                 
                                    =
                                    
                                       def
                                    
                                 
                                 p
                                 }
                                 〉
                                 
                                    
                                       ⊕
                                    
                                    
                                       i
                                    
                                 
                                 〈
                                 
                                    
                                       t
                                    
                                    
                                       1
                                    
                                 
                                 +
                                 
                                    
                                       t
                                    
                                    
                                       2
                                    
                                 
                                 |
                                 {
                                 A
                                 
                                    =
                                    
                                       def
                                    
                                 
                                 q
                                 }
                                 〉
                                 
                                    →
                                    
                                       b
                                       ,
                                       
                                          
                                             ν
                                          
                                          
                                             2
                                          
                                       
                                    
                                 
                                 〈
                                 
                                    
                                       t
                                    
                                    
                                       2
                                    
                                    
                                       ′
                                    
                                 
                                 |
                                 {
                                 A
                                 
                                    =
                                    
                                       def
                                    
                                 
                                 q
                                 }
                                 〉
                              .

if 
                                 t
                                 ≡
                                 
                                    
                                       t
                                    
                                    
                                       1
                                    
                                 
                                 
                                    
                                       ⊕
                                    
                                    
                                       j
                                    
                                 
                                 
                                    
                                       t
                                    
                                    
                                       2
                                    
                                 
                              , 
                                 t
                                 ≡
                                 
                                    
                                       t
                                    
                                    
                                       1
                                    
                                 
                                 ∥
                                 
                                    
                                       t
                                    
                                    
                                       2
                                    
                                 
                              , 
                                 t
                                 ≡
                                 
                                    
                                       t
                                    
                                    
                                       1
                                    
                                 
                                 
                                    
                                       
                                    
                                 
                                 
                                    
                                       t
                                    
                                    
                                       2
                                    
                                 
                              , 
                                 t
                                 ≡
                                 
                                    
                                       t
                                    
                                    
                                       1
                                    
                                 
                                 |
                                 
                                    
                                       t
                                    
                                    
                                       2
                                    
                                 
                              , 
                                 t
                                 ≡
                                 
                                    
                                       t
                                    
                                    
                                       ′
                                    
                                 
                                 ∖
                                 L
                              , or 
                                 t
                                 ≡
                                 
                                    
                                       t
                                    
                                    
                                       ′
                                    
                                 
                                 [
                                 f
                                 ]
                              , then the proof is almost identical to the previous case.

if 
                                 t
                                 ≡
                                 〈
                                 A
                                 |
                                 {
                                 A
                                 
                                    =
                                    
                                       def
                                    
                                 
                                 
                                    
                                       t
                                    
                                    
                                       1
                                    
                                 
                                 
                                    
                                       ⊕
                                    
                                    
                                       i
                                    
                                 
                                 
                                    
                                       t
                                    
                                    
                                       2
                                    
                                 
                                 }
                                 〉
                              , then 
                                 Π
                                 (
                                 〈
                                 A
                                 |
                                 {
                                 A
                                 
                                    =
                                    
                                       def
                                    
                                 
                                 
                                    
                                       t
                                    
                                    
                                       1
                                    
                                 
                                 
                                    
                                       ⊕
                                    
                                    
                                       i
                                    
                                 
                                 
                                    
                                       t
                                    
                                    
                                       2
                                    
                                 
                                 }
                                 〉
                                 ,
                                 
                                    
                                       ν
                                    
                                    
                                       f
                                    
                                 
                                 )
                                 
                                    →
                                    a
                                 
                                 Π
                                 (
                                 〈
                                 
                                    
                                       t
                                    
                                    
                                       1
                                    
                                    
                                       ′
                                    
                                 
                                 |
                                 {
                                 A
                                 
                                    =
                                    
                                       def
                                    
                                 
                                 
                                    
                                       t
                                    
                                    
                                       1
                                    
                                 
                                 
                                    
                                       ⊕
                                    
                                    
                                       i
                                    
                                 
                                 
                                    
                                       t
                                    
                                    
                                       2
                                    
                                 
                                 }
                                 〉
                                 ,
                                 
                                    
                                       ν
                                    
                                    
                                       f
                                    
                                 
                                 )
                               since 
                                 〈
                                 A
                                 |
                                 {
                                 A
                                 
                                    =
                                    
                                       def
                                    
                                 
                                 
                                    
                                       t
                                    
                                    
                                       1
                                    
                                 
                                 
                                    
                                       ⊕
                                    
                                    
                                       i
                                    
                                 
                                 
                                    
                                       t
                                    
                                    
                                       2
                                    
                                 
                                 }
                                 〉
                                 
                                    →
                                    
                                       a
                                       ,
                                       ν
                                    
                                 
                                 〈
                                 
                                    
                                       t
                                    
                                    
                                       1
                                    
                                    
                                       ′
                                    
                                 
                                 |
                                 {
                                 A
                                 
                                    =
                                    
                                       def
                                    
                                 
                                 
                                    
                                       t
                                    
                                    
                                       1
                                    
                                 
                                 
                                    
                                       ⊕
                                    
                                    
                                       i
                                    
                                 
                                 
                                    
                                       t
                                    
                                    
                                       2
                                    
                                 
                                 }
                                 〉
                              , where 
                                 ν
                                 ⊑
                                 
                                    
                                       ν
                                    
                                    
                                       f
                                    
                                 
                              , and by SOS rules call and Select, 
                                 〈
                                 
                                    
                                       t
                                    
                                    
                                       1
                                    
                                 
                                 |
                                 {
                                 A
                                 
                                    =
                                    
                                       def
                                    
                                 
                                 
                                    
                                       t
                                    
                                    
                                       1
                                    
                                 
                                 
                                    
                                       ⊕
                                    
                                    
                                       i
                                    
                                 
                                 
                                    
                                       t
                                    
                                    
                                       2
                                    
                                 
                                 }
                                 〉
                                 
                                    →
                                    
                                       a
                                       ,
                                       
                                          
                                             ν
                                          
                                          
                                             ′
                                          
                                       
                                    
                                 
                                 〈
                                 
                                    
                                       t
                                    
                                    
                                       1
                                    
                                    
                                       ′
                                    
                                 
                                 |
                                 {
                                 A
                                 
                                    =
                                    
                                       def
                                    
                                 
                                 
                                    
                                       t
                                    
                                    
                                       1
                                    
                                 
                                 
                                    
                                       ⊕
                                    
                                    
                                       i
                                    
                                 
                                 
                                    
                                       t
                                    
                                    
                                       2
                                    
                                 
                                 }
                                 〉
                              , where 
                                 
                                    
                                       ν
                                    
                                    
                                       ′
                                    
                                 
                                 
                                    
                                       |
                                    
                                    
                                       i
                                       /
                                       L
                                    
                                 
                                 =
                                 ν
                              . Therefore, by induction 
                                 Π
                                 (
                                 〈
                                 
                                    
                                       t
                                    
                                    
                                       1
                                    
                                 
                                 |
                                 {
                                 A
                                 
                                    =
                                    
                                       def
                                    
                                 
                                 
                                    
                                       t
                                    
                                    
                                       1
                                    
                                 
                                 
                                    
                                       ⊕
                                    
                                    
                                       i
                                    
                                 
                                 
                                    
                                       t
                                    
                                    
                                       2
                                    
                                 
                                 }
                                 〉
                                 ,
                                 
                                    
                                       ν
                                    
                                    
                                       f
                                    
                                 
                                 )
                                 ∼
                                 Π
                                 (
                                 〈
                                 
                                    
                                       t
                                    
                                    
                                       1
                                    
                                 
                                 |
                                 {
                                 A
                                 
                                    =
                                    
                                       def
                                    
                                 
                                 
                                    
                                       t
                                    
                                    
                                       1
                                    
                                 
                                 }
                                 〉
                                 ,
                                 
                                    
                                       ν
                                    
                                    
                                       f
                                    
                                 
                                 )
                              , and hence 
                                 Π
                                 (
                                 〈
                                 
                                    
                                       t
                                    
                                    
                                       1
                                    
                                 
                                 |
                                 {
                                 A
                                 
                                    =
                                    
                                       def
                                    
                                 
                                 
                                    
                                       t
                                    
                                    
                                       1
                                    
                                 
                                 }
                                 〉
                                 ,
                                 
                                    
                                       ν
                                    
                                    
                                       f
                                    
                                 
                                 )
                                 
                                    →
                                    a
                                 
                                 Π
                                 (
                                 〈
                                 
                                    
                                       t
                                    
                                    
                                       1
                                    
                                    
                                       ′
                                    
                                 
                                 |
                                 {
                                 A
                                 
                                    =
                                    
                                       def
                                    
                                 
                                 
                                    
                                       t
                                    
                                    
                                       1
                                    
                                 
                                 }
                                 〉
                                 ,
                                 
                                    
                                       ν
                                    
                                    
                                       f
                                    
                                 
                                 )
                              , and 
                                 Π
                                 (
                                 〈
                                 
                                    
                                       t
                                    
                                    
                                       1
                                    
                                    
                                       ′
                                    
                                 
                                 |
                                 {
                                 A
                                 
                                    =
                                    
                                       def
                                    
                                 
                                 
                                    
                                       t
                                    
                                    
                                       1
                                    
                                 
                                 }
                                 〉
                                 ,
                                 
                                    
                                       ν
                                    
                                    
                                       f
                                    
                                 
                                 )
                                 ∼
                                 Π
                                 (
                                 〈
                                 
                                    
                                       t
                                    
                                    
                                       1
                                    
                                    
                                       ′
                                    
                                 
                                 |
                                 {
                                 A
                                 
                                    =
                                    
                                       def
                                    
                                 
                                 
                                    
                                       t
                                    
                                    
                                       1
                                    
                                 
                                 
                                    
                                       ⊕
                                    
                                    
                                       i
                                    
                                 
                                 
                                    
                                       t
                                    
                                    
                                       2
                                    
                                 
                                 }
                                 〉
                                 ,
                                 
                                    
                                       ν
                                    
                                    
                                       f
                                    
                                 
                                 )
                              . Thus, by SOS rules Select and Call, 
                                 Π
                                 (
                                 〈
                                 A
                                 |
                                 {
                                 A
                                 
                                    =
                                    
                                       def
                                    
                                 
                                 
                                    
                                       t
                                    
                                    
                                       1
                                    
                                 
                                 }
                                 〉
                                 
                                    
                                       ⊕
                                    
                                    
                                       i
                                    
                                 
                                 〈
                                 A
                                 |
                                 {
                                 A
                                 
                                    =
                                    
                                       def
                                    
                                 
                                 
                                    
                                       t
                                    
                                    
                                       2
                                    
                                 
                                 }
                                 〉
                                 ,
                                 
                                    
                                       ν
                                    
                                    
                                       f
                                    
                                 
                                 )
                                 
                                    →
                                    a
                                 
                                 Π
                                 (
                                 〈
                                 
                                    
                                       t
                                    
                                    
                                       1
                                    
                                    
                                       ′
                                    
                                 
                                 |
                                 {
                                 A
                                 
                                    =
                                    
                                       def
                                    
                                 
                                 
                                    
                                       t
                                    
                                    
                                       1
                                    
                                 
                                 }
                                 〉
                                 ,
                                 
                                    
                                       ν
                                    
                                    
                                       f
                                    
                                 
                                 )
                               and 
                                 Π
                                 (
                                 〈
                                 
                                    
                                       t
                                    
                                    
                                       1
                                    
                                    
                                       ′
                                    
                                 
                                 |
                                 {
                                 A
                                 
                                    =
                                    
                                       def
                                    
                                 
                                 
                                    
                                       t
                                    
                                    
                                       1
                                    
                                 
                                 
                                    
                                       ⊕
                                    
                                    
                                       i
                                    
                                 
                                 
                                    
                                       t
                                    
                                    
                                       2
                                    
                                 
                                 }
                                 〉
                                 ,
                                 
                                    
                                       ν
                                    
                                    
                                       f
                                    
                                 
                                 )
                                 
                                 R
                                 
                                 Π
                                 (
                                 〈
                                 
                                    
                                       t
                                    
                                    
                                       1
                                    
                                    
                                       ′
                                    
                                 
                                 |
                                 {
                                 A
                                 
                                    =
                                    
                                       def
                                    
                                 
                                 
                                    
                                       t
                                    
                                    
                                       1
                                    
                                 
                                 }
                                 〉
                                 ,
                                 
                                    
                                       ν
                                    
                                    
                                       f
                                    
                                 
                                 )
                              . The same discussion holds when 
                                 Π
                                 (
                                 〈
                                 A
                                 |
                                 {
                                 A
                                 
                                    =
                                    
                                       def
                                    
                                 
                                 
                                    
                                       t
                                    
                                    
                                       1
                                    
                                 
                                 }
                                 〉
                                 
                                    
                                       ⊕
                                    
                                    
                                       i
                                    
                                 
                                 〈
                                 A
                                 |
                                 {
                                 A
                                 
                                    =
                                    
                                       def
                                    
                                 
                                 
                                    
                                       t
                                    
                                    
                                       2
                                    
                                 
                                 }
                                 〉
                                 
                                    →
                                    a
                                 
                                 〈
                                 
                                    
                                       t
                                    
                                    
                                       1
                                    
                                    
                                       ′
                                    
                                 
                                 |
                                 {
                                 A
                                 
                                    =
                                    
                                       def
                                    
                                 
                                 
                                    
                                       t
                                    
                                    
                                       1
                                    
                                 
                                 }
                                 〉
                              .

We are going to prove Theorem 16, that the axiomatization of PL-CCS is ground-complete for closed, finite-state terms modulo product line bisimilarity. The idea behind the ground-completeness proof, following the approach of [14], is to show that 
                        t
                        =
                        s
                      via the intermediate results 
                        t
                        =
                        t
                        
                           
                              ⊕
                           
                           
                              i
                           
                        
                        s
                      and 
                        t
                        
                           
                              ⊕
                           
                           
                              i
                           
                        
                        s
                        =
                        s
                     , which imply that 
                        t
                        =
                        t
                        
                           
                              ⊕
                           
                           
                              i
                           
                        
                        s
                        =
                        s
                     . The following lemmata are required before explaining the proof.


                     
                        Lemma 26
                        
                           Let t, s, and r be fully expanded. If 
                           
                              (
                              t
                              
                                 
                                    ⊕
                                 
                                 
                                    i
                                 
                              
                              s
                              )
                              
                                 
                                    ⊕
                                 
                                 
                                    j
                                 
                              
                              r
                              
                                 
                                    ≃
                                 
                                 
                                    PL
                                 
                              
                              r
                           
                           , where 
                           
                              i
                              ≠
                              j
                           
                           , 
                           
                              i
                              ∉
                              
                                 bi
                              
                              (
                              t
                              )
                              ∪
                              
                                 bi
                              
                              (
                              s
                              )
                            
                           and 
                           
                              j
                              ∉
                              b
                              i
                              (
                              r
                              )
                           
                           , then 
                           
                              t
                              
                                 
                                    ⊕
                                 
                                 
                                    j
                                 
                              
                              r
                              
                                 
                                    ≃
                                 
                                 
                                    PL
                                 
                              
                              r
                            
                           and 
                           
                              s
                              
                                 
                                    ⊕
                                 
                                 
                                    j
                                 
                              
                              r
                              
                                 
                                    ≃
                                 
                                 
                                    PL
                                 
                              
                              r
                           
                           .
                        


                     
                        Proof
                        We show that 
                              t
                              
                                 
                                    ⊕
                                 
                                 
                                    j
                                 
                              
                              r
                              
                                 
                                    ≃
                                 
                                 
                                    PL
                                 
                              
                              r
                            as the other case is symmetric. Regarding Definition 5, we must show that
                              
                                 •
                                 for any 
                                       
                                          
                                             
                                                
                                                   ν
                                                
                                                
                                                   f
                                                
                                             
                                          
                                          
                                             1
                                          
                                          
                                             ′
                                          
                                       
                                       ∈
                                       
                                          VFConfig
                                       
                                       (
                                       t
                                       
                                          
                                             ⊕
                                          
                                          
                                             j
                                          
                                       
                                       r
                                       )
                                    , there exists 
                                       
                                          
                                             
                                                
                                                   ν
                                                
                                                
                                                   f
                                                
                                             
                                          
                                          
                                             2
                                          
                                          
                                             ′
                                          
                                       
                                       ∈
                                       
                                          VFConfig
                                       
                                       (
                                       r
                                       )
                                     such that 
                                       Π
                                       (
                                       t
                                       
                                          
                                             ⊕
                                          
                                          
                                             j
                                          
                                       
                                       r
                                       ,
                                       
                                          
                                             
                                                
                                                   ν
                                                
                                                
                                                   f
                                                
                                             
                                          
                                          
                                             1
                                          
                                          
                                             ′
                                          
                                       
                                       )
                                       ∼
                                       Π
                                       (
                                       r
                                       ,
                                       
                                          
                                             
                                                
                                                   ν
                                                
                                                
                                                   f
                                                
                                             
                                          
                                          
                                             2
                                          
                                          
                                             ′
                                          
                                       
                                       )
                                    .

Assume 
                                       
                                          
                                             
                                                
                                                   ν
                                                
                                                
                                                   f
                                                
                                             
                                          
                                          
                                             1
                                          
                                          
                                             ′
                                          
                                       
                                       
                                          
                                             |
                                          
                                          
                                             j
                                          
                                       
                                       =
                                       L
                                    ; hence, 
                                       
                                          
                                             
                                                
                                                   ν
                                                
                                                
                                                   f
                                                
                                             
                                          
                                          
                                             1
                                          
                                          
                                             ′
                                          
                                       
                                     can be written as 
                                       
                                          
                                             ν
                                          
                                          
                                             t
                                          
                                       
                                       ⋅
                                       λ
                                    , where 
                                       
                                          
                                             ν
                                          
                                          
                                             t
                                          
                                       
                                       ∈
                                       
                                          VFConfig
                                       
                                       (
                                       t
                                       )
                                    . Consider 
                                       
                                          
                                             
                                                
                                                   ν
                                                
                                                
                                                   f
                                                
                                             
                                          
                                          
                                             1
                                          
                                       
                                       ∈
                                       
                                          VFConfig
                                       
                                       (
                                       (
                                       t
                                       
                                          
                                             ⊕
                                          
                                          
                                             i
                                          
                                       
                                       s
                                       )
                                       
                                          
                                             ⊕
                                          
                                          
                                             j
                                          
                                       
                                       r
                                       )
                                     such that 
                                       
                                          
                                             
                                                
                                                   ν
                                                
                                                
                                                   f
                                                
                                             
                                          
                                          
                                             1
                                          
                                       
                                       
                                          
                                             |
                                          
                                          
                                             i
                                          
                                       
                                       =
                                       L
                                    , 
                                       
                                          
                                             
                                                
                                                   ν
                                                
                                                
                                                   f
                                                
                                             
                                          
                                          
                                             1
                                          
                                       
                                       
                                          
                                             |
                                          
                                          
                                             j
                                          
                                       
                                       =
                                       L
                                    , and 
                                       ∀
                                       k
                                       ≤
                                       |
                                       
                                          
                                             ν
                                          
                                          
                                             t
                                          
                                       
                                       
                                          
                                             |
                                             ∧
                                             (
                                             k
                                             ≠
                                             i
                                             )
                                             
                                                
                                                   (
                                                   
                                                      
                                                         
                                                            
                                                               ν
                                                            
                                                            
                                                               f
                                                            
                                                         
                                                      
                                                      
                                                         1
                                                      
                                                   
                                                   |
                                                
                                                
                                                   k
                                                
                                             
                                             =
                                             
                                                
                                                   
                                                      
                                                         ν
                                                      
                                                      
                                                         f
                                                      
                                                   
                                                
                                                
                                                   1
                                                
                                                
                                                   ′
                                                
                                             
                                             |
                                          
                                          
                                             k
                                          
                                       
                                       )
                                    . Hence, by Definition 5, 
                                       (
                                       t
                                       
                                          
                                             ⊕
                                          
                                          
                                             i
                                          
                                       
                                       s
                                       )
                                       
                                          
                                             ⊕
                                          
                                          
                                             j
                                          
                                       
                                       r
                                       
                                          
                                             ≃
                                          
                                          
                                             PL
                                          
                                       
                                       r
                                     implies that there exists 
                                       
                                          
                                             ν
                                          
                                          
                                             2
                                          
                                          
                                             f
                                          
                                       
                                       ∈
                                       
                                          VFConfig
                                       
                                       (
                                       r
                                       )
                                     such that 
                                       Π
                                       (
                                       (
                                       t
                                       
                                          
                                             ⊕
                                          
                                          
                                             i
                                          
                                       
                                       s
                                       )
                                       
                                          
                                             ⊕
                                          
                                          
                                             j
                                          
                                       
                                       r
                                       ,
                                       
                                          
                                             ν
                                          
                                          
                                             1
                                          
                                          
                                             f
                                          
                                       
                                       )
                                       ∼
                                       Π
                                       (
                                       r
                                       ,
                                       
                                          
                                             ν
                                          
                                          
                                             2
                                          
                                          
                                             f
                                          
                                       
                                       )
                                    . Define 
                                       
                                          
                                             
                                                
                                                   ν
                                                
                                                
                                                   f
                                                
                                             
                                          
                                          
                                             2
                                          
                                          
                                             ′
                                          
                                       
                                       =
                                       
                                          
                                             
                                                
                                                   ν
                                                
                                                
                                                   f
                                                
                                             
                                          
                                          
                                             2
                                          
                                       
                                    . It immediately follows that 
                                       Π
                                       (
                                       t
                                       
                                          
                                             ⊕
                                          
                                          
                                             j
                                          
                                       
                                       r
                                       ,
                                       
                                          
                                             
                                                
                                                   ν
                                                
                                                
                                                   f
                                                
                                             
                                          
                                          
                                             1
                                          
                                          
                                             ′
                                          
                                       
                                       )
                                       ∼
                                       Π
                                       (
                                       r
                                       ,
                                       
                                          
                                             
                                                
                                                   ν
                                                
                                                
                                                   f
                                                
                                             
                                          
                                          
                                             2
                                          
                                          
                                             ′
                                          
                                       
                                       )
                                    .

Assume 
                                       
                                          
                                             
                                                
                                                   ν
                                                
                                                
                                                   f
                                                
                                             
                                          
                                          
                                             1
                                          
                                          
                                             ′
                                          
                                       
                                       
                                          
                                             |
                                          
                                          
                                             j
                                          
                                       
                                       =
                                       R
                                    , so it can be written as 
                                       
                                          
                                             
                                                
                                                   ν
                                                
                                                
                                                   f
                                                
                                             
                                          
                                          
                                             1
                                          
                                          
                                             ′
                                          
                                       
                                       =
                                       
                                          
                                             ν
                                          
                                          
                                             r
                                          
                                       
                                       ⋅
                                       λ
                                    , where 
                                       
                                          
                                             ν
                                          
                                          
                                             r
                                          
                                       
                                       ∈
                                       
                                          VFConfig
                                       
                                       (
                                       r
                                       )
                                    . Consider 
                                       
                                          
                                             
                                                
                                                   ν
                                                
                                                
                                                   f
                                                
                                             
                                          
                                          
                                             1
                                          
                                       
                                       ∈
                                       
                                          VFConfig
                                       
                                       (
                                       (
                                       t
                                       
                                          
                                             ⊕
                                          
                                          
                                             i
                                          
                                       
                                       s
                                       )
                                       
                                          
                                             ⊕
                                          
                                          
                                             j
                                          
                                       
                                       r
                                       )
                                     such that 
                                       
                                          
                                             
                                                
                                                   ν
                                                
                                                
                                                   f
                                                
                                             
                                          
                                          
                                             1
                                          
                                       
                                       
                                          
                                             |
                                          
                                          
                                             j
                                          
                                       
                                       =
                                       R
                                    , and 
                                       ∀
                                       k
                                       ≤
                                       |
                                       
                                          
                                             ν
                                          
                                          
                                             r
                                          
                                       
                                       
                                          
                                             |
                                             
                                                
                                                   (
                                                   
                                                      
                                                         
                                                            
                                                               ν
                                                            
                                                            
                                                               f
                                                            
                                                         
                                                      
                                                      
                                                         1
                                                      
                                                   
                                                   |
                                                
                                                
                                                   k
                                                
                                             
                                             =
                                             
                                                
                                                   
                                                      
                                                         ν
                                                      
                                                      
                                                         f
                                                      
                                                   
                                                
                                                
                                                   1
                                                
                                                
                                                   ′
                                                
                                             
                                             |
                                          
                                          
                                             k
                                          
                                       
                                       )
                                    . Define 
                                       
                                          
                                             
                                                
                                                   ν
                                                
                                                
                                                   f
                                                
                                             
                                          
                                          
                                             2
                                          
                                          
                                             ′
                                          
                                       
                                       =
                                       
                                          
                                             ν
                                          
                                          
                                             r
                                          
                                       
                                    . It immediately follows that 
                                       Π
                                       (
                                       t
                                       
                                          
                                             ⊕
                                          
                                          
                                             j
                                          
                                       
                                       r
                                       ,
                                       
                                          
                                             
                                                
                                                   ν
                                                
                                                
                                                   f
                                                
                                             
                                          
                                          
                                             1
                                          
                                          
                                             ′
                                          
                                       
                                       )
                                       ∼
                                       Π
                                       (
                                       r
                                       ,
                                       
                                          
                                             
                                                
                                                   ν
                                                
                                                
                                                   f
                                                
                                             
                                          
                                          
                                             2
                                          
                                          
                                             ′
                                          
                                       
                                       )
                                    .

for any 
                                       
                                          
                                             
                                                
                                                   ν
                                                
                                                
                                                   f
                                                
                                             
                                          
                                          
                                             2
                                          
                                          
                                             ′
                                          
                                       
                                       ∈
                                       
                                          VFConfig
                                       
                                       (
                                       r
                                       )
                                    , there exists 
                                       
                                          
                                             
                                                
                                                   ν
                                                
                                                
                                                   f
                                                
                                             
                                          
                                          
                                             1
                                          
                                          
                                             ′
                                          
                                       
                                       ∈
                                       
                                          VFConfig
                                       
                                       (
                                       t
                                       
                                          
                                             ⊕
                                          
                                          
                                             j
                                          
                                       
                                       r
                                       )
                                     such that 
                                       Π
                                       (
                                       t
                                       
                                          
                                             ⊕
                                          
                                          
                                             j
                                          
                                       
                                       r
                                       ,
                                       
                                          
                                             
                                                
                                                   ν
                                                
                                                
                                                   f
                                                
                                             
                                          
                                          
                                             1
                                          
                                          
                                             ′
                                          
                                       
                                       )
                                       ∼
                                       Π
                                       (
                                       r
                                       ,
                                       
                                          
                                             
                                                
                                                   ν
                                                
                                                
                                                   f
                                                
                                             
                                          
                                          
                                             2
                                          
                                          
                                             ′
                                          
                                       
                                       )
                                    . Take 
                                       
                                          
                                             
                                                
                                                   ν
                                                
                                                
                                                   f
                                                
                                             
                                          
                                          
                                             1
                                          
                                          
                                             ′
                                          
                                       
                                     such that 
                                       
                                          
                                             
                                                
                                                   ν
                                                
                                                
                                                   f
                                                
                                             
                                          
                                          
                                             1
                                          
                                          
                                             ′
                                          
                                       
                                       
                                          
                                             |
                                          
                                          
                                             j
                                          
                                       
                                       =
                                       R
                                     and 
                                       ∀
                                       k
                                       ≤
                                       |
                                       
                                          
                                             ν
                                          
                                          
                                             r
                                          
                                       
                                       
                                          
                                             |
                                             ∧
                                             (
                                             k
                                             ≠
                                             j
                                             )
                                             
                                                
                                                   (
                                                   
                                                      
                                                         
                                                            
                                                               ν
                                                            
                                                            
                                                               f
                                                            
                                                         
                                                      
                                                      
                                                         1
                                                      
                                                      
                                                         ′
                                                      
                                                   
                                                   |
                                                
                                                
                                                   k
                                                
                                             
                                             =
                                             
                                                
                                                   
                                                      
                                                         ν
                                                      
                                                      
                                                         f
                                                      
                                                   
                                                
                                                
                                                   2
                                                
                                                
                                                   ′
                                                
                                             
                                             |
                                          
                                          
                                             k
                                          
                                       
                                       )
                                    . It follows immediately that 
                                       Π
                                       (
                                       t
                                       
                                          
                                             ⊕
                                          
                                          
                                             j
                                          
                                       
                                       r
                                       ,
                                       
                                          
                                             
                                                
                                                   ν
                                                
                                                
                                                   f
                                                
                                             
                                          
                                          
                                             1
                                          
                                          
                                             ′
                                          
                                       
                                       )
                                       ∼
                                       Π
                                       (
                                       r
                                       ,
                                       
                                          
                                             
                                                
                                                   ν
                                                
                                                
                                                   f
                                                
                                             
                                          
                                          
                                             2
                                          
                                          
                                             ′
                                          
                                       
                                       )
                                    . □


                     
                        Lemma 27
                        
                           Let 
                           
                              
                                 
                                    ⨁
                                 
                                 
                                    i
                                    ≤
                                    n
                                 
                              
                              
                                 
                                    p
                                 
                                 
                                    i
                                 
                              
                           
                           , where 
                           
                              n
                              >
                              0
                           
                           , be a PL-CCS term such that 
                           
                              
                                 
                                    p
                                 
                                 
                                    i
                                 
                              
                           
                           s are CCS terms. Then 
                           
                              Π
                              (
                              
                                 
                                    ⨁
                                 
                                 
                                    i
                                    ≤
                                    n
                                 
                              
                              
                                 
                                    p
                                 
                                 
                                    i
                                 
                              
                              ,
                              
                                 
                                    ν
                                 
                                 
                                    f
                                 
                              
                              )
                              ∼
                              
                                 
                                    p
                                 
                                 
                                    j
                                 
                              
                           
                           , where 
                           
                              
                                 
                                    ν
                                 
                                 
                                    f
                                 
                              
                              
                                 
                                    |
                                 
                                 
                                    j
                                 
                              
                              =
                              L
                            
                           and 
                           
                              ∀
                              k
                              <
                              j
                              
                                 
                                    (
                                    
                                       
                                          ν
                                       
                                       
                                          f
                                       
                                    
                                    |
                                 
                                 
                                    k
                                 
                              
                              =
                              R
                              )
                           
                           .
                        


                     
                        Proof
                        It is straightforward to check that for a given CCS term p, 
                              Π
                              (
                              p
                              ,
                              
                                 
                                    ν
                                 
                                 
                                    f
                                 
                              
                              )
                              ∼
                              p
                            since 
                              
                                 
                                    ν
                                 
                                 
                                    f
                                 
                              
                            has no effect on deriving transitions of p (
                              
                                 
                                    ν
                                 
                                 
                                    f
                                 
                              
                            is only considered in rules Select, RSelect, and LSelect). Therefore, 
                              Π
                              (
                              
                                 
                                    ⨁
                                 
                                 
                                    i
                                    ≤
                                    n
                                 
                              
                              
                                 
                                    p
                                 
                                 
                                    i
                                 
                              
                              ,
                              
                                 
                                    ν
                                 
                                 
                                    f
                                 
                              
                              )
                              
                                 →
                                 a
                              
                              Π
                              (
                              
                                 
                                    p
                                 
                                 
                                    ′
                                 
                              
                              ,
                              
                                 
                                    ν
                                 
                                 
                                    f
                                 
                              
                              )
                           , since 
                              
                                 
                                    ⨁
                                 
                                 
                                    i
                                    ≤
                                    n
                                 
                              
                              
                                 
                                    p
                                 
                                 
                                    i
                                 
                              
                              
                                 →
                                 
                                    a
                                    ,
                                    ν
                                 
                              
                              
                                 
                                    p
                                 
                                 
                                    ′
                                 
                              
                           , where 
                              ν
                              ⊑
                              
                                 
                                    ν
                                 
                                 
                                    f
                                 
                              
                           . Hence, by SOS rule Select, 
                              
                                 
                                    p
                                 
                                 
                                    j
                                 
                              
                              
                                 →
                                 
                                    a
                                    ,
                                    
                                       
                                          ν
                                       
                                       
                                          ?
                                       
                                    
                                 
                              
                              
                                 
                                    p
                                 
                                 
                                    ′
                                 
                              
                            and 
                              ∀
                              k
                              <
                              j
                              
                                 
                                    (
                                    ν
                                    |
                                 
                                 
                                    k
                                 
                              
                              )
                              =
                              R
                            and 
                              ν
                              
                                 
                                    |
                                 
                                 
                                    j
                                 
                              
                              =
                              L
                           .  □


                     
                        Theorem
                        
                           For all closed finite-state 
                           
                              
                                 PL
                              
                              
                                 -
                              
                              
                                 
                                    CCS
                                 
                                 
                                    f
                                 
                              
                            
                           terms 
                           
                              
                                 
                                    t
                                 
                                 
                                    1
                                 
                              
                            
                           and 
                           
                              
                                 
                                    t
                                 
                                 
                                    2
                                 
                              
                           
                           , 
                           
                              
                                 
                                    t
                                 
                                 
                                    1
                                 
                              
                              
                                 
                                    ≃
                                 
                                 
                                    PL
                                 
                              
                              
                                 
                                    t
                                 
                                 
                                    2
                                 
                              
                            
                           implies 
                           
                              
                                 
                                    t
                                 
                                 
                                    1
                                 
                              
                              =
                              
                                 
                                    t
                                 
                                 
                                    2
                                 
                              
                           
                           .
                        


                     
                        Proof
                        By Theorem 19, 
                              
                                 PL
                              
                              -
                              
                                 
                                    CCS
                                 
                                 
                                    f
                                 
                              
                            terms t and s can be derived by our axiomatization into fully expanded terms 
                              
                                 
                                    t
                                 
                                 
                                    ′
                                 
                              
                              ≡
                              
                                 
                                    ⨁
                                 
                                 
                                    i
                                    ≤
                                    n
                                 
                              
                              
                                 
                                    p
                                 
                                 
                                    i
                                 
                              
                            and 
                              
                                 
                                    s
                                 
                                 
                                    ′
                                 
                              
                              ≡
                              
                                 
                                    ⨁
                                 
                                 
                                    j
                                    ≤
                                    m
                                 
                              
                              
                                 
                                    q
                                 
                                 
                                    j
                                 
                              
                           , where 
                              
                                 
                                    p
                                 
                                 
                                    i
                                 
                              
                           s and 
                              
                                 
                                    q
                                 
                                 
                                    i
                                 
                              
                           s are CCS term such that every recursive specification E included in 
                              
                                 
                                    p
                                 
                                 
                                    i
                                 
                              
                           s or 
                              
                                 
                                    q
                                 
                                 
                                    i
                                 
                              
                           s is essentially finite state. Since our axiomatization subsumes CCS axiomatization, completeness of CCS axiomatization for closed finite-state CCS terms [17] implies 
                              p
                              ∼
                              q
                              ⇔
                              p
                              =
                              q
                           . The soundness of our axiomatization yields 
                              t
                              
                                 
                                    ≃
                                 
                                 
                                    PL
                                 
                              
                              
                                 
                                    t
                                 
                                 
                                    ′
                                 
                              
                            and 
                              s
                              
                                 
                                    ≃
                                 
                                 
                                    PL
                                 
                              
                              
                                 
                                    s
                                 
                                 
                                    ′
                                 
                              
                           . By transitivity of product line bisimilarity, 
                              
                                 
                                    t
                                 
                                 
                                    ′
                                 
                              
                              
                                 
                                    ≃
                                 
                                 
                                    PL
                                 
                              
                              
                                 
                                    s
                                 
                                 
                                    ′
                                 
                              
                           . Therefore, it is enough to prove that 
                              
                                 
                                    t
                                 
                                 
                                    ′
                                 
                              
                              
                                 
                                    ⊕
                                 
                                 
                                    i
                                 
                              
                              
                                 
                                    s
                                 
                                 
                                    ′
                                 
                              
                              
                                 
                                    ≃
                                 
                                 
                                    PL
                                 
                              
                              
                                 
                                    s
                                 
                                 
                                    ′
                                 
                              
                              ⇒
                              
                                 
                                    t
                                 
                                 
                                    ′
                                 
                              
                              
                                 
                                    ⊕
                                 
                                 
                                    i
                                 
                              
                              
                                 
                                    s
                                 
                                 
                                    ′
                                 
                              
                              =
                              
                                 
                                    s
                                 
                                 
                                    ′
                                 
                              
                            and 
                              
                                 
                                    t
                                 
                                 
                                    ′
                                 
                              
                              
                                 
                                    ≃
                                 
                                 
                                    PL
                                 
                              
                              
                                 
                                    t
                                 
                                 
                                    ′
                                 
                              
                              
                                 
                                    ⊕
                                 
                                 
                                    i
                                 
                              
                              
                                 
                                    s
                                 
                                 
                                    ′
                                 
                              
                              ⇒
                              
                                 
                                    t
                                 
                                 
                                    ′
                                 
                              
                              =
                              
                                 
                                    t
                                 
                                 
                                    ′
                                 
                              
                              
                                 
                                    ⊕
                                 
                                 
                                    i
                                 
                              
                              
                                 
                                    s
                                 
                                 
                                    ′
                                 
                              
                           , where i is free in 
                              
                                 
                                    s
                                 
                                 
                                    ′
                                 
                              
                            and 
                              
                                 
                                    t
                                 
                                 
                                    ′
                                 
                              
                           . These properties are sufficient to prove the theorem as follows: If 
                              
                                 
                                    t
                                 
                                 
                                    ′
                                 
                              
                              
                                 
                                    ≃
                                 
                                 
                                    PL
                                 
                              
                              
                                 
                                    s
                                 
                                 
                                    ′
                                 
                              
                           , then, by the fact that product line bisimilarity is reflexive (i.e., 
                              
                                 
                                    t
                                 
                                 
                                    ′
                                 
                              
                              
                                 
                                    ≃
                                 
                                 
                                    PL
                                 
                              
                              
                                 
                                    t
                                 
                                 
                                    ′
                                 
                              
                            and 
                              
                                 
                                    s
                                 
                                 
                                    ′
                                 
                              
                              
                                 
                                    ≃
                                 
                                 
                                    PL
                                 
                              
                              
                                 
                                    s
                                 
                                 
                                    ′
                                 
                              
                           ) and the fact that product line bisimilarity is a congruence on fully expanded PL-CCS terms, we have 
                              
                                 
                                    t
                                 
                                 
                                    ′
                                 
                              
                              
                                 
                                    ⊕
                                 
                                 
                                    i
                                 
                              
                              
                                 
                                    t
                                 
                                 
                                    ′
                                 
                              
                              
                                 
                                    ≃
                                 
                                 
                                    PL
                                 
                              
                              
                                 
                                    s
                                 
                                 
                                    ′
                                 
                              
                              
                                 
                                    ⊕
                                 
                                 
                                    i
                                 
                              
                              
                                 
                                    t
                                 
                                 
                                    ′
                                 
                              
                            and 
                              
                                 
                                    t
                                 
                                 
                                    ′
                                 
                              
                              
                                 
                                    ⊕
                                 
                                 
                                    i
                                 
                              
                              
                                 
                                    s
                                 
                                 
                                    ′
                                 
                              
                              
                                 
                                    ≃
                                 
                                 
                                    PL
                                 
                              
                              
                                 
                                    s
                                 
                                 
                                    ′
                                 
                              
                              
                                 
                                    ⊕
                                 
                                 
                                    i
                                 
                              
                              
                                 
                                    s
                                 
                                 
                                    ′
                                 
                              
                            (note that 
                              
                                 
                                    t
                                 
                                 
                                    ′
                                 
                              
                              
                                 
                                    ⊕
                                 
                                 
                                    i
                                 
                              
                              
                                 
                                    s
                                 
                                 
                                    ′
                                 
                              
                            is still fully expanded). The soundness of axiomatization, more in particular the validity of Axiom 
                              
                                 
                                    A
                                 
                                 
                                    3
                                 
                              
                           , implies that 
                              
                                 
                                    t
                                 
                                 
                                    ′
                                 
                              
                              
                                 
                                    ⊕
                                 
                                 
                                    i
                                 
                              
                              
                                 
                                    t
                                 
                                 
                                    ′
                                 
                              
                              
                                 
                                    ≃
                                 
                                 
                                    PL
                                 
                              
                              
                                 
                                    t
                                 
                                 
                                    ′
                                 
                              
                            and 
                              
                                 
                                    s
                                 
                                 
                                    ′
                                 
                              
                              
                                 
                                    ⊕
                                 
                                 
                                    i
                                 
                              
                              
                                 
                                    s
                                 
                                 
                                    ′
                                 
                              
                              
                                 
                                    ≃
                                 
                                 
                                    PL
                                 
                              
                              
                                 
                                    s
                                 
                                 
                                    ′
                                 
                              
                           . Using symmetry and transitivity of product line bisimilarity, 
                              
                                 
                                    t
                                 
                                 
                                    ′
                                 
                              
                              
                                 
                                    ≃
                                 
                                 
                                    PL
                                 
                              
                              
                                 
                                    t
                                 
                                 
                                    ′
                                 
                              
                              
                                 
                                    ⊕
                                 
                                 
                                    i
                                 
                              
                              
                                 
                                    s
                                 
                                 
                                    ′
                                 
                              
                            and 
                              
                                 
                                    t
                                 
                                 
                                    ′
                                 
                              
                              
                                 
                                    ⊕
                                 
                                 
                                    i
                                 
                              
                              
                                 
                                    s
                                 
                                 
                                    ′
                                 
                              
                              
                                 
                                    ≃
                                 
                                 
                                    PL
                                 
                              
                              
                                 
                                    s
                                 
                                 
                                    ′
                                 
                              
                            are obtained. Thus, above properties yield that 
                              
                                 
                                    t
                                 
                                 
                                    ′
                                 
                              
                              =
                              
                                 
                                    t
                                 
                                 
                                    ′
                                 
                              
                              
                                 
                                    ⊕
                                 
                                 
                                    i
                                 
                              
                              
                                 
                                    s
                                 
                                 
                                    ′
                                 
                              
                            and 
                              
                                 
                                    t
                                 
                                 
                                    ′
                                 
                              
                              
                                 
                                    ⊕
                                 
                                 
                                    i
                                 
                              
                              
                                 
                                    s
                                 
                                 
                                    ′
                                 
                              
                              =
                              
                                 
                                    s
                                 
                                 
                                    ′
                                 
                              
                           . These last results can be combined to show that 
                              
                                 
                                    t
                                 
                                 
                                    ′
                                 
                              
                              =
                              
                                 
                                    t
                                 
                                 
                                    ′
                                 
                              
                              
                                 
                                    ⊕
                                 
                                 
                                    i
                                 
                              
                              
                                 
                                    s
                                 
                                 
                                    ′
                                 
                              
                              =
                              
                                 
                                    s
                                 
                                 
                                    ′
                                 
                              
                           . Consequently, 
                              t
                              =
                              
                                 
                                    t
                                 
                                 
                                    ′
                                 
                              
                            and 
                              s
                              =
                              
                                 
                                    s
                                 
                                 
                                    ′
                                 
                              
                            together with 
                              
                                 
                                    t
                                 
                                 
                                    ′
                                 
                              
                              =
                              
                                 
                                    s
                                 
                                 
                                    ′
                                 
                              
                            result 
                              t
                              =
                              s
                           .

For all fully expanded 
                              
                                 PL
                              
                              -
                              
                                 
                                    CCS
                                 
                                 
                                    f
                                 
                              
                            terms 
                              
                                 
                                    t
                                 
                                 
                                    ′
                                 
                              
                              
                                 
                                    ⊕
                                 
                                 
                                    i
                                 
                              
                              
                                 
                                    s
                                 
                                 
                                    ′
                                 
                              
                           , 
                              
                                 
                                    t
                                 
                                 
                                    ′
                                 
                              
                            and 
                              
                                 
                                    s
                                 
                                 
                                    ′
                                 
                              
                           , where 
                              
                                 
                                    t
                                 
                                 
                                    ′
                                 
                              
                              ≡
                              
                                 
                                    ⨁
                                 
                                 
                                    i
                                    ≤
                                    n
                                 
                              
                              
                                 
                                    p
                                 
                                 
                                    i
                                 
                              
                            and 
                              
                                 
                                    s
                                 
                                 
                                    ′
                                 
                              
                              ≡
                              
                                 
                                    ⨁
                                 
                                 
                                    j
                                    ≤
                                    m
                                 
                              
                              
                                 
                                    q
                                 
                                 
                                    j
                                 
                              
                           , 
                              
                                 
                                    t
                                 
                                 
                                    ′
                                 
                              
                              
                                 
                                    ⊕
                                 
                                 
                                    i
                                 
                              
                              
                                 
                                    s
                                 
                                 
                                    ′
                                 
                              
                              
                                 
                                    ≃
                                 
                                 
                                    PL
                                 
                              
                              
                                 
                                    s
                                 
                                 
                                    ′
                                 
                              
                            implies 
                              
                                 
                                    t
                                 
                                 
                                    ′
                                 
                              
                              
                                 
                                    ⊕
                                 
                                 
                                    i
                                 
                              
                              
                                 
                                    s
                                 
                                 
                                    ′
                                 
                              
                              =
                              
                                 
                                    s
                                 
                                 
                                    ′
                                 
                              
                           , is proven by induction on number of CCS terms of 
                              
                                 
                                    t
                                 
                                 
                                    ′
                                 
                              
                           , i.e. n. The proof of 
                              
                                 
                                    t
                                 
                                 
                                    ′
                                 
                              
                              
                                 
                                    ≃
                                 
                                 
                                    PL
                                 
                              
                              
                                 
                                    t
                                 
                                 
                                    ′
                                 
                              
                              
                                 
                                    ⊕
                                 
                                 
                                    i
                                 
                              
                              
                                 
                                    s
                                 
                                 
                                    ′
                                 
                              
                            implies 
                              
                                 
                                    t
                                 
                                 
                                    ′
                                 
                              
                              =
                              
                                 
                                    t
                                 
                                 
                                    ′
                                 
                              
                              
                                 
                                    ⊕
                                 
                                 
                                    i
                                 
                              
                              
                                 
                                    s
                                 
                                 
                                    ′
                                 
                              
                            is similar and therefore omitted.

The base case of the induction corresponds to the case that 
                              n
                              =
                              0
                           . Therefore, 
                              
                                 
                                    p
                                 
                                 
                                    1
                                 
                              
                              
                                 
                                    ⊕
                                 
                                 
                                    i
                                 
                              
                              
                                 
                                    s
                                 
                                 
                                    ′
                                 
                              
                              
                                 
                                    ≃
                                 
                                 
                                    PL
                                 
                              
                              s
                            implies for 
                              
                                 
                                    
                                       
                                          ν
                                       
                                       
                                          f
                                       
                                    
                                 
                                 
                                    1
                                 
                              
                           , where 
                              
                                 
                                    
                                       
                                          ν
                                       
                                       
                                          f
                                       
                                    
                                 
                                 
                                    1
                                 
                              
                              
                                 
                                    |
                                 
                                 
                                    1
                                 
                              
                              =
                              L
                           , there exists 
                              
                                 
                                    
                                       
                                          ν
                                       
                                       
                                          f
                                       
                                    
                                 
                                 
                                    2
                                 
                              
                            such that 
                              Π
                              (
                              
                                 
                                    p
                                 
                                 
                                    1
                                 
                              
                              
                                 
                                    ⊕
                                 
                                 
                                    i
                                 
                              
                              
                                 
                                    s
                                 
                                 
                                    ′
                                 
                              
                              ,
                              
                                 
                                    
                                       
                                          ν
                                       
                                       
                                          f
                                       
                                    
                                 
                                 
                                    1
                                 
                              
                              )
                              ∼
                              Π
                              (
                              
                                 
                                    s
                                 
                                 
                                    ′
                                 
                              
                              ,
                              
                                 
                                    
                                       
                                          ν
                                       
                                       
                                          f
                                       
                                    
                                 
                                 
                                    2
                                 
                              
                              )
                           . By Lemma 27, 
                              Π
                              (
                              
                                 
                                    p
                                 
                                 
                                    1
                                 
                              
                              
                                 
                                    ⊕
                                 
                                 
                                    i
                                 
                              
                              
                                 
                                    s
                                 
                                 
                                    ′
                                 
                              
                              ,
                              
                                 
                                    
                                       
                                          ν
                                       
                                       
                                          f
                                       
                                    
                                 
                                 
                                    1
                                 
                              
                              )
                              ∼
                              
                                 
                                    p
                                 
                                 
                                    1
                                 
                              
                            and 
                              Π
                              (
                              
                                 
                                    s
                                 
                                 
                                    ′
                                 
                              
                              ,
                              
                                 
                                    
                                       
                                          ν
                                       
                                       
                                          f
                                       
                                    
                                 
                                 
                                    2
                                 
                              
                              )
                              ∼
                              
                                 
                                    q
                                 
                                 
                                    k
                                 
                              
                           , where 
                              
                                 
                                    
                                       
                                          ν
                                       
                                       
                                          f
                                       
                                    
                                 
                                 
                                    2
                                 
                              
                              
                                 
                                    |
                                 
                                 
                                    k
                                 
                              
                              =
                              L
                            and 
                              ∀
                              j
                              <
                              k
                              
                                 
                                    (
                                    
                                       
                                          
                                             
                                                ν
                                             
                                             
                                                f
                                             
                                          
                                       
                                       
                                          2
                                       
                                    
                                    |
                                 
                                 
                                    j
                                 
                              
                              =
                              R
                              )
                           . Therefore, 
                              
                                 
                                    p
                                 
                                 
                                    1
                                 
                              
                              ∼
                              
                                 
                                    q
                                 
                                 
                                    k
                                 
                              
                            and consequently by completeness of axiomatization of CCS, 
                              
                                 
                                    p
                                 
                                 
                                    1
                                 
                              
                              =
                              
                                 
                                    q
                                 
                                 
                                    k
                                 
                              
                           . Thus, 
                              
                                 
                                    p
                                 
                                 
                                    1
                                 
                              
                              
                                 
                                    ⊕
                                 
                                 
                                    i
                                 
                              
                              
                                 
                                    s
                                 
                                 
                                    ′
                                 
                              
                              =
                              
                                 
                                    q
                                 
                                 
                                    k
                                 
                              
                              
                                 
                                    ⊕
                                 
                                 
                                    i
                                 
                              
                              
                                 
                                    ⨁
                                 
                                 
                                    j
                                    ≤
                                    m
                                 
                              
                              
                                 
                                    q
                                 
                                 
                                    j
                                 
                              
                              
                                 
                                    =
                                 
                                 
                                    
                                       
                                          A
                                       
                                       
                                          1
                                       
                                    
                                    ,
                                    
                                       
                                          A
                                       
                                       
                                          2
                                       
                                    
                                    ,
                                    
                                       
                                          A
                                       
                                       
                                          3
                                       
                                    
                                 
                              
                              
                                 
                                    s
                                 
                                 
                                    ′
                                 
                              
                           .

Assume that for all 
                              0
                              <
                              w
                              <
                              n
                            such that 
                              
                                 
                                    t
                                 
                                 
                                    ′
                                 
                              
                              ≡
                              
                                 
                                    ⨁
                                 
                                 
                                    i
                                    ≤
                                    w
                                 
                              
                              
                                 
                                    p
                                 
                                 
                                    i
                                 
                              
                           , 
                              
                                 
                                    t
                                 
                                 
                                    ′
                                 
                              
                              
                                 
                                    ⊕
                                 
                                 
                                    i
                                 
                              
                              
                                 
                                    s
                                 
                                 
                                    ′
                                 
                              
                              
                                 
                                    ≃
                                 
                                 
                                    PL
                                 
                              
                              
                                 
                                    s
                                 
                                 
                                    ′
                                 
                              
                            implies 
                              
                                 
                                    t
                                 
                                 
                                    ′
                                 
                              
                              
                                 
                                    ⊕
                                 
                                 
                                    i
                                 
                              
                              
                                 
                                    s
                                 
                                 
                                    ′
                                 
                              
                              =
                              
                                 
                                    s
                                 
                                 
                                    ′
                                 
                              
                           . We prove that 
                              
                                 
                                    t
                                 
                                 
                                    ′
                                 
                              
                              
                                 
                                    ⊕
                                 
                                 
                                    i
                                 
                              
                              
                                 
                                    s
                                 
                                 
                                    ′
                                 
                              
                              
                                 
                                    ≃
                                 
                                 
                                    PL
                                 
                              
                              
                                 
                                    s
                                 
                                 
                                    ′
                                 
                              
                           , where 
                              
                                 
                                    t
                                 
                                 
                                    ′
                                 
                              
                              ≡
                              
                                 
                                    ⨁
                                 
                                 
                                    i
                                    ≤
                                    n
                                 
                              
                              
                                 
                                    p
                                 
                                 
                                    i
                                 
                              
                           , implies 
                              
                                 
                                    t
                                 
                                 
                                    ′
                                 
                              
                              
                                 
                                    ⊕
                                 
                                 
                                    i
                                 
                              
                              
                                 
                                    s
                                 
                                 
                                    ′
                                 
                              
                              =
                              
                                 
                                    s
                                 
                                 
                                    ′
                                 
                              
                           . By Lemma 26, 
                              
                                 
                                    t
                                 
                                 
                                    ′
                                 
                              
                              
                                 
                                    ⊕
                                 
                                 
                                    i
                                 
                              
                              
                                 
                                    s
                                 
                                 
                                    ′
                                 
                              
                              
                                 
                                    ≃
                                 
                                 
                                    PL
                                 
                              
                              
                                 
                                    s
                                 
                                 
                                    ′
                                 
                              
                            implies 
                              
                                 
                                    p
                                 
                                 
                                    1
                                 
                              
                              
                                 
                                    ⊕
                                 
                                 
                                    i
                                 
                              
                              
                                 
                                    s
                                 
                                 
                                    ′
                                 
                              
                              
                                 
                                    ≃
                                 
                                 
                                    PL
                                 
                              
                              
                                 
                                    s
                                 
                                 
                                    ′
                                 
                              
                            and 
                              (
                              
                                 
                                    ⨁
                                 
                                 
                                    1
                                    <
                                    i
                                    ≤
                                    n
                                 
                              
                              
                                 
                                    p
                                 
                                 
                                    i
                                 
                              
                              )
                              
                                 
                                    ⊕
                                 
                                 
                                    i
                                 
                              
                              
                                 
                                    s
                                 
                                 
                                    ′
                                 
                              
                              
                                 
                                    ≃
                                 
                                 
                                    PL
                                 
                              
                              
                                 
                                    s
                                 
                                 
                                    ′
                                 
                              
                           . By application of axiom 
                              
                                 
                                    N
                                 
                                 
                                    6
                                 
                              
                           , 
                              
                                 
                                    ⨁
                                 
                                 
                                    1
                                    <
                                    i
                                    ≤
                                    n
                                 
                              
                              
                                 
                                    p
                                 
                                 
                                    i
                                 
                              
                            can be derived into 
                              
                                 
                                    t
                                 
                                 
                                    ″
                                 
                              
                              ≡
                              
                                 
                                    ⨁
                                 
                                 
                                    k
                                    <
                                    n
                                 
                              
                              
                                 
                                    p
                                 
                                 
                                    k
                                 
                              
                           . Therefore, by soundness of axiomatization and transitivity of product line bisimilarity, 
                              (
                              
                                 
                                    ⨁
                                 
                                 
                                    k
                                    <
                                    n
                                 
                              
                              
                                 
                                    p
                                 
                                 
                                    k
                                 
                              
                              )
                              
                                 
                                    ⊕
                                 
                                 
                                    i
                                 
                              
                              
                                 
                                    s
                                 
                                 
                                    ′
                                 
                              
                              
                                 
                                    ≃
                                 
                                 
                                    PL
                                 
                              
                              
                                 
                                    s
                                 
                                 
                                    ′
                                 
                              
                           . By induction 
                              
                                 
                                    p
                                 
                                 
                                    1
                                 
                              
                              
                                 
                                    ⊕
                                 
                                 
                                    i
                                 
                              
                              
                                 
                                    s
                                 
                                 
                                    ′
                                 
                              
                              =
                              
                                 
                                    s
                                 
                                 
                                    ′
                                 
                              
                           , 
                              
                                 
                                    t
                                 
                                 
                                    ″
                                 
                              
                              
                                 
                                    ⊕
                                 
                                 
                                    i
                                 
                              
                              
                                 
                                    s
                                 
                                 
                                    ′
                                 
                              
                              =
                              
                                 
                                    s
                                 
                                 
                                    ′
                                 
                              
                           . Therefore, 
                              
                                 
                                    t
                                 
                                 
                                    ′
                                 
                              
                              
                                 
                                    ⊕
                                 
                                 
                                    i
                                 
                              
                              
                                 
                                    s
                                 
                                 
                                    ′
                                 
                              
                              =
                              (
                              
                                 
                                    p
                                 
                                 
                                    1
                                 
                              
                              
                                 
                                    ⊕
                                 
                                 
                                    1
                                 
                              
                              (
                              
                                 
                                    ⨁
                                 
                                 
                                    1
                                    <
                                    i
                                    ≤
                                    n
                                 
                              
                              
                                 
                                    p
                                 
                                 
                                    i
                                 
                              
                              )
                              )
                              
                                 
                                    ⊕
                                 
                                 
                                    i
                                 
                              
                              
                                 
                                    s
                                 
                                 
                                    ′
                                 
                              
                              
                                 
                                    =
                                 
                                 
                                    
                                       
                                          N
                                       
                                       
                                          6
                                       
                                    
                                 
                              
                              (
                              
                                 
                                    p
                                 
                                 
                                    1
                                 
                              
                              
                                 
                                    ⊕
                                 
                                 
                                    z
                                 
                              
                              (
                              
                                 
                                    ⨁
                                 
                                 
                                    1
                                    <
                                    i
                                    ≤
                                    n
                                 
                              
                              
                                 
                                    p
                                 
                                 
                                    i
                                 
                              
                              )
                              )
                              
                                 
                                    ⊕
                                 
                                 
                                    i
                                 
                              
                              
                                 
                                    s
                                 
                                 
                                    ′
                                 
                              
                              
                                 
                                    =
                                 
                                 
                                    
                                       
                                          A
                                       
                                       
                                          1
                                       
                                    
                                    ,
                                    
                                       
                                          A
                                       
                                       
                                          2
                                       
                                    
                                 
                              
                              (
                              
                                 
                                    ⨁
                                 
                                 
                                    1
                                    <
                                    i
                                    ≤
                                    n
                                 
                              
                              
                                 
                                    p
                                 
                                 
                                    i
                                 
                              
                              )
                              
                                 
                                    ⊕
                                 
                                 
                                    z
                                 
                              
                              (
                              
                                 
                                    p
                                 
                                 
                                    1
                                 
                              
                              
                                 
                                    ⊕
                                 
                                 
                                    i
                                 
                              
                              
                                 
                                    s
                                 
                                 
                                    ′
                                 
                              
                              )
                              =
                              (
                              
                                 
                                    ⨁
                                 
                                 
                                    1
                                    <
                                    i
                                    ≤
                                    n
                                 
                              
                              
                                 
                                    p
                                 
                                 
                                    i
                                 
                              
                              )
                              
                                 
                                    ⊕
                                 
                                 
                                    z
                                 
                              
                              
                                 
                                    s
                                 
                                 
                                    ′
                                 
                              
                              =
                              
                                 
                                    t
                                 
                                 
                                    ″
                                 
                              
                              
                                 
                                    ⊕
                                 
                                 
                                    i
                                 
                              
                              
                                 
                                    s
                                 
                                 
                                    ′
                                 
                              
                              =
                              
                                 
                                    s
                                 
                                 
                                    ′
                                 
                              
                           , where z is a fresh index such that 
                              z
                              >
                              m
                           , 
                              z
                              >
                              n
                           , and 
                              z
                              ≠
                              i
                           .

We use the following so called reduction Lemma taken from [51] to complete the proof. The right-hand sides of the bi-implications express the unfolding of the fixed points: in case of minimum, a single element p, is removed while for the maximum it is added.


                     
                        Lemma 28
                        
                           For ψ a monotonic function on a powerset 
                           
                              
                                 Pow
                              
                              (
                              D
                              )
                            
                           with 
                           
                              p
                              ∈
                              D
                           
                           , we have:
                           
                              
                                 
                                    
                                       
                                          
                                             
                                                p
                                                ∈
                                                μ
                                                V
                                                .
                                                ψ
                                                (
                                                V
                                                )
                                                ⇔
                                                p
                                                ∈
                                                ψ
                                                (
                                                μ
                                                V
                                                .
                                                (
                                                ψ
                                                (
                                                V
                                                )
                                                ∖
                                                {
                                                p
                                                }
                                                )
                                                )
                                                ,
                                             
                                          
                                          
                                             
                                                p
                                                ∈
                                                ν
                                                V
                                                .
                                                ψ
                                                (
                                                V
                                                )
                                                ⇔
                                                p
                                                ∈
                                                ψ
                                                (
                                                ν
                                                V
                                                .
                                                (
                                                ψ
                                                (
                                                V
                                                )
                                                ∪
                                                {
                                                p
                                                }
                                                )
                                                )
                                                .
                                             
                                          
                                       
                                    
                                 
                              
                           
                        

The proof of Theorem 23 follows:

“⇒” Suppose 
                        r
                        
                           
                              ≃
                           
                           
                              PL
                           
                        
                        s
                      and let 
                        φ
                        ∈
                        
                           mv
                        
                        −
                        
                           
                              L
                           
                           
                              μ
                           
                        
                     . We prove that for all valid full configuration 
                        
                           
                              ν
                           
                           
                              1
                           
                           
                              f
                           
                        
                        ∈
                        
                           VFConfig
                        
                        (
                        r
                        )
                      and 
                        
                           
                              ν
                           
                           
                              2
                           
                           
                              f
                           
                        
                        ∈
                        
                           VFConfig
                        
                        (
                        s
                        )
                      that 
                        Π
                        (
                        r
                        ,
                        
                           
                              ν
                           
                           
                              1
                           
                           
                              f
                           
                        
                        )
                        ∼
                        Π
                        (
                        s
                        ,
                        
                           
                              ν
                           
                           
                              2
                           
                           
                              f
                           
                        
                        )
                     , 
                        
                           
                              ν
                           
                           
                              1
                           
                           
                              f
                           
                        
                        ∈
                        〚
                        φ
                        〛
                        (
                        r
                        )
                      iff 
                        
                           
                              ν
                           
                           
                              2
                           
                           
                              f
                           
                        
                        ∈
                        〚
                        φ
                        〛
                        (
                        s
                        )
                     . The proof is managed by induction on the structure of φ.
                        
                           1.
                           If 
                                 φ
                                 =
                                 
                                    true
                                 
                              , then obviously 
                                 
                                    
                                       ν
                                    
                                    
                                       1
                                    
                                    
                                       f
                                    
                                 
                                 ∈
                                 〚
                                 φ
                                 〛
                                 (
                                 r
                                 )
                               and 
                                 
                                    
                                       ν
                                    
                                    
                                       2
                                    
                                    
                                       f
                                    
                                 
                                 ∈
                                 〚
                                 φ
                                 〛
                                 (
                                 s
                                 )
                              .

If 
                                 φ
                                 =
                                 
                                    
                                       φ
                                    
                                    
                                       1
                                    
                                 
                                 ∧
                                 
                                    
                                       φ
                                    
                                    
                                       2
                                    
                                 
                              , then by definition 
                                 
                                    
                                       ν
                                    
                                    
                                       1
                                    
                                    
                                       f
                                    
                                 
                                 ∈
                                 〚
                                 
                                    
                                       φ
                                    
                                    
                                       1
                                    
                                 
                                 〛
                                 (
                                 r
                                 )
                               and 
                                 
                                    
                                       ν
                                    
                                    
                                       1
                                    
                                    
                                       f
                                    
                                 
                                 ∈
                                 〚
                                 
                                    
                                       φ
                                    
                                    
                                       2
                                    
                                 
                                 〛
                                 (
                                 r
                                 )
                              , and the claim follows by straightforward induction.

If 
                                 φ
                                 =
                                 
                                    
                                       φ
                                    
                                    
                                       1
                                    
                                 
                                 ∨
                                 
                                    
                                       φ
                                    
                                    
                                       2
                                    
                                 
                              , it is proved similar to previous case.

If 
                                 φ
                                 =
                                 〈
                                 a
                                 〉
                                 
                                    
                                       φ
                                    
                                    
                                       ′
                                    
                                 
                              , then by definition 
                                 
                                    
                                       ν
                                    
                                    
                                       1
                                    
                                    
                                       f
                                    
                                 
                                 ∈
                                 〚
                                 φ
                                 〛
                                 (
                                 r
                                 )
                              , if 
                                 
                                    
                                       ν
                                    
                                    
                                       1
                                    
                                    
                                       f
                                    
                                 
                                 ∈
                                 
                                    
                                       R
                                    
                                    
                                       a
                                    
                                 
                                 (
                                 r
                                 ,
                                 
                                    
                                       r
                                    
                                    
                                       ′
                                    
                                 
                                 )
                               and 
                                 
                                    
                                       ν
                                    
                                    
                                       1
                                    
                                    
                                       f
                                    
                                 
                                 ∈
                                 〚
                                 
                                    
                                       φ
                                    
                                    
                                       ′
                                    
                                 
                                 〛
                                 (
                                 
                                    
                                       r
                                    
                                    
                                       ′
                                    
                                 
                                 )
                               for some 
                                 
                                    
                                       r
                                    
                                    
                                       ′
                                    
                                 
                              . Hence 
                                 
                                    
                                       ν
                                    
                                    
                                       1
                                    
                                    
                                       f
                                    
                                 
                                 ∈
                                 
                                    
                                       R
                                    
                                    
                                       a
                                    
                                 
                                 (
                                 r
                                 ,
                                 
                                    
                                       r
                                    
                                    
                                       ′
                                    
                                 
                                 )
                               implies that 
                                 r
                                 
                                    →
                                    
                                       a
                                       ,
                                       
                                          
                                             ν
                                          
                                          
                                             1
                                          
                                       
                                    
                                 
                                 
                                    
                                       r
                                    
                                    
                                       ′
                                    
                                 
                               for some 
                                 
                                    
                                       ν
                                    
                                    
                                       1
                                    
                                 
                               such that 
                                 
                                    
                                       ν
                                    
                                    
                                       1
                                    
                                 
                                 ⊑
                                 
                                    
                                       ν
                                    
                                    
                                       1
                                    
                                    
                                       f
                                    
                                 
                              . Consequently 
                                 Π
                                 (
                                 r
                                 ,
                                 
                                    
                                       ν
                                    
                                    
                                       1
                                    
                                    
                                       f
                                    
                                 
                                 )
                                 
                                    →
                                    a
                                 
                                 Π
                                 (
                                 
                                    
                                       r
                                    
                                    
                                       ′
                                    
                                 
                                 ,
                                 
                                    
                                       ν
                                    
                                    
                                       1
                                    
                                    
                                       f
                                    
                                 
                                 )
                              . By assumption, 
                                 Π
                                 (
                                 r
                                 ,
                                 
                                    
                                       ν
                                    
                                    
                                       1
                                    
                                    
                                       f
                                    
                                 
                                 )
                                 ∼
                                 Π
                                 (
                                 s
                                 ,
                                 
                                    
                                       ν
                                    
                                    
                                       2
                                    
                                    
                                       f
                                    
                                 
                                 )
                               implies 
                                 Π
                                 (
                                 s
                                 ,
                                 
                                    
                                       ν
                                    
                                    
                                       2
                                    
                                    
                                       f
                                    
                                 
                                 )
                                 
                                    →
                                    a
                                 
                                 Π
                                 (
                                 
                                    
                                       s
                                    
                                    
                                       ′
                                    
                                 
                                 ,
                                 
                                    
                                       ν
                                    
                                    
                                       2
                                    
                                    
                                       f
                                    
                                 
                                 )
                               and 
                                 Π
                                 (
                                 
                                    
                                       r
                                    
                                    
                                       ′
                                    
                                 
                                 ,
                                 
                                    
                                       ν
                                    
                                    
                                       1
                                    
                                    
                                       f
                                    
                                 
                                 )
                                 ∼
                                 Π
                                 (
                                 
                                    
                                       s
                                    
                                    
                                       ′
                                    
                                 
                                 ,
                                 
                                    
                                       ν
                                    
                                    
                                       2
                                    
                                    
                                       f
                                    
                                 
                                 )
                              . Thus 
                                 s
                                 
                                    →
                                    
                                       a
                                       ,
                                       
                                          
                                             ν
                                          
                                          
                                             2
                                          
                                       
                                    
                                 
                                 
                                    
                                       s
                                    
                                    
                                       ′
                                    
                                 
                               for some 
                                 
                                    
                                       ν
                                    
                                    
                                       2
                                    
                                 
                               such that 
                                 
                                    
                                       ν
                                    
                                    
                                       2
                                    
                                 
                                 ⊑
                                 
                                    
                                       ν
                                    
                                    
                                       2
                                    
                                    
                                       f
                                    
                                 
                               and 
                                 
                                    
                                       ν
                                    
                                    
                                       2
                                    
                                    
                                       f
                                    
                                 
                                 ∈
                                 
                                    
                                       R
                                    
                                    
                                       a
                                    
                                 
                                 (
                                 s
                                 ,
                                 
                                    
                                       s
                                    
                                    
                                       ′
                                    
                                 
                                 )
                              . Concluding by induction that 
                                 
                                    
                                       ν
                                    
                                    
                                       2
                                    
                                    
                                       f
                                    
                                 
                                 ∈
                                 〚
                                 
                                    
                                       φ
                                    
                                    
                                       ′
                                    
                                 
                                 〛
                                 (
                                 
                                    
                                       s
                                    
                                    
                                       ′
                                    
                                 
                                 )
                              , the claim follows.

If 
                                 φ
                                 =
                                 [
                                 a
                                 ]
                                 
                                    
                                       φ
                                    
                                    
                                       ′
                                    
                                 
                              , then by definition 
                                 
                                    
                                       ν
                                    
                                    
                                       1
                                    
                                    
                                       f
                                    
                                 
                                 ∈
                                 〚
                                 φ
                                 〛
                                 (
                                 r
                                 )
                               implies that for all 
                                 
                                    
                                       s
                                    
                                    
                                       ′
                                    
                                 
                              :
                                 
                                    •
                                    either 
                                          
                                             
                                                ν
                                             
                                             
                                                1
                                             
                                             
                                                f
                                             
                                          
                                          ∈
                                          
                                             
                                                R
                                             
                                             
                                                a
                                             
                                          
                                          (
                                          r
                                          ,
                                          
                                             
                                                r
                                             
                                             
                                                ′
                                             
                                          
                                          )
                                        and 
                                          
                                             
                                                ν
                                             
                                             
                                                1
                                             
                                             
                                                f
                                             
                                          
                                          ∈
                                          〚
                                          
                                             
                                                φ
                                             
                                             
                                                ′
                                             
                                          
                                          〛
                                          (
                                          
                                             
                                                r
                                             
                                             
                                                ′
                                             
                                          
                                          )
                                       : Hence 
                                          
                                             
                                                ν
                                             
                                             
                                                1
                                             
                                             
                                                f
                                             
                                          
                                          ∈
                                          
                                             
                                                R
                                             
                                             
                                                a
                                             
                                          
                                          (
                                          r
                                          ,
                                          
                                             
                                                r
                                             
                                             
                                                ′
                                             
                                          
                                          )
                                        implies that 
                                          r
                                          
                                             →
                                             
                                                a
                                                ,
                                                
                                                   
                                                      ν
                                                   
                                                   
                                                      1
                                                   
                                                
                                             
                                          
                                          
                                             
                                                r
                                             
                                             
                                                ′
                                             
                                          
                                        for some 
                                          
                                             
                                                ν
                                             
                                             
                                                1
                                             
                                          
                                        such that 
                                          
                                             
                                                ν
                                             
                                             
                                                1
                                             
                                          
                                          ⊑
                                          
                                             
                                                ν
                                             
                                             
                                                1
                                             
                                             
                                                f
                                             
                                          
                                       . Consequently 
                                          Π
                                          (
                                          r
                                          ,
                                          
                                             
                                                ν
                                             
                                             
                                                1
                                             
                                             
                                                f
                                             
                                          
                                          )
                                          
                                             →
                                             a
                                          
                                          Π
                                          (
                                          
                                             
                                                r
                                             
                                             
                                                ′
                                             
                                          
                                          ,
                                          
                                             
                                                ν
                                             
                                             
                                                1
                                             
                                             
                                                f
                                             
                                          
                                          )
                                       . By assumption, 
                                          Π
                                          (
                                          r
                                          ,
                                          
                                             
                                                ν
                                             
                                             
                                                1
                                             
                                             
                                                f
                                             
                                          
                                          )
                                          ∼
                                          Π
                                          (
                                          s
                                          ,
                                          
                                             
                                                ν
                                             
                                             
                                                2
                                             
                                             
                                                f
                                             
                                          
                                          )
                                        implies 
                                          Π
                                          (
                                          s
                                          ,
                                          
                                             
                                                ν
                                             
                                             
                                                2
                                             
                                             
                                                f
                                             
                                          
                                          )
                                          
                                             →
                                             a
                                          
                                          Π
                                          (
                                          
                                             
                                                s
                                             
                                             
                                                ′
                                             
                                          
                                          ,
                                          
                                             
                                                ν
                                             
                                             
                                                2
                                             
                                             
                                                f
                                             
                                          
                                          )
                                        and 
                                          Π
                                          (
                                          
                                             
                                                r
                                             
                                             
                                                ′
                                             
                                          
                                          ,
                                          
                                             
                                                ν
                                             
                                             
                                                1
                                             
                                             
                                                f
                                             
                                          
                                          )
                                          ∼
                                          Π
                                          (
                                          
                                             
                                                s
                                             
                                             
                                                ′
                                             
                                          
                                          ,
                                          
                                             
                                                ν
                                             
                                             
                                                2
                                             
                                             
                                                f
                                             
                                          
                                          )
                                       . Thus 
                                          s
                                          
                                             →
                                             
                                                a
                                                ,
                                                
                                                   
                                                      ν
                                                   
                                                   
                                                      2
                                                   
                                                
                                             
                                          
                                          
                                             
                                                s
                                             
                                             
                                                ′
                                             
                                          
                                        for some 
                                          
                                             
                                                ν
                                             
                                             
                                                2
                                             
                                          
                                        such that 
                                          
                                             
                                                ν
                                             
                                             
                                                2
                                             
                                          
                                          ⊑
                                          
                                             
                                                ν
                                             
                                             
                                                2
                                             
                                             
                                                f
                                             
                                          
                                        and 
                                          
                                             
                                                ν
                                             
                                             
                                                2
                                             
                                             
                                                f
                                             
                                          
                                          ∈
                                          
                                             
                                                R
                                             
                                             
                                                a
                                             
                                          
                                          (
                                          s
                                          ,
                                          
                                             
                                                s
                                             
                                             
                                                ′
                                             
                                          
                                          )
                                       . Concluding by induction that 
                                          
                                             
                                                ν
                                             
                                             
                                                2
                                             
                                             
                                                f
                                             
                                          
                                          ∈
                                          〚
                                          
                                             
                                                φ
                                             
                                             
                                                ′
                                             
                                          
                                          〛
                                          (
                                          
                                             
                                                s
                                             
                                             
                                                ′
                                             
                                          
                                          )
                                       , the claim follows.

or 
                                          
                                             
                                                ν
                                             
                                             
                                                1
                                             
                                             
                                                f
                                             
                                          
                                          ∉
                                          
                                             
                                                R
                                             
                                             
                                                a
                                             
                                          
                                          (
                                          r
                                          ,
                                          
                                             
                                                r
                                             
                                             
                                                ′
                                             
                                          
                                          )
                                       : Hence there exists no transition that 
                                          r
                                          
                                             →
                                             
                                                a
                                                ,
                                                
                                                   
                                                      ν
                                                   
                                                   
                                                      1
                                                   
                                                
                                             
                                          
                                          
                                             
                                                r
                                             
                                             
                                                ′
                                             
                                          
                                        for some 
                                          
                                             
                                                ν
                                             
                                             
                                                1
                                             
                                          
                                        such that 
                                          
                                             
                                                ν
                                             
                                             
                                                1
                                             
                                          
                                          ⊑
                                          
                                             
                                                ν
                                             
                                             
                                                1
                                             
                                             
                                                f
                                             
                                          
                                       . Consequently 
                                          Π
                                          (
                                          r
                                          ,
                                          
                                             
                                                ν
                                             
                                             
                                                1
                                             
                                             
                                                f
                                             
                                          
                                          )
                                          
                                             
                                                
                                             
                                          
                                       . By assumption, 
                                          Π
                                          (
                                          r
                                          ,
                                          
                                             
                                                ν
                                             
                                             
                                                1
                                             
                                             
                                                f
                                             
                                          
                                          )
                                          ∼
                                          Π
                                          (
                                          s
                                          ,
                                          
                                             
                                                ν
                                             
                                             
                                                2
                                             
                                             
                                                f
                                             
                                          
                                          )
                                        implies 
                                          Π
                                          (
                                          r
                                          ,
                                          
                                             
                                                ν
                                             
                                             
                                                1
                                             
                                             
                                                f
                                             
                                          
                                          )
                                          
                                             
                                                
                                             
                                          
                                       , and hence 
                                          
                                             
                                                ν
                                             
                                             
                                                2
                                             
                                             
                                                f
                                             
                                          
                                          ∉
                                          
                                             
                                                R
                                             
                                             
                                                a
                                             
                                          
                                          (
                                          s
                                          ,
                                          
                                             
                                                s
                                             
                                             
                                                ′
                                             
                                          
                                          )
                                        for any 
                                          
                                             
                                                s
                                             
                                             
                                                ′
                                             
                                          
                                       .

If 
                                 φ
                                 =
                                 μ
                                 Z
                                 .
                                 ϕ
                              , then by Lemma 28, 
                                 
                                    
                                       ν
                                    
                                    
                                       1
                                    
                                    
                                       f
                                    
                                 
                                 ∈
                                 〚
                                 φ
                                 〛
                                 (
                                 r
                                 )
                               implies 
                                 
                                    
                                       ν
                                    
                                    
                                       1
                                    
                                    
                                       f
                                    
                                 
                                 ∈
                                 
                                    
                                       〚
                                       ϕ
                                       〛
                                    
                                    
                                       ρ
                                       [
                                       Z
                                       ↦
                                       μ
                                       Z
                                       .
                                       ϕ
                                       ∖
                                       {
                                       
                                          
                                             ν
                                          
                                          
                                             1
                                          
                                          
                                             f
                                          
                                       
                                       }
                                       ]
                                    
                                 
                                 (
                                 r
                                 )
                              . By induction 
                                 
                                    
                                       ν
                                    
                                    
                                       2
                                    
                                    
                                       f
                                    
                                 
                                 ∈
                                 
                                    
                                       〚
                                       ϕ
                                       〛
                                    
                                    
                                       ρ
                                       [
                                       Z
                                       ↦
                                       μ
                                       Z
                                       .
                                       ϕ
                                       ∖
                                       {
                                       
                                          
                                             ν
                                          
                                          
                                             2
                                          
                                          
                                             f
                                          
                                       
                                       }
                                       ]
                                    
                                 
                                 (
                                 s
                                 )
                              , and hence 
                                 
                                    
                                       ν
                                    
                                    
                                       2
                                    
                                    
                                       f
                                    
                                 
                                 ∈
                                 〚
                                 φ
                                 〛
                                 (
                                 s
                                 )
                              .

If 
                                 φ
                                 =
                                 ν
                                 Z
                                 .
                                 ϕ
                              , then by Lemma 28, 
                                 
                                    
                                       ν
                                    
                                    
                                       1
                                    
                                    
                                       f
                                    
                                 
                                 ∈
                                 〚
                                 φ
                                 〛
                                 (
                                 r
                                 )
                               implies 
                                 
                                    
                                       ν
                                    
                                    
                                       1
                                    
                                    
                                       f
                                    
                                 
                                 ∈
                                 
                                    
                                       〚
                                       ϕ
                                       〛
                                    
                                    
                                       ρ
                                       [
                                       Z
                                       ↦
                                       ν
                                       Z
                                       .
                                       ϕ
                                       ∪
                                       {
                                       
                                          
                                             ν
                                          
                                          
                                             1
                                          
                                          
                                             f
                                          
                                       
                                       }
                                       ]
                                    
                                 
                                 (
                                 r
                                 )
                              . By induction 
                                 
                                    
                                       ν
                                    
                                    
                                       2
                                    
                                    
                                       f
                                    
                                 
                                 ∈
                                 
                                    
                                       〚
                                       ϕ
                                       〛
                                    
                                    
                                       ρ
                                       [
                                       Z
                                       ↦
                                       ν
                                       Z
                                       .
                                       ϕ
                                       ∪
                                       {
                                       
                                          
                                             ν
                                          
                                          
                                             2
                                          
                                          
                                             f
                                          
                                       
                                       }
                                       ]
                                    
                                 
                                 (
                                 s
                                 )
                              , and consequently 
                                 
                                    
                                       ν
                                    
                                    
                                       2
                                    
                                    
                                       f
                                    
                                 
                                 ∈
                                 〚
                                 φ
                                 〛
                                 (
                                 s
                                 )
                              .

Similarly for any valid full configuration 
                        
                           
                              ν
                           
                           
                              2
                           
                           
                              f
                           
                        
                        ∈
                        
                           VFConfig
                        
                        (
                        s
                        )
                     , we can find 
                        
                           
                              ν
                           
                           
                              1
                           
                           
                              f
                           
                        
                        ∈
                        
                           VFConfig
                        
                        (
                        r
                        )
                      that 
                        Π
                        (
                        r
                        ,
                        
                           
                              ν
                           
                           
                              1
                           
                           
                              f
                           
                        
                        )
                        ∼
                        Π
                        (
                        s
                        ,
                        
                           
                              ν
                           
                           
                              2
                           
                           
                              f
                           
                        
                        )
                     .

@&#REFERENCES@&#

