@&#MAIN-TITLE@&#A flexible and effective NC machining process reuse approach for similar subparts

@&#HIGHLIGHTS@&#


               
               
                  
                     
                        
                           
                           A feature-based parameter-driven model to guide NC process reuse is established.


                        
                        
                           
                           The NC process parameter-driven characteristic of similar feature is revealed.


                        
                        
                           
                           An NC process reusability assessment approach of similar pocket/subpart is proposed.


                        
                        
                           
                           We extend feature-based NC process reuse to a greater granularity of subpart.


                        
                     
                  
               
            

@&#KEYPHRASES@&#

Feature-based machining

Reusability assessment

Inheritance mechanism

NC machining process reuse

@&#ABSTRACT@&#


               
               
                  NC machining process reuse is widely accepted as an effective strategy for engineers to generate the process plan with less time and lower cost. However, there has been very little research on how to reuse the NC machining process of similar subparts. As a result, most reusable NC machining process still has to remain in the repository as tacit knowledge, which can easily get lost due to oblivion. This paper proposes a novel NC machining process reuse approach for similar subparts in which existing NC machining process cases are described in association with machining features. First, a feature-based parameter-driven model is established to formalize the links between information imbedded in the machining feature and the parameters of cutting tools, drive geometries, and machining strategies. Then, the NC process parameter-driven characteristic of similar feature is revealed from the perspective of machining geometry, machining precision of the feature, and cutter geometry. Moreover, an NC process reusability assessment approach of similar pocket/subpart is presented using the pocket’s medial axis transform. Finally, the NC machining process inheritance mechanisms are explored to implement the NC machining process reuse automatically and efficiently. A prototype system based on CATIA has been developed to verify the effectiveness of the proposed approach.
               
            

@&#INTRODUCTION@&#

With increasingly competitive environment for manufacturing enterprises, engineers are often challenged to design the NC machining process (called NC process for simplicity) of a part with less time and lower cost  [1]. To deal with this challenge, a feasible strategy is to reuse the NC process of similar subparts in the repository as effectively as possible  [2]. Here, a subpart of a 3D CAD model is composed of a set of machining features on a part model, which may appear in different 3D CAD models. In matured manufacturing enterprises, similar subparts are usually machined with similar NC processes, which indicate that there exists a large amount of NC processes that can be reused. In recent years, the content-based 3D CAD model retrieval has become an active research topic and a lot of work has been done  [3,4], which provides a novel enabling tool to locate the similar subparts for reusing their NC processes in finer manner. However, most of the related works have focused on searching the similar subparts, not dealing with how to reuse the existing NC process of the retrieved similar subpart. Consequently, current NC process reuse approaches still rest on the level of similar subparts discovering, and the retrieved similar subparts are primarily taken as a reference for NC process reuse, which relies heavily on the experience and knowledge of engineers.

Today, computer-aided design (CAD), computer-aided manufacturing (CAM), and computerized numerical control (CNC) technologies have been widely used in machining complex parts, and a huge number of 3D CAD models with NC processes (also called CAM model) are generated in the repository. However, since the CAM models generated by CAM software (e.g. CATIA, UG) are always structured based on machining operations instead of machining features, they cannot be handled directly by computers for NC process reuse without transformation. Recently, we developed a feature-based machining process model (FMPM) for the CAM model to realize its feature-based structured representation  [5], and then each machining feature of the CAM model case in the repository is associated with a machining operation sequence. The FMPM would be helpful to speed up the NC process planning by reusing the NC process of similar machining feature. However, some critical issues are still not addressed: (1) whether the machining operations associated with the similar feature can be reused by the query feature from a new part, (2) how to assess the reusability of multiple feasible NC process solutions from CAM model repository for the query feature, and (3) how to establish the inheritance mechanisms for the selected feasible NC process solution to implement the NC process reuse. Consequently, the NC process of the similar feature cannot be reused automatically and efficiently for the engineers. As a result, many successful NC processes containing machining know-how of skilled engineers, which often hide behind the geometrical models, still have to remain in the repository as tacit knowledge and can easily get lost due to oblivion  [6], which lead to a huge waste for the enterprise, and hence the motivation of this research.

In this paper, a novel NC process reuse approach for similar subparts is presented to overcome the above-mentioned problems, in which NC process cases in the repository are described in association with machining features based on FMPM to generate the machining know-how database automatically. In particular, a feature-based parameter-driven model is proposed to formalize the links between information imbedded in the machining feature and the parameters of cutting tools, drive geometries, and machining strategies first. Then, the NC process parameter-driven characteristic of similar feature is revealed from the perspective of machining geometry, machining precision of the feature, and cutter geometry. Moreover, an NC process reusability assessment approach of similar pocket/subpart is presented based on the medial axis transform of the pocket. Finally, the NC process inheritance mechanisms are explored to implement the NC process reuse automatically and efficiently. The work presented in this paper is dedicated to NC process reuse for the parts machined with 2 1/2-axis CNC milling.

The rest of the paper is organized as follows. In Section  2, we review the related works. In Section  3, some basic concepts and an overview of our approach are provided. Section  4 gives the details of the NC process reusability assessment approach of similar subpart, and Section  5 describes various inheritance mechanisms for NC process reuse. Then in Sections  6 and 7, the experiments and discussion are provided. Finally, we conclude the paper and present the future work in Section  8.

@&#RELATED WORKS@&#

Feature technology has been an active research topic since the feature concept was proposed in 1970s. Related works in the area of feature technology can be grouped into three main sub-aspects: feature recognition, feature-based process reuse and feature-based machining.

Feature recognition is used to generate machining features, and it plays a key role in achieving CAD/CAM integration  [7]. The feature recognition approach examines the topology and geometry of a part and matches them with the appropriate definition of predefined features. Many research works have been published in the field of feature recognition and various approaches have been adopted  [8,9]. However, the existing feature recognition technologies mainly focus on analyzing the geometric information of the mechanical part, ignoring the technological data (e.g. dimensional tolerance, geometrical tolerance, and roughness) to the impact of feature recognition  [10], and the machining features with free-form surfaces or interacting machining features with multiple interpretations are still difficult to handle.

Benefiting from the development of feature technology, various feature-based process reuse technologies are presented and have been widely used in manufacturing industry, such as group technology, feature template technology, typical process and case-based process design technology. Zhang et al.  [11] presented a method based on feature machining templates to realize the integration of CAD/CAPP/CAM for marine diesel engine parts, which can reduce repetition work in NC process planning. Zheng et al.  [12] presented a systematic modeling and reusing approach for non-NC process knowledge to generate process plans efficiently and effectively by reusing typical non-NC process knowledge. Jiang et al.  [13] introduced a methodology in tool selection for die and mold NC machining. They employed a similarity-based fuzzy rough set algorithm in feature weighting and reduction for case-based reasoning systems. Yan et al.  [14] and Zhang et al.  [15] presented a similar approach to recognize machining features from existing NC programs in order to interactively reuse the associated machining operation parameters. For simple features, their methods have been applied successfully. However, current feature-based process reuse technologies are still in their infancy, especially for NC process reuse. They usually need the support of experts to construct the NC machining know-how database in advance, and the detailed process knowledge is always reused by manual editing and evaluating, which cause a lot of repetitive work and lower reuse efficiency.

Since machining features could be used to associate machining process information effectively, feature-based NC machining technologies have gained much more attention  [16]. Tapie et al.  [17] presented a topological model for machining the parts with complex shapes, in which the topological relations between machining features are used to validate the parameters of cutting tool and machining strategies specified by the machining assistant. Mawussi et al.  [18] presented a machining process model for complex forging die machining to decrease the time for machining preparation by formalizing the links among information imbedded in the machining feature and the parameters of cutting tools and machining strategies. In their approach, machining features are first recognized based on some machining criteria, and then the NC process is generated in terms of the machining criteria to select the cutting tools and machining strategies. Wang et al.  [19] presented a feature-based and agent-driven NC tool path generation approach to response rapidly the design and machining process changes during the production course, in which machining features are activated by agents to make the proper responses for updating the tool path automatically. Hou et al.  [20] discussed an automatic tool path generation approach in an integrated CAD/CAPP/CAM system based on machining features, which can effectively decrease the number of user interactions. In their work, machining features are utilized to carry machining geometry information from CAPP to CAM systems, and an integration layer between FBMach and UG is implemented for milling operations. However, these approaches are quite dependent on predefined feature library (associated with machining knowledge) or heuristic rules, which are usually established manually by experienced engineers. Thus, they lack flexibility and are difficult to be applied to the subpart level due to dynamically changed topologies and shapes of subparts.

From above analyses, it can be concluded that there still exists no flexible and effective NC process reuse implementing approach to automatically evaluate and reuse the associated NC process of similar feature/subpart. However, we will take advantage of the significant researches above to achieve our goals described in the previous section.

In this section, we first define some basic concepts, and then briefly outline our approach.


                        
                           Definition 1
                           Feature-based parameter-driven model (FPDM). The parameter-driven model is a feature-based data model to formalize the links 
                                 L
                               between information imbedded in the machining feature 
                                 F
                               and the parameters of the generated machining operation 
                                 P
                              . It can be denoted as 
                                 
                                    
                                       
                                          
                                             〈
                                             
                                                FPDM
                                             
                                             〉
                                          
                                          ⩴
                                          
                                             〈
                                             F
                                             〉
                                          
                                          
                                             
                                                ⟶
                                             
                                             
                                                L
                                             
                                          
                                          
                                             (
                                             
                                                〈
                                                P
                                                〉
                                             
                                             )
                                          
                                       
                                    
                                    
                                       
                                          
                                             〈
                                             F
                                             〉
                                          
                                          ⩴
                                          
                                             [
                                             
                                                
                                                   M
                                                
                                                
                                                   R
                                                
                                             
                                             ]
                                          
                                          
                                             (
                                             
                                                〈
                                                G
                                                〉
                                             
                                             )
                                          
                                          ∪
                                          
                                             (
                                             
                                                〈
                                                R
                                                〉
                                             
                                             )
                                          
                                       
                                    
                                    
                                       
                                          
                                             〈
                                             G
                                             〉
                                          
                                          ⩴
                                          B
                                          ∣
                                          
                                             
                                                T
                                             
                                             
                                                f
                                             
                                          
                                          ∣
                                          S
                                          ∣
                                          D
                                       
                                    
                                    
                                       
                                          
                                             〈
                                             R
                                             〉
                                          
                                          ⩴
                                          
                                             
                                                R
                                             
                                             
                                                
                                                   perp
                                                
                                             
                                          
                                          ∣
                                          
                                             
                                                R
                                             
                                             
                                                
                                                   par
                                                
                                             
                                          
                                          ∣
                                          
                                             
                                                R
                                             
                                             
                                                
                                                   Ang
                                                
                                             
                                          
                                          ∣
                                          
                                             
                                                R
                                             
                                             
                                                
                                                   Adj
                                                
                                             
                                          
                                          ∣
                                          ⋯
                                       
                                    
                                    
                                       
                                          
                                             〈
                                             P
                                             〉
                                          
                                          ⩴
                                          
                                             〈
                                             T
                                             〉
                                          
                                          ∪
                                          
                                             〈
                                             
                                                
                                                   M
                                                
                                                
                                                   S
                                                
                                             
                                             〉
                                          
                                          ∪
                                          
                                             〈
                                             
                                                
                                                   D
                                                
                                                
                                                   G
                                                
                                             
                                             〉
                                          
                                          ∪
                                          ⋯
                                       
                                    
                                 
                               where 
                                 
                                    
                                       M
                                    
                                    
                                       R
                                    
                                 
                               is the machining semantics associated with 
                                 F
                              , e.g. material, roughness, tolerance; 
                                 G
                               is the constraint geometry, including bottom face (
                                 B
                              ), top face (
                                 
                                    
                                       T
                                    
                                    
                                       f
                                    
                                 
                              ), side faces (
                                 S
                              ), and datum face (
                                 D
                              ); 
                                 R
                               is the topological relation; 
                                 
                                    
                                       R
                                    
                                    
                                       
                                          perp
                                       
                                    
                                 
                               is the perpendicular relationship, 
                                 
                                    
                                       R
                                    
                                    
                                       
                                          par
                                       
                                    
                                 
                               is the parallelism relationship, 
                                 
                                    
                                       R
                                    
                                    
                                       
                                          Ang
                                       
                                    
                                 
                               is the angle between two faces, and 
                                 
                                    
                                       R
                                    
                                    
                                       
                                          Adj
                                       
                                    
                                 
                               is the adjacency relationship; 
                                 T
                               is the cutting tool, 
                                 
                                    
                                       M
                                    
                                    
                                       S
                                    
                                 
                               is the machining strategy, and 
                                 
                                    
                                       D
                                    
                                    
                                       G
                                    
                                 
                               is the drive geometry.


                        
                           Definition 2
                           Reusability. The reusability of the NC process of similar feature in the repository is a quantitative indicator for evaluating its reusable degree to the query feature, which is codetermined by both roughing and finishing operations.


                        
                           Definition 3
                           Inheritance. The inheritance, which normally means the process of transmission of characteristics from parents to offspring, is used here to refer to the process of reusing the process parameters of similar feature to generate the NC process of the query feature. Here, four different inheritances are listed, i.e. machining operation sequence inheritance, cutting tool inheritance, machining strategy inheritance, and drive geometry inheritance.


                        Fig. 1
                         shows the structure of FPDM, which can represent the association between a machining feature and a machining operation to be performed on that feature. As shown in Fig. 1, the constraint geometry, topological relation, and machining semantics codetermine the parameters of the machining strategy, drive geometry, and cutting tool. Conversely, whether the process parameters of similar feature can be reused, it depends on that whether the NC process of the query feature generated using the similar feature’s process parameters can realize its machining and meet its manufacturing requirements.


                        Fig. 2
                         shows the general framework of our approach. This framework involves four parts: structured MBD (model-based definition) model construction, 3D CAD model retrieval, data mining for NC process case, and similar feature/subpart NC process reuse. Here we give a brief description of each part respectively:
                           
                              (1)
                              Structured MBD model construction. The MBD model of a part is structured in terms of machining features to capture manufacturing information  [21]. The interacting machining features are recognized using the algorithm for the MBD model in Ref.  [10].

3D CAD model retrieval. This step realizes feature/subpart similarity assessment merging with machining semantics and returns the retrieval results to the user, and the retrieval results have similar geometry, topology, and machining semantics with the query feature/subpart  [22].

Data mining for NC process cases. According to FMPM, data mining for NC process cases is carried out to construct the feature-based NC process case base. In this step, the machining operations associated with a given machining feature are clustered  [5].

Similar feature/subpart NC process reuse. It is in charge of reusing the process parameters of similar feature/subpart to generate the NC process segment of the query feature/subpart automatically, including three main steps, i.e. NC process parameter-driven characteristic evaluation, NC process reusability assessment of similar feature/subpart and NC process inheritance. In the work, this step is addressed at length to solve the critical problems mentioned in Section  1.

In general, our approach utilizes more machining know-how of skilled engineers in achieving better flexibility than existing feature-based NC process design approaches which usually need a predefined feature library or heuristic rules. Meanwhile, the NC process of various subparts can be generated through matched feature pairs with the support of 3D CAD model retrieval, which can get greater NC process reuse granularity and higher NC process generation efficiency. Moreover, NC process decision-making for the query feature/subpart can be achieved through assessing the NC process reusability of similar features/subparts. All the details about these characteristics and main steps of the approach will be given in the following sections.

In this paper, NC process reusability assessment for similar subpart mainly focus on the pockets (without free-form surface) since they are frequently appeared in different parts with various topology and shape and take more than 80% of the total machining time of the part  [19]. For pockets, it will be hardly feasible to construct a predefined feature library to cover all kinds of pockets associated with relative constant machining operations. However, by using the NC process reuse method, it will be capable of generating the NC process for similar pocket and their combination even though they are not stored in the predefined pocket feature library. To achieve this goal, one of crucial techniques is how to assess the NC process reusability of similar pocket/subpart.

Generally, a pocket’s NC process can be decomposed into three main steps: roughing, semi-finishing, and finishing. Suppose that the NC process of pocket 
                           F
                         is 
                           
                              OP
                           
                           
                              (
                              F
                              )
                           
                        , and its 
                           i
                        th machining operation is 
                           
                              
                                 
                                    op
                                 
                              
                              
                                 i
                              
                           
                        , then 
                           
                              OP
                           
                           
                              (
                              F
                              )
                           
                         can be denoted as 
                           
                              (1)
                              
                                 
                                    OP
                                 
                                 
                                    (
                                    F
                                    )
                                 
                                 =
                                 
                                    
                                       
                                          
                                             
                                                [
                                                
                                                   
                                                      ⋃
                                                   
                                                   
                                                      i
                                                      =
                                                      1
                                                   
                                                   
                                                      k
                                                   
                                                
                                                
                                                   
                                                      
                                                         op
                                                      
                                                   
                                                   
                                                      i
                                                   
                                                
                                                ]
                                             
                                          
                                          ︸
                                       
                                    
                                    
                                       
                                          Rough
                                       
                                    
                                 
                                 ∪
                                 ⋯
                                 ∪
                                 
                                    
                                       
                                          
                                             
                                                [
                                                
                                                   
                                                      ⋃
                                                   
                                                   
                                                      i
                                                      =
                                                      k
                                                      +
                                                      1
                                                   
                                                   
                                                      n
                                                   
                                                
                                                
                                                   
                                                      
                                                         op
                                                      
                                                   
                                                   
                                                      i
                                                   
                                                
                                                ]
                                             
                                          
                                          ︸
                                       
                                    
                                    
                                       
                                          Finish
                                       
                                    
                                 
                                 .
                              
                           
                         In the above formula, note that there could exist multiple roughing operations (e.g. roughing, re-roughing) and finishing operations (e.g. bottom finish machining, side finish machining and corner/fillet finish machining) associated with a pocket.

The NC process reusability assessment of similar pocket involves the following two major issues: (1) NC process parameter-driven characteristic evaluation, and (2) NC process reusability calculation. Next, we discuss them in detail.

NC process parameter-driven characteristic evaluation is to determine whether the machining operations associated with the similar feature can be reused by the query feature on the new part. According to FPDM, to generate the NC process by using any CAM software, it is necessary to identify the machining geometry of the feature and to specify the process parameters. This task is performed starting from a geometrical data analysis with respect to the technological data. Therefore, in our case, the NC process parameter-driven characteristic should be revealed from three different aspects: machining geometry (
                              
                                 
                                    M
                                 
                                 
                                    G
                                 
                              
                           ), machining precision (
                              
                                 
                                    M
                                 
                                 
                                    P
                                 
                              
                           ), and cutter geometry (
                              
                                 
                                    G
                                 
                                 
                                    T
                                 
                              
                           ).

1. Feature machining geometry

The prerequisite for NC process planning is to specify the machining region. By analyzing the machining geometries of the machining region, the required machining operation types for machining the feature can be defined. Machining geometry defines the area where the material should be removed. If the machining geometries of the two similar features are inconsistent, the required machining operation types are also inconsistent, and thus the NC process cannot be reused; otherwise, the required machining operation types are considered as the same.

For a pocket, the following machining geometries are usually involved: bottom 
                              
                                 
                                    f
                                 
                                 
                                    B
                                 
                              
                           , fillet 
                              
                                 
                                    f
                                 
                                 
                                    B
                                    C
                                 
                              
                           , side 
                              
                                 
                                    f
                                 
                                 
                                    S
                                 
                              
                           , corner 
                              
                                 
                                    f
                                 
                                 
                                    C
                                 
                              
                           , and sag 
                              
                                 
                                    f
                                 
                                 
                                    
                                       Sag
                                    
                                 
                              
                           . The former two refer to as 
                              B
                           , and the latter three refer to as 
                              S
                           . Therefore, the machining region MR can be represented as 
                              
                                 
                                    
                                       
                                          MR
                                       
                                       =
                                       B
                                       ∪
                                       S
                                    
                                 
                                 
                                    
                                       B
                                       =
                                       
                                          {
                                          
                                             
                                                f
                                             
                                             
                                                B
                                             
                                          
                                          ,
                                          
                                             
                                                f
                                             
                                             
                                                B
                                                C
                                             
                                          
                                          }
                                       
                                    
                                 
                                 
                                    
                                       S
                                       =
                                       
                                          {
                                          
                                             
                                                f
                                             
                                             
                                                S
                                             
                                          
                                          ,
                                          
                                             
                                                f
                                             
                                             
                                                C
                                             
                                          
                                          ,
                                          
                                             
                                                f
                                             
                                             
                                                
                                                   Sag
                                                
                                             
                                          
                                          }
                                       
                                       .
                                    
                                 
                              
                           
                        

To represent MR, a 5 bit encoding 
                              P
                            is established, where the 
                              i
                           th of which is 1 if the number of 
                              
                                 
                                    f
                                 
                                 
                                    k
                                 
                              
                            in the dimension denoted as 
                              
                                 Num
                              
                              
                                 (
                                 
                                    
                                       f
                                    
                                    
                                       k
                                    
                                 
                                 )
                              
                            is greater than 0; otherwise, the 
                              i
                           th of which is 0. Suppose that the encodings of the MRs of two pockets 
                              
                                 
                                    F
                                 
                                 
                                    m
                                 
                              
                            and 
                              
                                 
                                    F
                                 
                                 
                                    n
                                 
                              
                            are 
                              
                                 
                                    P
                                 
                                 
                                    m
                                 
                              
                            and 
                              
                                 
                                    P
                                 
                                 
                                    n
                                 
                              
                           , respectively; if the following condition is met: 
                              
                                 (2)
                                 
                                    
                                       
                                          ∑
                                       
                                       
                                          i
                                          =
                                          1
                                       
                                       
                                          5
                                       
                                    
                                    
                                       (
                                       
                                          
                                             p
                                          
                                          
                                             i
                                          
                                          
                                             m
                                          
                                       
                                       ∧
                                       
                                          
                                             p
                                          
                                          
                                             i
                                          
                                          
                                             n
                                          
                                       
                                       )
                                    
                                    =
                                    
                                       
                                          ∑
                                       
                                       
                                          i
                                          =
                                          1
                                       
                                       
                                          5
                                       
                                    
                                    
                                       
                                          p
                                       
                                       
                                          i
                                       
                                       
                                          m
                                       
                                    
                                    =
                                    
                                       
                                          ∑
                                       
                                       
                                          i
                                          =
                                          1
                                       
                                       
                                          5
                                       
                                    
                                    
                                       
                                          p
                                       
                                       
                                          i
                                       
                                       
                                          n
                                       
                                    
                                    ,
                                 
                              
                            we call that the machining geometries of the two pockets are compatible.

2. Feature machining precision

In general, the NC process to be generated should satisfy the cutting conditions which depend on the technological data. Consequently, if the NC process of a feature case 
                              C
                            can be reused by a query feature 
                              F
                           , the technological data of 
                              F
                            are usually required not higher than that of 
                              C
                           . That is, the NC process of the feature case with higher machining precision can meet the technological requirements of the query feature with lower machining precision, while the NC process of the feature case with lower machining precision not always meets the technological requirements of the query feature with higher machining precision.

Suppose that for 
                              C
                            and 
                              F
                           , the matched technological data are 
                              
                                 
                                    T
                                 
                                 
                                    i
                                 
                              
                            and 
                              M
                              
                                 (
                                 
                                    
                                       T
                                    
                                    
                                       i
                                    
                                 
                                 )
                              
                            respectively; if the following condition is satisfied: 
                              
                                 
                                    ∀
                                    
                                       
                                          T
                                       
                                       
                                          i
                                       
                                    
                                    ∈
                                    
                                       
                                          
                                             T
                                          
                                       
                                       
                                          
                                             C
                                          
                                       
                                    
                                    ,
                                    
                                    ∃
                                    M
                                    
                                       (
                                       
                                          
                                             T
                                          
                                          
                                             i
                                          
                                       
                                       )
                                    
                                    ∈
                                    
                                       
                                          
                                             T
                                          
                                       
                                       
                                          
                                             F
                                          
                                       
                                    
                                    ∣
                                    
                                       
                                          T
                                       
                                       
                                          i
                                       
                                    
                                    ≤
                                    M
                                    
                                       (
                                       
                                          
                                             T
                                          
                                          
                                             i
                                          
                                       
                                       )
                                    
                                    ,
                                 
                              
                            we call that the machining precision between 
                              C
                            and 
                              F
                            is compatible. Here, 
                              
                                 T
                              
                            is a technological data set associated with a machining feature, and “
                              ≤
                           ” denotes “not higher than”. The technological data of a machining feature are extracted from Product Manufacturing Information (PMI) in the CAD model through using the APIs provided by CAD software.


                           Fig. 3
                            shows an example of the matched technological data. Since the technological data are associated with the faces of the feature, it is easy to get the matched technological data through the matched faces between two similar features. It can be seen from the figure that there exist three matched dimensional tolerance pairs, i.e. 
                              
                                 (
                                 
                                    
                                       T
                                    
                                    
                                       1
                                    
                                 
                                 ,
                                 M
                                 
                                    (
                                    
                                       
                                          T
                                       
                                       
                                          1
                                       
                                    
                                    )
                                 
                                 )
                              
                              ,
                              
                                 (
                                 
                                    
                                       T
                                    
                                    
                                       2
                                    
                                 
                                 ,
                                 M
                                 
                                    (
                                    
                                       
                                          T
                                       
                                       
                                          2
                                       
                                    
                                    )
                                 
                                 )
                              
                           , and 
                              
                                 (
                                 
                                    
                                       T
                                    
                                    
                                       3
                                    
                                 
                                 ,
                                 M
                                 
                                    (
                                    
                                       
                                          T
                                       
                                       
                                          3
                                       
                                    
                                    )
                                 
                                 )
                              
                           , and one matched surface finish pair, i.e. 
                              
                                 (
                                 
                                    
                                       
                                          Ra
                                       
                                    
                                    
                                       1
                                    
                                 
                                 ,
                                 M
                                 
                                    (
                                    
                                       
                                          
                                             Ra
                                          
                                       
                                       
                                          1
                                       
                                    
                                    )
                                 
                                 )
                              
                           . According to the value of the matched technological data of 
                              
                                 
                                    F
                                 
                                 
                                    1
                                 
                              
                            and 
                              
                                 
                                    F
                                 
                                 
                                    2
                                 
                              
                           , we can conclude that the machining precision of 
                              
                                 
                                    F
                                 
                                 
                                    2
                                 
                              
                            is higher than that of 
                              
                                 
                                    F
                                 
                                 
                                    1
                                 
                              
                           , and thus if 
                              
                                 
                                    F
                                 
                                 
                                    2
                                 
                              
                            is taken as a feature case, the machining precision between 
                              
                                 
                                    F
                                 
                                 
                                    1
                                 
                              
                            and 
                              
                                 
                                    F
                                 
                                 
                                    2
                                 
                              
                            is compatible, but not vice versa.

3. Cutter geometry

To select a cutting tool, it is necessary to check the accessibility of the feature machining geometries. The way to check the accessibility without simulation is the analysis of machining region as a constraint on cutting tool movement  [23]. As shown in Fig. 4
                           , 
                              
                                 
                                    
                                       MR
                                    
                                 
                                 
                                    X
                                    Y
                                 
                              
                            related to feature’s structure is defined as the restricting area in the 
                              X
                              Y
                            plane, which is an important factor to check the accessibility of the cutting tool. Here, the transition position is introduced to represent 
                              
                                 
                                    
                                       MR
                                    
                                 
                                 
                                    X
                                    Y
                                 
                              
                           . 
                              Definition 4
                              Transition position 
                                    
                                       (
                                       
                                          
                                             T
                                          
                                          
                                             p
                                          
                                       
                                       )
                                    
                                 . Given a pocket 
                                    F
                                 , its medial axis path (MAP) 
                                    
                                       
                                          L
                                       
                                       
                                          C
                                       
                                    
                                  is defined as a reference tool movement path between arbitrary vertices 
                                    
                                       
                                          v
                                       
                                       
                                          i
                                       
                                    
                                  and 
                                    
                                       
                                          v
                                       
                                       
                                          j
                                       
                                    
                                  in 
                                    
                                       
                                          
                                             MR
                                          
                                       
                                       
                                          X
                                          Y
                                       
                                    
                                 . For an arbitrary MAP of 
                                    F
                                 , denoted as 
                                    
                                       
                                          L
                                       
                                       
                                          C
                                       
                                    
                                    =
                                    f
                                    
                                       (
                                       s
                                       )
                                    
                                    ,
                                    
                                    s
                                    ∈
                                    
                                       [
                                       
                                          
                                             s
                                          
                                          
                                             
                                                min
                                             
                                          
                                       
                                       ,
                                       
                                          
                                             s
                                          
                                          
                                             
                                                max
                                             
                                          
                                       
                                       ]
                                    
                                 , where 
                                    s
                                  is the arc length of the tool movement path, and 
                                    
                                       
                                          L
                                       
                                       
                                          C
                                       
                                    
                                  is the radius of locally inscribed circle at 
                                    s
                                 . If there exists a position 
                                    
                                       
                                          s
                                       
                                       
                                          p
                                       
                                    
                                    ∈
                                    
                                       (
                                       
                                          
                                             s
                                          
                                          
                                             
                                                min
                                             
                                          
                                       
                                       ,
                                       
                                          
                                             s
                                          
                                          
                                             
                                                max
                                             
                                          
                                       
                                       )
                                    
                                  that makes 
                                    
                                       
                                          L
                                       
                                       
                                          C
                                       
                                    
                                  be maximal or minimal, then 
                                    
                                       
                                          s
                                       
                                       
                                          p
                                       
                                    
                                  is called a transition position of 
                                    F
                                 .

Taking the pocket in Fig. 4 as an example, Fig. 4(a) shows its medial axis (MA)  [24], and Fig. 4(b) shows the MAP between 
                              
                                 
                                    v
                                 
                                 
                                    i
                                 
                              
                            and 
                              
                                 
                                    v
                                 
                                 
                                    j
                                 
                              
                           . As indicated in Fig. 4(b), there exist three extreme points, i.e. 
                              
                                 
                                    s
                                 
                                 
                                    1
                                 
                              
                              ,
                              
                                 
                                    s
                                 
                                 
                                    2
                                 
                              
                              ,
                              
                                 
                                    s
                                 
                                 
                                    3
                                 
                              
                           , corresponding to three transition positions, where 
                              
                                 
                                    L
                                 
                                 
                                    C
                                 
                              
                            acquires the maximum (7.22) at 
                              
                                 
                                    s
                                 
                                 
                                    1
                                 
                              
                            and 
                              
                                 
                                    s
                                 
                                 
                                    2
                                 
                              
                           , and acquires the minimum (5.0) at 
                              
                                 
                                    s
                                 
                                 
                                    3
                                 
                              
                           . At the minimal transition position, i.e. 
                              
                                 
                                    s
                                 
                                 
                                    3
                                 
                              
                           , the tool movement region is the smallest of MAP. With the increase of cutting tool radius, the cutting tool will be overcut first at the minimum transition position. Therefore, the cutting tool radius (without regard to machining allowance) should be smaller than 5.0, and then the cutting tool will go through 
                              
                                 
                                    c
                                 
                                 
                                    1
                                 
                              
                              
                                 
                                    c
                                 
                                 
                                    2
                                 
                              
                            without interference; otherwise, an overcut will happen.

To reuse a cutting tool existed in cutting tool library, the parameters of the cutter geometry should be compatible with the machining region of the query feature. Specifically, the following three factors should be considered:

(1) Cutting tool length

To avoid the interference between the cutting tool and the feature to be machined, the cutting tool length (i.e. 
                              
                                 
                                    T
                                 
                                 
                                    L
                                 
                              
                           ) is checked for the compatibility with the depth (i.e. 
                              h
                           ) of the pocket, if the following condition is met: 
                              
                                 
                                    
                                       
                                          T
                                       
                                       
                                          L
                                       
                                    
                                    >
                                    h
                                    ,
                                 
                              
                            the length of the cutting tool is compatible with the depth of the pocket.

(2) Cutting tool diameter for roughing

To avoid mass remaining materials left in roughing, every MAP needs to be go through by a feasible cutting tool without interference. Therefore, in roughing, the minimum of the cutting tool diameter should be less than the minimum width of all transition positions, and the maximum of the cutting tool diameter should be less than the maximum width of all transition positions, that is,
                              
                                 
                                    
                                       {
                                       
                                          
                                             
                                                ∀
                                                
                                                   
                                                      
                                                         op
                                                      
                                                   
                                                   
                                                      i
                                                   
                                                
                                                ∈
                                                
                                                   OP
                                                
                                                
                                                   (
                                                   F
                                                   )
                                                
                                                ,
                                                
                                                1
                                                ≤
                                                i
                                                ≤
                                                k
                                             
                                          
                                          
                                             
                                                min
                                                
                                                   (
                                                   
                                                      
                                                         D
                                                      
                                                      
                                                         i
                                                      
                                                   
                                                   )
                                                
                                                ≤
                                                min
                                                
                                                   (
                                                   
                                                      
                                                         T
                                                      
                                                      
                                                         p
                                                      
                                                   
                                                   )
                                                
                                                −
                                                2
                                                ×
                                                δ
                                             
                                          
                                          
                                             
                                                max
                                                
                                                   (
                                                   
                                                      
                                                         D
                                                      
                                                      
                                                         i
                                                      
                                                   
                                                   )
                                                
                                                ≤
                                                max
                                                
                                                   (
                                                   
                                                      
                                                         T
                                                      
                                                      
                                                         p
                                                      
                                                   
                                                   )
                                                
                                                −
                                                2
                                                ×
                                                δ
                                             
                                          
                                       
                                    
                                 
                              
                            where 
                              δ
                            is the machining allowance in roughing, and 
                              
                                 
                                    D
                                 
                                 
                                    i
                                 
                              
                            is the diameter of the cutting tool applied on machining operation 
                              
                                 
                                    
                                       op
                                    
                                 
                                 
                                    i
                                 
                              
                           .

In addition, if there exist machining allowance requirements for the corners of 
                              F
                            in roughing, supposing that the machining allowance of the corner 
                              
                                 
                                    C
                                 
                                 
                                    i
                                 
                              
                            in roughing is less than 
                              
                                 
                                    δ
                                 
                                 
                                    i
                                 
                              
                              
                                 (
                                 
                                    
                                       δ
                                    
                                    
                                       i
                                    
                                 
                                 ≥
                                 δ
                                 )
                              
                            and the radius of the corner is 
                              
                                 
                                    R
                                 
                                 
                                    c
                                 
                              
                              
                                 (
                                 
                                    
                                       R
                                    
                                    
                                       c
                                    
                                 
                                 ≥
                                 0
                                 )
                              
                           , the cutting tool diameter 
                              D
                              
                                 (
                                 
                                    
                                       C
                                    
                                    
                                       i
                                    
                                 
                                 )
                              
                            for 
                              
                                 
                                    C
                                 
                                 
                                    i
                                 
                              
                            in roughing should be less than 
                              
                                 
                                    D
                                 
                                 
                                    r
                                 
                              
                           , that is,
                              
                                 
                                    D
                                    
                                       (
                                       
                                          
                                             C
                                          
                                          
                                             i
                                          
                                       
                                       )
                                    
                                    ≤
                                    
                                       
                                          D
                                       
                                       
                                          r
                                       
                                    
                                    =
                                    
                                       
                                          2
                                          
                                             (
                                             
                                                
                                                   δ
                                                
                                                
                                                   i
                                                
                                             
                                             sin
                                             
                                                
                                                   φ
                                                
                                                
                                                   2
                                                
                                             
                                             −
                                             δ
                                             )
                                          
                                       
                                       
                                          1
                                          −
                                          sin
                                          
                                             
                                                φ
                                             
                                             
                                                2
                                             
                                          
                                       
                                    
                                    +
                                    2
                                    
                                       
                                          R
                                       
                                       
                                          c
                                       
                                    
                                 
                              
                            where 
                              φ
                            is the included angle of 
                              
                                 
                                    C
                                 
                                 
                                    i
                                 
                              
                           .

Therefore, the minimum of the cutting tool diameter should be less than 
                              min
                              
                                 (
                                 
                                    
                                       D
                                    
                                    
                                       r
                                    
                                 
                                 )
                              
                            to satisfy the cutting conditions of the corners in roughing, which depend on the machining allowance, that is, 
                              
                                 
                                    ∀
                                    
                                    
                                       
                                          
                                             op
                                          
                                       
                                       
                                          i
                                       
                                    
                                    ∈
                                    
                                       OP
                                    
                                    
                                       (
                                       F
                                       )
                                    
                                    ,
                                    
                                    min
                                    
                                       (
                                       
                                          
                                             D
                                          
                                          
                                             i
                                          
                                       
                                       )
                                    
                                    ≤
                                    min
                                    
                                       (
                                       
                                          
                                             D
                                          
                                          
                                             r
                                          
                                       
                                       )
                                    
                                    ,
                                    
                                    1
                                    ≤
                                    i
                                    ≤
                                    k
                                    .
                                 
                              
                           
                        

(3) Cutting tool diameter for finishing

Generally, in finishing, engineers select smaller cutting tools to cut the remaining materials left by the machining operations of roughing and semi-finishing. Therefore, the maximum of the cutting tool diameter should be less than the minimum width of all transition positions, i.e. 
                              ∀
                              
                                 
                                    
                                       op
                                    
                                 
                                 
                                    i
                                 
                              
                              ∈
                              
                                 OP
                              
                              
                                 (
                                 F
                                 )
                              
                           , 
                              max
                              
                                 (
                                 
                                    
                                       D
                                    
                                    
                                       i
                                    
                                 
                                 )
                              
                              ≤
                              min
                              
                                 (
                                 
                                    
                                       T
                                    
                                    
                                       p
                                    
                                 
                                 )
                              
                              ,
                              
                              k
                              +
                              1
                              ≤
                              i
                              ≤
                              n
                           , and this is the elementary constraint rule for cutting tool selection in finishing.

Moreover, when a corner needs an additional finishing operation, the diameter of the cutting tool for the corner finishing operation 
                              
                                 
                                    
                                       op
                                    
                                 
                                 
                                    i
                                 
                              
                            should be less than the minimum of the corner radius at the same time, i.e. 
                              
                                 
                                    D
                                 
                                 
                                    i
                                 
                              
                              ≤
                              min
                              
                                 (
                                 2
                                 
                                    
                                       R
                                    
                                    
                                       c
                                    
                                 
                                 )
                              
                              ,
                              
                              k
                              +
                              1
                              ≤
                              i
                              ≤
                              n
                           , or when a fillet needs an additional finishing operation, the fillet radius of the cutting tool for the fillet finishing operation 
                              
                                 
                                    
                                       op
                                    
                                 
                                 
                                    i
                                 
                              
                            should be less than the fillet radius of the pocket meanwhile, i.e. 
                              
                                 
                                    r
                                 
                                 
                                    i
                                 
                              
                              ≤
                              
                                 
                                    R
                                 
                                 
                                    f
                                 
                              
                              ,
                              k
                              +
                              1
                              ≤
                              i
                              ≤
                              n
                           .

In fact, corner finishing and fillet finishing can be realized through two independent machining operations respectively, or through some finishing operation (e.g. bottom finish machining, and side finish machining), which means that corner/fillet finish machining can be imbedded in other finishing operations. Therefore, the compatibility of the cutting tool diameter can be evaluated according to the functions of each machining operation (Table 1
                           ).

The flow chart of NC process parameter-driven characteristic evaluation approach is shown in Fig. 5
                           . As illustrated in the figure, the NC process parameter-driven characteristic is revealed by checking the compatibility of 
                              
                                 
                                    M
                                 
                                 
                                    G
                                 
                              
                              ,
                              
                                 
                                    M
                                 
                                 
                                    P
                                 
                              
                           , and 
                              
                                 
                                    G
                                 
                                 
                                    T
                                 
                              
                            between existing similar feature case 
                              C
                            and query feature 
                              F
                           . If 
                              
                                 
                                    M
                                 
                                 
                                    G
                                 
                              
                              ,
                              
                                 
                                    M
                                 
                                 
                                    P
                                 
                              
                           , and 
                              
                                 
                                    G
                                 
                                 
                                    T
                                 
                              
                            are compatible respectively, the NC process parameters of 
                              C
                            have the ability to drive 
                              F
                            to generate its NC process, which indicates that the NC process of 
                              C
                            can be associated with 
                              F
                           . It can be represented as
                              
                                 
                                    
                                       
                                          f
                                       
                                       
                                          
                                             (
                                             C
                                             ↦
                                             F
                                             )
                                          
                                       
                                    
                                    =
                                    
                                       
                                          M
                                       
                                       
                                          G
                                       
                                    
                                    ⋅
                                    
                                       
                                          M
                                       
                                       
                                          P
                                       
                                    
                                    ⋅
                                    
                                       
                                          G
                                       
                                       
                                          T
                                       
                                    
                                    =
                                    1
                                 
                              
                            where 
                              ⋅
                            is the combination function.


                           Fig. 6
                            shows an NC process parameter-driven characteristic evaluation sample (
                              
                                 
                                    M
                                 
                                 
                                    G
                                 
                              
                            and 
                              
                                 
                                    M
                                 
                                 
                                    P
                                 
                              
                            are compatible respectively). The width of the transition position and the radius of the corner of the two features 
                              
                                 
                                    F
                                 
                                 
                                    1
                                 
                              
                            and 
                              
                                 
                                    F
                                 
                                 
                                    2
                                 
                              
                            in Fig. 6(a) are equivalent respectively, only with the length of the feature changed slightly (from 38 to 28 mm). Thus, the NC processes of 
                              
                                 
                                    F
                                 
                                 
                                    1
                                 
                              
                            for 
                              
                                 
                                    F
                                 
                                 
                                    2
                                 
                              
                           , or 
                              
                                 
                                    F
                                 
                                 
                                    2
                                 
                              
                            for 
                              
                                 
                                    F
                                 
                                 
                                    1
                                 
                              
                            have the parameter-driven ability. However, the parameters (i.e. width and radius) of the other two features 
                              
                                 
                                    F
                                 
                                 
                                    3
                                 
                              
                            and 
                              
                                 
                                    F
                                 
                                 
                                    4
                                 
                              
                            in Fig. 6(b) are all different. By using the formula in Table 1, the cutting tool diameter range of 
                              
                                 
                                    F
                                 
                                 
                                    3
                                 
                              
                            for roughing and finishing are 
                              
                                 [
                                 2
                                 ,
                                 40
                                 ]
                              
                            and 
                              
                                 [
                                 2
                                 ,
                                 12
                                 ]
                              
                           , respectively, and that of 
                              
                                 
                                    F
                                 
                                 
                                    4
                                 
                              
                            are 
                              
                                 [
                                 2
                                 ,
                                 35
                                 ]
                              
                            and 
                              
                                 [
                                 2
                                 ,
                                 8
                                 ]
                              
                           . Therefore, the interactions of the cutting tool diameter ranges for roughing and finishing between 
                              
                                 
                                    F
                                 
                                 
                                    3
                                 
                              
                            and 
                              
                                 
                                    F
                                 
                                 
                                    4
                                 
                              
                            are 
                              
                                 [
                                 2
                                 ,
                                 35
                                 ]
                              
                            and 
                              
                                 [
                                 2
                                 ,
                                 8
                                 ]
                              
                           , respectively. Suppose that a cutting tool D12 is selected for the finish machining of 
                              
                                 
                                    F
                                 
                                 
                                    3
                                 
                              
                           , since D12 is not compatible with 
                              
                                 
                                    F
                                 
                                 
                                    4
                                 
                              
                            (
                              12
                              ∉
                              
                                 [
                                 2
                                 ,
                                 8
                                 ]
                              
                           ), the NC process of 
                              
                                 
                                    F
                                 
                                 
                                    3
                                 
                              
                            cannot be reused by 
                              
                                 
                                    F
                                 
                                 
                                    4
                                 
                              
                           . In addition, the cutting tool diameter range of 
                              
                                 
                                    F
                                 
                                 
                                    4
                                 
                              
                            is a subset of 
                              
                                 
                                    F
                                 
                                 
                                    3
                                 
                              
                            (i.e. 
                              
                                 [
                                 2
                                 ,
                                 35
                                 ]
                              
                              ⊂
                              
                                 [
                                 2
                                 ,
                                 40
                                 ]
                              
                              ,
                              
                                 [
                                 2
                                 ,
                                 8
                                 ]
                              
                              ⊂
                              
                                 [
                                 2
                                 ,
                                 12
                                 ]
                              
                           ), and thus no matter what the NC process of 
                              
                                 
                                    F
                                 
                                 
                                    4
                                 
                              
                            is, it can always be reused by 
                              
                                 
                                    F
                                 
                                 
                                    3
                                 
                              
                           .

In fact, NC process parameter-driven characteristic evaluation is also a course of feasible NC process decision-making. Differing from existing feature-based NC process design approaches, our approach is not through forward reasoning based on the predefined feature library or heuristic rules, but through reversing verification based on the process parameters of similar feature. Therefore, it is especially suitable for pockets with various topology and shape even if they are not stored in the predefined library.

According to FPDM, the NC process of 
                              F
                            can be generated automatically and efficiently by inheriting the NC process of 
                              C
                           . However, the generated NC process for 
                              F
                            is only a feasible solution, rather than an optimal solution. Therefore, it is necessary to calculate the reusability of multiple feasible NC process solutions, which is an important criterion for optimal NC processes decision-making.

In general, for two features 
                              C
                            and 
                              F
                           , when the NC process of 
                              C
                            has the parameter-driven ability for 
                              F
                           , if the two features are more similar from the point of view of cutting tool movement, the reusability of the NC process of 
                              C
                            for 
                              F
                            is higher. Since the MA of a feature is a compact representation of the feature’s geometric and topological characteristics, it is introduced as the reference tool path for its unique characteristic to calculate the NC process reusability of similar feature in this work. Furthermore, 
                              
                                 
                                    L
                                 
                                 
                                    C
                                 
                              
                            is accordingly generated for selected cutting tool location determination and movement.

According to the uniqueness of the reference tool paths, the principle of NC process reusability assessment is that the cutting tools cut along the reference tool paths. Since different cutting tools for a given feature have different accessible machining regions along MA, if the two features with the reference NC process are more similar, they have more similar accessible machining region pairs. Conversely, the similarity between the corresponding accessible machining region pairs can be used to calculate the reusability of the NC process. Here, the accessible machining region calculation includes the following two steps: (1) retrieve the reference tool paths and their 
                              
                                 
                                    L
                                 
                                 
                                    C
                                 
                              
                            radius functions from the MA of the feature, and (2) calculate the intersection points between each 
                              
                                 
                                    L
                                 
                                 
                                    C
                                 
                              
                            radius function curve and a horizontal line representing the selected cutting tool radius (Fig. 4(b)). The reference tool path points with larger values of the 
                              
                                 
                                    L
                                 
                                 
                                    C
                                 
                              
                            radius function than the selected cutting tool radius define the accessible machining region for this cutter.

To illustrate the machining region calculation process, an example is shown in Fig. 4. Suppose that a cutting tool with radius 
                              R
                            of 2 mm is used to cut the pocket. To calculate the machining region, a horizontal line of the cutting tool radius is drawn on the 
                              
                                 
                                    L
                                 
                                 
                                    C
                                 
                              
                            radius function curve in Fig. 4(b), which intersects with the 
                              
                                 
                                    L
                                 
                                 
                                    C
                                 
                              
                            radius function curve at two points, i.e. 
                              
                                 
                                    s
                                 
                                 
                                    4
                                 
                              
                            and 
                              
                                 
                                    s
                                 
                                 
                                    5
                                 
                              
                           . Since the function values of the points between 
                              
                                 
                                    s
                                 
                                 
                                    4
                                 
                              
                            and 
                              
                                 
                                    s
                                 
                                 
                                    5
                                 
                              
                            are all greater than the cutting tool radius, their corresponding points on the reference tool path are the valid cutting tool locations. In addition, the horizontal line could intersect with the 
                              
                                 
                                    L
                                 
                                 
                                    C
                                 
                              
                            radius function curve at more than two points. For example, if a cutting tool with radius 
                              R
                            of 6 mm is adopted to cut the pocket, there are two machining sub-regions with four points, i.e. 
                              
                                 
                                    s
                                 
                                 
                                    6
                                 
                              
                            and 
                              
                                 
                                    s
                                 
                                 
                                    7
                                 
                              
                           , 
                              
                                 
                                    s
                                 
                                 
                                    8
                                 
                              
                            and 
                              
                                 
                                    s
                                 
                                 
                                    9
                                 
                              
                           .

Suppose that the MAs of 
                              C
                            and 
                              F
                            are 
                              
                                 
                                    
                                       MA
                                    
                                 
                                 
                                    1
                                 
                              
                            and 
                              
                                 
                                    
                                       MA
                                    
                                 
                                 
                                    2
                                 
                              
                           , respectively, the NC process of 
                              C
                            is denoted as 
                              
                                 OP
                              
                              
                                 (
                                 C
                                 )
                              
                           , and its cutting tool sequence for roughing is 
                              T
                              =
                              
                                 {
                                 
                                    
                                       d
                                    
                                    
                                       i
                                    
                                 
                                 }
                              
                              ,
                              
                              1
                              ≤
                              i
                              ≤
                              k
                           , 
                              
                                 
                                    d
                                 
                                 
                                    i
                                 
                              
                              >
                              
                                 
                                    d
                                 
                                 
                                    i
                                    +
                                    1
                                 
                              
                           , where 
                              
                                 
                                    d
                                 
                                 
                                    i
                                 
                              
                            is the diameter of the 
                              i
                           th cutting tool, and 
                              k
                            is the number of the machining operations in roughing. For a cutting tool 
                              
                                 
                                    d
                                 
                                 
                                    i
                                 
                              
                              
                              
                                 (
                                 
                                    
                                       d
                                    
                                    
                                       i
                                    
                                 
                                 ∈
                                 T
                                 )
                              
                           , corresponding to a machining operation 
                              
                                 
                                    
                                       op
                                    
                                 
                                 
                                    i
                                 
                              
                              
                              
                                 (
                                 
                                    
                                       
                                          op
                                       
                                    
                                    
                                       i
                                    
                                 
                                 ∈
                                 
                                    OP
                                 
                                 )
                              
                           , if its machining regions along 
                              
                                 
                                    
                                       MA
                                    
                                 
                                 
                                    1
                                 
                              
                            and 
                              
                                 
                                    
                                       MA
                                    
                                 
                                 
                                    2
                                 
                              
                            are represented by 
                              
                                 
                                    φ
                                 
                                 
                                    1
                                 
                              
                              
                                 (
                                 
                                    
                                       d
                                    
                                    
                                       i
                                    
                                 
                                 )
                              
                            and 
                              
                                 
                                    φ
                                 
                                 
                                    2
                                 
                              
                              
                                 (
                                 
                                    
                                       d
                                    
                                    
                                       i
                                    
                                 
                                 )
                              
                            respectively, the reusability of the machining operation denoted as 
                              
                                 
                                    σ
                                 
                                 
                                    i
                                 
                              
                            is formulated as follows:
                              
                                 (3)
                                 
                                    
                                       
                                          σ
                                       
                                       
                                          i
                                       
                                    
                                    =
                                    exp
                                    
                                       [
                                       −
                                       
                                          
                                             
                                                
                                                   
                                                      (
                                                      
                                                         
                                                            n
                                                         
                                                         
                                                            1
                                                         
                                                      
                                                      −
                                                      
                                                         
                                                            n
                                                         
                                                         
                                                            2
                                                         
                                                      
                                                      )
                                                   
                                                
                                                
                                                   2
                                                
                                             
                                          
                                          
                                             2
                                          
                                       
                                       ]
                                    
                                    ∗
                                    
                                       (
                                       1
                                       −
                                       
                                          
                                             
                                                |
                                                
                                                   
                                                      φ
                                                   
                                                   
                                                      1
                                                   
                                                
                                                
                                                   (
                                                   
                                                      
                                                         d
                                                      
                                                      
                                                         i
                                                      
                                                   
                                                   )
                                                
                                                −
                                                
                                                   
                                                      φ
                                                   
                                                   
                                                      2
                                                   
                                                
                                                
                                                   (
                                                   
                                                      
                                                         d
                                                      
                                                      
                                                         i
                                                      
                                                   
                                                   )
                                                
                                                |
                                             
                                          
                                          
                                             max
                                             
                                                [
                                                
                                                   
                                                      φ
                                                   
                                                   
                                                      1
                                                   
                                                
                                                
                                                   (
                                                   
                                                      
                                                         d
                                                      
                                                      
                                                         i
                                                      
                                                   
                                                   )
                                                
                                                ,
                                                
                                                   
                                                      φ
                                                   
                                                   
                                                      2
                                                   
                                                
                                                
                                                   (
                                                   
                                                      
                                                         d
                                                      
                                                      
                                                         i
                                                      
                                                   
                                                   )
                                                
                                                ]
                                             
                                          
                                       
                                       )
                                    
                                 
                              
                            where 
                              φ
                              
                                 (
                                 
                                    
                                       d
                                    
                                    
                                       i
                                    
                                 
                                 )
                              
                            can be represented using area, volume, and arc length, etc.; 
                              
                                 
                                    n
                                 
                                 
                                    1
                                 
                              
                            and 
                              
                                 
                                    n
                                 
                                 
                                    2
                                 
                              
                            are the number of connected domains in the machining region, which are related to the number of tool retractions. In this work, the arc length is adopted to compute 
                              
                                 
                                    σ
                                 
                                 
                                    i
                                 
                              
                           .


                           Fig. 7
                            shows an example of machining regions of 
                              F
                            using two different cutting tools D20 and D6, and the MA (red dotted lines) of feature 
                              F
                            is shown in Fig. 7(a). Fig. 7(b) and (c) show the accessible machining regions (green lines) covered by the two cutters respectively. As shown in the figure, there are two connected domains with D20, and the arc length is 146.489 mm, while only one connected domain with D6, and the arc length is 435.812 mm.

The NC process reusability between two similar features is then calculated as the weighted sum of the reusability of all machining operations in roughing, denoted as 
                              η
                              
                                 (
                                 F
                                 ,
                                 C
                                 )
                              
                           . A heuristic rule about the weight setting is that the weight of the large cutter is greater than the weight of the small cutter, i.e. 
                              
                                 
                                    ω
                                 
                                 
                                    i
                                 
                              
                              >
                              
                                 
                                    ω
                                 
                                 
                                    i
                                    +
                                    1
                                 
                              
                           . 
                              
                                 (4)
                                 
                                    
                                       η
                                       
                                          (
                                          F
                                          ,
                                          C
                                          )
                                       
                                       =
                                       
                                          {
                                          
                                             
                                                
                                                   
                                                      
                                                         ∑
                                                      
                                                      
                                                         i
                                                         =
                                                         1
                                                      
                                                      
                                                         k
                                                      
                                                   
                                                   
                                                      
                                                         ω
                                                      
                                                      
                                                         i
                                                      
                                                   
                                                   ∗
                                                   
                                                      
                                                         σ
                                                      
                                                      
                                                         i
                                                      
                                                   
                                                
                                                
                                                   
                                                   
                                                      
                                                         f
                                                      
                                                      
                                                         C
                                                         ↦
                                                         F
                                                      
                                                   
                                                   =
                                                   1
                                                
                                             
                                             
                                                
                                                   0
                                                
                                                
                                                   
                                                   others
                                                
                                             
                                          
                                       
                                    
                                 
                                 
                                    
                                       
                                          
                                             ∑
                                          
                                          
                                             i
                                             =
                                             1
                                          
                                          
                                             k
                                          
                                       
                                       
                                          
                                             ω
                                          
                                          
                                             i
                                          
                                       
                                       =
                                       1
                                       .
                                    
                                 
                              
                           
                        

In order to calculate the NC process reusability of similar subpart, a successful match 
                           M
                         between two subparts 
                           
                              
                                 S
                              
                              
                                 1
                              
                           
                         and 
                           
                              
                                 S
                              
                              
                                 2
                              
                           
                         needs to be found first. In the work, the machining feature coupled graph (MFCG)  [21]
                        
                           
                              
                                 G
                              
                              
                                 1
                              
                           
                         and 
                           
                              
                                 G
                              
                              
                                 2
                              
                           
                         regarding the interactions between machining features are used to represent the subparts. A successful match 
                           M
                         is a mapping from 
                           
                              
                                 G
                              
                              
                                 1
                              
                           
                         to 
                           
                              
                                 G
                              
                              
                                 2
                              
                           
                        , and it can be found using the sub-graph isomorphism algorithm  [25], in which each feature 
                           F
                         in 
                           
                              
                                 S
                              
                              
                                 1
                              
                           
                         is mapped to a feature 
                           M
                           
                              (
                              F
                              )
                           
                         in 
                           
                              
                                 S
                              
                              
                                 2
                              
                           
                         and each edge 
                           e
                         in 
                           
                              
                                 G
                              
                              
                                 1
                              
                           
                         is mapped to an edge 
                           M
                           
                              (
                              e
                              )
                           
                         in 
                           
                              
                                 G
                              
                              
                                 2
                              
                           
                        . The mapping is injective since it is regarded as valid in the work that the query subpart is a part of the similar subpart in the repository but not vice versa  [26].

After a successful match 
                           M
                         between 
                           
                              
                                 S
                              
                              
                                 1
                              
                           
                         and 
                           
                              
                                 S
                              
                              
                                 2
                              
                           
                         is found, the NC process reusability between these two similar subparts is calculated based on the match 
                           M
                        , denoted as 
                           η
                           
                              (
                              
                                 
                                    S
                                 
                                 
                                    1
                                 
                              
                              ,
                              
                                 
                                    S
                                 
                                 
                                    2
                                 
                              
                              )
                           
                        , that is calculated as the weighted sum of the NC process reusability of the matched feature pairs 
                           
                              (
                              F
                              ,
                              M
                              
                                 (
                                 F
                                 )
                              
                              )
                           
                         with Eq. (4). Each feature pair has its own weight and the weights can be determined heuristically using the following rule: the feature pair in the high level has greater weight than the feature pair in the low level (here the word “level” refers to the depth of the feature pair in MFCG).
                           
                              (5)
                              
                                 
                                    η
                                    
                                       (
                                       
                                          
                                             S
                                          
                                          
                                             1
                                          
                                       
                                       ,
                                       
                                          
                                             S
                                          
                                          
                                             2
                                          
                                       
                                       )
                                    
                                    =
                                    
                                       
                                          ∑
                                       
                                       
                                          F
                                          ∈
                                          
                                             
                                                S
                                             
                                             
                                                1
                                             
                                          
                                          ,
                                          M
                                          
                                             (
                                             F
                                             )
                                          
                                          ∈
                                          
                                             
                                                S
                                             
                                             
                                                2
                                             
                                          
                                       
                                    
                                    
                                       
                                          ω
                                       
                                       
                                          F
                                       
                                    
                                    ∗
                                    η
                                    
                                       (
                                       F
                                       ,
                                       M
                                       
                                          (
                                          F
                                          )
                                       
                                       )
                                    
                                    
                                    η
                                    
                                       (
                                       F
                                       ,
                                       M
                                       
                                          (
                                          F
                                          )
                                       
                                       )
                                    
                                    ≠
                                    0
                                 
                              
                              
                                 
                                    
                                       
                                          ∑
                                       
                                       
                                          F
                                          ∈
                                          
                                             
                                                S
                                             
                                             
                                                1
                                             
                                          
                                       
                                    
                                    
                                       
                                          ω
                                       
                                       
                                          F
                                       
                                    
                                    =
                                    1
                                    .
                                 
                              
                           
                        
                     


                        Fig. 8
                         shows the main steps for the NC process reusability calculation of similar subpart. In general, the properties of the nodes and edges in MFCG are used to find the match 
                           M
                         first, and then the NC process reusability of 
                           F
                         for 
                           M
                           
                              (
                              F
                              )
                           
                         with the associated machining operation sequence is calculated. Since MFCG preserves abundant machining semantics embedded in the MBD model, it can represent the feature interactions, which are taken as a determining factor in NC process planning, especially in machining operation sequencing. Consequently, the result can reflect the NC process reusability between similar subparts.

In general, the goal of NC process reusability calculation of similar subpart is to select an optimal solution for the query subpart from multiple feasible NC process solutions. Since the NC process of the similar subpart has already possessed explicit machining sequencing characteristic, which is the direct representation of high-level NC process planning knowledge, we can avoid plenty of complex work (e.g. machining operation sequencing and combination between features) done by existing feature-based NC process design approaches. In the work, the NC process segment of the similar subpart is reused as a whole by the query subpart. Thus, our approach possesses greater NC process reuse granularity.

In this section, we will discuss the NC process inheritance mechanism which allows us to implement the NC process reuse for the selected feasible NC process solution automatically and efficiently.

Intrinsically, inheritance could be regarded as the composition of specific “copy” and “adaption” operations (Fig. 9
                     ), in which “copy” means making a duplicate object from the original one and “adaption” means revising the duplicated object according to FPDM to make it appropriate for the query feature. Below we explain the details of the inheritance mechanisms for the multiple information inheritances described in Definition 3.

Before appending a machining operation, the cutting tool applied on the machining operation should be considered first. Therefore, a cutting tool needs to be added in the machining resource according to its parameters before a machining operation is appended. In general, the cutting tool parameters to be inherited include: tool name, tool type, tool number, geometry attributes (e.g. diameter, corner radius, length, etc.). Since the cutting tool of the duplicated machining operation meets the compatibility condition, that is the geometry parameters of the cutting tool are compatible with the machining geometry of the query feature, it indicates that the cutting tool can realize the machining of the specified machining region of the feature. Thus, the parameters of the cutting tool are directly inherited without revision.

With the machining operation sequence inheritance, the NC process of the query feature can be acquired quickly. First, each machining operation will be duplicated in terms of machining precedence, and then the machining operation will be revised through the adaption operation. Here, the duplication of the machining operation is actually the reuse of the process parameters, including machining operation type, drive geometry, machining strategy, cutting tool, etc. The inheritance mechanism of machining operation sequence is illustrated in Fig. 10
                        .

Since partial order relations are existed among machining operations in a machining operation sequence, the constraints between the machining operations will make the duplicated machining operation sequence exist redundant machining operations. If they are not eliminated, the machining efficiency of the tool path generated will decrease significantly because of much air machining. Therefore, a redundant machining operation evaluation rule is established to realize the adaption of the inherited machining operation sequence.

For two arbitrary machining operations 
                           
                              
                                 
                                    op
                                 
                              
                              
                                 i
                              
                           
                         and 
                           
                              
                                 
                                    op
                                 
                              
                              
                                 j
                              
                           
                           
                           
                              (
                              i
                              <
                              j
                              )
                           
                         of the duplicated machining operation sequence, corresponding to two cutting tools 
                           
                              
                                 d
                              
                              
                                 i
                              
                           
                         and 
                           
                              
                                 d
                              
                              
                                 j
                              
                           
                         respectively, the redundant machining operations can be eliminated in terms of different machining stages. Specifically, it can be described as follows:

(1) Roughing. If 
                           
                              
                                 
                                    op
                                 
                              
                              
                                 i
                              
                           
                         has the same drive geometries and machining regions along MA with 
                           
                              
                                 
                                    op
                                 
                              
                              
                                 j
                              
                           
                        , that is,
                           
                              
                                 φ
                                 
                                    (
                                    
                                       
                                          d
                                       
                                       
                                          i
                                       
                                    
                                    )
                                 
                                 =
                                 φ
                                 
                                    (
                                    
                                       
                                          d
                                       
                                       
                                          j
                                       
                                    
                                    )
                                 
                                 ∧
                                 
                                    
                                       D
                                    
                                    
                                       G
                                       i
                                    
                                 
                                 =
                                 
                                    
                                       D
                                    
                                    
                                       G
                                       j
                                    
                                 
                                 ,
                                 
                                 1
                                 ≤
                                 i
                                 <
                                 j
                                 ≤
                                 k
                                 ,
                              
                           
                        
                        
                           
                              
                                 
                                    op
                                 
                              
                              
                                 j
                              
                           
                         is a redundant rough machining operation.

(2) Finishing. Suppose that 
                           
                              
                                 
                                    op
                                 
                              
                              
                                 j
                              
                           
                         is a corner finishing operation, if the following condition is satisfied: 
                           
                              
                                 
                                    
                                       d
                                    
                                    
                                       i
                                    
                                 
                                 ≤
                                 min
                                 
                                    (
                                    min
                                    
                                       (
                                       
                                          
                                             T
                                          
                                          
                                             p
                                          
                                       
                                       )
                                    
                                    ,
                                    min
                                    
                                       (
                                       2
                                       
                                          
                                             R
                                          
                                          
                                             c
                                          
                                       
                                       )
                                    
                                    )
                                 
                                 ∧
                                 
                                    
                                       D
                                    
                                    
                                       G
                                       j
                                    
                                 
                                 ⊆
                                 
                                    
                                       D
                                    
                                    
                                       G
                                       i
                                    
                                 
                                 ,
                                 
                                 k
                                 ≤
                                 i
                                 <
                                 j
                                 ≤
                                 n
                                 ,
                              
                           
                        
                        
                           
                              
                                 
                                    op
                                 
                              
                              
                                 j
                              
                           
                         is a redundant corner finishing operation.

Suppose that 
                           
                              
                                 
                                    op
                                 
                              
                              
                                 j
                              
                           
                         is a fillet finishing operation, if the following condition is met: 
                           
                              
                                 
                                    
                                       d
                                    
                                    
                                       i
                                    
                                 
                                 ≤
                                 min
                                 
                                    (
                                    
                                       
                                          T
                                       
                                       
                                          p
                                       
                                    
                                    )
                                 
                                 ∧
                                 
                                    
                                       r
                                    
                                    
                                       i
                                    
                                 
                                 ≤
                                 
                                    
                                       R
                                    
                                    
                                       f
                                    
                                 
                                 ∧
                                 
                                    
                                       D
                                    
                                    
                                       G
                                       j
                                    
                                 
                                 ⊆
                                 
                                    
                                       D
                                    
                                    
                                       G
                                       i
                                    
                                 
                                 ,
                                 
                                 k
                                 ≤
                                 i
                                 <
                                 j
                                 ≤
                                 n
                                 ,
                              
                           
                        
                        
                           
                              
                                 
                                    op
                                 
                              
                              
                                 j
                              
                           
                         is a redundant fillet finishing operation.

In general, tool path generation is driven by the process parameters and drive geometries. Here, the drive geometries are created by machining geometries of the feature itself. Therefore, for a machining operation, drive geometry inheritance is not to inherit the geometries of the feature case, but to inherit its driven method (e.g. curve, surface, and boundary) and construction logic (e.g. machining geometry, reference geometry). Hence, drive geometry inheritance is also called logic inheritance.

After a machining operation is duplicated, the parameters of driven method are directly inherited without revision, whereas the drive geometries should be revised in terms of feature interaction and adjacent features. If the feature is a non-interaction feature, its machining geometry is referenced directly, while the feature is an interaction feature, the reference geometry is constructed as drive geometry according to its adjacent features in MFCG using the same construction logic of the feature case. Fig. 11
                         gives the drive geometry inheritance mechanism.

In general, the machining strategy parameters to be inherited include: cutting mode (e.g. parallel, radiation, and spiral), approach/retract mode, cutting direction (e.g. downward and upward), machining tolerance, and cutting parameters (e.g. cutting speed 
                           
                              
                                 v
                              
                              
                                 c
                              
                           
                        , feed rate 
                           f
                        , axial depth of cut 
                           
                              
                                 a
                              
                              
                                 p
                              
                           
                        , radial depth of cut 
                           
                              
                                 a
                              
                              
                                 e
                              
                           
                        ). As shown in Fig. 1, part of the parameters are related to the spatial position of machining geometry, i.e. safe plane, cutter axis; part of the parameters are related to the topological relations of machining geometries, i.e. cutting mode, approach/retract mode; and the other parameters are related to the technological data of the feature, i.e. machining tolerance, cutting parameters.

Since the topological relations are used in the feature similarity assessment as described in Refs.  [5,22], it indicates that the query feature has similar topological relations with the feature case. Therefore, once the machining operation is duplicated, the parameters related to the topological relations are inherited without revision. In addition, since the query feature is compatible with the NC process of the feature case as described above, it indicates that the technological data are compatible respectively. Consequently, the parameters related to the technological data are also inherited. However, the parameters related to the spatial position should be revised according to the machining geometry of the feature. For instance, the cutter axis is specified as the normal of the feature. The machining strategy inheritance mechanism is illustrated in Fig. 12
                        .

@&#EXPERIMENTS@&#

In order to verify the feasibility and effectiveness of our approach presented in this paper, we have developed a prototype system for NC process reuse of similar subparts on the platforms of Microsoft Visual Studio 2003 and CATIA V5 R16 component application architecture (CAA).


                        Fig. 13
                         shows two parts Model_1 and Model_2 (in the repository) from an aviation manufacturing enterprise, of which the material is aluminum alloy LD5. Using the algorithm in Ref.  [22], two matched features 
                           
                              
                                 C
                              
                              
                                 1
                              
                           
                         (Fig. 13(a)) and 
                           
                              
                                 C
                              
                              
                                 2
                              
                           
                         (Fig. 13(b)) are acquired. The MAs of the two features are shown in Fig. 13(a) and (b), respectively. As illustrated in the figure, there are two feasible NC process solutions for 
                           
                              
                                 C
                              
                              
                                 2
                              
                           
                         in the repository (Fig. 13(e)). Since the parameters of the cutter geometry of the two solutions are compatible with the machining region of 
                           
                              
                                 C
                              
                              
                                 1
                              
                           
                        , both two NC process solutions have the parameter-driven ability. Here, the accessible machining regions (green lines) along MA of the rough machining operations of the two NC process solutions are computed respectively (Fig. 13(c) and (d)). With Eq. (4), the NC process reusability of the two solutions for 
                           
                              
                                 C
                              
                              
                                 1
                              
                           
                         is 7.26% and 98.72%, respectively.

It is noted that, although both two NC process solutions can realize the machining of feature 
                           
                              
                                 C
                              
                              
                                 1
                              
                           
                        , since the number of tool retractions and accessible machining regions of solution 1 for 
                           
                              
                                 C
                              
                              
                                 1
                              
                           
                         and 
                           
                              
                                 C
                              
                              
                                 2
                              
                           
                         have great differences, the reusability of solution 1 is smaller. Whereas the number of tool retractions and accessible machining regions of solution 2 for 
                           
                              
                                 C
                              
                              
                                 1
                              
                           
                         and 
                           
                              
                                 C
                              
                              
                                 2
                              
                           
                         are all with little differences, and thus 
                           
                              
                                 C
                              
                              
                                 1
                              
                           
                         adopts solution 2 as its NC process preferentially.

Another sample with complex processes is used to illustrate the NC process reusability assessment of similar feature in Fig. 14
                        . In this example, the topology and shape of the two matched features are quite different. The MAs of the two features are generated and plotted in Fig. 14(a), (b), and the critical parameters (e.g. roughness, 
                           h
                        , 
                           
                              
                                 T
                              
                              
                                 p
                              
                           
                        ) for NC process parameter-driven characteristic evaluation are given in Fig. 14(c). According to the associated machining operations of 
                           
                              
                                 C
                              
                              
                                 4
                              
                           
                         in Fig. 14(d), the NC process of 
                           
                              
                                 C
                              
                              
                                 4
                              
                           
                         has the parameter-driven ability for 
                           
                              
                                 C
                              
                              
                                 3
                              
                           
                        , and with Eq. (4), we get that the NC process reusability is 36.87%. Based on the proposed NC process inheritance mechanism, we find that the 5th machining operation is a redundant corner finishing operation, which has to be eliminated, and thus the NC process for 
                           
                              
                                 C
                              
                              
                                 3
                              
                           
                         is composed of five machining operations. By statistics analysis, each machining operation generated by CAM software requires user interactions by means of mouse and keyboard 20 times on average  [19]. Therefore, more than 100 user interactions are required to accomplish the above-generated machining operations in the CAM software with traditional methods, which do not include the user interactions of reusable NC process searching and modifying. However, only about 6 user interactions are required to complete the above whole task with our approach.


                        Fig. 15
                         shows the example of NC process reusability assessment of similar subparts. Fig. 15(a) is the query subpart consisted of three features, i.e. 
                           
                              
                                 F
                              
                              
                                 1
                              
                           
                        , 
                           
                              
                                 F
                              
                              
                                 2
                              
                           
                        , and 
                           
                              
                                 F
                              
                              
                                 3
                              
                           
                        , and Fig. 15(b)–(d) are the first three most similar subparts returned through 3D CAD model retrieval, i.e. 
                           
                              
                                 S
                              
                              
                                 2
                              
                           
                           ,
                           
                              
                                 S
                              
                              
                                 3
                              
                           
                        , and 
                           
                              
                                 S
                              
                              
                                 4
                              
                           
                        . Their detailed machining operations are shown in the figure. Using the sub-graph isomorphism algorithm, three successful matches are found, i.e. 
                           
                              
                                 M
                              
                              
                                 1
                              
                           
                           ,
                           
                              
                                 M
                              
                              
                                 2
                              
                           
                        , and 
                           
                              
                                 M
                              
                              
                                 3
                              
                           
                        , and the matched feature pairs in each subpart are acquired accordingly. With Eq. (5), the NC process reusability of each similar subpart is computed respectively. It can be seen from the computation results that the NC process of 
                           
                              
                                 S
                              
                              
                                 2
                              
                           
                         has the highest reusability (i.e. 95.03%) for 
                           
                              
                                 S
                              
                              
                                 1
                              
                           
                         than other two similar subparts. Therefore, reuse of the NC process of 
                           
                              
                                 S
                              
                              
                                 2
                              
                           
                         could more effectively speed up the design process.

In Fig. 16
                        , we take two pockets with islands 
                           
                              
                                 C
                              
                              
                                 1
                              
                           
                         and 
                           
                              
                                 C
                              
                              
                                 2
                              
                           
                         as an example to illustrate the NC process inheritance mechanism. By using the redundant rule for machining operations, we get that there does not exist redundant machining operations in solution 2. Therefore, the machining operation sequence is inherited directly, i.e. pocket rough machining and side finish machining. Fig. 16(a) shows the tool path of 
                           
                              
                                 C
                              
                              
                                 2
                              
                           
                         for side finish machining with cutting tool D6, and the cutter axis is 
                           
                              (
                              0
                              ,
                              1
                              ,
                              0
                              )
                           
                        . The tool path of 
                           
                              
                                 C
                              
                              
                                 1
                              
                           
                         for side finish machining will be generated automatically as shown in Fig. 16(b) by inheriting the parameters of 
                           
                              
                                 M
                              
                              
                                 S
                              
                           
                           ,
                           T
                        , and 
                           
                              
                                 D
                              
                              
                                 G
                              
                           
                        . Here, the cutter axis, safe plane, and drive geometry should be revised in terms of the machining geometry of 
                           
                              
                                 C
                              
                              
                                 1
                              
                           
                        . For instance, the cutter axis is specified as 
                           
                              (
                              0
                              ,
                              −
                              1
                              ,
                              0
                              )
                           
                        , and the drive geometry is changed to the outer loop of the bottom face of 
                           
                              
                                 C
                              
                              
                                 1
                              
                           
                        . Moreover, the parameters are set automatically by using the APIs provided by CAM software to avoid plenty of repetitive work, which will improve the efficiency of NC process planning.


                        Fig. 17
                         shows the prototype system for NC process reuse, the using steps of the NC process segment generation for the query subpart are as follows: (1) select a similar subpart ID from the 3D CAD model retrieval result, and check its compatibility; (2) compute the NC process reusability of the similar subpart; (3) adapt the inherited NC process case. In Fig. 17(a), the ID of the query subpart is 7 (inherited from the structured MBD model), and the ID of the similar subpart in the retrieval result is 1. As illustrated in the figure, 
                           
                              
                                 C
                              
                              
                                 7
                              
                           
                         is compatible with the NC process of the similar subpart, and its reusability is 96.8%. The NC process of 
                           
                              
                                 C
                              
                              
                                 7
                              
                           
                        , which is composed of 13 machining operations, will be generated automatically and efficiently through NC process inheritance shown in the bottom of the figure, and then upload the automatically generated NC process solution to the NC process planning module for the part (Fig. 17(b)). According to the associated machining operations of the subparts, the NC process of the complex aircraft structural part Model_5 can be generated by manually sequencing these machining operations.

In order to demonstrate the significant improvement of our approach on efficiency, the comparisons with the interactive programming based on the CATIA system are listed in Table 2
                        . It can be seen from the table that 317 machining operations are required to accomplish the NC programming for Model_5 which require more than 6340 user interactions and 1200 min through using the manual programming approach. However, with our approach, 289 machining operations, which are corresponding to 62 pockets with various topologies shapes and technological requirements, can be automatically generated which require only 418 user interactions, and the other 28 machining operations are manually completed which require less than 660 user interactions, and the programming time is about 226 min. The NC programming efficiency is improved by 5 times evidently since the reuse degree of the machining operations is 91.17%.

@&#DISCUSSION@&#

In this section, we will further discuss the advantages, robustness and potential application domains of our approach.

As mentioned above, our approach establishes the FPDM to guide the entire NC process reuse course and reveal the NC process parameter-driven characteristic to associate the query feature with the NC process of similar feature. Essentially, NC process inheritance for query feature is to instantiate FPDM in terms of the process parameters of similar feature. Moreover, the reusability concept is introduced to quantize the reusable degree for the NC process of similar feature, which is an important criterion to determine the optimal NC process solution. Furthermore, our approach possesses the following flexibilities: (1) the feasible NC process solution for the query feature/subpart can be achieved even if it is not predefined, and (2) multiple feasible NC process solutions for the same query feature/subpart can be generated.

In order to illustrate the advantages of our approach, some comparisons between our approach and the typical existing methods are shown in Table 3
                     . In our approach, the machining know-how is captured automatically from the existing successful CAM models, and the NC process reuse course is automatically realized with some user interactions. However, the existing methods still rely heavily on engineers’ experience, and usually require a lot of user interactions to search and modify the reusable NC process case, or to construct the machining know-how database, e.g. predefined feature library and heuristic rules, and their flexibility is low since they cannot generate the machining operations of the features not stored in the machining know-how database. Moreover, their reuse granularity is only limited to the feature level, whereas our approach is extended to subpart level with greater NC process reuse granularity.

As for the robustness of our approach, the following two issues should be considered. One is the heterogeneity of 3D CAD models (e.g. a face is expressed with multiple sub-faces), and the other is the transition features (e.g. fillets and chamfers). Due to the topology influences from them, they may cause unexpected differences in feature recognition, MA generation and feature/subpart similarity assessment, and thus make the approach unstable. To overcome these influences, a preprocessing operation can be applied to provide a uniform representation for 3D CAD models. For instance, we can detect and merge the sub-faces, and detect the transition features and design some specified operations (e.g. suppressing and restoring) for them to improve the robustness of our approach.

Our approach has the potential to generate the query part’s NC process by merging multiple NC process segments of similar subparts from different parts since 3D CAD model retrieval could help user effectively locate the similar subparts. That is, retrieve the similar subparts distributed on multiple 3D CAD models in the repository first, and then generate the process route of the query part through recombining and optimizing the NC process segments of multiple similar subparts. Moreover, although the pockets machined with 2 1/2-axis CNC milling are taken as examples to illustrate the NC process reuse principle in this paper, the principle of our approach is also suitable for pocket with free-form surfaces. Here, it needs to independently design corresponding algorithms in terms of the characteristics of free-form surface. In addition, the principle can be further extended to other domains, e.g. manufacturing cost estimation, feature-based fixture design, and assembly automation.

In this paper, a novel NC machining process reuse approach for similar subparts is presented, which extends the feature-based NC process reuse to a greater granularity of subpart with better flexibility and higher NC process generation efficiency. A general framework for NC process reuse is proposed first, which combines 3D CAD model retrieval, data mining for NC process cases and NC process reuse technologies together. Moreover, a feature-based parameter-driven model is established to represent the association between a machining feature and a machining operation. The NC process parameter-driven characteristic of similar feature is revealed according to FPDM. In addition, an NC process reusability assessment approach of similar pocket/subpart based on medial axis transform is proposed, making NC process decision-making proceed from the qualitative to the quantitative. Finally, the NC process inheritance mechanisms are explored to implement the NC process reuse automatically and efficiently. The experiments with a prototype system indicate that our approach can effectively support NC process reuse of similar subpart.

In the near future, several issues are worth to be further explored to improve the practicability of our approach: (1) the NC process reuse for the pocket with free-form surface, and (2) the combination and optimization for the generated NC process segments of multiple different features/subparts from the query part.

@&#ACKNOWLEDGMENT@&#

The authors are grateful to the financial support from the National Natural Science Foundation of China (No. 51375397, 51175434).

@&#REFERENCES@&#

