@&#MAIN-TITLE@&#A unified panoramic stitching and multi-projector rendering scheme for immersive panoramic displays

@&#HIGHLIGHTS@&#


               
               
                  
                     
                        
                           
                           Generation of panoramic videos requires alignment and stitching of frames.


                        
                        
                           
                           High resolution immersive projection requires multi-projector alignment and rendering.


                        
                        
                           
                           We present a unified panorama stitching and multi-projector rendering scheme.


                        
                        
                           
                           The scheme provides considerable speed-up over traditional stitching and rendering schemes.


                        
                     
                  
               
            

@&#KEYPHRASES@&#

Panoramas

Look up Table

Multi camera

Multi projector displays

@&#ABSTRACT@&#


               
               
                  Panoramic videos provide a high resolution wide-angle field of view to audience. The rendering of such panoramic videos on large multi-projector curved displays further enhances the experience by providing them an immersive visual environment. Immersive panoramic projection thus comprise of three steps: acquisition of videos, stitching of video frames and their projection using multi-projector display system. Both panoramic stitching and multi-projector rendering require compute intensive geometric and photometric transformations that have to be applied for each frame of a video during stitching as well as rendering process. In this paper, we propose a unified scheme that handles these two separate geometric transformations using a single, combined Look up Table (LUT). The scheme allows projection of planar and cylindrical panoramas on curved cylindrical displays. Experimental results show that the proposed scheme provides a speedup of up to 73% and 83% for projector resolutions of HD and 4K respectively, for a two-camera two-projector panoramic display system. Furthermore, for a 4K projector, the proposed scheme requires 2.278ms for the geometric transformation of its content, thus enabling real time panoramic video projection.
               
            

@&#INTRODUCTION@&#

Panoramic videos provide wide field of view of an environment by stitching together synchronized video frames from multiple cameras arranged on a rig [1,2]. Once limited to geological surveys, and surveillance applications [3], their uses have been extended to entertainment industry [4–6], high-resolution gaming and filming of movies and live art performances. Furthermore, watching such high definition media content on large immersive projection surfaces is becoming popular in Tele-broadcasting services (e.g., live sports events) [6]. Such immersive projection environments typically utilize a cylindrical projection surface where the content is projected using multiple partially overlapping, projectors to project high-resolution content, which appears as a single large image to the viewer [7,8]. Fig. 1
                      illustrates an end to end panoramic video acquisition, stitching and rendering system. There are two separate processing steps required for the panoramic video projection on large screens to provide an immersive experience: panoramic stitching and multi-projector rendering. Panoramic stitching is comprised of calculating and applying geometric and photometric corrections to individual cameras’ frames resulting in a seamlessly stitched panorama or panoramic frame. For a panoramic video, the time synchronized frames from all the input cameras are stitched together. An immersive projection system can be setup by placing multiple projectors having partial overlapping field of projection on a cylindrical surface [8,22]. Next, a calibration is conducted, which identifies the content of panorama to be projected from each projector and also computes the required geometric and photometric corrections for each projector required to project a seamless image. Rendering geometric correction ensures that projected content in the overlapping projector region are aligned, whereas the photometric correction ensures seamless blending in the overlapping region. Geometric and photometric transformations, required for the generation and rendering of panoramic images, are computationally intensive and require significantly large amount of memory. These requirements further increase as the resolution of input content increase. As an example, a panoramic video acquisition system using 5 High Definition (HD) 1920×1080 cameras of 30 frames per second (FPS) requires two sets of geometric transformations to be applied on approximately 311million pixels per second. Comparatively, a system using 5 Ultra High Definition (UHD)-4K (3840×2160) cameras of 30 frames per second (FPS) needs to process approximately 1.24billion pixels per second. These analyses provide the motivation to explore computationally efficient schemes for multi-projector rendering of panoramic videos. Conventional practices in this area have handled these two problems separately: the stitching transformations are first applied to generate the panoramic video [9], and then the rendering transformations are applied on the panoramic video to project it using multiple projectors on an immersive cylindrical projection surface [10]. The increased use of low cost projectors in sports bars and other venues for projecting sports events has made the service scenario consisting of panorama stitching and multi-projector rendering a common practice.

In this paper, we propose a unified approach that utilizes a combined LUT based transformation to account for both the stitching and multi-projector rendering transformations. The intermediate panoramic video is thus essentially not required to be generated. The proposed scheme utilizes perspective and cylindrical stitching modes [11,12] for geometric correction during stitching and Bezier based geometric correction for multi-projector rendering [8] for projection on planar and quadratic surfaces. This is achieved in two stages: a one-time Combined LUT (C-LUT) generation stage and a rendering stage in which the C-LUT is applied. It is assumed that once the geometric corrections have been assessed during calibration they do not change during the recording interval. Organization of upcoming sections is as follows. Section 2 discusses related research work. Section 3 provides a description of the proposed stitching and rendering scheme based on C-LUT. Section 4 contains results of experiments performed on the proposed stitching and rendering system. Section 5 provides the conclusion.

@&#RELATED WORK@&#

Over the past decades, extensive research on image and video panoramas has been carried out resulting in various stitching algorithms. Usually, images acquired by panning a single camera, across a scene, are used for the generation of panoramas by the image stitching process. For a video panorama, the same stitching process is conducted using simultaneous synchronized video streams from multiple camera sources. Szeliski [13] provided a detailed discussion on image stitching and alignment. Generally, there are two different ways to stitch video panorama in real time. First way is to conduct all the computations for stitching at runtime. This type of stitching is called online stitching which does not require any geometric correction LUTs to be saved in memory. Such systems are built with high computational power that increases the system cost due to requirement of special GPUs or hardware. Second way is to generate geometric correction LUTs in offline mode and utilize these LUTs in online mode. This method requires less computational cost since LUTs store information for mapping pixels from camera domain to display domain. Dhand and Daggubati [9] used video streams from multiple cameras for real-time panorama generation while Kumara et al. [14] created automatic panoramas with dynamic backgrounds using recorded video streams. Tang et al. [15] performed various optimizations on image normalization, feature point extraction and homography matrix estimation for speeding up panorama generation. Tennoe et al. [16] used multiple low cost array mounted CCD cameras for real-time panorama generation for sports broadcast and presented performance analysis of the use of GPUs that provided stitching at 30fps. Similarly, Tang et al. [15] created immersive cockpit using remotely mounted CCD cameras and providing the video stream from these cameras to a remote display. There are many optimizations that have been applied for faster real-time panoramic video generation. Some optimizations require frame adjustments while some use hash tables or lookup tables for mapping pixels. An array of four cameras covering 360° FOV was used by Bistry and Zhang [17] for generating real-time panorama using lookup tables. They created an Omni-vision system for surveillance purposes using FPGAs and GPUs. They calibrated their system and generated lookup tables in offline mode, then used the lookup tables in online mode for real-time stitching. By utilizing NVidia GTX580 GPU they achieved processing time of 7ms for panorama stitching. Omni-vision systems developed by Bistry and Zhang [17] used multiple mono cameras, whereas Weissig et al. [18] used multiple 3D stereo cameras for creating 3D, 360° FOV panorama on a cylindrical screen. Luo et al. [19] used compressed LUT based technique to warp camera frames on FPGAs in real time. For input image resolution of 3200×768, Luo et al. [19] achieved much smaller sized LUTs i.e. 25kb, which were stored in on-chip memory. Creation of non-standard high resolution (i.e. 10K×2K) panoramas led to the need for displays capable of displaying such unconventional high resolution content. Since no display is capable of handling such large resolutions, the only solution is to use multiple low cost (standard resolution) projectors. A system capable of creating panoramic videos of 5K resolution followed by its rendering on multiple High Definition projectors was created by Fehn et al. [12] for streaming UHD panoramic videos of sports events. Dasgupta and Banerjee [11] presented an autonomous navigation system by creating real-time augmented reality based panoramic video system by rendering it on multiple low cost displays. Popovic et al. [20] implemented a real-time multi-camera, panoramic video creation and rendering system on FPGA with high system throughput. Hrenek et al. [10] created a 360° panorama display system by using multiple projectors for cylindrical surface projections. All of these schemes required some custom hardware or specific GPU for processing. Furthermore, all of these treated the procedure as a two-step process: generation of panoramic video followed by its projection.

To summarize, while there has been a lot of work related to faster panorama generation or rendering, there has been no prior work that provides a unified framework for panoramic video stitching and rendering. To the best of our knowledge, our proposed system provides a unified framework for panoramic video stitching and rendering for the first time.

A panoramic video acquisition system consists of a number of cameras mounted on a platform in such a way that their collective viewing angle is larger than that of a single camera. These cameras are placed and directed in such a way that the view of each camera partially overlaps with the view of at least one other camera. Considering M number of cameras forming the camera rig, let 
                        
                           
                              
                                 C
                              
                              
                                 i
                                 (
                                 j
                                 )
                              
                           
                        
                      be the jth frame captured from the 
                        ith camera. Thus for a three camera system, 
                        j
                        th
                      Panorama frame 
                        
                           
                              
                                 P
                              
                              
                                 j
                              
                           
                        
                      is generated by geometrically warping and blending 
                        
                           
                              
                                 C
                              
                              
                                 1
                                 (
                                 j
                                 )
                              
                           
                           ,
                           
                              
                                 C
                              
                              
                                 2
                                 (
                                 j
                                 )
                              
                           
                           
                           and
                           
                           
                              
                                 C
                              
                              
                                 3
                                 (
                                 j
                                 )
                              
                           
                        
                      such that the common features in the overlapping regions of neighboring frames 
                        
                           (
                           
                              
                                 C
                              
                              
                                 1
                                 (
                                 j
                                 )
                              
                           
                           
                           and
                           
                           
                              
                                 C
                              
                              
                                 (
                                 i
                                 +
                                 1
                                 )
                                 (
                                 j
                                 )
                              
                           
                           )
                        
                      are aligned. Fig. 2
                      depicts the flow diagram for a panoramic stitching process when M
                     =3. During the calibration step in the stitching phase; the transformations required for the generation of panorama are computed by using the initial frames 
                        
                           
                              
                                 C
                              
                              
                                 1
                                 (
                                 1
                                 )
                              
                           
                           ,
                           
                              
                                 C
                              
                              
                                 2
                                 (
                                 1
                                 )
                              
                           
                           
                           and
                           
                           
                              
                                 C
                              
                              
                                 3
                                 (
                                 1
                                 )
                              
                           
                        
                     . For perspective panoramas, this is typically achieved by extracting SIFT based feature points [6,21] in the overlapping region of the neighboring camera frames 
                        
                           (
                           
                              
                                 C
                              
                              
                                 i
                                 (
                                 1
                                 )
                              
                           
                           
                           and
                           
                           
                              
                                 C
                              
                              
                                 (
                                 i
                                 +
                                 1
                                 )
                                 (
                                 1
                                 )
                              
                           
                           )
                        
                      and estimating the inter-camera homography matrix (
                        
                           
                              
                                 Hc
                              
                              
                                 i
                              
                           
                        
                     ) that provides the geometric transformation that transforms the content of 
                        
                           
                              
                                 C
                              
                              
                                 i
                              
                           
                        
                      such that the matched feature points of 
                        
                           
                              
                                 C
                              
                              
                                 i
                                 (
                                 1
                                 )
                              
                           
                        
                      are aligned to those of 
                        
                           
                              
                                 C
                              
                              
                                 (
                                 i
                                 +
                                 1
                                 )
                                 (
                                 1
                                 )
                              
                           
                        
                      
                     [1]. When stitching the panorama for more than two cameras, one of the cameras is assumed as the reference with respect to which the homography (
                        
                           
                              
                                 Hc
                              
                              
                                 i
                              
                           
                        
                     ) of each camera is computed. For wider horizontal field of view, we used cylindrical panoramas that allow stitching of full 360° view. We first applied the rotational transformation 
                        
                           
                              
                                 γ
                              
                              
                                 i
                              
                           
                        
                      prior to the computation of 
                        
                           
                              
                                 Hc
                              
                              
                                 i
                              
                           
                        
                      for each camera 
                        i
                     . The 
                        
                           
                              
                                 γ
                              
                              
                                 i
                              
                           
                        
                      maps each camera onto a cylindrical surface of radius equal to the focal length of the cameras. This process makes 
                        
                           
                              
                                 Hc
                              
                              
                                 i
                              
                           
                        
                      become a simple translation [13]. Let 
                        
                           
                              
                                 Cg
                              
                              
                                 i
                                 (
                                 j
                                 )
                              
                           
                        
                      be the geometrically warped frame of camera 
                        i
                      after the application of its corresponding 
                        
                           
                              
                                 γ
                              
                              
                                 i
                              
                           
                        
                      and 
                        
                           
                              
                                 Hc
                              
                              
                                 i
                              
                           
                        
                      transformations. To generate a seamless panorama frame Pj
                     , these geometrically transformed frames have to be smoothly faded into each other. This is achieved by multiplying the geometrically warped frames 
                        
                           (
                           
                              
                                 Cg
                              
                              
                                 1
                                 (
                                 j
                                 )
                              
                           
                           ,
                           
                              
                                 Cg
                              
                              
                                 2
                                 (
                                 j
                                 )
                              
                           
                           ,
                           
                              
                                 Cg
                              
                              
                                 3
                                 (
                                 j
                                 )
                              
                           
                           )
                        
                      by their corresponding blend masks 
                        
                           (
                           
                              
                                 CB
                              
                              
                                 1
                              
                           
                           ,
                           
                              
                                 CB
                              
                              
                                 2
                              
                           
                           ,
                           
                              
                                 CB
                              
                              
                                 3
                              
                           
                           )
                        
                      and finally combining the blended frames together. The blend masks are a 2D mask of intensity weights having same dimensions as that of transformed frames. The weights are computed such as to ensure smooth blending in the overlapping region. In the interest of temporal coherence and computational efficiency 
                        
                           
                              
                                 γ
                              
                              
                                 i
                              
                           
                        
                     , 
                        
                           
                              
                                 Hc
                              
                              
                                 i
                              
                           
                        
                      and 
                        
                           
                              
                                 CB
                              
                              
                                 i
                              
                           
                        
                      are typically computed only once using the initial frames of each camera, i.e., 
                        
                           
                              
                                 C
                              
                              
                                 1
                                 (
                                 1
                                 )
                              
                           
                           ,
                           
                              
                                 C
                              
                              
                                 2
                                 (
                                 1
                                 )
                              
                           
                           
                           and
                           
                           
                              
                                 C
                              
                              
                                 3
                                 (
                                 1
                                 )
                              
                           
                        
                     . The rest of the frames in the video are stitched using these pre-computed transformations (
                        
                           
                              
                                 γ
                              
                              
                                 i
                              
                           
                        
                      and 
                        
                           
                              
                                 Hc
                              
                              
                                 i
                              
                           
                        
                     ) and the blend mask (
                        
                           
                              
                                 CB
                              
                              
                                 i
                              
                           
                        
                     ). Let 
                        
                           
                              
                                 T
                              
                              
                                 i
                              
                              
                                 C
                                 →
                                 P
                              
                           
                        
                      be the geometric transformation that transforms the camera domain image 
                        
                           
                              
                                 C
                              
                              
                                 i
                                 (
                                 j
                                 )
                              
                           
                        
                      to the panorama domain image 
                        
                           
                              
                                 Cg
                              
                              
                                 i
                                 (
                                 j
                                 )
                              
                           
                        
                     , i.e.
                        
                           (1)
                           
                              
                                 
                                    Cg
                                 
                                 
                                    i
                                    (
                                    j
                                    )
                                 
                              
                              =
                              
                                 
                                    T
                                 
                                 
                                    i
                                 
                                 
                                    C
                                    →
                                    P
                                 
                              
                              (
                              
                                 
                                    C
                                 
                                 
                                    i
                                    (
                                    j
                                    )
                                 
                              
                              )
                           
                        
                     
                  

The transformation 
                        
                           
                              
                                 T
                              
                              
                                 i
                              
                              
                                 C
                                 →
                                 P
                              
                           
                        
                      thus transforms the camera domain coordinates 
                        
                           
                              
                                 
                                    
                                       
                                          x
                                       
                                       
                                          i
                                       
                                       
                                          C
                                       
                                    
                                    ,
                                    
                                       
                                          y
                                       
                                       
                                          i
                                       
                                       
                                          C
                                       
                                    
                                 
                              
                           
                        
                      to panorama domain coordinates 
                        
                           
                              
                                 
                                    
                                       
                                          x
                                       
                                       
                                          i
                                       
                                       
                                          g
                                       
                                    
                                    ,
                                    
                                       
                                          y
                                       
                                       
                                          i
                                       
                                       
                                          g
                                       
                                    
                                 
                              
                           
                        
                      as defined below
                        
                           (2)
                           
                              
                                 
                                    
                                       
                                          
                                             x
                                          
                                          
                                             i
                                          
                                          
                                             g
                                          
                                       
                                       ,
                                       
                                          
                                             y
                                          
                                          
                                             i
                                          
                                          
                                             g
                                          
                                       
                                    
                                 
                              
                              =
                              
                                 
                                    Hc
                                 
                                 
                                    i
                                 
                              
                              
                                 
                                    
                                       
                                          
                                             γ
                                          
                                          
                                             i
                                          
                                       
                                       
                                          
                                             
                                                
                                                   
                                                      x
                                                   
                                                   
                                                      i
                                                   
                                                   
                                                      C
                                                   
                                                
                                                ,
                                                
                                                   
                                                      y
                                                   
                                                   
                                                      i
                                                   
                                                   
                                                      C
                                                   
                                                
                                             
                                          
                                       
                                    
                                 
                              
                           
                        
                     
                  

The geometrically transformed frames are multiplied with their corresponding blend masks and finally added to generate the panorama frame 
                        Pj
                        
                     , thus
                        
                           (3)
                           
                              
                                 
                                    P
                                 
                                 
                                    j
                                 
                              
                              =
                              
                                 
                                    Cg
                                 
                                 
                                    1
                                    (
                                    j
                                    )
                                 
                              
                              ·
                              
                                 
                                    CB
                                 
                                 
                                    1
                                 
                              
                              +
                              
                                 
                                    Cg
                                 
                                 
                                    2
                                    (
                                    j
                                    )
                                 
                              
                              ·
                              
                                 
                                    CB
                                 
                                 
                                    2
                                 
                              
                              +
                              ⋯
                              +
                              
                                 
                                    Cg
                                 
                                 
                                    M
                                    (
                                    j
                                    )
                                 
                              
                              ·
                              
                                 
                                    CB
                                 
                                 
                                    M
                                 
                              
                           
                        
                     
                  

Once all the panoramic video frames are generated, they are passed on to the rendering display system. Note that the stitched panorama is a very high resolution content, and it has to be scaled down to the projector’s resolution if a conventional single projector is used. The use of multiple projectors overcomes this limitation and allows vis-à-vis (pixel to pixel) mapping of panorama pixel to projector pixel. The projectors are typically arranged to allow a small overlap across neighboring projectors. Thus, similar to image stitching, seamless projection of the content from multiple projectors is required. When the projection surface is planar this can be achieved by estimating a homography 
                        HDk
                        
                      that relates the coordinates in the panorama 
                        P
                      to the coordinates in the 
                        kth
                      display. However, the cylindrical projection surface causes nonlinear distortion in the projection region displayed by each projector. Most widely used systems make use of a camera feedback for estimating this distortion [7]. In this work, we follow the Bezier based geometric correction scheme [8] for estimating the distortion caused by the projection surface. A pre-defined pattern consisting of a rectangular grid of points is projected sequentially using each of the N projectors onto the projection surface and the projections for each of them are captured using a feedback camera. The curved nature of the projection surface appears as a nonlinear distortion to the rectangular grid of points. Since, the projection surface is cylindrical, a 2nd order Bezier transformation (
                        
                           
                              
                                 β
                              
                              
                                 k
                              
                           
                        
                     ) function is estimated that transforms the distorted grid back to a rectangular grid for the 
                        kth
                      display. The grid points thus act as the control points for the Bezier estimation. A 2nd order parametric 2D-Bezier patch on (u, v)-plane can be considered as a composition of two independent parametric curves 
                        B
                     (
                        u
                     ) and 
                        B
                     (
                        v
                     ) orthogonal to each other, and defined by (2+1)×(2+1) control points. The value of each Bezier parameter is defined over a range of 0–1.
                        
                           (4)
                           
                              
                                 
                                    
                                       
                                          
                                             β
                                          
                                          
                                             k
                                          
                                       
                                       (
                                       u
                                       ,
                                       v
                                       )
                                       =
                                       
                                          
                                             
                                                ∑
                                             
                                             
                                                p
                                                =
                                                0
                                             
                                             
                                                2
                                             
                                          
                                       
                                       
                                          
                                             
                                                ∑
                                             
                                             
                                                q
                                                =
                                                0
                                             
                                             
                                                2
                                             
                                          
                                       
                                       
                                          
                                             B
                                          
                                          
                                             2
                                          
                                          
                                             p
                                          
                                       
                                       (
                                       u
                                       )
                                       
                                          
                                             B
                                          
                                          
                                             2
                                          
                                          
                                             q
                                          
                                       
                                       (
                                       v
                                       )
                                       
                                          
                                             k
                                          
                                          
                                             pq
                                          
                                       
                                       
                                       
                                          
                                             
                                                
                                                   
                                                      
                                                         0
                                                         ⩽
                                                         u
                                                         ⩽
                                                         1
                                                      
                                                   
                                                   
                                                      
                                                         0
                                                         ⩽
                                                         v
                                                         ⩽
                                                         1
                                                      
                                                   
                                                
                                             
                                          
                                       
                                    
                                 
                                 
                                    
                                       
                                          
                                             B
                                          
                                          
                                             2
                                          
                                          
                                             p
                                          
                                       
                                       (
                                       u
                                       )
                                       =
                                       
                                          
                                             
                                                
                                                   
                                                      
                                                         2
                                                      
                                                   
                                                   
                                                      
                                                         p
                                                      
                                                   
                                                
                                             
                                          
                                       
                                       
                                          
                                             u
                                          
                                          
                                             p
                                          
                                       
                                       
                                          
                                             (
                                             1
                                             -
                                             u
                                             )
                                          
                                          
                                             2
                                             -
                                             p
                                          
                                       
                                       ,
                                       
                                       
                                          
                                             B
                                          
                                          
                                             2
                                          
                                          
                                             q
                                          
                                       
                                       (
                                       v
                                       )
                                       =
                                       
                                          
                                             
                                                
                                                   
                                                      
                                                         2
                                                      
                                                   
                                                   
                                                      
                                                         q
                                                      
                                                   
                                                
                                             
                                          
                                       
                                       
                                          
                                             v
                                          
                                          
                                             q
                                          
                                       
                                       
                                          
                                             (
                                             1
                                             -
                                             v
                                             )
                                          
                                          
                                             2
                                             -
                                             q
                                          
                                       
                                    
                                 
                              
                           
                        
                     where 
                        
                           
                              
                                 B
                              
                              
                                 2
                              
                              
                                 p
                              
                           
                           (
                           u
                           )
                        
                      and 
                        
                           
                              
                                 B
                              
                              
                                 2
                              
                              
                                 q
                              
                           
                           (
                           v
                           )
                        
                      represent the Bezier curve weights along u and v axes and 
                        
                           
                              
                                 k
                              
                              
                                 pq
                              
                           
                        
                      is the location of each control point. Once the correction 
                        
                           
                              
                                 β
                              
                              
                                 k
                              
                           
                        
                      is applied to the content being projected by the kth display, it appears as being projected onto a planar surface. Thus, a display homography 
                        HDk
                        
                      can be computed for each display in ways to align the content in the overlapping region of every neighboring display pairs. Considering N number of displays forming the multi-projector rendering system, the panorama has to be split across N displays. Similar to the stitching system, the display blend masks 
                        DMk
                        
                      are computed that allow seamless projection in the overlapping region of neighboring displays. Let 
                        
                           
                              
                                 T
                              
                              
                                 k
                              
                              
                                 P
                                 →
                                 D
                              
                           
                        
                      denote the transformation that transforms the region of panorama 
                        
                           
                              
                                 P
                              
                              
                                 j
                              
                           
                        
                      being displayed by the kth projector from the panorama domain to the display domain 
                        
                           
                              
                                 D
                              
                              
                                 β
                                 k
                                 (
                                 j
                                 )
                              
                           
                        
                     . Fig. 2 describes the case where the content is projected using two projectors (N
                     =2). The 
                        
                           
                              
                                 D
                              
                              
                                 k
                                 (
                                 j
                                 )
                              
                           
                        
                     , computed by applying its corresponding display blend mask 
                        DMk
                        
                      with the 
                        
                           
                              
                                 D
                              
                              
                                 β
                                 k
                                 (
                                 j
                                 )
                              
                           
                        
                     , is the final content projected by the kth display. Similar to stitching, the transformations (
                        
                           
                              
                                 H
                              
                              
                                 Dk
                              
                           
                           ,
                           
                              
                                 β
                              
                              
                                 k
                              
                           
                        
                     ) and blend masks (
                        DMk
                        
                     ) are computed only once during the calibration phase and applied continuously during the rendering phase. During calibration phase, the pattern projected by each projector is captured using the feedback camera. The captured pattern is then used to extract the four projection boundaries for each of the N projectors [1]. The blend weight for each pixel that falls in the non-overlapping region is 1. For each pixel (
                        ρ
                     ) that falls in the overlapping region of two neighboring projectors (k and k
                     +1) the blend weight can have any value between 0 and 1 and is computed using the scheme proposed by Harville et al. [7]. Let 
                        
                           
                              
                                 
                                    
                                       
                                          x
                                       
                                       
                                          k
                                       
                                       
                                          D
                                       
                                    
                                    ,
                                    
                                       
                                          y
                                       
                                       
                                          k
                                       
                                       
                                          D
                                       
                                    
                                 
                              
                           
                        
                      and 
                        
                           
                              
                                 
                                    
                                       
                                          x
                                       
                                       
                                          k
                                          +
                                          1
                                       
                                       
                                          D
                                       
                                    
                                    ,
                                    
                                       
                                          y
                                       
                                       
                                          k
                                          +
                                          1
                                       
                                       
                                          D
                                       
                                    
                                 
                              
                           
                        
                      be the projector domain coordinates of the pixel 
                        ρ
                      for kth and (k
                     +1)th projector. A parameter 
                        
                           
                              
                                 ξ
                              
                              
                                 k
                              
                           
                           
                              
                                 
                                    
                                       
                                          x
                                       
                                       
                                          k
                                       
                                       
                                          D
                                       
                                    
                                    ,
                                    
                                       
                                          y
                                       
                                       
                                          k
                                       
                                       
                                          D
                                       
                                    
                                 
                              
                           
                        
                      is defined as the product of distances of pixel 
                        p
                      from the two nearest projection boundaries of the kth projector. The blend weights of pixel 
                        ρ
                      for blend masks 
                        DMk
                        
                      and 
                        DMk+1
                        
                      are then computed as 
                        
                           
                              
                                 
                                    
                                       
                                          ξ
                                       
                                       
                                          k
                                       
                                    
                                    (
                                    
                                       
                                          x
                                       
                                       
                                          k
                                       
                                       
                                          D
                                       
                                    
                                    ,
                                    
                                       
                                          y
                                       
                                       
                                          k
                                       
                                       
                                          D
                                       
                                    
                                    )
                                    /
                                    (
                                    
                                       
                                          ξ
                                       
                                       
                                          k
                                       
                                    
                                    
                                       
                                          
                                             
                                                
                                                   
                                                      x
                                                   
                                                   
                                                      k
                                                   
                                                   
                                                      D
                                                   
                                                
                                                ,
                                                
                                                   
                                                      y
                                                   
                                                   
                                                      k
                                                   
                                                   
                                                      D
                                                   
                                                
                                             
                                          
                                       
                                       
                                          ∗
                                       
                                    
                                    
                                       
                                          ξ
                                       
                                       
                                          k
                                       
                                    
                                    
                                       
                                          
                                             
                                                
                                                   x
                                                
                                                
                                                   k
                                                   +
                                                   1
                                                
                                                
                                                   D
                                                
                                             
                                             ,
                                             
                                                
                                                   y
                                                
                                                
                                                   k
                                                   +
                                                   1
                                                
                                                
                                                   D
                                                
                                             
                                          
                                       
                                    
                                 
                              
                           
                        
                      and 
                        
                           
                              
                                 
                                    
                                       
                                          ξ
                                       
                                       
                                          k
                                       
                                    
                                    (
                                    
                                       
                                          x
                                       
                                       
                                          k
                                          +
                                          1
                                       
                                       
                                          D
                                       
                                    
                                    ,
                                    
                                       
                                          y
                                       
                                       
                                          k
                                          +
                                          1
                                       
                                       
                                          D
                                       
                                    
                                    )
                                    /
                                    (
                                    
                                       
                                          ξ
                                       
                                       
                                          k
                                       
                                    
                                    
                                       
                                          
                                             
                                                
                                                   
                                                      x
                                                   
                                                   
                                                      k
                                                   
                                                   
                                                      D
                                                   
                                                
                                                ,
                                                
                                                   
                                                      y
                                                   
                                                   
                                                      k
                                                   
                                                   
                                                      D
                                                   
                                                
                                             
                                          
                                       
                                       
                                          ∗
                                       
                                    
                                    
                                       
                                          ξ
                                       
                                       
                                          k
                                       
                                    
                                    
                                       
                                          
                                             
                                                
                                                   x
                                                
                                                
                                                   k
                                                   +
                                                   1
                                                
                                                
                                                   D
                                                
                                             
                                             ,
                                             
                                                
                                                   y
                                                
                                                
                                                   k
                                                   +
                                                   1
                                                
                                                
                                                   D
                                                
                                             
                                          
                                       
                                    
                                 
                              
                           
                        
                     , respectively [7]. The blend masks generated as a result of this scheme result in a smooth blending across the two neighboring projectors. Since, the computed transformations and blend masks are independent of the value of 
                        j
                     , we ignore the subscript 
                        j
                      for simplicity in the following discussion.

As highlighted in the literature survey, conventional approaches perform the panoramic rendering in two phases. First the panorama is stitched and stored and then a multi-projector rendering system reads the frames and renders them. Look up Tables (LUTs) are typically employed to speed up the transformations. LUTs make use of data addressing to apply a geometric transformation and hence provide a computationally efficient alternative to the application of actual transformation. In this study, we propose to combine the two separate geometric transformations of panorama stitching and display rendering into a single combined LUT (C-LUT). Thus, a combined 
                           
                              
                                 
                                    LUT
                                 
                                 
                                    i
                                    ,
                                    k
                                 
                                 
                                    C
                                    →
                                    D
                                 
                              
                           
                         directly transforms the camera coordinates of ith camera 
                           
                              
                                 
                                    
                                       
                                          
                                             x
                                          
                                          
                                             i
                                          
                                          
                                             C
                                          
                                       
                                       ,
                                       
                                          
                                             y
                                          
                                          
                                             i
                                          
                                          
                                             C
                                          
                                       
                                    
                                 
                              
                           
                         to display coordinates of kth display 
                           
                              
                                 
                                    
                                       
                                          
                                             x
                                          
                                          
                                             k
                                          
                                          
                                             D
                                          
                                       
                                       ,
                                       
                                          
                                             y
                                          
                                          
                                             k
                                          
                                          
                                             D
                                          
                                       
                                    
                                 
                              
                           
                         without generating the intermediate panoramic frame. Fig. 3
                         describes the steps required for multi-projector panoramic rendering using the proposed C-LUT. Depending upon the width of overlapping region between the cameras and the total resolution of the multi-projector display; multiple cameras may also contribute to the panoramic content displayed by the same projector. Let 
                           
                              
                                 
                                    C
                                 
                                 
                                    i
                                    ,
                                    k
                                 
                              
                           
                         denote the content of camera 
                           i
                         contributing to 
                           
                              
                                 
                                    D
                                 
                                 
                                    k
                                 
                              
                           
                        . The flow diagram in Fig. 3 illustrates example steps required for the panoramic rendering where the content from camera 1 and 2 are contributing to display 1 while camera 2 and 3 are contributing to display 2. The single-step transformation requires the computation of 
                           
                              
                                 
                                    T
                                 
                                 
                                    i
                                    ,
                                    k
                                 
                                 
                                    C
                                    →
                                    D
                                 
                              
                           
                         that defines the contribution of ith camera image 
                           
                              
                                 
                                    C
                                 
                                 
                                    i
                                 
                              
                           
                         to the kth display. Since the transformation has to be applied continually; we generate a Look up Table 
                           
                              
                                 
                                    
                                       
                                          
                                             LUT
                                          
                                          
                                             i
                                             ,
                                             k
                                          
                                          
                                             C
                                             →
                                             D
                                          
                                       
                                    
                                 
                              
                           
                         for each 
                           
                              
                                 
                                    T
                                 
                                 
                                    i
                                    ,
                                    k
                                 
                                 
                                    C
                                    →
                                    D
                                 
                              
                           
                        . Each entry of the 
                           
                              
                                 
                                    LUT
                                 
                                 
                                    i
                                    ,
                                    k
                                 
                                 
                                    C
                                    →
                                    D
                                 
                              
                           
                        , provides the x and y coordinates, 
                           
                              
                                 
                                    
                                       
                                          
                                             x
                                          
                                          
                                             i
                                          
                                          
                                             C
                                          
                                       
                                       ,
                                       
                                          
                                             y
                                          
                                          
                                             i
                                          
                                          
                                             C
                                          
                                       
                                    
                                 
                              
                           
                        , of the source pixel in the image 
                           
                              
                                 
                                    C
                                 
                                 
                                    i
                                 
                              
                           
                         and its transformed location 
                           
                              
                                 
                                    
                                       
                                          
                                             x
                                          
                                          
                                             k
                                          
                                          
                                             D
                                          
                                       
                                       ,
                                       
                                          
                                             y
                                          
                                          
                                             k
                                          
                                          
                                             D
                                          
                                       
                                    
                                 
                              
                           
                         in 
                           
                              
                                 
                                    D
                                 
                                 
                                    i
                                    ,
                                    k
                                 
                              
                           
                        . Here, 
                           
                              
                                 
                                    D
                                 
                                 
                                    i
                                    ,
                                    k
                                 
                              
                           
                         is the result of the application of 
                           
                              
                                 
                                    LUT
                                 
                                 
                                    i
                                    ,
                                    k
                                 
                                 
                                    C
                                    →
                                    D
                                 
                              
                           
                         to the content of image 
                           
                              
                                 
                                    C
                                 
                                 
                                    i
                                 
                              
                           
                         contributing to kth display.

The calibration phases of both the stitching and rendering phases compute the parameters required for the computation of 
                           
                              
                                 
                                    LUT
                                 
                                 
                                    i
                                    ,
                                    k
                                 
                                 
                                    C
                                    →
                                    D
                                 
                              
                           
                        . The 
                           
                              
                                 
                                    LUT
                                 
                                 
                                    i
                                    ,
                                    k
                                 
                                 
                                    C
                                    →
                                    D
                                 
                              
                           
                         is a forward mapping scheme that does not guarantee filling every 
                           
                              
                                 
                                    
                                       
                                          
                                             x
                                          
                                          
                                             k
                                          
                                          
                                             D
                                          
                                       
                                       ,
                                       
                                          
                                             y
                                          
                                          
                                             k
                                          
                                          
                                             D
                                          
                                       
                                    
                                 
                              
                           
                         and hence may result in holes in the corresponding 
                           
                              
                                 
                                    D
                                 
                                 
                                    i
                                    ,
                                    k
                                 
                              
                           
                         
                        [13]. To avoid this we compute an inverse transformation 
                           
                              
                                 
                                    T
                                 
                                 
                                    i
                                    ,
                                    k
                                 
                                 
                                    C
                                    →
                                    D
                                 
                              
                           
                         that can be applied on all the display coordinates 
                           
                              
                                 
                                    
                                       
                                          
                                             x
                                          
                                          
                                             k
                                          
                                          
                                             D
                                          
                                       
                                       ,
                                       
                                          
                                             y
                                          
                                          
                                             k
                                          
                                          
                                             D
                                          
                                       
                                    
                                 
                              
                           
                        . The inverse transformation ensures that a value exists for each display coordinate. 
                           
                              
                                 
                                    T
                                 
                                 
                                    i
                                    ,
                                    k
                                 
                                 
                                    C
                                    →
                                    D
                                 
                              
                           
                         can be represented as follows,
                           
                              (5)
                              
                                 
                                    
                                       C
                                    
                                    
                                       i
                                       ,
                                       k
                                    
                                 
                                 =
                                 
                                    
                                       T
                                    
                                    
                                       i
                                       ,
                                       k
                                    
                                    
                                       D
                                       →
                                       C
                                    
                                 
                                 (
                                 
                                    
                                       D
                                    
                                    
                                       i
                                       ,
                                       k
                                    
                                 
                                 )
                              
                           
                        
                     

And applies the following combined rendering and stitching transformations to the coordinates,
                           
                              (6)
                              
                                 
                                    
                                       
                                          
                                             
                                                x
                                             
                                             
                                                i
                                                ,
                                                k
                                             
                                             
                                                C
                                             
                                          
                                          ,
                                          
                                             
                                                y
                                             
                                             
                                                i
                                                ,
                                                k
                                             
                                             
                                                C
                                             
                                          
                                       
                                    
                                 
                                 =
                                 
                                    
                                       γ
                                    
                                    
                                       i
                                    
                                    
                                       -
                                       1
                                    
                                 
                                 
                                    
                                       H
                                    
                                    
                                       Ci
                                    
                                    
                                       -
                                       1
                                    
                                 
                                 
                                    
                                       H
                                    
                                    
                                       Dk
                                    
                                    
                                       -
                                       1
                                    
                                 
                                 
                                    
                                       β
                                    
                                    
                                       k
                                    
                                    
                                       -
                                       1
                                    
                                 
                                 
                                    
                                       
                                          
                                             
                                                x
                                             
                                             
                                                k
                                             
                                             
                                                D
                                             
                                          
                                          ,
                                          
                                             
                                                y
                                             
                                             
                                                K
                                             
                                             
                                                D
                                             
                                          
                                       
                                    
                                 
                              
                           
                        where 
                           
                              
                                 
                                    β
                                 
                                 
                                    k
                                 
                                 
                                    -
                                    1
                                 
                              
                           
                         is the inverse of computed Bezier correction for the kth display, 
                           
                              
                                 
                                    H
                                 
                                 
                                    Dk
                                 
                                 
                                    -
                                    1
                                 
                              
                           
                         and 
                           
                              
                                 
                                    H
                                 
                                 
                                    Ci
                                 
                                 
                                    -
                                    1
                                 
                              
                           
                         are the matrix inverse of 
                           
                              
                                 
                                    H
                                 
                                 
                                    Dk
                                 
                              
                           
                         and 
                           
                              
                                 
                                    H
                                 
                                 
                                    Ci
                                 
                              
                           
                        , and 
                           
                              
                                 
                                    γ
                                 
                                 
                                    i
                                 
                                 
                                    -
                                    1
                                 
                              
                           
                         is the inverse of rotational transformation (
                           
                              
                                 
                                    γ
                                 
                                 
                                    i
                                 
                              
                           
                        ). Let 
                           
                              
                                 
                                    x
                                 
                                 
                                    k
                                 
                                 
                                    DH
                                 
                              
                              ,
                              
                                 
                                    y
                                 
                                 
                                    k
                                 
                                 
                                    DH
                                 
                              
                           
                         be the resulting coordinates after applying 
                           
                              
                                 
                                    β
                                 
                                 
                                    k
                                 
                                 
                                    -
                                    1
                                 
                              
                           
                        , the panorama domain coordinates 
                           
                              
                                 
                                    
                                       
                                          
                                             x
                                          
                                          
                                             i
                                             ,
                                             k
                                          
                                          
                                             P
                                          
                                       
                                       ,
                                       
                                          
                                             y
                                          
                                          
                                             i
                                             ,
                                             k
                                          
                                          
                                             P
                                          
                                       
                                    
                                 
                              
                           
                         are then given by,
                           
                              (7)
                              
                                 
                                    
                                       
                                          
                                             
                                                x
                                             
                                             
                                                k
                                             
                                             
                                                DH
                                             
                                          
                                          ,
                                          
                                             
                                                y
                                             
                                             
                                                k
                                             
                                             
                                                DH
                                             
                                          
                                       
                                    
                                 
                                 =
                                 
                                    
                                       β
                                    
                                    
                                       k
                                    
                                    
                                       -
                                       1
                                    
                                 
                                 
                                    
                                       
                                          
                                             
                                                x
                                             
                                             
                                                k
                                             
                                             
                                                D
                                             
                                          
                                          ,
                                          
                                             
                                                y
                                             
                                             
                                                k
                                             
                                             
                                                D
                                             
                                          
                                       
                                    
                                 
                              
                           
                        
                        
                           
                              (8)
                              
                                 
                                    
                                       x
                                    
                                    
                                       i
                                       ,
                                       k
                                    
                                    
                                       P
                                    
                                 
                                 =
                                 
                                    
                                       
                                          
                                             t
                                          
                                          
                                             1
                                          
                                       
                                       
                                          
                                             x
                                          
                                          
                                             k
                                          
                                          
                                             DH
                                          
                                       
                                       +
                                       
                                          
                                             t
                                          
                                          
                                             2
                                          
                                       
                                       Y
                                       
                                          
                                          
                                             k
                                          
                                          
                                             DH
                                          
                                       
                                       +
                                       
                                          
                                             t
                                          
                                          
                                             3
                                          
                                       
                                    
                                    
                                       
                                          
                                             t
                                          
                                          
                                             7
                                          
                                       
                                       
                                          
                                             x
                                          
                                          
                                             k
                                          
                                          
                                             DH
                                          
                                       
                                       +
                                       
                                          
                                             t
                                          
                                          
                                             8
                                          
                                       
                                       Y
                                       
                                          
                                          
                                             k
                                          
                                          
                                             DH
                                          
                                       
                                       +
                                       
                                          
                                             t
                                          
                                          
                                             9
                                          
                                       
                                    
                                 
                                 ,
                                 
                                    
                                       y
                                    
                                    
                                       i
                                       ,
                                       k
                                    
                                    
                                       P
                                    
                                 
                                 =
                                 
                                    
                                       
                                          
                                             t
                                          
                                          
                                             4
                                          
                                       
                                       
                                          
                                             x
                                          
                                          
                                             k
                                          
                                          
                                             DH
                                          
                                       
                                       +
                                       
                                          
                                             t
                                          
                                          
                                             5
                                          
                                       
                                       Y
                                       
                                          
                                          
                                             k
                                          
                                          
                                             DH
                                          
                                       
                                       +
                                       
                                          
                                             t
                                          
                                          
                                             6
                                          
                                       
                                    
                                    
                                       
                                          
                                             t
                                          
                                          
                                             7
                                          
                                       
                                       
                                          
                                             x
                                          
                                          
                                             k
                                          
                                          
                                             DH
                                          
                                       
                                       +
                                       
                                          
                                             t
                                          
                                          
                                             8
                                          
                                       
                                       Y
                                       
                                          
                                          
                                             k
                                          
                                          
                                             DH
                                          
                                       
                                       +
                                       
                                          
                                             t
                                          
                                          
                                             9
                                          
                                       
                                    
                                 
                              
                           
                        where 
                           
                              
                                 
                                    t
                                 
                                 
                                    r
                                    =
                                    1
                                    ,
                                    2
                                    ,
                                    …
                                    9
                                 
                              
                           
                         are the homography parameters of the 
                           
                              
                                 
                                    H
                                 
                                 
                                    Dk
                                 
                                 
                                    -
                                    1
                                 
                              
                           
                         matrix.

Since, the proposed scheme does not require the generation of intermediate panorama; two further transformations 
                           
                              (
                              
                                 
                                    γ
                                 
                                 
                                    i
                                 
                                 
                                    -
                                    1
                                 
                              
                              
                              and
                              
                              
                                 
                                    H
                                 
                                 
                                    Ci
                                 
                                 
                                    -
                                    1
                                 
                              
                              )
                           
                         are performed to relate the display coordinates 
                           
                              
                                 
                                    
                                       
                                          
                                             x
                                          
                                          
                                             i
                                             ,
                                             k
                                          
                                          
                                             D
                                          
                                       
                                       ,
                                       
                                          
                                             y
                                          
                                          
                                             i
                                             ,
                                             k
                                          
                                          
                                             D
                                          
                                       
                                    
                                 
                              
                           
                         to the camera domain 
                           
                              
                                 
                                    
                                       
                                          
                                             x
                                          
                                          
                                             i
                                             ,
                                             k
                                          
                                          
                                             c
                                          
                                       
                                       ,
                                       
                                          
                                             y
                                          
                                          
                                             i
                                             ,
                                             k
                                          
                                          
                                             c
                                          
                                       
                                    
                                 
                              
                           
                         image as:
                           
                              (9)
                              
                                 
                                    
                                       x
                                    
                                    
                                       i
                                       ,
                                       k
                                    
                                    
                                       
                                          
                                             c
                                          
                                          
                                             ′
                                          
                                       
                                    
                                 
                                 =
                                 
                                    
                                       
                                          
                                             h
                                          
                                          
                                             1
                                          
                                       
                                       
                                          
                                             x
                                          
                                          
                                             i
                                             ,
                                             k
                                          
                                          
                                             p
                                          
                                       
                                       +
                                       
                                          
                                             h
                                          
                                          
                                             2
                                          
                                       
                                       
                                          
                                             y
                                          
                                          
                                             i
                                             ,
                                             k
                                          
                                          
                                             p
                                          
                                       
                                       +
                                       
                                          
                                             h
                                          
                                          
                                             3
                                          
                                       
                                    
                                    
                                       
                                          
                                             h
                                          
                                          
                                             7
                                          
                                       
                                       
                                          
                                             x
                                          
                                          
                                             i
                                             ,
                                             k
                                          
                                          
                                             p
                                          
                                       
                                       +
                                       
                                          
                                             h
                                          
                                          
                                             8
                                          
                                       
                                       
                                          
                                             y
                                          
                                          
                                             i
                                             ,
                                             k
                                          
                                          
                                             p
                                          
                                       
                                       +
                                       
                                          
                                             h
                                          
                                          
                                             9
                                          
                                       
                                    
                                 
                                 ,
                                 
                                 
                                    
                                       y
                                    
                                    
                                       i
                                       ,
                                       k
                                    
                                    
                                       
                                          
                                             c
                                          
                                          
                                             ′
                                          
                                       
                                    
                                 
                                 =
                                 
                                    
                                       
                                          
                                             h
                                          
                                          
                                             4
                                          
                                       
                                       
                                          
                                             x
                                          
                                          
                                             i
                                             ,
                                             k
                                          
                                          
                                             p
                                          
                                       
                                       +
                                       
                                          
                                             h
                                          
                                          
                                             5
                                          
                                       
                                       
                                          
                                             y
                                          
                                          
                                             i
                                             ,
                                             k
                                          
                                          
                                             p
                                          
                                       
                                       +
                                       
                                          
                                             h
                                          
                                          
                                             6
                                          
                                       
                                    
                                    
                                       
                                          
                                             h
                                          
                                          
                                             7
                                          
                                       
                                       
                                          
                                             x
                                          
                                          
                                             i
                                             ,
                                             k
                                          
                                          
                                             p
                                          
                                       
                                       +
                                       
                                          
                                             h
                                          
                                          
                                             8
                                          
                                       
                                       
                                          
                                             y
                                          
                                          
                                             i
                                             ,
                                             k
                                          
                                          
                                             p
                                          
                                       
                                       +
                                       
                                          
                                             h
                                          
                                          
                                             9
                                          
                                       
                                    
                                 
                                 ,
                              
                           
                        where 
                           
                              
                                 
                                    h
                                 
                                 
                                    r
                                    =
                                    1
                                    ,
                                    2
                                    ,
                                    …
                                    9
                                 
                              
                           
                         are the homography parameters of the 
                           
                              
                                 
                                    H
                                 
                                 
                                    Ci
                                 
                                 
                                    -
                                    1
                                 
                              
                           
                         matrix. The inverse rotational transformation (
                           
                              
                                 
                                    γ
                                 
                                 
                                    i
                                 
                                 
                                    -
                                    1
                                 
                              
                           
                        ) is then applied as:
                           
                              (10)
                              
                                 
                                    
                                       x
                                    
                                    
                                       i
                                       ,
                                       k
                                    
                                 
                                 =
                                 f
                                 
                                 tan
                                 
                                 
                                    
                                       
                                          
                                             
                                                
                                                   
                                                      x
                                                   
                                                   
                                                      i
                                                      ,
                                                      k
                                                   
                                                   
                                                      
                                                         
                                                            c
                                                         
                                                         
                                                            ′
                                                         
                                                      
                                                   
                                                
                                             
                                             
                                                f
                                             
                                          
                                       
                                    
                                 
                                 ,
                                 
                                 
                                    
                                       y
                                    
                                    
                                       i
                                       ,
                                       k
                                    
                                 
                                 =
                                 
                                    
                                       y
                                    
                                    
                                       i
                                    
                                    
                                       ′
                                    
                                 
                                 
                                 sec
                                 
                                    
                                       
                                          
                                             
                                                
                                                   
                                                      y
                                                   
                                                   
                                                      i
                                                      ,
                                                      k
                                                   
                                                   
                                                      
                                                         
                                                            c
                                                         
                                                         
                                                            ′
                                                         
                                                      
                                                   
                                                
                                             
                                             
                                                f
                                             
                                          
                                       
                                    
                                 
                              
                           
                        
                     

The transformation 
                           
                              
                                 
                                    T
                                 
                                 
                                    i
                                    ,
                                    k
                                 
                                 
                                    D
                                    →
                                    C
                                 
                              
                           
                         provides the single transformation that directly provides a mapping between each camera and display pixel without requiring the generation of any intermediate panoramic video.

The transformation (
                           
                              
                                 
                                    T
                                 
                                 
                                    i
                                    ,
                                    k
                                 
                                 
                                    D
                                    →
                                    C
                                 
                              
                           
                        ) of Eq. (5) discussed in the previous section calculates the x and y coordinates that relate the pixels from the camera domain to the projector domain. This information is saved in the form of Look up Tables (LUTs). The calibration phase calculates these LUTs and saves them in memory. These LUTs are calculated once and are repeatedly applied to each frame, which is to be projected, in real time using OpenGL routines. Any OpenGL compatible GPU can be used for this transformation. The 
                           
                              
                                 
                                    LUT
                                 
                                 
                                    i
                                    ,
                                    k
                                 
                                 
                                    C
                                    →
                                    D
                                 
                              
                           
                         thus provides the source destination for each of the vertices of a particular display for each camera-projector pair. The color transformation is applied using a color loop up table using OpenGL shader. The camera blend mask on each camera frame is applied using OpenGL. After applying camera blend mask, each pixel in blended camera frame is transformed into display domain using LUTs. Once a display frames is ready to be rendered, display masks are applied and frame is rendered on respective display. Since, OpenGL can handle the LUT based transformations efficiently and thus result in geometric warping of content in real-time. Differently from conventional approaches that use two separate LUTs for stitching and rendering, the proposed method handles geometric corrections for rendering and stitching in just a single stage, thus it increases the speed of the stitching and rendering system.

@&#RESULTS AND DISCUSSION@&#

We have compared the processing time of the proposed system with conventional system to show the effectiveness of C-LUT based stitching and rendering system. The system proposed in this paper is implemented in two parts: Combined Look-Up-Table (C-LUT) generation and application (implemented in C++ using OpenGL APIs). The Lookup Table generation is a one time process at the initialization stage therefore it is insignificant in terms of complexity of the system. In this section the time complexity for applying geometric corrections and rendering using C-LUT is compared with that of stitching and rendering using a traditional LUT approach. It is assumed that in a traditional approach there are two LUT application phases. One for panorama generation and the other for multi-projector alignment. We have performed experiments in two different setups: (i) Two displays and two cameras and (ii) three displays and three cameras. We used 3 datasets of Full HD (1920×1080) sized camera images. The stitched images are projected using multiple projectors. The projectors we used in the experiments were NEC M350X, NEC P350X and Acer X1111. Projectors are used at 8 different resolutions (see Tables 1 and 2
                     
                     ) for timing analysis. We have performed 10 independent trials for each setup, thus making a total of 1920 trials and reported the average time. The proposed system is demonstrated using two Computers and two GPUs. First workstation is Intel x64 Core i7-2600K clocked at 3.40GHz, 8GB RAM whereas the second workstation is Intel x64 Core i5-2500K with 3.3GHz processor having 8GB RAM. In the following sections, we will refer first workstation as C1 while the second one as C2. The first GPU, referred to as G1 in subsequent sections, is nVidia GeForce GTX 460 while the second GPU is nVidia GeForce GTS 450 which will be referred as G2. We have used both C1 and C2 with G1 and G2, making total 4 testing configurations.

We took frames from two Full HD cameras (M
                        =2) and rendered their panorama using two overlapping projectors (N
                        =2) on an immersive dome surface. Fig. 4
                        (a) shows the stitched panorama projected on immersive surface using two overlapping HD projectors. We have also highlighted the regions in the projected panoramic frame that corresponds to the overlapping region between the two camera views and between the two projectors. The projected panorama provides a seamless view across the two blending regions. For Intel x64 Core i5-2500K with nVidia GeForce GTX 460, Table 1 shows the time spent for stitching and rendering for each approach. In C-LUT, the time for LUT generation is much larger than the time for stitching and rendering using traditional approach. However C-LUT generation is a one-time process performed during system initialization. Therefore, in comparison of C-LUT and traditional approach, we did not take into account the time for generating C-LUTs. For the HD projector the time for applying C-LUT is 26.74% of the time for stitching and rendering using traditional approach, thus giving 73.26% speedup. Similarly for Full HD projectors, C-LUT takes 22.61% time as compared to traditional approach, giving 77.38% speedup. Percentage speedup improvements, along with timings for various display and camera combinations, are included in Table 1 and plotted in Fig. 6. By averaging the performance gains, C-LUT takes 21.21% less time for stitching and rendering two camera images on two displays respectively. These performance gains are best suited for a real-time stitching and rendering scenario where the camera frames are accessed remotely or locally while the stitching and rendering steps are processed on separate machines.

In this case, we took frames from three Full HD cameras (M
                        =3) and rendered their panorama using three overlapping projectors (N
                        =3) on an immersive dome surface. The stitched panoramic images (for traditional approach) and LUTs based camera images (for C-LUT approach) are rendered on three projectors using various resolutions and the time required for each case is measured. Fig. 5
                        
                        (a) shows the panorama projected on immersive surface using three HD projectors. Table 2 shows the time spent by each approach for stitching and rendering for Intel x64 Core i5-2500K with nVidia GeForce GTX 460. The time for applying C-LUTs for HD display is 23.52% of the time for stitching and rendering using conventional method, marking 76.48% speedup improvements. For Full HD projectors, the time required by C-LUTs is 25.20% of the time for traditional approach with 74.80% speedup improvements. Fig. 6 shows timing analysis between traditional approach and C-LUT using a chart summarizing the two experimental results in Sections 4.1 and 4.2. The blue bars represent the time for C-LUT approach whereas the red bars represent the traditional approach. For all cases, C-LUT requires less time for stitching and rendering.

In order to evaluate the performance of the proposed scheme for a variety of CPU-GPU configurations, we repeated same set of experiments for all the four CPU-GPU configurations. Table 3
                         thus shows the speedup percentages of all test cases for C1G1, C2G1, C1G2 and C2G2. The averaged results show that the proposed scheme provides at least 78% speedup for all the CPU-GPU combinations as compared to the time required for traditional approaches. In order to find the effect of content resolution on the performance, we evaluated the proposed scheme for all the CPU–GPU configurations. Fig. 7
                         shows the relationship between resolution and the corresponding processing time for the C-LUT application. It can be observed that a linear relationship holds between resolution and the processing time for all the four configurations.

The proposed scheme provides an efficient end-to-end solution for generation of panoramic images using a multiple camera acquisition system and displaying it using multiple projectors. Fig. 8
                         provides the results showing the complete immersive dome surface for panoramic projection of a building using the C-LUT scheme. Please note the high quality of seamless panorama formation directly on the dome surface. The proposed system is particularly of interest for the following three types of necessities. Firstly, for the case when it is necessary to avoid transferring of videos of non-standard resolution videos. This scenario is suitable for broadcasting industry since the current broadcasting systems only support standard video resolutions, i.e., Full High Definition (Full HD 1920×1080) or Ultra-High Definition (UHD 3840×2160). A 5 camera system will generate stitched panoramic images that have the dimensions slightly less than 9600×1080, assuming the cameras are placed horizontally on a rig. Since the resolution of the panorama is non-standard, it might not be possible to transmit the stream using standard compression and transmission systems. Secondly, the system is also useful when it is desired to avoid the large intermediate storage required for storing panoramic video. This is because our proposed scheme renders the panorama directly on the display projectors. Please note that in case it is required to save the panoramic video stream instead of displaying it directly, the scheme can be used to generate the panoramic video by forcing the display homography to be an identity matrix. Secondly, the computation load can be differently distributed on client and server sides. Assume that the calibration process is conducted at the client (projection) location and the parameters are passed to the panoramic acquisition server. The server can then perform the necessary geometric transformations for stitching and rendering using the C-LUT and transfer N standard sized video streams corresponding to each projector. Thus, significant amount of the computational load can be shifted from the client to the server. The scheme thus enables the panoramic video projection suitable for the tele-broadcasting industry.

@&#CONCLUSION@&#

We have proposed an efficient implementation of seamless stitching and rendering frames using multiple cameras and multiple displays. The proposed method employees a lookup table for each pair of camera and display unit handling two different transformations in stitching and rendering at the same time. The proposed idea is best applied for a client–server architecture where camera frames from remote location are transmitted in real time, seamlessly stitched and rendered independently on multiple client ends. The generation of intermediate panoramic video is avoided which results in reduced storage requirement and also avoids the transfer of panoramic video that may have non-standard video resolution. Experimental results showed that on average, the proposed system is ∼78% faster than traditional stitching and rendering schemes. Since the scheme avoids the generation of an intermediate panoramic video which may have a non-standard resolution, it enables the realization of live panoramic video projection for tele broadcasting industry. The proposed scheme can be implemented on any GPU supporting OpenGL.

@&#ACKNOWLEDGEMENTS@&#

This work is funded by Electronics and Telecommunications Research Institute (ETRI), South Korea under the project funding 14ZR1110. Authors are thankful for valuable suggestions and comments from Mr. Umer Kakli at VISpro Lab NUST and colleagues at ETRI and Sogang University, South Korea.

@&#REFERENCES@&#

