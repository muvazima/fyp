@&#MAIN-TITLE@&#The Terminal-Oriented Ship Stowage Planning Problem

@&#HIGHLIGHTS@&#


               
               
                  
                     
                        
                           
                           We address the Ship Stowage Planning Problem as it arises at the Gioia Tauro Port.


                        
                        
                           
                           We minimize the terminal operative costs (transport of containers and yard-shifts).


                        
                        
                           
                           We design a classification scheme for Ship Stowage Planning Problems.


                        
                        
                           
                           We propose a Linear Binary Model and a heuristic solution algorithm.


                        
                        
                           
                           The numerical experience shows the efficiency and effectiveness of our approach.


                        
                     
                  
               
            

@&#KEYPHRASES@&#

Logistics

Optimization models

Metaheuristics

Container terminals

@&#ABSTRACT@&#


               
               
                  The Ship Stowage Planning Problem is the problem of determining the optimal position of containers to be stowed in a containership. In this paper we address the problem considering the objectives of the terminal management that are mainly related to the yard and transport operations. We propose a Binary Integer Program and a two-step heuristic algorithm. An extensive computational experience shows the efficiency and effectiveness of our approach. A classification scheme for stowage planning problems is also provided.
               
            

@&#INTRODUCTION@&#

Apart from the contraction observed in 2009, the container trade volume expanded at an average rate of 8.2 per cent between 1990 and 2010, when it reached 140
                     
                     million of TEUs (Twenty-Foot Equivalent Units), or over 1.3
                     
                     billion tons (see UNCTAD Secretariat, 2011, p. 21). To meet the huge demand of maritime transportation, the world fleet of containerships has increased both in number and in total capacity. The last figures related to 2011 (UNCTAD Secretariat, 2011) show that the containership-world fleet counts 9688 vessels, supplies a total capacity of about 12.6 million of TEUs, and includes some vessels with a nominal capacity of 14,770 TEUs. New vessels with a capacity of 18,000 TEUs are going to be delivered to a leading shipping company.

For such large vessels the stowage planning, that is to decide where containers have to be placed within a containership during its journey, becomes a key factor in determining the operative cost of a containership. Actually, as noted by Delgado, Jensen, and Guilbert (2012), the stowage planning is aimed at reducing the staying in port of vessels and, as a consequence, the port fees. Moreover, short turnaround times allow the vessels to reach, within the scheduled arrival times, the downstream ports at lower sailing speeds, reducing by this way also the fuel consumption. The port fees and the costs due to the bunker fuel are the main determinants of the operative costs for a shipping company (Rodrigue, Comtois, & Slack, 2011). Slowing down the vessels has also great environmental benefits, as the reduction of the sailing speed has been recognized to be the most immediate single factor to reduce greenhouse gas emissions (UNCTAD Secretariat, 2011).

The stowage planning is a relevant issue not only for the shipping company, but also for the terminal operators, which are indeed involved in loading, discharging, and storing thousand of containers. The terminal operators are aimed at offering high-level services to the calling containership, through an efficient utilization of the terminal resources as berths, quay cranes, yard spaces and yard machines. Due to the inherent hardness of the underlying planning problems the managerial practice usually resorts to a hierarchical approach, starting from the allocation of berth and quay cranes to the containership, and eventually updating the decisions as the arrival time of the containership approaches, if necessary. Then the scheduling of the quay cranes is defined. Finally, before the loading/discharging process starts, the working sequence of the quay cranes must be designed. As the terminal operator must realize the loading (discharging) instructions provided by the shipping line company, good stowage plans have a great impact on the terminal activities. Moreover the terminal management has the opportunity to take part in the stowage planning process, so as to reduce the terminal operative costs and gain in efficiency.

In this paper we address the Terminal-Oriented Ship Stowage Planning Problem (SSPP), that is the problem of determining stowage plans minimizing the costs related to the yard and transport operations. The outline of the paper is as follows. In Section 2 the problem is described in detail. A classification and a review of the literature are provided in Section 3. A Binary Integer Model for the SSPP is presented and discussed in Section 4. In Section 5 the heuristic solution algorithm is proposed; numerical results are analyzed in the following Section 6. Conclusions and future research trends are drawn in the last section.

Determining the arrangement of containers within a vessel is a very complicated task, and it requires full information on containers and vessel characteristics. For these reasons, the design of a stowage plan consists generally of two consecutive planning phases (Alvarez, 2006; Steenken, Vo√ü, & Stahlbock, 2004), involving two different decision makers. The first phase is executed by the shipping line planners, which have a complete view both of all containers to be loaded and discharged at each port the containership calls during its journey, and the cellular structure of the vessel. The second phase pertains to the terminal planners: it is executed at each port of the ship port rotation, taking into account only the containers to be loaded at that specific terminal. The final aim of the terminal ship planner is to design the sequence of loading operations for the handling equipment (quay cranes and horizontal transport means). The last problem is referred as ship loading or load sequencing problem. In the following, we sketch out the structure of a containership. More details can be found in Appendix A. Then we analyze the two phases of the stowage planning process.

We can think of a containership berthed at the quay as a box with the longest side parallel to the quay. It consists of several smaller boxes, called slots and capable of holding a twenty-foot container (TEU). A slot, as well as the position of a container within the containership, can thus be identified by three coordinates: bay, row, tier. The bay is the longitudinal coordinate of a slot; the row and the tier represent, respectively, the transversal and vertical ones. Two adjacent slots, sharing the same row and tier coordinates, are used for storing a two TEUs container. The vessels are provided with a Cargo Securing Manual which illustrates the maximum permissible load on each slot, the lashing patterns, and the maximum weight and height of each ship-stack.

In the first phase containers are classified on the basis of their attributes, like the dimension (standard, 45-footer, high-cube, oversized), the weight class (light, medium, heavy), the type (reefer, open-top), the load (dangerous, perishable), and the port of destination (POD). Containers of the same class are planned to be stowed into adjacent slots, taking into account a lot of constraints to guarantee static and dynamic equilibrium of the ship. The shipping line aims at maximizing the ship utilization and minimizing the number of on-board shifts, also called re-stows or over-stows, during the port rotation. At a given terminal A, a re-stow occurs when a container with POD B must be temporarily discharged and then reloaded on the same containership, possibly in a different position, in order to discharge some containers with POD A.

We will call pre-stow plan the output of the first phase. It is either a rough stowage plan, or a detailed stowage plan. In the first case the shipping line planners indicate, for each ship-slot, a container class, that is a set of attributes of containers which can be stowed in that slot. For this reason such a pre-stow is also referred as class-based stowage plan. An example of class-based stowage plan is shown in Fig. 1
                        . Here the container class is defined by the POD, the dimension, and the type. Any high-cube refer container with POD A can be stowed in any allowed slot at tiers 82 and 84.

A detailed pre-stow plan indicates, conversely, the exact container to be stowed in each slot, as in Fig. 2
                        . The details that can be retrieved by this stowage plan are: the POD (A), the loading port (B), the weight, the operating temperature for reefer containers, the type, the slot coordinates, but also a container code which univocally identifies the container to be stowed in each slot. Note that a detailed pre-stow plan implicitly defines one and only one class-based stowage plan. We refer to the latter as to the class-based stowage plan induced by the detailed one. On the contrary a class-based pre-stow plan can originate many different but compatible detailed plans. Thanks to the latter property, the terminal management plays an active role in planning the stowage of containerships while optimizing the operative costs. This is the subject of the next subsection.

The pre-stow plan is sent via an Electronic Data Interchange (EDI) file to all the ports the containership will visit. It acts as an input datum for the second phase carried out by the terminal planner. At a given port the input consists of: the containers loaded at the previous ports and to be discharged elsewhere (remaining on board containers); the containers to be discharged; the pre-stow plan restricted to the containers to be loaded. The second planning phase transforms the pre-stow plan into an operative plan and results in defining a detailed working list for each quay crane operating on the containership.

The objective of the terminal planner is to minimize the ship turnaround time and the terminal operative costs. It is worth observing that the turnaround time is mainly determined by several hierarchical decisions, both at the tactical and operative levels, namely: the berth allocation, the quay crane assignment, and the quay crane scheduling. The interested reader is referred to Meisel (2009), Sammarra, Cordeau, Laporte, and Monaco (2007) and Monaco, Moccia, and Sammarra (2009) on these topics. At the time when the terminal planner faces the SSPP, the above decisions have already been taken. Therefore, in designing the operative stowage plan, the main concern of the terminal planner is to reduce the operative costs due to the yard-to-quay transport of containers, taking into account possible reshuffles. Reshuffles, or yard-shifts, are very time-consuming unproductive moves, which occur whenever some containers on the top of a stack have to be removed (and then re-stacked) in order to pick up a container located below in the same stack.

When the pre-stow is class-based, the operative stowage plan can be obtained by choosing the minimum cost plan, among the detailed plans compatible with the pre-stow. The basic constraints the terminal planner has to comply with are related to the stability of the containership. When completed, the stowage plan must be validated or reviewed by the vessel captain. Once accepted, it becomes an operative plan for the terminal and the loading lists can be designed.

In case of a detailed pre-stow plan, the terminal planner seems to have no way to reduce the operative costs. Indeed, he can accept the pre-stow as the operative plan, eventually resorting to the pre-marshalling policy (Lee & Chao, 2009). Pre-marshalling is to reallocate the export containers in yard areas near to the berthed vessel, so as to reduce the transportation time (and cost) during the loading operations and to avoid reshuffles. Pre-marshalling may be, sometimes, neither feasible nor profitable. Feasibility depends on the time and resources (equipment and working teams) available to reallocate containers before the loading starts. Furthermore, yard areas close to the quay represent a strategic terminal resource and managerial practice is aimed at reducing reallocations, because they are in any case costly (Moccia, Cordeau, Monaco, & Sammarra, 2009). Therefore, the adoption of the pre-marshalling policy must be decided on the basis of the cost/benefit analysis. Alternatively the planner could retrieve from the pre-stow the class-based induced plan, looking, as before, for a different compatible solution to be approved by the vessel captain. The whole decisional process related to the second planning phase is summarized in Fig. 3
                        .

In this paper we address the second phase of the SSPP, assuming as input a class-based pre-stow plan. With reference to Fig. 3, we are concerned with the process denoted ‚Äúterminal stowage plan‚Äù. We will focus on the assignment of the export containers to the ship slots, complying with the pre-stow plan and the stability constraints, and minimizing the total transportation time and the yard-shifts. In particular we refer to the transshipment container terminal at the Gioia Tauro port, in Southern Italy, that stimulated this research. Gioia Tauro has an extensive yard operated by a fleet of straddle carriers (Direct Transfer System ‚Äì DTS). In such a context the yard-stacks are almost three/four containers height (Monaco et al., 2009).

The SSPP has received a lot of attention by researchers. However, the wide variety of settings, assumptions, and objectives considered in the previous studies highlights the lack of a commonly accepted view of the problem. For example, only in some papers the distinction between the two planning phases is explicitly considered. In this section we propose a classification scheme, based on the most significant features of the problem addressed, and review some relevant contributions to the scientific literature accordingly. The information needed to classify a problem has been inferred from the context, if not explicitly provided by the authors.

We adopt a four-fields notation. The first field refers to the decision maker; the output of the decisional problem is described in the second field; the third field represents the setting as well as the input of the problem; the last field describes the objective function to be minimized. The second and third fields can take one or multiple values, in which case they are separated by commas. The objective function can be expressed as a weighted sum of single performance measures, where the weights are denoted by 
                           
                              Œª
                           
                        . The values each field can take are listed in Table 1
                        .

Some of the entries in Table 1 need to be clarified. We first note that the value class is feasible both for the second and third fields. Actually, the class-based stowage plan can be either the output of the first phase of the planning process or an input for the second one. The objective function tload is the time the quay cranes take to load all the export containers. Equilibrium or stability constraints are sometimes treated as soft constraints; in this case their violation is penalized in the objective function and it is denoted by eqviol. Other stability functions to be minimized, as the trim and list angles, are denoted by stobj. As regards qcobj, it is a measure of the quay cranes‚Äô efficiency (makespan, movements between bays, etc.).


                        Table 2
                         summarizes the papers addressing the SSPP, the classification, and the type of mathematical model, when available. If many references by the same authors concern the same problem solved by different algorithms, we report only the paper in which the problem is stated and, possibly, formulated.

The papers of the first group approach the problem from the point of view of the shipping line planner. Their common objective is the minimization of the on-board shifts for all the ports of the port rotation. The paper by Avriel, Penn, Shpirer, and Witteboon (1998) relies on a simplifying assumption (the ship consists of one large bay) and ignores the equilibrium constraints; the authors propose a heuristic algorithm. Dubrovsky, Levitin, and Penn (2002) present a genetic algorithm for the problem as described in Avriel et al. (1998), but considering soft equilibrium constraints.

In all the remaining four papers the SSPP is decomposed in two subproblems: one for assigning container groups to bay sections, the other for assigning containers to slots. The equilibrium constraints are explicitly imposed and the objective functions also include some performance measures of the quay-side operations. The paper by Wilson and Roach (1999), likewise the companion works (Wilson & Roach, 2000; Wilson, Roach, & Ware, 2001), propose a Branch-and-Bound algorithm for the first subproblem and a Tabu Search heuristic for the second one. Kang and Kim (2002) present a greedy heuristic for the group-to-bay subproblem and a tree search method for the container-to-slot problem. Also Pacino, Delgado, Jensen, and Bebbington (2011) and Delgado, Jensen, Janstrup, Rose, and Andersen (2012) exploit the decomposition approach, denoting the two sub-problems as multi-port master planning and slot planning. Pacino et al. (2011) discuss the master planning, obtaining a class-based stowage plan that becomes an input for the slot planning phase presented in Delgado, Jensen, Janstrup et al. (2012). In both papers numerical results on real-case instances are produced by commercial solvers.

Three papers in the second group deal with the integration of the stowage and load sequencing problems. Steenken, Winter, and Zimmermann (2001) and Kim, Kang, and Ryu (2004) assume as input the class-based stowage plan and take into account the container handling equipment. The problem described in Steenken et al. (2001) relies on the assumption that only one quay crane operates the containership and disregards the equilibrium constraints. The objective is to minimize the total lateness in the yard-to-quay transport. Numerical results on real instances, obtained by a commercial solver, are presented. Kim et al. (2004) describe the integrated problem in a more realistic context. The proposed model incorporates equilibrium constraints and several performance measures combined in the objective function. It is solved by a beam search algorithm. On the contrary the paper by Imai, Sasaki, Nishimura, and Papadimitriou (2006) does not consider the handling equipment and propose a genetic algorithm.


                        Ambrosino, Sciomachen, and Tanfani (2004) address the SSPP at the first port of the port rotation, named master bay plan problem, with no reference to the equipment adopted but taking into account hard equilibrium constraints. The authors propose a three-step heuristic. Different algorithms for the same problem are given in Ambrosino, Sciomachen, and Tanfani (2006), Sciomachen and Tanfani (2007) and Ambrosino, Anghinolfi, Paolucci, and Sciomachen (2009), while an experimental comparison of the solution methods is provided in Ambrosino, Anghinolfi, Paolucci, and Sciomachen (2010). The SSPP studied in Alvarez (2006) refers to a yard operated by reach-stackers serving only one quay crane. The author provides a Tabu Search algorithm.

Following the above classification scheme, the SSPP discussed in this paper is denoted as port 
                        
                           
                              |
                           
                         
                        detl 
                        
                           
                              |
                           
                         
                        mqcs, scar, class, equil 
                        
                           
                              |
                           
                         
                        yshift 
                        
                           
                              +
                           
                        
                        transp. A preliminary model for the same problem has been presented in Monaco and Sammarra (2008). The model we present in this paper enriches and improves the previous one, both with respect to the yard-shifts evaluation and the stability constraints. The analysis of Table 2 highlights that our research stream closes a gap in the literature for SSPP, as no previous paper is concerned with the stowage planning in the context of DTS terminals under realistic assumptions. Actually Steenken et al. (2001) studied the problem in a terminal adopting straddle carriers, but considering just one quay crane and a different objective function. Some similarities with the objective function we consider can be found in Alvarez (2006) and Kim et al. (2004), but in that papers the stowage planning is related to terminals with intensive yards, where containers are arranged in dense import and export blocks. The blocks are operated by reach-stackers or dedicated yard cranes, while the yard-to-quay transport is performed by a fleet of trucks (Indirect Transfer Systems ‚Äì ITS). On the contrary, at a DTS terminal the straddle carriers are free to operate in each yard stack. Due to the differences in the yard layout and equipment, the planning strategies differ significantly for DTS and ITS terminals. Therefore mathematical models and algorithms designed for the SSPP in a given context cannot be applied in the other one.

In this section we describe a Binary Integer Model for the SSPP. As disclosed in Section 2.2, we are given:
                        
                           1.
                           the configuration of the vessel in terms of bays (b), rows (r), and tiers (t) (vessel bay-plan);

the class-based pre-stow plan;

the set K of cranes allocated to serve the vessel (
                                 
                                    
                                       
                                          
                                             K
                                          
                                       
                                    
                                    =
                                    m
                                 
                              ); the crane split and scheduling, that is the sequence of bays processed by each crane and, for each bay, the operational modality of the cranes (sea-to-shore, shore-to-sea, row-wise, stack-wise);

the set N of all containers to be loaded (
                                 
                                    
                                       
                                          
                                             N
                                          
                                       
                                    
                                    =
                                    n
                                 
                              ) and, for each container 
                                 
                                    i
                                    ‚àà
                                    N
                                 
                              , its class 
                                 
                                    
                                       
                                          c
                                       
                                       
                                          i
                                       
                                    
                                 
                              , weight 
                                 
                                    
                                       
                                          w
                                       
                                       
                                          i
                                       
                                    
                                 
                              , code, and position in the yard.

Note that crane schedules are constructed taking into account non-interference constraints (see Meisel, 2009; Monaco & Sammarra, 2011). Thanks to the available information, for each crane 
                        
                           k
                           ‚àà
                           K
                        
                      the sequence of slots to be handled by k is uniquely defined. Let 
                        
                           
                              
                                 S
                              
                              
                                 k
                              
                           
                        
                      be the ordered subset of slots available for stowage and pertaining to the crane k. Assuming that no idleness occurs in the work of the cranes due to yard-to-quay transport (this can be achieved considering a suitable number of straddle carriers), we can also associate to each slot 
                        
                           (
                           b
                           ,
                           r
                           ,
                           t
                           )
                           ‚àà
                           
                              
                                 S
                              
                              
                                 k
                              
                           
                        
                      a starting handling time, that is the time when the crane k starts to load a container in that slot. Therefore the sets 
                        
                           
                              
                                 S
                              
                              
                                 k
                              
                           
                        
                      can be merged into a set S, totally ordered with respect to the starting handling times (ties are broken arbitrarily). Each slot 
                        
                           (
                           b
                           ,
                           r
                           ,
                           t
                           )
                           ‚àà
                           S
                        
                      can be mapped into an index 
                        
                           p
                           ‚àà
                           P
                           =
                           
                              
                                 
                                    1
                                    ,
                                    ‚Ä¶
                                    ,
                                    
                                       
                                          ‚àë
                                       
                                       
                                          k
                                          =
                                          1
                                       
                                       
                                          m
                                       
                                    
                                    
                                       
                                          n
                                       
                                       
                                          k
                                       
                                    
                                 
                              
                           
                        
                     , so that deciding the stowage position of the containers reduces to assigning to each container a slot-position 
                        
                           p
                           ‚àà
                           P
                        
                     . We adopt the following notation:
                        
                           ‚Ä¢
                           
                              
                                 
                                    
                                       
                                          c
                                       
                                       
                                          p
                                       
                                    
                                    
                                    
                                    ‚àÄ
                                    p
                                    ‚àà
                                    P
                                 
                               is the class associated to the slot-position p, as prescribed by the pre-stow plan;


                              
                                 
                                    
                                       
                                          Œ∏
                                       
                                       
                                          p
                                       
                                    
                                    
                                    
                                    ‚àÄ
                                    p
                                    ‚àà
                                    P
                                 
                               is the starting handling time of the slot-position p;


                              
                                 
                                    
                                       
                                          œÑ
                                       
                                       
                                          ip
                                       
                                    
                                    
                                    
                                    ‚àÄ
                                    i
                                    ‚àà
                                    N
                                    ,
                                    p
                                    ‚àà
                                    P
                                 
                               is the time needed to transport the container i from its yard location to the bay b corresponding to the slot-position 
                                 
                                    p
                                    ‚â°
                                    (
                                    b
                                    ,
                                    r
                                    ,
                                    t
                                    )
                                 
                              ;


                              
                                 
                                    L
                                    =
                                    {
                                    1
                                    ,
                                    ‚Ä¶
                                    ,
                                    |
                                    L
                                    |
                                    }
                                 
                               is the set of ship-stacks involved in the stowage process;


                              
                                 
                                    Œ®
                                    (
                                    l
                                    )
                                    ‚äÜ
                                    P
                                    
                                    
                                    ‚àÄ
                                    l
                                    ‚àà
                                    L
                                 
                               is the set of slot-positions belonging to the ship-stack l;


                              
                                 
                                    
                                       
                                          W
                                       
                                       
                                          l
                                       
                                    
                                    
                                    
                                    ‚àÄ
                                    l
                                    ‚àà
                                    L
                                 
                               is the maximum permissible weight for containers stowed in the ship-stack l;


                              
                                 
                                    N
                                    (
                                    p
                                    )
                                    
                                    
                                    ‚àÄ
                                    p
                                    ‚àà
                                    P
                                 
                               is the set of containers 
                                 
                                    i
                                    ‚àà
                                    N
                                 
                               such that 
                                 
                                    
                                       
                                          c
                                       
                                       
                                          i
                                       
                                    
                                    =
                                    
                                       
                                          c
                                       
                                       
                                          p
                                       
                                    
                                 
                              ;


                              
                                 
                                    P
                                    (
                                    i
                                    )
                                    
                                    ‚àÄ
                                    i
                                    ‚àà
                                    N
                                 
                               is the set of slot-positions 
                                 
                                    p
                                    ‚àà
                                    P
                                 
                               such that 
                                 
                                    
                                       
                                          c
                                       
                                       
                                          i
                                       
                                    
                                    =
                                    
                                       
                                          c
                                       
                                       
                                          p
                                       
                                    
                                 
                              ;


                              
                                 
                                    Œî
                                    (
                                    i
                                    )
                                    ‚äÇ
                                    N
                                    
                                    
                                    ‚àÄ
                                    i
                                    ‚àà
                                    N
                                 
                               is the set of containers that are located in the same yard-stack of container i and above it;


                              
                                 
                                    œÄ
                                    (
                                    p
                                    )
                                 
                               is the slot-position immediately above and in the same ship-stack of the slot-position p, i.e. if 
                                 
                                    p
                                    ‚â°
                                    (
                                    b
                                    ,
                                    r
                                    ,
                                    t
                                    )
                                 
                              , then 
                                 
                                    œÄ
                                    (
                                    p
                                    )
                                    ‚â°
                                    (
                                    b
                                    ,
                                    r
                                    ,
                                    t
                                    +
                                    1
                                    )
                                 
                              ;


                              
                                 
                                    œÉ
                                 
                               is the time a straddle carrier takes to perform a yard-shift.

We define the decision variables
                        
                           ‚Ä¢
                           
                              
                                 
                                    
                                       
                                          x
                                       
                                       
                                          ip
                                       
                                    
                                    ‚àà
                                    
                                       
                                          
                                             0
                                             ,
                                             1
                                          
                                       
                                    
                                    
                                    
                                    ‚àÄ
                                    i
                                    ‚àà
                                    N
                                    ,
                                    p
                                    ‚àà
                                    P
                                 
                              , where 
                                 
                                    
                                       
                                          x
                                       
                                       
                                          ip
                                       
                                    
                                    =
                                    1
                                 
                               if and only if the container i is assigned to the slot-position p;


                              
                                 
                                    
                                       
                                          z
                                       
                                       
                                          ij
                                       
                                    
                                    ‚àà
                                    
                                       
                                          
                                             0
                                             ,
                                             1
                                          
                                       
                                    
                                    
                                    
                                    ‚àÄ
                                    i
                                    ‚àà
                                    N
                                    ,
                                    j
                                    ‚àà
                                    Œî
                                    (
                                    i
                                    )
                                 
                              , where 
                                 
                                    
                                       
                                          z
                                       
                                       
                                          ij
                                       
                                    
                                    =
                                    1
                                 
                               if and only if the container i leaves the yard-stack where it is located before the container j.

The Model 
                        
                           F
                        
                      for the SSPP is the following:
                        
                           (1)
                           
                              
                                 min
                              
                              
                                 
                                    
                                       ‚àë
                                    
                                    
                                       i
                                       ‚àà
                                       N
                                    
                                 
                              
                              
                                 
                                    
                                       ‚àë
                                    
                                    
                                       p
                                       ‚àà
                                       P
                                       (
                                       i
                                       )
                                    
                                 
                              
                              
                                 
                                    œÑ
                                 
                                 
                                    ip
                                 
                              
                              
                                 
                                    x
                                 
                                 
                                    ip
                                 
                              
                              +
                              œÉ
                              
                                 
                                    
                                       ‚àë
                                    
                                    
                                       i
                                       ‚àà
                                       N
                                    
                                 
                              
                              
                                 
                                    
                                       ‚àë
                                    
                                    
                                       j
                                       ‚àà
                                       Œî
                                       (
                                       i
                                       )
                                    
                                 
                              
                              
                                 
                                    z
                                 
                                 
                                    ij
                                 
                              
                           
                        
                     
                     
                        
                           (2)
                           
                              
                                 
                                    
                                       ‚àë
                                    
                                    
                                       p
                                       ‚àà
                                       P
                                       (
                                       i
                                       )
                                    
                                 
                              
                              
                                 
                                    x
                                 
                                 
                                    ip
                                 
                              
                              =
                              1
                              
                              ‚àÄ
                              i
                              ‚àà
                              N
                           
                        
                     
                     
                        
                           (3)
                           
                              
                                 
                                    
                                       ‚àë
                                    
                                    
                                       i
                                       ‚àà
                                       N
                                       (
                                       p
                                       )
                                    
                                 
                              
                              
                                 
                                    x
                                 
                                 
                                    ip
                                 
                              
                              =
                              1
                              
                              ‚àÄ
                              p
                              ‚àà
                              P
                           
                        
                     
                     
                        
                           (4)
                           
                              
                                 
                                    
                                       ‚àë
                                    
                                    
                                       i
                                       ‚àà
                                       N
                                       (
                                       p
                                       )
                                    
                                 
                              
                              
                                 
                                    w
                                 
                                 
                                    i
                                 
                              
                              
                                 
                                    x
                                 
                                 
                                    ip
                                 
                              
                              -
                              
                                 
                                    
                                       ‚àë
                                    
                                    
                                       j
                                       ‚àà
                                       N
                                       (
                                       œÄ
                                       (
                                       p
                                       )
                                       )
                                    
                                 
                              
                              
                                 
                                    w
                                 
                                 
                                    j
                                 
                              
                              
                                 
                                    x
                                 
                                 
                                    j
                                    œÄ
                                    (
                                    p
                                    )
                                 
                              
                              ‚©æ
                              0
                              
                              ‚àÄ
                              p
                              ‚àà
                              P
                           
                        
                     
                     
                        
                           (5)
                           
                              
                                 
                                    
                                       ‚àë
                                    
                                    
                                       p
                                       ‚àà
                                       Œ®
                                       (
                                       l
                                       )
                                    
                                 
                              
                              
                                 
                                    
                                       ‚àë
                                    
                                    
                                       i
                                       ‚àà
                                       N
                                       (
                                       p
                                       )
                                    
                                 
                              
                              
                                 
                                    w
                                 
                                 
                                    i
                                 
                              
                              
                                 
                                    x
                                 
                                 
                                    ip
                                 
                              
                              ‚©Ω
                              
                                 
                                    W
                                 
                                 
                                    l
                                 
                              
                              
                              ‚àÄ
                              l
                              ‚àà
                              L
                           
                        
                     
                     
                        
                           (6)
                           
                              
                                 
                                    
                                       ‚àë
                                    
                                    
                                       q
                                       ‚àà
                                       P
                                       (
                                       j
                                       )
                                    
                                 
                              
                              (
                              
                                 
                                    Œ∏
                                 
                                 
                                    q
                                 
                              
                              -
                              
                                 
                                    œÑ
                                 
                                 
                                    jq
                                 
                              
                              )
                              
                                 
                                    x
                                 
                                 
                                    jq
                                 
                              
                              -
                              
                                 
                                    
                                       ‚àë
                                    
                                    
                                       p
                                       ‚àà
                                       P
                                       (
                                       i
                                       )
                                    
                                 
                              
                              (
                              
                                 
                                    Œ∏
                                 
                                 
                                    p
                                 
                              
                              -
                              
                                 
                                    œÑ
                                 
                                 
                                    ip
                                 
                              
                              )
                              
                                 
                                    x
                                 
                                 
                                    ip
                                 
                              
                              ‚©Ω
                              
                                 
                                    Mz
                                 
                                 
                                    ij
                                 
                              
                              
                              ‚àÄ
                              i
                              ‚àà
                              N
                              ,
                              
                              j
                              ‚àà
                              Œî
                              (
                              i
                              )
                           
                        
                     
                     
                        
                           (7)
                           
                              
                                 
                                    x
                                 
                                 
                                    ip
                                 
                              
                              ‚àà
                              
                                 
                                    
                                       0
                                       ,
                                       
                                       1
                                    
                                 
                              
                              
                              ‚àÄ
                              i
                              ‚àà
                              N
                              ,
                              
                              p
                              ‚àà
                              P
                              (
                              i
                              )
                           
                        
                     
                     
                        
                           (8)
                           
                              
                                 
                                    z
                                 
                                 
                                    ij
                                 
                              
                              ‚àà
                              
                                 
                                    
                                       0
                                       ,
                                       
                                       1
                                    
                                 
                              
                              
                              ‚àÄ
                              i
                              ‚àà
                              N
                              ,
                              
                              j
                              ‚àà
                              Œî
                              (
                              i
                              )
                           
                        
                     In this model Eqs. (2) and (3) are the matching constraints between containers and available slot-positions belonging to the same class. Constraints (4) ensure that the weight of containers stowed in the same ship-stack does not increases from the bottom to the top. The maximum permissible weight on each ship-stack is imposed by constraints (5). Constraints (6) set the correct value of the 
                        
                           z
                        
                     ‚Äôs variables. Actually the term 
                        
                           (
                           
                              
                                 Œ∏
                              
                              
                                 p
                              
                           
                           -
                           
                              
                                 œÑ
                              
                              
                                 ip
                              
                           
                           )
                        
                      represents the ideal time when the container i leaves the yard-stack where it is located if it is assigned to the slot p. When i and j are located in the same yard-stack and 
                        
                           j
                           ‚àà
                           Œî
                           (
                           i
                           )
                        
                     , then the left-hand side of (6) is positive if i is picked up before j. In this case 
                        
                           
                              
                                 z
                              
                              
                                 ij
                              
                           
                        
                      must be equal to one, and a yard-shift is counted in. Conversely, if the left-hand side of (6) is not positive, the objective function will force the corresponding 
                        
                           
                              
                                 z
                              
                              
                                 ij
                              
                           
                        
                      variable to be zero at each optimal solution. The objective function is the sum of the transportation and reshuffling times.

The Model 
                        
                           F
                        
                      returns, in general, a lower estimation on the number of reshuffles. The main reason is that the configuration of the yard-stacks can vary during the loading operations, either because some containers must be loaded by other containerships, or because some import containers must be stored in the yard-stacks involved in the loading operations of the vessel under consideration. In both cases, such containers are not considered in our model, and the possible yard-shifts they could cause are disregarded. On the other hand, the number of reshuffles related to a given stowage plan cannot be exactly computed, as disclosed in Section 2.2. Actually the design of a stowage plan is, intrinsically, an offline optimization problem, while the yard-shifts occur during the loading process and may only be estimated in advance. The adopted computation of the yard-shifts becomes, of course, more accurate when the yard is organized into dedicated loading and discharging areas (Murty, Liu, Wan, & Linn, 2005). This is to say that the yard-stacks where the containers to be loaded are stored, are not involved in the loading/discharging operations of other containerships.

The ship stowage planning problem is, in general, 
                        
                           NP
                        
                     -hard (Avriel, 2000). Therefore most of the solution methods in the literature are based on heuristic procedures. In this section we propose a two-step heuristic (TSA) for solving the SSPP. The first step (CH) constructs an initial feasible solution, and the second step (IH) searches for better feasible solutions. Both steps are based on the Tabu Search paradigm that is an iterative local search heuristic provided with memory mechanisms (Glover, Laguna, & Mart√¨, 2007). In the fashion of the Simplex Method, we will first describe the heuristic IH for the improving phase, assuming that an initial feasible solution is given; then, we will illustrate how the same algorithm can be successfully used in CH for constructing the initial solution.

With reference to the model 
                           
                              F
                           
                        , in our algorithm we will search only for vectors x satisfying constraints (2)‚Äì(5) because the z‚Äôs variables depend on the x‚Äôs variables. Actually, for each binary vector x satisfying (2)‚Äì(5), we can compute, through constraints (6), a binary vector 
                           
                              z
                              (
                              x
                              )
                           
                         such that 
                           
                              (
                              x
                              ,
                              z
                              (
                              x
                              )
                              )
                           
                         is a feasible solution for 
                           
                              F
                           
                        . Given such a vector x, we define the neighborhood of x 
                        
                           
                              F
                              (
                              x
                              )
                           
                        . It is the set of solutions satisfying constraints (2)‚Äì(5) and obtained by swapping pairs of containers between pairs of compatible slots. The size of 
                           
                              F
                              (
                              x
                              )
                           
                         is bounded from above by 
                           
                              
                                 
                                    n
                                 
                                 
                                    2
                                 
                              
                           
                        . As in Glover et al. (2007), we use attributive memory structures. If x is a solution, then the set of attributes identifying x is 
                           
                              A
                              (
                              x
                              )
                              =
                              {
                              (
                              i
                              ,
                              p
                              )
                              
                              |
                              
                              container
                              
                              i
                              
                              is assigned to the slot-position
                              
                              p
                              }
                           
                        . Thus a move between solutions is performed by adding/deleting attributes to/from 
                           
                              A
                              (
                              x
                              )
                           
                        .

At a given iteration, if an attribute 
                           
                              (
                              i
                              ,
                              p
                              )
                           
                         is removed from 
                           
                              A
                              (
                              x
                              )
                           
                        , then its re-insertion is forbidden for the next 
                           
                              
                                 
                                    h
                                 
                                 
                                    ¬Ø
                                 
                              
                           
                         iterations (tabu tenure). A move is declared tabu if at least one of the attributes describing the solution obtained by that move is tabu. However a tabu move is allowed when it yields an improving solution (aspiration criterion). For each attribute 
                           
                              (
                              i
                              ,
                              p
                              )
                           
                         we denote by 
                           
                              
                                 
                                    Œ±
                                 
                                 
                                    ip
                                 
                              
                           
                         the aspiration level of the attribute; 
                           
                              
                                 
                                    Œ≤
                                 
                                 
                                    ip
                                 
                              
                           
                         the number of iterations for which the attribute is tabu (recency); 
                           
                              
                                 
                                    Œ¥
                                 
                                 
                                    ip
                                 
                              
                           
                         the number of times the attribute has been used to identify a solution (frequency). Frequency is used to diversify the search. This is achieved penalizing a non-improving solution by the frequencies of the attributes added to represent that solution.

In order to describe the algorithm, let x be a feasible solution. We define 
                           
                              c
                              (
                              x
                              )
                           
                         the value of the objective function (1) corresponding to 
                           
                              (
                              x
                              ,
                              z
                              (
                              x
                              )
                              )
                              ;
                              
                                 
                                    F
                                 
                                 
                                    ‚Äæ
                                 
                              
                              (
                              x
                              )
                              ‚äÜ
                              F
                              (
                              x
                              )
                           
                         the set of feasible solutions obtained by x performing non tabu moves; 
                           
                              
                                 
                                    x
                                 
                                 
                                    0
                                 
                              
                           
                         a starting feasible solution; 
                           
                              
                                 
                                    x
                                 
                                 
                                    h
                                 
                              
                           
                         a feasible solution at the h-th iteration; 
                           
                              
                                 
                                    x
                                 
                                 
                                    ‚àó
                                 
                              
                           
                         the best known solution (incumbent); 
                           
                              Œ≥
                           
                         a penalty coefficient used to diversify the search; 
                           
                              
                                 
                                    h
                                 
                                 
                                    ¬Ø
                                 
                              
                           
                         the number of iterations for which an attribute is tabu; 
                           
                              
                                 
                                    h
                                 
                                 
                                    max
                                 
                              
                           
                         the maximum number of iterations performed by the algorithm.

The algorithm IH is shown in Table Algorithm 1. Steps (1)‚Äì(5) initialize the data used by the algorithm. The main loop consists of steps (6)‚Äì(27). In detail steps (7)‚Äì(17) find the best non tabu solution 
                           
                              
                                 
                                    x
                                 
                                 
                                    ÀÜ
                                 
                              
                           
                         in the neighborhood of the current point 
                           
                              
                                 
                                    x
                                 
                                 
                                    h
                                 
                              
                           
                        , while steps (18)‚Äì(21) update the short term and long term memory. The incumbent is updated by steps (22) and (23). The aspiration level of the attributes describing the best non tabu solution in the current neighborhood is updated by steps (24) and (25). Finally in step (26) the algorithm moves towards the new solution and iterates.

Now we describe how to construct a feasible solution to be used by the Algorithm 1 as initial point. Let the available ship-slots be sorted with respect to their class and coordinates. The slots of the same class are, in turn, sorted by the POD, the dimension, the status (full, empty, and reefer), while the spatial coordinates are considered in the following order: bay, tier and row. A similar sorting is performed for the export containers. They are first sorted by the class, as for the ship-slots, and then by the weight.

We get a class-based perfect matching 
                           
                              
                                 
                                    x
                                 
                                 
                                    r
                                 
                              
                           
                         by assigning the i-th container to the i-th ship-slot. The vector 
                           
                              
                                 
                                    x
                                 
                                 
                                    r
                                 
                              
                           
                         satisfies constraints (2) and (3) of the Model 
                           
                              F
                           
                        , and it is such that the heaviest containers are matched with the ship-slots with the lowest tier coordinates. Let us consider the following quantities:
                           
                              (9)
                              
                                 
                                    
                                       Œª
                                    
                                    
                                       p
                                    
                                 
                                 (
                                 
                                    
                                       x
                                    
                                    
                                       r
                                    
                                 
                                 )
                                 =
                                 
                                    max
                                 
                                 
                                    
                                       
                                          -
                                          
                                             
                                                
                                                   ‚àë
                                                
                                                
                                                   i
                                                   ‚àà
                                                   N
                                                   (
                                                   p
                                                   )
                                                
                                             
                                          
                                          
                                             
                                                w
                                             
                                             
                                                i
                                             
                                          
                                          
                                             
                                                x
                                             
                                             
                                                ip
                                             
                                             
                                                r
                                             
                                          
                                          +
                                          
                                             
                                                
                                                   ‚àë
                                                
                                                
                                                   j
                                                   ‚àà
                                                   N
                                                   (
                                                   œÄ
                                                   (
                                                   p
                                                   )
                                                   )
                                                
                                             
                                          
                                          
                                             
                                                w
                                             
                                             
                                                j
                                             
                                          
                                          
                                             
                                                x
                                             
                                             
                                                j
                                                œÄ
                                                (
                                                p
                                                )
                                             
                                             
                                                r
                                             
                                          
                                          ;
                                          
                                          0
                                       
                                    
                                 
                                 
                                 ‚àÄ
                                 p
                                 ‚àà
                                 P
                              
                           
                        
                        
                           
                              (10)
                              
                                 
                                    
                                       Œº
                                    
                                    
                                       l
                                    
                                 
                                 (
                                 
                                    
                                       x
                                    
                                    
                                       r
                                    
                                 
                                 )
                                 =
                                 
                                    max
                                 
                                 
                                    
                                       
                                          
                                             
                                                
                                                   ‚àë
                                                
                                                
                                                   p
                                                   ‚àà
                                                   Œ®
                                                   (
                                                   l
                                                   )
                                                
                                             
                                          
                                          
                                             
                                                
                                                   ‚àë
                                                
                                                
                                                   i
                                                   ‚àà
                                                   N
                                                   (
                                                   p
                                                   )
                                                
                                             
                                          
                                          
                                             
                                                w
                                             
                                             
                                                i
                                             
                                          
                                          
                                             
                                                x
                                             
                                             
                                                ip
                                             
                                             
                                                r
                                             
                                          
                                          -
                                          
                                             
                                                W
                                             
                                             
                                                l
                                             
                                          
                                          ;
                                          
                                          0
                                       
                                    
                                 
                                 
                                 ‚àÄ
                                 l
                                 ‚àà
                                 L
                              
                           
                        
                        
                           
                              (11)
                              
                                 v
                                 (
                                 Œª
                                 (
                                 
                                    
                                       x
                                    
                                    
                                       r
                                    
                                 
                                 )
                                 ,
                                 Œº
                                 (
                                 
                                    
                                       x
                                    
                                    
                                       r
                                    
                                 
                                 )
                                 )
                                 =
                                 
                                    
                                       
                                          ‚àë
                                       
                                       
                                          p
                                          ‚àà
                                          P
                                       
                                    
                                 
                                 
                                    
                                       Œª
                                    
                                    
                                       p
                                    
                                 
                                 +
                                 
                                    
                                       
                                          ‚àë
                                       
                                       
                                          l
                                          ‚àà
                                          L
                                       
                                    
                                 
                                 
                                    
                                       Œº
                                    
                                    
                                       l
                                    
                                 
                              
                           
                        Basically the components of vectors 
                           
                              Œª
                           
                         and 
                           
                              Œº
                           
                         measure, respectively, the violation of constraints (4) and (5) at 
                           
                              
                                 
                                    x
                                 
                                 
                                    r
                                 
                              
                           
                        , while (11) represents the total violation. If 
                           
                              v
                              (
                              Œª
                              (
                              
                                 
                                    x
                                 
                                 
                                    r
                                 
                              
                              )
                              ,
                              Œº
                              (
                              
                                 
                                    x
                                 
                                 
                                    r
                                 
                              
                              )
                              )
                              =
                              0
                           
                        , then constraints (4) and (5) are satisfied, so 
                           
                              
                                 
                                    x
                                 
                                 
                                    r
                                 
                              
                           
                         is a feasible solution for the Model 
                           
                              F
                           
                         and it can be used as the starting point in the Algorithm 1.
                           Algorithm¬†1
                           Improving Heuristic IH(
                                 
                                    
                                       
                                          x
                                       
                                       
                                          0
                                       
                                    
                                 
                              ) 
                                 
                                    
                                       
                                       
                                       
                                          
                                             
                                                1: 
                                                   
                                                      h
                                                      =
                                                      1
                                                      ,
                                                      
                                                         
                                                            x
                                                         
                                                         
                                                            h
                                                         
                                                      
                                                      =
                                                      
                                                         
                                                            x
                                                         
                                                         
                                                            0
                                                         
                                                      
                                                      ,
                                                      
                                                         
                                                            x
                                                         
                                                         
                                                            ‚àó
                                                         
                                                      
                                                      =
                                                      
                                                         
                                                            x
                                                         
                                                         
                                                            0
                                                         
                                                      
                                                   
                                                
                                             
                                             
                                          
                                          
                                             
                                                2: for all 
                                                
                                                   
                                                      (
                                                      i
                                                      ,
                                                      p
                                                      )
                                                      ‚àà
                                                      N
                                                      √ó
                                                      P
                                                   
                                                 
                                                do
                                             
                                             
                                          
                                          
                                             
                                                3: 
                                                
                                                   
                                                      
                                                         
                                                            Œ±
                                                         
                                                         
                                                            ip
                                                         
                                                      
                                                      =
                                                      ‚àû
                                                      ,
                                                      
                                                      
                                                         
                                                            Œ≤
                                                         
                                                         
                                                            ip
                                                         
                                                      
                                                      =
                                                      0
                                                      ,
                                                      
                                                      
                                                         
                                                            Œ¥
                                                         
                                                         
                                                            ip
                                                         
                                                      
                                                      =
                                                      0
                                                   
                                                
                                             
                                             
                                          
                                          
                                             
                                                4: for all 
                                                
                                                   
                                                      (
                                                      i
                                                      ,
                                                      p
                                                      )
                                                      ‚àà
                                                      A
                                                      (
                                                      
                                                         
                                                            x
                                                         
                                                         
                                                            0
                                                         
                                                      
                                                      )
                                                   
                                                 
                                                do
                                             
                                             
                                          
                                          
                                             
                                                5: 
                                                
                                                   
                                                      
                                                         
                                                            Œ±
                                                         
                                                         
                                                            ip
                                                         
                                                      
                                                      =
                                                      c
                                                      (
                                                      
                                                         
                                                            x
                                                         
                                                         
                                                            0
                                                         
                                                      
                                                      )
                                                   
                                                
                                             
                                             
                                          
                                          
                                             
                                                6: repeat
                                             
                                             
                                          
                                          
                                             
                                                7: Construct 
                                                   
                                                      F
                                                      (
                                                      
                                                         
                                                            x
                                                         
                                                         
                                                            h
                                                         
                                                      
                                                      )
                                                   
                                                
                                             
                                             
                                          
                                          
                                             
                                                8: 
                                                
                                                   
                                                      
                                                         
                                                            F
                                                         
                                                         
                                                            ‚Äæ
                                                         
                                                      
                                                      (
                                                      
                                                         
                                                            x
                                                         
                                                         
                                                            h
                                                         
                                                      
                                                      )
                                                      =
                                                      ‚àÖ
                                                   
                                                
                                             
                                             
                                          
                                          
                                             
                                                9: 
                                                for all 
                                                
                                                   
                                                      
                                                         
                                                            x
                                                         
                                                         
                                                            ¬Ø
                                                         
                                                      
                                                      ‚àà
                                                      F
                                                      (
                                                      
                                                         
                                                            x
                                                         
                                                         
                                                            h
                                                         
                                                      
                                                      )
                                                   
                                                 
                                                do
                                             
                                             
                                          
                                          
                                             10: 
                                                for all 
                                                
                                                   
                                                      (
                                                      i
                                                      ,
                                                      p
                                                      )
                                                      ‚àà
                                                      A
                                                      (
                                                      
                                                         
                                                            x
                                                         
                                                         
                                                            ¬Ø
                                                         
                                                      
                                                      )
                                                      ‚ßπ
                                                      A
                                                      (
                                                      
                                                         
                                                            x
                                                         
                                                         
                                                            h
                                                         
                                                      
                                                      )
                                                   
                                                
                                                :
                                                
                                                   
                                                      
                                                         
                                                            Œ≤
                                                         
                                                         
                                                            ip
                                                         
                                                      
                                                      <
                                                      h
                                                   
                                                 
                                                or 
                                                
                                                   
                                                      c
                                                      (
                                                      
                                                         
                                                            x
                                                         
                                                         
                                                            ¬Ø
                                                         
                                                      
                                                      )
                                                      <
                                                      
                                                         
                                                            Œ±
                                                         
                                                         
                                                            ip
                                                         
                                                      
                                                   
                                                 
                                                do
                                             
                                             
                                          
                                          
                                             11: 
                                                
                                                
                                                
                                                   
                                                      
                                                         
                                                            F
                                                         
                                                         
                                                            ‚Äæ
                                                         
                                                      
                                                      (
                                                      
                                                         
                                                            x
                                                         
                                                         
                                                            h
                                                         
                                                      
                                                      )
                                                      =
                                                      
                                                         
                                                            F
                                                         
                                                         
                                                            ‚Äæ
                                                         
                                                      
                                                      (
                                                      
                                                         
                                                            x
                                                         
                                                         
                                                            h
                                                         
                                                      
                                                      )
                                                      ‚à™
                                                      {
                                                      
                                                         
                                                            x
                                                         
                                                         
                                                            ¬Ø
                                                         
                                                      
                                                      }
                                                   
                                                
                                             
                                             
                                          
                                          
                                             12: 
                                                for all 
                                                
                                                   
                                                      
                                                         
                                                            x
                                                         
                                                         
                                                            ¬Ø
                                                         
                                                      
                                                      ‚àà
                                                      
                                                         
                                                            F
                                                         
                                                         
                                                            ‚Äæ
                                                         
                                                      
                                                      (
                                                      
                                                         
                                                            x
                                                         
                                                         
                                                            h
                                                         
                                                      
                                                      )
                                                   
                                                 
                                                do
                                             
                                             
                                          
                                          
                                             13: 
                                                
                                                if 
                                                
                                                   
                                                      c
                                                      (
                                                      
                                                         
                                                            x
                                                         
                                                         
                                                            ¬Ø
                                                         
                                                      
                                                      )
                                                      ‚©æ
                                                      c
                                                      (
                                                      
                                                         
                                                            x
                                                         
                                                         
                                                            h
                                                         
                                                      
                                                      )
                                                   
                                                 
                                                then
                                             
                                             
                                          
                                          
                                             14: 
                                                
                                                
                                                
                                                   
                                                      g
                                                      (
                                                      
                                                         
                                                            x
                                                         
                                                         
                                                            ¬Ø
                                                         
                                                      
                                                      )
                                                      =
                                                      c
                                                      (
                                                      
                                                         
                                                            x
                                                         
                                                         
                                                            ¬Ø
                                                         
                                                      
                                                      )
                                                      +
                                                      Œ≥
                                                      ¬∑
                                                      c
                                                      (
                                                      
                                                         
                                                            x
                                                         
                                                         
                                                            h
                                                         
                                                      
                                                      )
                                                      ¬∑
                                                      
                                                         
                                                            ‚àë
                                                         
                                                         
                                                            (
                                                            i
                                                            ,
                                                            p
                                                            )
                                                            ‚àà
                                                            A
                                                            (
                                                            
                                                               
                                                                  x
                                                               
                                                               
                                                                  ¬Ø
                                                               
                                                            
                                                            )
                                                            ‚ßπ
                                                            A
                                                            (
                                                            
                                                               
                                                                  x
                                                               
                                                               
                                                                  h
                                                               
                                                            
                                                            )
                                                         
                                                      
                                                      
                                                         
                                                            
                                                               
                                                                  
                                                                     
                                                                        
                                                                           Œ¥
                                                                        
                                                                        
                                                                           ip
                                                                        
                                                                     
                                                                  
                                                                  
                                                                     h
                                                                  
                                                               
                                                            
                                                         
                                                      
                                                   
                                                
                                             
                                             
                                          
                                          
                                             15: 
                                                
                                                else
                                             
                                             
                                          
                                          
                                             16: 
                                                
                                                
                                                
                                                   
                                                      g
                                                      (
                                                      
                                                         
                                                            x
                                                         
                                                         
                                                            ¬Ø
                                                         
                                                      
                                                      )
                                                      =
                                                      c
                                                      (
                                                      
                                                         
                                                            x
                                                         
                                                         
                                                            ¬Ø
                                                         
                                                      
                                                      )
                                                   
                                                
                                             
                                             
                                          
                                          
                                             17: 
                                                
                                                   
                                                      
                                                         
                                                            x
                                                         
                                                         
                                                            ÀÜ
                                                         
                                                      
                                                      =
                                                      argmin
                                                      
                                                         
                                                            
                                                               g
                                                               (
                                                               
                                                                  
                                                                     x
                                                                  
                                                                  
                                                                     ¬Ø
                                                                  
                                                               
                                                               )
                                                               
                                                               |
                                                               
                                                               
                                                                  
                                                                     x
                                                                  
                                                                  
                                                                     ¬Ø
                                                                  
                                                               
                                                               ‚àà
                                                               
                                                                  
                                                                     F
                                                                  
                                                                  
                                                                     ‚Äæ
                                                                  
                                                               
                                                               (
                                                               
                                                                  
                                                                     x
                                                                  
                                                                  
                                                                     h
                                                                  
                                                               
                                                               )
                                                            
                                                         
                                                      
                                                   
                                                
                                             
                                             
                                          
                                          
                                             18: 
                                                for all 
                                                
                                                   
                                                      (
                                                      i
                                                      ,
                                                      p
                                                      )
                                                      ‚àà
                                                      A
                                                      (
                                                      
                                                         
                                                            x
                                                         
                                                         
                                                            h
                                                         
                                                      
                                                      )
                                                      ‚ßπ
                                                      A
                                                      (
                                                      
                                                         
                                                            x
                                                         
                                                         
                                                            ÀÜ
                                                         
                                                      
                                                      )
                                                   
                                                 
                                                do
                                             
                                             
                                          
                                          
                                             19: 
                                                
                                                
                                                   
                                                      
                                                         
                                                            Œ≤
                                                         
                                                         
                                                            ip
                                                         
                                                      
                                                      =
                                                      h
                                                      +
                                                      
                                                         
                                                            h
                                                         
                                                         
                                                            ¬Ø
                                                         
                                                      
                                                   
                                                
                                             
                                             
                                          
                                          
                                             20: 
                                                for all 
                                                
                                                   
                                                      (
                                                      i
                                                      ,
                                                      p
                                                      )
                                                      ‚àà
                                                      A
                                                      (
                                                      
                                                         
                                                            x
                                                         
                                                         
                                                            ÀÜ
                                                         
                                                      
                                                      )
                                                      ‚ßπ
                                                      A
                                                      (
                                                      
                                                         
                                                            x
                                                         
                                                         
                                                            h
                                                         
                                                      
                                                      )
                                                   
                                                 
                                                do
                                             
                                             
                                          
                                          
                                             21: 
                                                
                                                
                                                   
                                                      
                                                         
                                                            Œ¥
                                                         
                                                         
                                                            ip
                                                         
                                                      
                                                      =
                                                      
                                                         
                                                            Œ¥
                                                         
                                                         
                                                            ip
                                                         
                                                      
                                                      +
                                                      1
                                                   
                                                
                                             
                                             
                                          
                                          
                                             22: 
                                                if 
                                                
                                                   
                                                      c
                                                      (
                                                      
                                                         
                                                            x
                                                         
                                                         
                                                            ÀÜ
                                                         
                                                      
                                                      )
                                                      <
                                                      c
                                                      (
                                                      
                                                         
                                                            x
                                                         
                                                         
                                                            ‚àó
                                                         
                                                      
                                                      )
                                                   
                                                 
                                                then
                                             
                                             
                                          
                                          
                                             23: 
                                                
                                                
                                                   
                                                      
                                                         
                                                            x
                                                         
                                                         
                                                            ‚àó
                                                         
                                                      
                                                      =
                                                      
                                                         
                                                            x
                                                         
                                                         
                                                            ÀÜ
                                                         
                                                      
                                                   
                                                
                                             
                                             
                                          
                                          
                                             24: 
                                                for all 
                                                
                                                   
                                                      (
                                                      i
                                                      ,
                                                      p
                                                      )
                                                      ‚àà
                                                      A
                                                      (
                                                      
                                                         
                                                            x
                                                         
                                                         
                                                            ÀÜ
                                                         
                                                      
                                                      )
                                                   
                                                 
                                                do
                                             
                                             
                                          
                                          
                                             25: 
                                                
                                                
                                                   
                                                      
                                                         
                                                            Œ±
                                                         
                                                         
                                                            ip
                                                         
                                                      
                                                      =
                                                      min
                                                      {
                                                      
                                                         
                                                            Œ±
                                                         
                                                         
                                                            ip
                                                         
                                                      
                                                      ,
                                                      c
                                                      (
                                                      
                                                         
                                                            x
                                                         
                                                         
                                                            ÀÜ
                                                         
                                                      
                                                      )
                                                      }
                                                   
                                                
                                             
                                             
                                          
                                          
                                             26: 
                                                
                                                   
                                                      h
                                                      =
                                                      h
                                                      +
                                                      1
                                                      ,
                                                      
                                                         
                                                            x
                                                         
                                                         
                                                            h
                                                         
                                                      
                                                      =
                                                      
                                                         
                                                            x
                                                         
                                                         
                                                            ÀÜ
                                                         
                                                      
                                                      ,
                                                      
                                                      c
                                                      (
                                                      
                                                         
                                                            x
                                                         
                                                         
                                                            h
                                                         
                                                      
                                                      )
                                                      =
                                                      c
                                                      (
                                                      
                                                         
                                                            x
                                                         
                                                         
                                                            ÀÜ
                                                         
                                                      
                                                      )
                                                   
                                                
                                             
                                             
                                          
                                          
                                             27: until 
                                                
                                                   
                                                      h
                                                      ‚©Ω
                                                      
                                                         
                                                            h
                                                         
                                                         
                                                            max
                                                         
                                                      
                                                   
                                                
                                             
                                             
                                          
                                          
                                             28: return 
                                                
                                                   
                                                      
                                                         
                                                            x
                                                         
                                                         
                                                            ‚àó
                                                         
                                                      
                                                   
                                                
                                             
                                             
                                          
                                       
                                    
                                 
                              
                           

Constructive Heuristic CH 
                              
                                 
                                    
                                       
                                       
                                          
                                             1: Find a class-based perfect matching 
                                                   
                                                      
                                                         
                                                            x
                                                         
                                                         
                                                            r
                                                         
                                                      
                                                   
                                                 between export containers and available slots
                                          
                                          
                                             2: Set 
                                                   
                                                      x
                                                      =
                                                      
                                                         
                                                            x
                                                         
                                                         
                                                            r
                                                         
                                                      
                                                      ,
                                                      c
                                                      (
                                                      x
                                                      )
                                                      =
                                                      v
                                                      (
                                                      Œª
                                                      (
                                                      x
                                                      )
                                                      ,
                                                      Œº
                                                      (
                                                      x
                                                      )
                                                      )
                                                   
                                                
                                             
                                          
                                          
                                             3: if 
                                                
                                                   
                                                      c
                                                      (
                                                      x
                                                      )
                                                      =
                                                      0
                                                   
                                                 
                                                then
                                             
                                          
                                          
                                             4: 
                                                return 
                                                x
                                             
                                          
                                          
                                             5: else
                                             
                                          
                                          
                                             6: 
                                                return IH(x)
                                          
                                       
                                    
                                 
                              
                           

When 
                           
                              
                                 
                                    x
                                 
                                 
                                    r
                                 
                              
                           
                         is unfeasible, we use a Tabu Search algorithm to find a feasible solution. In particular, we adopt the same scheme of Algorithm 1, after having suitably re-defined the neighborhood structure, the objective function to minimize and the starting point. To this aim, 
                           
                              F
                              (
                              x
                              )
                           
                         is the set of solutions satisfying constraints (2) and (3) obtained swapping pairs of homogeneous containers into compatible slots; the objective function 
                           
                              c
                              (
                              x
                              )
                           
                         is the total violation 
                           
                              v
                              (
                              Œª
                              (
                              x
                              )
                              ,
                              Œº
                              (
                              x
                              )
                              )
                           
                         as defined in (11), and 
                           
                              
                                 
                                    x
                                 
                                 
                                    0
                                 
                              
                           
                         is the class-based perfect matching 
                           
                              
                                 
                                    x
                                 
                                 
                                    r
                                 
                              
                           
                        , as above defined. The constructive heuristic is summarized in Table Algorithm 2.

We have first tested the Model 
                        
                           F
                        
                      and the TSA on a set of six real instances provided by MCT (Medcenter Container Terminal), the company managing the Gioia Tauro container terminal, and then on a set of 60 realistic instances generated from them. According to Section 4, the real instances are described by the following data: the vessel bay-plan, the class-based pre-stow plan, the berthing position of the vessel, the set of cranes allocated to the vessel along with their working schedules, the set of containers to be loaded with their attributes, and the positions of the containers in the yard.

In Table 3
                      we summarize the container-related characteristics of the six instances: the number of containers to be stowed (
                        
                           |
                           N
                           |
                        
                     ), the number of container classes (
                        
                           |
                           C
                           |
                        
                     ), the yard area where containers are located in terms of lower leftmost (
                        
                           
                              
                                 X
                              
                              
                                 min
                              
                           
                           ,
                           
                              
                                 Y
                              
                              
                                 min
                              
                           
                        
                     ) and upper rightmost (
                        
                           
                              
                                 X
                              
                              
                                 max
                              
                           
                           ,
                           
                              
                                 Y
                              
                              
                                 max
                              
                           
                        
                     ) corners, the distribution of the containers in the yard-stacks (
                        
                           2
                           T
                           %
                        
                     ), (
                        
                           3
                           T
                           %
                        
                     ). More precisely, 
                        
                           2
                           T
                           %
                        
                      is the percentage of containers in the yard having exactly one container of the same instance located below them; analogously, 
                        
                           3
                           T
                           %
                        
                      represents the percentage of containers located above two other ones of the same instance. The remaining containers will not cause reshuffles.

Afterwards, for each real instance we have generated ten new instances which share with the original one all the input data except for the position of the containers in the yard. We have considered five possible configurations of the yard stacks, that is five different combinations of values for the pair (
                        
                           2
                           T
                           %
                           ,
                           3
                           T
                           %
                        
                     ), as shown in Table 4
                     . For each configuration, we have generated two different instances by a uniform distribution of the containers at the first tier (and thus of the stacks) within the same yard area in which the containers of the original instance were located.

The time parameters in the model have been set as suggested by MCT planners. We have considered an average speed for the straddle carriers v
                     =18kilometer/hour, so that the transportation time for a container, 
                        
                           
                              
                                 œÑ
                              
                              
                                 ip
                              
                           
                        
                     , has been obtained as the ratio between the Manhattan distance and v. The starting handling time of a ship-slot 
                        
                           
                              
                                 Œ∏
                              
                              
                                 p
                              
                           
                        
                      has been computed by setting the cycle time of the quay cranes equal to 150seconds, that is assuming a crane productivity of 24 moves per hour. Finally, the time needed to perform a yard-shift is 
                        
                           œÉ
                           =
                           3.3
                        
                     
                     minutes. The objective function is expressed in minutes.

The Model 
                        
                           F
                        
                      has been implemented using ILOG Concert 2.9 and solved by ILOG CPLEX 12.1; the TSA was coded in C++. The numerical experiments were run on a workstation equipped with one Intel Xeon 3gigahertz processor and 4gigabytes of RAM. We have let CPLEX running for at most one hour adopting default settings, while the parameters of the TSA have been chosen, through several tests, as follows: maximum number of iterations 
                        
                           
                              
                                 h
                              
                              
                                 max
                              
                           
                           =
                           300
                        
                     ; tabu tenure 
                        
                           
                              
                                 h
                              
                              
                                 ¬Ø
                              
                           
                           =
                           10
                        
                     ; diversification penalty 
                        
                           Œ≥
                           =
                           0.005
                        
                     .

The computational results obtained on the six real instances are summarized in Table 5
                        ; the results on the generated instances are reported in Tables 6 and 7
                        
                        . For all the experiments we report the lower bounds (LB) and the GAPs returned by CPLEX solving the Model 
                           
                              F
                           
                        . The lower bounds are used to evaluate the GAP of the initial solution as well as that returned by the TSA at the end of the improvement phase (
                           
                              GAP
                              =
                              (
                              UB
                              -
                              LB
                              )
                              /
                              UB
                           
                        ). Moreover we report the number of reshuffles and the computation times both for CPLEX and TSA.

From the analysis of Table 5 we observe that CPLEX solves all the real instances within the imposed time limit. CPLEX can be considered efficient, and thus the Model 
                           
                              F
                           
                         effective, in solving three instances with computation times ranging from three to 52seconds. In the other cases CPLEX is poorly competitive, since it takes at least 20minutes of computation time.

As for TSA we note that it returns good quality solutions for all the test instances in a short computation time. Actually, TSA finds an optimal solution for five instances, while it returns a negligible GAP in the remaining case. TSA is faster than CPLEX by two orders of magnitude in solving one half of the instances (namely I4, I5, I6).

More insights on the performance of the exact and heuristic algorithms, in relation to the main features of the instances, can be gained by the analysis of Tables 6 and 7, where the computational experiments for the realistic instances are reported. A quick look at the CPLEX results shows that the number of containers to be stowed directly affects the computational complexity of the problem. Actually, CPLEX solves at optimality all but two of the 30 small size instances in the sets I1, I2, I3. On the contrary, on the larger size instances I4, I5, I6, the optimal solution has been obtained in five out of 30 problems and a near optimal solution in one case; on the remaining 24 instances CPLEX has failed to find a feasible solution within the imposed time limit.

The overall performance of the Tabu Search Algorithm is satisfactory, both in terms of solution quality and computation time. Actually, the initial feasible solution is computed in a very short time and the maximum GAP is 29.5%. The improvement phase of TSA returns a maximum GAP of 2.2% while the highest running time is about one minute. We also observe that a nonzero GAP returned by TSA at the end of the improvement phase usually corresponds to a number of yard-shifts greater than the one computed by CPLEX. Among the small size instances, TSA exhibits the best performance on the set I3. Actually it returns a negligible GAP in just one case, but with a smaller number of yard-shifts if compared with the CPLEX (non optimal) solution.

It is worth noting that the sets I2 and I3 have almost the same number of containers located in slightly different yard areas, but they strongly differ in the number of container classes. This affects both the computation time and the number of yard-shifts. Actually, the higher the number of classes the higher is the number of yard-shifts, and the lower are the computation times. This is because a large number of classes makes the problem strongly constrained and the feasible set can be explored in a short computation time (both from the exact and the heuristic algorithm). Of course, in this case, the optimal solution may present a significant number of unavoidable reshuffles, as for instances I2. On the contrary, when the number of classes is small, the greater degree of freedom allows the model to find shift-less solutions but in a larger computation time. The set I5 seems to be the hardest one we have tested. Actually CPLEX reaches always the time limit, but in just one case it yields a feasible solution. On the same instance TSA is able to find a feasible solution with the same GAP but one less reshuffle in 59seconds.

In closing this Section, we analyze the impact of the yard-stack configuration on the computation time required by CPLEX on the instance sets I1‚ÄìI6. In Fig. 4
                        , we report on a logarithmic scale the average computational times on the two instances (for example: A1 and A2) which share the same configuration, for each configuration A‚ÄìE and for all the considered instances.

From Fig. 4 it results that the instances with the configuration B are harder to solve than that of type C. Actually, a simple worst case analysis reveals that the configuration B could give rise to a larger number of yard-shifts, even though in the configuration C some containers are stacked at the third tier. This corresponds to a greater number of z‚Äôs variables and constraints (6) in the model, and thus the computational burden increases if compared with the one needed to solve the same instance of type C. Moreover Fig. 4 confirms our previous remarks on the instance sets I2 and I3. The large number of container classes in the set I2 makes the instances easier to solve. Actually, in the configurations D and E, the computation time on the set I2 is even lower than that required for the set I1, despite of the larger number of containers.

@&#CONCLUSIONS@&#

In this paper we have addressed the Ship Stowage Planning Problem. We have first provided a detailed description of the two phases in which the decision problem is usually decomposed, along with a classification scheme and a review of the most relevant related papers. The classification scheme has a twofold benefit: highlighting similarities and differences in the previously studied stowage problems; providing an useful guide for choosing modeling and solution approaches when an analogous problem has to be faced. Then we have focused on the Terminal-oriented Ship Stowage Planning Problem at a DTS terminal that, to our knowledge, has not been investigated in the literature. We have proposed a Binary Integer Model 
                        
                           F
                        
                      for the minimization of the transportation times of the containers and the yard-shifts. We have developed a Tabu Search Algorithm for finding sub-optimal solutions to the problem and have solved the model 
                        
                           F
                        
                      by CPLEX.

Both the algorithms have been tested on a set of different sized real instances from the Gioia Tauro container terminal. Further instances have been generated from the real ones by modifying the distribution of the export containers in the yard so as to force the pick-up of containers to possibly cause many yard-shifts. The computational results show the superiority of the heuristics over CPLEX. Actually the Tabu Search Algorithm is able to find optimal or near-optimal solutions with a little computational burden on all the test instances, even when CPLEX fails to find a feasible solution within the time-limit of 1hour.

It is worth to underline that the yard-shifts cannot be exactly computed by any deterministic optimization model for the SSPP, unless one considers an ITS terminal where the yard is organized into dedicated areas and there is one area for each vessel. In case of a DTS terminal, as in this paper, the best that can be obtained is a lower estimation of the yard-shifts, because the design of the stowage plan is performed before the quay operations on the vessel start, while the configuration of the yard stacks changes dynamically during the loading/discharging process. A better estimation could probably be obtained by resorting to simulation-based optimization tools.

@&#ACKNOWLEDGEMENT@&#

The authors are grateful to the Managers and Planners of MedCenter Container Terminal for fruitful discussions and for having provided the test instances.

Supplementary data associated with this article can be found, in the online version, at http://dx.doi.org/10.1016/j.ejor.2014.05.030.


                     
                        
                           
                        
                     
                  

@&#REFERENCES@&#

