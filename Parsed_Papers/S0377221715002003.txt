@&#MAIN-TITLE@&#Selective vehicle routing for a mobile blood donation system

@&#HIGHLIGHTS@&#


               
               
                  
                     
                        
                           
                           We define a new variant of VRP named as Selective VRP with Integrated Tours.


                        
                        
                           
                           We propose exact and heuristic algorithms for this newly defined variant of VRP.


                        
                        
                           
                           We use the model to design a new mobile blood collection system for Turkey.


                        
                        
                           
                           We test the performance of the solution methods developed with real-life data.


                        
                     
                  
               
            

@&#KEYPHRASES@&#

Routing

Selective Vehicle Routing Problem

Mobile blood collection

Healthcare logistics

@&#ABSTRACT@&#


               
               
                  In this study, a mobile blood collection system is designed with the primary objective of increasing blood collection levels. This design also takes into account operational costs to aim for collection of large amounts of blood at reasonable cost. Bloodmobiles perform direct tours to certain activities to collect blood, but at the end of each day, they bring the collected blood to a designated depot to prevent its spoilage. The proposed system consists of the bloodmobiles and a new vehicle called the shuttle that visits the bloodmobiles in the field on each day and transfers the collected blood to the depot. Consequently, bloodmobiles can continue their tours without having to make daily returns to the depot.
                  We propose a mathematical model and a 2-stage IP based heuristic algorithm to determine the tours of the bloodmobiles and the shuttle, and their lengths of stay at each stop. This new problem is defined as an extension of the Selective Vehicle Routing Problem and is referred to as the SVRP with Integrated Tours. The performances of the solution methodologies are tested first on a real data set obtained from past blood donation activities of Turkish Red Crescent in Ankara, and then on a constructed data set based on GIS data of the European part of Istanbul. The Pareto set of optimum solutions is generated based on blood amounts and logistics costs, and finally a sensitivity analysis on some important design parameters is conducted.
               
            

@&#INTRODUCTION@&#

Blood donation logistics can be classified under the medical supply transportation problems as a healthcare logistics problem. Although blood transfusion is one of the most critical operations in various medical interventions, blood is a very limited resource. Since blood cannot be produced synthetically, donations constitute the only source. Worldwide average demand for blood is reported by WHO (World Health Organization, 2013) as 92 million units per year whereas the regular blood donors make up only 5 percent of the world population. Effective use of bloodmobiles may be helpful in raising the number of donors and their donation frequencies. Since bloodmobiles can also reach potential donors who have limited time and limited means of transportation, these vehicles can attract more donors than fixed donation points. Red Crescent and Red Cross Societies all over the world share virtually the same organizational structure for their blood collection units. These units consist of mainly fixed points (such as blood centers, hospitals and clinics) and bloodmobiles. Bloodmobiles are motor vehicles (usually bus or large van) containing necessary equipment for the blood donation procedure. Blood drives involving bloodmobiles usually take place in public places such as colleges and churches. These drives aim to reach at many donors that may not be planning to make a blood donation otherwise.

In this study, we propose a new cost efficient and easy-to-implement mobile blood collection system based on the practices of Turkish Red Crescent (TRC). Since TRC is a member of the International Federation of Red Cross and Red Crescent Societies (IFRC), these practices can easily be extrapolated to other national Red Cross and Red Crescent organizations due to IFRC's guidelines. The application of guidelines can differ from organization to organization, but a well-designed global model can be adopted by any organization.

There is a continuous demand for blood that needs to be met through donations. However, mobile blood collection is not the major part of blood collection in the world (including Turkey). In fact, most donations are taken at fixed locations. The structures and operational mechanisms of fixed locations and mobile systems used by TRC for its blood collection activities can be summarized as follows:

                        
                           •
                           
                              Fixed locations: Regional Blood Centers (RBC), less developed Blood Centers (BC) and supporting facilities known as Blood Stations (BS) are the three types of fixed locations. RBCs are capable of performing every blood related action, such as collection, analysis, storage, and distribution. The coordination of activities in BCs and BSs are also among the responsibilities of RBCs. BCs, which are more common, can also perform basic analysis and storage whereas, BSs support only the collection and temporary storage of blood. Each mobile unit is assigned to either a RBC or BC, thus mobile blood tours are originated from these centers. In the system that is described by Sahin, Sural, and Meral (2007) there are 7 RBCs, 23 BCs and 34 BSs in Turkey.


                              Bloodmobiles: In Turkey, bloodmobiles provide service at pre-arranged temporary locations such as governmental organizations, municipalities and certain public events, where the potential number of donors is large. Pre-determined locations are visited by bloodmobiles according to a weekly schedule. Locations and dates for mobile blood collection are usually determined by the host organizations and TRC. TRC assigns collector teams to these host organizations on the designated days. Blood collection at a designated point is a whole day activity including traveling, set-up and collection times. That is, a blood mobile cannot visit multiple locations on any given day. Due to the perishable nature of whole blood, the collected blood needs to be sent to the closest RBC/BC for analysis and storage within a maximum of 24 hours after its collection. To prevent spoilage, bloodmobiles return the collected blood to their assigned RBC/BC (depot) at the end of each day.

With our system, both the bloodmobiles and shuttles can be mobilized in the sense that, we decide on the points to be visited by the bloodmobiles, and durations of these visits as part of the solution output. As another example, American Red Cross (2012) performs same dedicated bloodmobile tours periodically and announces them in their website, expecting donors will visit these vehicles. This is very similar to what TRC does in its current practice, before the introduction of the new system suggested by the authors. Therefore, American Red Cross can update its tours using the structure that is going to be described in this paper, in order to achieve higher blood collection amounts by visiting the local activities with high expected number of visitors and employing shuttles to collect the blood. In brief, the system and the results reported in this paper can easily be adopted by other blood collecting organizations around the world including Austrian and American Red Cross organizations.

New system requires determining stops of bloodmobiles, the duration of stay for the bloodmobiles at each stop along their respective routes and finally the sequence of visiting these stops (i.e. tours) for both bloodmobiles and the shuttles. To the best knowledge of the authors', there is no study in the literature that simultaneously considers all these issues. The most closely related problem in the literature is the Selective Vehicle Routing Problem (SVRP) suggested by Chao, Golden, and Wasil (1996). The node selection and route determination tasks in SVRP correspond to the selection of the stops and routes of the bloodmobiles. However, our problem also requires deciding on the length of stay of each bloodmobile at the nodes along its route, and the daily routes of the shuttle to transfer the collected blood at the bloodmobiles in the field to the depot. Since SVRP does not include a mechanism that would simultaneously optimize the bloodmobile and shuttle tours, our model stands out as a new problem that can be considered as an extension of SVRP. Thus, we name it as the Selective Vehicle Routing Problem with Integrated Tours (SVRPwIT).

The rest of the paper is organized as follows: Section 2 presents a formal definition of the research problem followed by a review of the related literature. Section 3 proposes a mathematical model for this problem. In Section 4, the performance of the mathematical model is tested first on a real data set obtained from past blood donation activities in Ankara, and then on a constructed data set based on GIS (Geographical Information System) data of the European part of Istanbul. Section 5 proposes a 2-stage IP based algorithm as a more efficient technique to solve larger problems. Computational times and optimality gaps of this algorithm are compared with the exact solutions also in this section. Finally, the paper is concluded in Section 6, with a summary of the study and possible future research directions.

We design a new mobile blood collection system motivated from the current Red Cross and Red Crescent applications. In addition to the daily bloodmobile visits, the new system also allows 2- or 3-day stay-overs at any given point, while still conveying the collected blood to the depot in a timely manner to avoid its spoilage. The new system also proposes more frequent and better utilized bloodmobile tours over a weekly schedule. The routes are not limited to special, large-scale events. Quite contrarily, even smaller towns and suburban places can be visited to increase the collected blood volumes.

The proposed system of any given depot consists of its current bloodmobiles and an additional shuttle. The bloodmobiles start their tours at the beginning of the planning horizon and they may remain in the field without having to return to the depot until the last day as long as there are unvisited points with blood potential. They visit several potential locations once they leave the depot and spend at least one day at each location. Since blood collection is a whole day activity, a bloodmobile cannot visit multiple locations on any given day. If the estimated blood potential of a location is significantly high, a bloodmobile can stay there 1 or 2 more days. With the help of the new shuttle service, the unnecessary daily trips of bloodmobiles between the collection points and the depot are eliminated. Instead, the collected blood is transported to the depot by the shuttle, which visits every bloodmobile in the field at the end of each day. The only exception to this is the end of a bloodmobile tour at which time the bloodmobile returns to the center with its collected blood making a shuttle visit unnecessary. An illustration of integrated shuttle and bloodmobile tours is shown in Fig. 1
                        . Fig. 1a depicts the potential stops of the bloodmobiles and the depot, and Fig. 1b shows the tours of three bloodmobiles, where the self-loops correspond to stay-overs. In Fig. 1c, the node labels indicate the days that they are visited by a bloodmobile. Finally, Fig. 1d
–f shows a set of potential shuttle tours belonging to the first, second and third days of the planning horizon.

This new system aims to utilize bloodmobiles efficiently, in the sense of increasing the frequency of bloodmobile tours and reducing the operational costs of mobile blood collection system. The main decisions are:

                           
                              •
                              the locations selected among possible candidates for bloodmobiles' visits,

the length of the stay at each location visited by bloodmobiles,

tours of both bloodmobiles and shuttles based on bloodmobile locations on each day of the planning horizon.

OR Applications in healthcare logistics operations have attracted much interest in recent years. Some OR practitioners focus on health related problems such as emergency room and doctor utilization, healthcare center location and medical supply transportation. Health related transportation problems are deeply investigated because of their complicated nature brought by the simultaneous consideration of medical constraints and challenging transportation dynamics.

In his analysis Jarrett (2006) summarizes new trends in international healthcare logistics and makes comparisons in a global scope. The author gives details on several implementations of just-in-time (JIT) approach in health-logistical environment. Brandeau, Sainfort, and Pierskalla (2004) cover a set of health operation applications in different areas. While doing so, they relate these issues to current healthcare problems and possible future challenges. They point out that the healthcare accessibility will still remain limited in the future even though many improvements are achieved. In their study, Hodgson, Laporte, and Semet (1998) search for ways of increasing the accessibility of primary healthcare resources in Suhum District of Ghana and to that end, they decide to utilize mobile healthcare facilities. They solve a Covering Tour Problem (CTP) to find the 'best' tour for the mobile healthcare facility. Doerner, Focke, and Gutjahr (2007) focus on a similar problem in Senegal.

Since blood is a difficult substance to obtain and one that easily perishes, blood product management is one of the very interesting and challenging healthcare problems.
Belien and Force (2012) classify blood supply management studies in their survey paper. Their review reveals the increasing popularity of this subject after year 2000. Pierskalla's (Pierskalla, 2005) study is a comprehensive analysis on the supply chain operations of blood banking. Similarly,
Hemmelmayr, Doerner, Hartl, and Savelsbergh (2009) discuss delivery and storage strategies for Austrian Red Cross. In their study, Kendall and Lee (1980) concentrate on the redistribution problem. Their model has different objectives, such as prevention of blood shortages and overages, minimization of the number of outdated units, and minimization of the operating costs. Brennan, Golden, and Rappoport (1992) and Alfonso, Xie, Augusto, and Garraud (2012) focus on reducing operational times in a bloodmobile. The layouts and strategies developed in both of these studies are tested using simulation with different customer arrival patterns and behaviors.

Although mobile units are widely utilized for collection of blood donations in many countries, there are very few studies on bloodmobile operations in the literature. Sahin, Sural, and Meral (2007) are the first to suggest a systematic use of bloodmobiles in Turkey. In this study, the authors propose a new hierarchy for TRC's blood services. The suggested hierarchy consists of small but widely distributed blood stations, blood centers and regional blood centers both with certain high-tech equipment, and finally the mobile units. At the second stage of the study they determine the locations of the proposed system components with the help of a pq-median location model, which is an extension to the classical p-median problem.


                        Doerner and Hartl (2008) and Doerner, Gronalt, Hartl, Kiechle, and Reimann (2008) focus on blood collection operations of Austrian Red Cross (ARC). They suggest a system that includes extra transporters in addition to regular bloodmobiles of the campaign. These transporters are responsible for transferring the blood from the mobile campaign teams to the blood centers. However, their problem is different from ours in that the locations of bloodmobiles are assumed known and fixed in their study. In addition, they define a time window based on the lifespan of the collected blood from the donors and so, define ARC's problem as a Vehicle Routing Problem (VRP) with multiple interdependent time windows.

While designing bloodmobile tours, the planner should consider the amount of potential locations as well as the operational costs. Since the planning horizon or estimated budget is limited, visiting all possible stops is not practical in real life. Therefore, choosing a subset of these locations as stops is very reasonable. These kinds of routing problems are classified as the Selective Traveling Salesperson Problem in the literature and they have two major objectives: minimizing the tour cost and maximizing the profit that is obtained by visiting those nodes. If these two objectives are combined in the objective function, then the problem is called the Profitable Tour Problem (Dell'Amico, Maffioli, & Värbrand, 1995). If the objective is defined as maximization of the collected profit and a pre-determined cost level is given as a constraint, then it is classified as the Orienteering Problem (also known as TSP with profits (Laporte & Martello, 1990)). Finally, if a problem is defined with a cost minimization objective and a pre-determined profit lower bound in the constraints, it is considered as a Prize Collecting Traveling Salesman problem, which is defined by Balas (1989). In their study, Feillet, Dejax, and Gendreau (2005) compare all these three approaches in detail. Vansteenwegen, Souffriau, and Van Oudheusden (2011) is a recent survey on the orienteering problem. In this paper, the authors classify all variations of the orienteering problem with their exact and heuristic solution procedures. The study also considers team orienteering problems, which have the same definition with the exception of using multiple vehicles instead of a single one. Team orienteering problem is defined by Chao, Golden, and Wasil (1996). Different variations of Team Orienteering Problem are defined by Archetti, Feillet, Hertz, and Speranza (2009), Aksen and Aras (2006), Süral and Bookbinder (2003) and Valle, Martinez, Cunha, and Mateus (2011).


                        Jozefowiez, Semet, and Talbi (2008) and Jozefowiez and Talbi (2008) focus on combining a multi-objective approach with multi vehicle routing problems. In particular, the second paper gives a detailed taxonomy on multi-objective vehicle routing problems. However, the studies that are discussed in these two papers have classical vehicle routing approaches without the node selection issue.


                        Yücel, Salman, Gel, Örmeci, and Gel (2013) propose a new model defined as Collection for Processing Problem (CfPP) for specimen collection operations. In this setting, the laboratory has a limited processing rate of collected specimens. The specimens are accumulated in sites over time and they need to be analyzed as soon as possible. To respond to this urgency, vehicles visit the sites several times on a day and CfPP deals with numerous time window constraints. Similar to our problem, CfPP has two objectives: maximizing the amount of specimens analyzed, which is constrained by both the processing rate of clinic and accumulation rate on sites, and minimizing the transportation costs.

The selective VRP approach is very suitable for determining the bloodmobile tours, as it takes into account unvisited potential stops and multi-objective nature of the problem. However, in the blood collection context, once a bloodmobile visits a location it should stay there for at least one whole day because of the set up costs and blood donation campaign's operating principles. Nevertheless, the collected blood needs to be transferred to a testing center/storage within 24 hours after donation. Thus, using a simple variant of Selective VRP will not be sufficient to cover all features of the problem. Doerner and Hartl (2008) suggest that collecting blood from the bloodmobiles in the field with the help of a collector vehicle where they take the locations of bloodmobiles as fixed points. Since we wish the tours of bloodmobiles and hence their daily locations to be decided by the model as well, we adopt a selective VRP approach and combine it with the collector vehicle idea in our model.

Let G = (N, A) be a geographical network, where N\{1} is the set of potential stops of the bloodmobile and node {1} is the given location of the depot. Set A represents the roads between these nodes. In order to model the possible stay-overs of bloodmobiles, we will use a time-extended version of G. Let G′ be the extended version of the geographical network for modeling the stay-overs at nodes. For each actual potential location, G' has three nodes, the first one is the original node v and the other two are the artificial nodes v′ and v″ corresponding to 2-day and 3-day stay-overs, respectively. The model takes into account stay over periods of up to 3 days. If the solution reveals that a blood mobile visits v′ (v″), it means the bloodmobile stays in v for 2 (3) days. G is designed in a way that v′ (v″) cannot be visited unless a bloodmobile visits v (v′).
                  

Formally, G′ = (N′, A′), where |N′| = 3|N| and v
                     
                        i + |N|, v
                     
                        i + 2|N| represents 2 and 3 day stay-overs respectively ∀vi
                      ∈ N. Let cij
                      represent the arc distance between node i and node j in G. In G′, the arc distances are defined as follows:

                        
                           
                              
                                 
                                    c
                                    
                                       
                                          i
                                          ′
                                       
                                       
                                          j
                                          ′
                                       
                                    
                                    ′
                                 
                                 =
                                 
                                    c
                                    
                                       i
                                       j
                                    
                                 
                                 ,
                                 
                                 ∀
                                 i
                                 ≡
                                 
                                    i
                                    ′
                                 
                                 
                                    (
                                    
                                       mo
                                       
                                          d
                                          
                                             |
                                             N
                                             |
                                          
                                       
                                    
                                    )
                                 
                                 ,
                                 
                                 ∀
                                 j
                                 ≡
                                 
                                    j
                                    ′
                                 
                                 
                                    (
                                    
                                       mo
                                       
                                          d
                                          
                                             |
                                             N
                                             |
                                          
                                       
                                    
                                    )
                                 
                                 
                                 
                                 
                                    (
                                    
                                       
                                       *
                                    
                                    )
                                 
                              
                           
                        
                     
                  

As a result, c
                     
                        i', i + |N| = c
                     
                        i', i + 2|N| = 0, since cii
                      = 0∀i ∈ N.

The blood potentials of the artificial nodes are defined as a function. Let bj
                     , initial blood potential of node j, be the number of people who are willing to donate blood on the first day of the TRC activity in that point. The past blood collection activities of TRC shows that the blood potential of a node on the second or third day of the activity is less than that on the first day. In order to model this behavior we develop a decreasing function that represents the blood potentials for artificial nodes. The blood potential decreases on the second day (to bjβ) and decreases even more (to bjβ
                     2) on the third day of the activity, where β is a parameter that belongs to the [0, 1] interval. To further clarify this, bj
                      denotes the number of people willing to donate blood on the first day of the collection activity at location j. Whereas, bj
                        *β and bj
                        *β
                     2 are the numbers of people willing to donate blood, respectively, in the second and third days of the collection activity at the same location indexed by j. In regards to real data at hand, for activities that lasted more than a day, TRC has data only for the total amount of blood collected during the entire visit. For those points, we estimated bj
                      and β so that bj
                      + bjβ and bj
                      + bjβ + bjβ
                     2 equal the actual amounts collected during 2-day and 3-day activities respectively.

Then, the blood potential of a node j ∈ N' is defined as follows:

                        
                           
                              
                                 
                                    b
                                    j
                                 
                                 =
                                 
                                    {
                                    
                                       
                                          
                                             
                                                
                                                   b
                                                   j
                                                
                                                ,
                                             
                                          
                                          
                                             
                                                if
                                                
                                                
                                                j
                                                ≤
                                                
                                                |
                                                N
                                                |
                                             
                                          
                                       
                                       
                                          
                                             
                                                
                                                   b
                                                   j
                                                
                                                β
                                                ,
                                             
                                          
                                          
                                             
                                                if
                                                
                                                |
                                                N
                                                |
                                                <
                                                j
                                                ≤
                                                2
                                                |
                                                N
                                                |
                                             
                                          
                                       
                                       
                                          
                                             
                                                
                                                   b
                                                   j
                                                
                                                
                                                   β
                                                   2
                                                
                                                ,
                                             
                                          
                                          
                                             
                                                if
                                                
                                                
                                                j
                                                >
                                                2
                                                |
                                                N
                                                |
                                             
                                          
                                       
                                    
                                 
                                 
                                 
                                 
                                    (
                                    
                                       
                                       
                                          *
                                          *
                                       
                                    
                                    )
                                 
                              
                           
                        
                     
                  

A detailed sensitivity analysis on the value of β is conducted in Section 4.

One may think that, an activity at some point may affect blood potentials of nearby points. However, we assumed that there is no cannibalization effect between events since most of the blood collection activities are held in cooperation with a host organization such as a university, a branch of a company, a religious community and most of the donors are the audience of the host. Also, in cities with large population and significant distances between potential points this effect is negligible, even though it may exist.

Let D represent the days in the planning horizon of the problem and consider m identical bloodmobiles. The output of the model will be m tours for the bloodmobiles and up to |D| − 1 tours for the shuttle. Incidentally, as all bloodmobiles will have returned to the depot by the end of the planning horizon, the shuttles do not need to be in service on this last day.

Problem parameters are defined as follows:

                        
                           
                              c'
                                 ij
                               = The traveling cost from node i to node j, where(i, j) ∈ A'


                              bj
                               = The blood potential of node j on the first day of the activity, where j ∈ N'


                              B* = Desired value for the amount of blood to be collected


                              m = Number of bloodmobiles

Decision variables are defined as follows:


                              
                                 
                                    
                                       X
                                       
                                          i
                                          j
                                          d
                                       
                                    
                                    =
                                    
                                       {
                                       
                                          
                                             
                                                
                                                   1
                                                   ,
                                                
                                             
                                             
                                                
                                                   if
                                                   
                                                   a
                                                   
                                                   bloodmobile
                                                   
                                                   travels
                                                   
                                                   to
                                                   
                                                   node
                                                   
                                                   j
                                                   ∈
                                                   
                                                      N
                                                      ′
                                                   
                                                   
                                                   directly
                                                
                                             
                                          
                                          
                                             
                                             
                                                
                                                   
                                                   from
                                                   
                                                   node
                                                   
                                                   i
                                                   ∈
                                                   
                                                      N
                                                      ′
                                                   
                                                   
                                                   on
                                                   
                                                   day
                                                   
                                                   d
                                                   ∈
                                                   D
                                                
                                             
                                          
                                          
                                             
                                                
                                                   0
                                                   ,
                                                
                                             
                                             
                                                otherwise
                                             
                                          
                                       
                                    
                                 
                              
                           


                              
                                 
                                    
                                       Y
                                       
                                          i
                                          j
                                          d
                                       
                                    
                                    =
                                    
                                       {
                                       
                                          
                                             
                                                
                                                   1
                                                   ,
                                                
                                             
                                             
                                                
                                                   if
                                                   
                                                   the
                                                   
                                                   shuttle
                                                   
                                                   travels
                                                   
                                                   to
                                                   
                                                   node
                                                   
                                                   j
                                                   ∈
                                                   
                                                      N
                                                      ′
                                                   
                                                   
                                                   directly
                                                
                                             
                                          
                                          
                                             
                                             
                                                
                                                   
                                                   from
                                                   
                                                   node
                                                   
                                                   i
                                                   ∈
                                                   
                                                      N
                                                      ′
                                                   
                                                   
                                                   on
                                                   
                                                   day
                                                   
                                                   d
                                                   ∈
                                                   D
                                                
                                             
                                          
                                          
                                             
                                                
                                                   0
                                                   ,
                                                
                                             
                                             
                                                otherwise
                                             
                                          
                                       
                                    
                                 
                              
                           


                              
                                 
                                    
                                       Z
                                       
                                          i
                                          d
                                       
                                    
                                    =
                                    {
                                    
                                       
                                          
                                             
                                                1
                                                ,
                                             
                                          
                                          
                                             
                                                if
                                                
                                                node
                                                
                                                i
                                                ∈
                                                
                                                   N
                                                   ′
                                                
                                                
                                                requires
                                                
                                                a
                                                
                                                shuttle
                                                
                                                on
                                                
                                                day
                                                
                                                d
                                                ∈
                                                D
                                             
                                          
                                       
                                       
                                          
                                             
                                                0
                                                ,
                                             
                                          
                                          
                                             otherwise
                                          
                                       
                                    
                                 
                              
                           


                              Vi
                               = dummy continuous variable that represents the visitingorder of node  i ∈ N'  in a shuttle tour.

The proposed model (MinCost-B*-Blood) is as follows:

                        
                           
                              
                                 minimize
                                 
                                    ∑
                                    
                                       j
                                       ∈
                                       
                                          N
                                          ′
                                       
                                    
                                 
                                 
                                    
                                       ∑
                                       
                                          i
                                          ∈
                                          
                                             N
                                             ′
                                          
                                       
                                    
                                    
                                       
                                          
                                             c
                                             ′
                                          
                                       
                                       
                                          i
                                          j
                                       
                                    
                                 
                                 
                                    ∑
                                    
                                       d
                                       ∈
                                       D
                                    
                                 
                                 
                                    X
                                    
                                       i
                                       j
                                       d
                                    
                                 
                                 +
                                 
                                    ∑
                                    
                                       j
                                       ∈
                                       
                                          N
                                          ′
                                       
                                    
                                 
                                 
                                    
                                       ∑
                                       
                                          i
                                          ∈
                                          
                                             N
                                             ′
                                          
                                       
                                    
                                    
                                       
                                          
                                             c
                                             ′
                                          
                                       
                                       
                                          i
                                          j
                                       
                                    
                                 
                                 
                                    ∑
                                    
                                       d
                                       ∈
                                       D
                                    
                                 
                                 
                                    Y
                                    
                                       i
                                       j
                                       d
                                    
                                 
                                 
                                 
                                    (
                                    O
                                    1
                                    )
                                 
                              
                           
                        
                     
                     
                        
                           
                              
                                 subject
                                 
                                 to
                              
                           
                        
                     
                     
                        
                           (1)
                           
                              
                                 
                                 
                                    ∑
                                    
                                       i
                                       ∈
                                       
                                          N
                                          ′
                                       
                                    
                                 
                                 
                                    X
                                    
                                       i
                                       j
                                       d
                                    
                                 
                                 =
                                 
                                    Z
                                    
                                       j
                                       d
                                    
                                 
                                 +
                                 
                                    X
                                    
                                       j
                                       1
                                       d
                                       +
                                       1
                                    
                                 
                                 ,
                                 
                                 ∀
                                 j
                                 ∈
                                 
                                    {
                                    
                                       2
                                       ,
                                       …
                                       ,
                                       
                                          N
                                          ′
                                       
                                    
                                    }
                                 
                                 ,
                                 
                                 ∀
                                 d
                                 ∈
                                 
                                    {
                                    
                                       1
                                       ,
                                       …
                                       ,
                                       D
                                       −
                                       1
                                    
                                    }
                                 
                              
                           
                        
                     
                     
                        
                           (2)
                           
                              
                                 
                                    ∑
                                    
                                       d
                                       ∈
                                       
                                          {
                                          
                                             1
                                             ,
                                             …
                                             ,
                                             
                                             D
                                             −
                                             1
                                          
                                          }
                                       
                                    
                                 
                                 
                                    (
                                    
                                       X
                                       
                                          j
                                          1
                                          d
                                          +
                                          1
                                       
                                    
                                    +
                                    
                                       Z
                                       
                                          j
                                          d
                                       
                                    
                                    )
                                    ≤
                                    1
                                    ,
                                    
                                    ∀
                                    j
                                 
                                 ∈
                                 
                                    {
                                    
                                       2
                                       ,
                                       …
                                       ,
                                       
                                          N
                                          ′
                                       
                                    
                                    }
                                 
                              
                           
                        
                     
                     
                        
                           (3)
                           
                              
                                 
                                 
                                    ∑
                                    
                                       i
                                       ∈
                                       
                                          N
                                          ′
                                       
                                    
                                 
                                 
                                    X
                                    
                                       i
                                       j
                                       d
                                    
                                 
                                 =
                                 
                                    ∑
                                    
                                       k
                                       ∈
                                       
                                          N
                                          ′
                                       
                                    
                                 
                                 
                                    X
                                    
                                       j
                                       k
                                       d
                                       +
                                       1
                                    
                                 
                                 ,
                                 
                                 ∀
                                 j
                                 ∈
                                 
                                    {
                                    
                                       2
                                       ,
                                       …
                                       ,
                                       
                                          N
                                          ′
                                       
                                    
                                    }
                                 
                                 ,
                                 ∀
                                 d
                                 ∈
                                 
                                    {
                                    
                                       1
                                       ,
                                       …
                                       ,
                                       D
                                       −
                                       1
                                    
                                    }
                                 
                              
                           
                        
                     
                     
                        
                           (4)
                           
                              
                                 
                                 
                                    ∑
                                    
                                       j
                                       ∈
                                       
                                          N
                                          ′
                                       
                                    
                                 
                                 
                                    X
                                    
                                       1
                                       j
                                       1
                                    
                                 
                                 =
                                 m
                              
                           
                        
                     
                     
                        
                           (5)
                           
                              
                                 
                                 
                                    ∑
                                    
                                       j
                                       ∈
                                       
                                          N
                                          ′
                                       
                                    
                                 
                                 
                                    
                                       ∑
                                       
                                          i
                                          ∈
                                          
                                             {
                                             
                                                2
                                                ,
                                                …
                                                ,
                                                
                                                   N
                                                   ′
                                                
                                             
                                             }
                                          
                                       
                                    
                                    
                                       X
                                       
                                          i
                                          j
                                          1
                                       
                                    
                                 
                                 =
                                 0
                              
                           
                        
                     
                     
                        
                           (6)
                           
                              
                                 
                                    ∑
                                    
                                       j
                                       ∈
                                       
                                          N
                                          ′
                                       
                                    
                                 
                                 
                                    
                                       ∑
                                       
                                          d
                                          ∈
                                          D
                                       
                                    
                                    
                                       X
                                       
                                          1
                                          j
                                          d
                                       
                                    
                                 
                                 =
                                 m
                              
                           
                        
                     
                     
                        
                           (7)
                           
                              
                                 
                                    ∑
                                    
                                       j
                                       ∈
                                       
                                          N
                                          ′
                                       
                                    
                                 
                                 
                                    
                                       ∑
                                       
                                          d
                                          ∈
                                          D
                                       
                                    
                                    
                                       X
                                       
                                          j
                                          1
                                          d
                                       
                                    
                                 
                                 =
                                 m
                              
                           
                        
                     
                     
                        
                           (8)
                           
                              
                                 
                                    ∑
                                    
                                       i
                                       ∈
                                       
                                          N
                                          ′
                                       
                                    
                                 
                                 
                                    
                                       X
                                       
                                          i
                                          j
                                          d
                                       
                                    
                                    ≥
                                    
                                       X
                                       
                                          j
                                          
                                             (
                                             
                                                j
                                                +
                                                |
                                                N
                                                |
                                             
                                             )
                                          
                                          
                                             (
                                             
                                                d
                                                +
                                                1
                                             
                                             )
                                          
                                       
                                    
                                 
                                 ,
                                 
                                 ∀
                                 j
                                 ∈
                                 
                                    {
                                    
                                       1
                                       ,
                                       …
                                       ,
                                       2
                                       |
                                       N
                                       |
                                    
                                    }
                                 
                                 ,
                                 
                                 ∀
                                 d
                                 ∈
                                 
                                    {
                                    
                                       1
                                       ,
                                       …
                                       ,
                                       D
                                       −
                                       1
                                    
                                    }
                                 
                                 
                              
                           
                        
                     
                     
                        
                           (9)
                           
                              
                                 
                                    
                                       
                                          
                                             X
                                             
                                                
                                                   (
                                                   
                                                      j
                                                      −
                                                      N
                                                   
                                                   )
                                                
                                                j
                                                d
                                             
                                          
                                          
                                          ≥
                                          
                                             Z
                                             
                                                j
                                                d
                                             
                                          
                                          +
                                          
                                             X
                                             
                                                j
                                                1
                                                d
                                                +
                                                1
                                             
                                          
                                          ,
                                          
                                          ∀
                                          j
                                          ∈
                                          
                                             {
                                             
                                                |
                                                N
                                                |
                                                +
                                                1
                                                ,
                                                …
                                                3
                                                |
                                                N
                                                |
                                             
                                             }
                                          
                                          ,
                                       
                                    
                                 
                                 
                                    
                                       
                                          ∀
                                          d
                                          ∈
                                          
                                             {
                                             
                                                1
                                                ,
                                                …
                                                ,
                                                D
                                                −
                                                1
                                             
                                             }
                                          
                                          
                                       
                                    
                                 
                              
                           
                        
                     
                     
                        
                           (10)
                           
                              
                                 
                                    ∑
                                    
                                       i
                                       ∈
                                       
                                          N
                                          ′
                                       
                                    
                                 
                                 
                                    Y
                                    
                                       i
                                       j
                                       d
                                    
                                 
                                 =
                                 
                                    Z
                                    
                                       j
                                       d
                                    
                                 
                                 ,
                                 
                                 ∀
                                 j
                                 ∈
                                 
                                    N
                                    ′
                                 
                                 ,
                                 
                                 ∀
                                 d
                                 ∈
                                 
                                    {
                                    
                                       1
                                       ,
                                       …
                                       ,
                                       D
                                       −
                                       1
                                    
                                    }
                                 
                              
                           
                        
                     
                     
                        
                           (11)
                           
                              
                                 
                                    ∑
                                    
                                       i
                                       ∈
                                       
                                          N
                                          ′
                                       
                                    
                                 
                                 
                                    Y
                                    
                                       j
                                       i
                                       d
                                    
                                 
                                 =
                                 
                                    Z
                                    
                                       j
                                       d
                                    
                                 
                                 ,
                                 
                                 ∀
                                 j
                                 ∈
                                 
                                    N
                                    ′
                                 
                                 ,
                                 
                                 ∀
                                 d
                                 ∈
                                 
                                    {
                                    
                                       1
                                       ,
                                       …
                                       ,
                                       D
                                       −
                                       1
                                    
                                    }
                                 
                              
                           
                        
                     
                     
                        
                           (12)
                           
                              
                                 
                                    ∑
                                    
                                       j
                                       ∈
                                       
                                          {
                                          
                                             2
                                             ,
                                             …
                                             ,
                                             N
                                          
                                          }
                                       
                                    
                                 
                                 
                                    
                                       Z
                                       
                                          j
                                          d
                                       
                                    
                                    ≤
                                    m
                                 
                                 
                                    ∑
                                    
                                       j
                                       ∈
                                       
                                          {
                                          
                                             2
                                             ,
                                             …
                                             ,
                                             N
                                          
                                          }
                                       
                                    
                                 
                                 
                                    Y
                                    
                                       1
                                       j
                                       d
                                    
                                 
                                 ,
                                 
                                 ∀
                                 d
                                 ∈
                                 
                                    {
                                    
                                       1
                                       ,
                                       …
                                       ,
                                       D
                                       −
                                       1
                                    
                                    }
                                 
                              
                           
                        
                     
                     
                        
                           (13)
                           
                              
                                 
                                    ∑
                                    
                                       j
                                       ∈
                                       
                                          {
                                          
                                             2
                                             ,
                                             …
                                             ,
                                             N
                                          
                                          }
                                       
                                    
                                 
                                 
                                    Z
                                    
                                       j
                                       d
                                    
                                 
                                 ≤
                                 m
                                 
                                    ∑
                                    
                                       j
                                       ∈
                                       
                                          {
                                          
                                             2
                                             ,
                                             …
                                             ,
                                             N
                                          
                                          }
                                       
                                    
                                 
                                 
                                    Y
                                    
                                       j
                                       1
                                       d
                                    
                                 
                                 ,
                                 
                                 ∀
                                 d
                                 ∈
                                 
                                    {
                                    
                                       1
                                       ,
                                       …
                                       ,
                                       D
                                       −
                                       1
                                    
                                    }
                                 
                              
                           
                        
                     
                     
                        
                           (14)
                           
                              
                                 
                                    
                                       
                                          
                                             V
                                             i
                                          
                                          −
                                          
                                             V
                                             j
                                          
                                          +
                                          m
                                          
                                             Y
                                             
                                                i
                                                j
                                                d
                                             
                                          
                                          ≤
                                          m
                                          −
                                          1
                                          ,
                                          
                                          ∀
                                          j
                                          ∈
                                          
                                             {
                                             
                                                2
                                                ,
                                                …
                                                ,
                                                
                                                   N
                                                   ′
                                                
                                             
                                             }
                                          
                                          ,
                                          
                                          ∀
                                          i
                                          ∈
                                          
                                             {
                                             
                                                1
                                                ,
                                                …
                                                ,
                                                
                                                   N
                                                   ′
                                                
                                             
                                             }
                                          
                                          ,
                                       
                                    
                                 
                                 
                                    
                                       
                                          ∀
                                          d
                                          ∈
                                          
                                             {
                                             
                                                1
                                                ,
                                                …
                                                ,
                                                D
                                             
                                             }
                                          
                                          
                                       
                                    
                                 
                              
                           
                        
                     
                     
                        
                           (15)
                           
                              
                                 
                                    V
                                    i
                                 
                                 ≥
                                 0
                                 ,
                                 
                                 
                                 ∀
                                 j
                                 ∈
                                 
                                    {
                                    
                                       2
                                       ,
                                       …
                                       ,
                                       
                                          N
                                          ′
                                       
                                    
                                    }
                                 
                                 ,
                              
                           
                        
                     
                     
                        
                           (16)
                           
                              
                                 
                                    ∑
                                    
                                       j
                                       ∈
                                       
                                          N
                                          ′
                                       
                                    
                                 
                                 
                                    b
                                    j
                                 
                                 
                                    ∑
                                    
                                       i
                                       ∈
                                       
                                          N
                                          ′
                                       
                                    
                                 
                                 
                                    
                                       ∑
                                       
                                          d
                                          ∈
                                          D
                                       
                                    
                                    
                                       X
                                       
                                          i
                                          j
                                          d
                                       
                                    
                                 
                                 ≥
                                 
                                    B
                                    *
                                 
                              
                           
                        
                     
                     
                        
                           (17)
                           
                              
                                 
                                    
                                       
                                          
                                             X
                                             
                                                i
                                                j
                                                d
                                             
                                          
                                          ,
                                          
                                             Y
                                             
                                                i
                                                j
                                                d
                                                ,
                                             
                                          
                                          
                                             Z
                                             
                                                j
                                                d
                                             
                                          
                                          ∈
                                          
                                             {
                                             
                                                0
                                                ,
                                                1
                                             
                                             }
                                          
                                          
                                          ∀
                                          d
                                          ∈
                                          
                                             {
                                             
                                                1
                                                ,
                                                …
                                                ,
                                                D
                                             
                                             }
                                          
                                          ,
                                          
                                          ∀
                                          j
                                          ∈
                                          
                                             {
                                             
                                                1
                                                ,
                                                …
                                                ,
                                                
                                                   N
                                                   ′
                                                
                                             
                                             }
                                          
                                          ,
                                       
                                    
                                 
                                 
                                    
                                       
                                          ∀
                                          i
                                          ∈
                                          
                                             {
                                             
                                                1
                                                ,
                                                …
                                                ,
                                                
                                                   N
                                                   ′
                                                
                                             
                                             }
                                          
                                          
                                       
                                    
                                 
                              
                           
                        
                     
                  

Constraint set (1) ensures that if a bloodmobile visits node j on day d, then node j should either be visited by the shuttle also on day d or the bloodmobile returns directly to the depot immediately after node j on day d + 1. Constraint set (2) restricts a node to be visited at most once. Constraint set (3) specifies the flow balance conditions such that if there is a bloodmobile coming to node j on day d there should be also an outgoing one from node j on day d + 1. Constraint (4) forces all bloodmobile tours to start on day 1. Since the objective is maximizing collected blood, the vehicles should never remain idle when there is available blood to be collected. Thus, in the current setting this constraint serves as a valid inequality. Constraint (5) prevents tours starting from any node other than the depot. Constraint (6) restricts the number of vehicles leaving the depot. Constraint (7) ensures all bloodmobiles return to the depot. Also, if a bloodmobile is not needed, then a self-tour of depot is used. Constraint set (8) satisfies that if a node is visited for longer than 1 day, the bloodmobile should stay on that node consecutively. Constraint set (9) forces that if an extended node (j + |N|) is visited on day d + 1, then the original node j should have been visited on day d. Constraint sets (10) and (11) ensure that the shuttle picks up the collected blood from the nodes requiring shuttle service. Constraint sets (12) and (13), respectively, initiate and finalize shuttle tours if there is at least one node requiring the shuttle service on day d. Constraint sets (14) and (15) represent Miller–Tucker–Zemlin (MTZ) sub-tour elimination constraints for shuttle tours (Miller, Tucker, & Zemlin, 1960). Constraint set (16) ensures blood-collectors to achieve a desired blood level B*
                      that is determined by the decision maker. Finally, constraint set (17) is integrality definition of the decision variables. The model contains MTZ constraints for only shuttle tours. Since, for each day a shuttle tour is performed, these constraints together with the constraint set (3) also prevent sub-tours of bloodmobiles.

The desired blood level B could either be determined by considering the current inventory levels or alternatively the decision maker may consider the collected blood amount as a second objective. In the latter case, we also need to find the maximum amount of blood for a given district while respecting the system constraints such as the number of vehicles and tour lengths in days. One way of doing this is simply moving the LHS of constraint set (16) to the objective function and solving MinCost-B*-Blood as a maximization problem but, this model considers the shuttle tours as well. Obviously, the shuttle tours do not affect the amount of blood collected by bloodmobiles resulting in redundancies in MinCost-B*-Blood. Thus, a smaller IP which focuses only on the blood-collector-vehicles is developed.

Variables Zjd
                      connect the collector tours to the shuttle tours via constraint (1) so we can eliminate these variables in our new model. We can replace Zjd
                      with 
                        
                           
                              ∑
                              
                                 i
                                 =
                                 1
                              
                              
                                 3
                                 N
                              
                           
                           
                              
                                 X
                                 
                                    i
                                    j
                                    d
                                 
                              
                              −
                              
                                 X
                                 
                                    j
                                    1
                                    d
                                    +
                                    1
                                 
                              
                           
                        
                      by constraint (1) in the constraint sets (2) and (9). With these substitutions we obtain constraint sets (18) and (19) instead of (2) and (9) respectively:

                        
                           (18)
                           
                              
                                 
                                    ∑
                                    
                                       i
                                       ∈
                                       
                                          N
                                          ′
                                       
                                    
                                 
                                 
                                    
                                       ∑
                                       
                                          d
                                          ∈
                                          
                                             {
                                             
                                                1
                                                ,
                                                …
                                                ,
                                                
                                                   |
                                                   D
                                                   |
                                                
                                                −
                                                1
                                             
                                             }
                                          
                                       
                                    
                                    
                                       
                                          X
                                          
                                             i
                                             j
                                             d
                                          
                                       
                                       ≤
                                       1
                                    
                                 
                                 ,
                                 
                                 ∀
                                 j
                                 ∈
                                 
                                    {
                                    
                                       2
                                       ,
                                       …
                                       ,
                                       
                                          N
                                          ′
                                       
                                    
                                    }
                                 
                              
                           
                        
                     
                     
                        
                           (19)
                           
                              
                                 
                                    X
                                    
                                       
                                          (
                                          
                                             j
                                             −
                                             N
                                          
                                          )
                                       
                                       j
                                       d
                                    
                                 
                                 
                                 ≥
                                 
                                    ∑
                                    
                                       k
                                       =
                                       1
                                    
                                    
                                       3
                                       N
                                    
                                 
                                 
                                    X
                                    
                                       j
                                       k
                                       d
                                       +
                                       1
                                    
                                 
                                 ,
                                 
                                 
                                 ∀
                                 j
                                 ∈
                                 
                                    {
                                    
                                       |
                                       N
                                       |
                                       +
                                       1
                                       ,
                                       …
                                       3
                                       |
                                       N
                                       |
                                    
                                    }
                                 
                                 ,
                                 
                                 
                                 ∀
                                 d
                                 ∈
                                 
                                    {
                                    
                                       1
                                       ,
                                       …
                                       ,
                                       D
                                       −
                                       1
                                    
                                    }
                                 
                              
                           
                        
                     
                  

The projected model (MaxBlood) is as follows:

                        
                           
                              
                                 maximize
                                 
                                    ∑
                                    
                                       j
                                       ∈
                                       
                                          N
                                          ′
                                       
                                    
                                 
                                 
                                    
                                       b
                                       j
                                    
                                    
                                       ∑
                                       
                                          i
                                          ∈
                                          
                                             N
                                             ′
                                          
                                       
                                    
                                    
                                       
                                          ∑
                                          
                                             d
                                             ∈
                                             
                                                {
                                                
                                                   1
                                                   ,
                                                   …
                                                   ,
                                                   
                                                      |
                                                      D
                                                      |
                                                   
                                                   −
                                                   1
                                                
                                                }
                                             
                                          
                                       
                                       
                                          (
                                          
                                             X
                                             
                                                i
                                                j
                                                d
                                             
                                          
                                          )
                                       
                                    
                                 
                                 
                                 
                                 
                                    (
                                    
                                       O
                                       2
                                    
                                    )
                                 
                              
                           
                        
                     
                  

Subject to


                     (3)–(8) and (17)–(19)
                     
                        
                           (20)
                           
                              
                                 
                                    
                                    
                                    
                                       
                                          
                                             U
                                             i
                                          
                                          −
                                          
                                             U
                                             j
                                          
                                          +
                                          
                                             |
                                             D
                                             |
                                          
                                          
                                             X
                                             
                                                i
                                                j
                                                d
                                             
                                          
                                          
                                          ≤
                                          
                                             |
                                             D
                                             |
                                          
                                          −
                                          1
                                          ,
                                          
                                          ∀
                                          d
                                          ∈
                                          
                                             {
                                             
                                                1
                                                ,
                                                …
                                                ,
                                                D
                                             
                                             }
                                          
                                          ,
                                          
                                          ∀
                                          j
                                          ∈
                                          
                                             {
                                             
                                                2
                                                ,
                                                …
                                                ,
                                                
                                                   N
                                                   ′
                                                
                                             
                                             }
                                          
                                          ,
                                       
                                    
                                 
                                 
                                    
                                    
                                    
                                       
                                          
                                          ∀
                                          i
                                          ∈
                                          
                                             {
                                             
                                                2
                                                ,
                                                …
                                                ,
                                                
                                                   N
                                                   ′
                                                
                                             
                                             }
                                          
                                       
                                    
                                 
                              
                           
                        
                     
                     
                        
                           (21)
                           
                              
                                 
                                    U
                                    i
                                 
                                 ≥
                                 0
                                 ,
                                 
                                 ∀
                                 j
                                 ∈
                                 
                                    {
                                    
                                       2
                                       ,
                                       …
                                       ,
                                       
                                          N
                                          ′
                                       
                                    
                                    }
                                 
                                 
                              
                           
                        
                     
                  

Recall that sub-tours of blood collectors are prevented by the shuttle sub-tour elimination constraints in the previous model. Since those constraints are not included in the second model, we add Miller–Tucker–Zemlin constraints (20) and (
21
) for blood collectors.

Note that, MaxBlood maximizes the total amount of blood that can be collected with m vehicles during the planning horizon. It contains only the constraints that define proper bloodmobile tours in the presence of stay-overs, that is, the model only includes constraints allowing stay overs, eliminating sub-tours and preserving flow balance for nodes and depot. Therefore we cannot obtain any feasible tours that can collect B*
                      + 1 units of blood via MinCost-B*-Blood model.

After the maximum amount of blood that can be collected is determined by MaxBlood, that amount can be given to MinCost-B*-Blood as an aspiration level B and the model is solved with the objective of minimizing the total cost. Obviously, there exist feasible collector and shuttle tours that can obtain the blood amount that is found in MaxBlood, since there are no distance limitations on the shuttle tours.

A set of logical valid inequalities are developed to improve the performance of MinCost-B*-Blood. First, since no artificial node can be visited before the corresponding original node, no artificial nodes can be visited by a bloodmobile on the very first day of the planning horizon. Consequently, the shuttle will not visit any artificial node on the first day, either. Since, this information is known a priori, it can also be considered as a pre-processing operation. This argument yields the first valid inequality given as follows:

                        
                           (22)
                           
                              
                                 
                                    ∑
                                    
                                       j
                                       ∈
                                       
                                          {
                                          
                                             
                                                |
                                                N
                                                |
                                             
                                             +
                                             1
                                             ,
                                             …
                                             ,
                                             3
                                             
                                                |
                                                N
                                                |
                                             
                                          
                                          }
                                       
                                    
                                 
                                 
                                    z
                                    
                                       j
                                       1
                                    
                                 
                                 =
                                 0
                              
                           
                        
                     
                  

Secondly, the constraints are designed such that, a 2-day stay over node is accessible only from its original node and a 3-day stay over node is accessible from its 2-day stay over node. That is, the flow of the bloodmobile is in this forward direction and no flow is allowed in the backward direction. This observation results in our second valid inequality, whose mathematical statement is given as follows:

                        
                           (23)
                           
                              
                                 
                                    ∑
                                    
                                       d
                                       ∈
                                       
                                          {
                                          
                                             1
                                             ,
                                             .
                                             .
                                             ,
                                             D
                                             −
                                             1
                                          
                                          }
                                       
                                    
                                 
                                 
                                    
                                       ∑
                                       
                                          j
                                          ∈
                                          
                                             {
                                             
                                                
                                                   |
                                                   N
                                                   |
                                                
                                                +
                                                1
                                                ,
                                                …
                                                ,
                                                3
                                                
                                                   |
                                                   N
                                                   |
                                                
                                             
                                             }
                                          
                                       
                                    
                                    
                                       x
                                       
                                          i
                                          j
                                          d
                                       
                                    
                                 
                                 =
                                 0
                                 ,
                                 
                                 ∀
                                 i
                                 ∈
                                 
                                    {
                                    
                                       2
                                       |
                                       N
                                       |
                                       +
                                       1
                                       ,
                                       …
                                       ,
                                       3
                                       |
                                       N
                                       |
                                    
                                    }
                                 
                              
                           
                        
                     
                  

Finally, if a bloodmobile returns to the depot before the end of the planning horizon, there will be one less bloodmobile in the field on the following day. This third valid inequality is expressed as follows:

                        
                           (24)
                           
                              
                                 
                                    ∑
                                    
                                       i
                                       ∈
                                       
                                          {
                                          
                                             2
                                             ,
                                             …
                                             
                                                N
                                                ′
                                             
                                          
                                          }
                                       
                                    
                                 
                                 
                                    X
                                    
                                       i
                                       1
                                       d
                                    
                                 
                                 =
                                 
                                    ∑
                                    
                                       i
                                       ∈
                                       
                                          N
                                          ′
                                       
                                    
                                 
                                 
                                    
                                       ∑
                                       
                                          j
                                          ∈
                                          
                                             N
                                             ′
                                          
                                       
                                    
                                    
                                       X
                                       
                                          i
                                          j
                                          d
                                       
                                    
                                 
                                 −
                                 
                                    ∑
                                    
                                       i
                                       ∈
                                       
                                          N
                                          ′
                                       
                                    
                                 
                                 
                                    
                                       ∑
                                       
                                          j
                                          ∈
                                          
                                             N
                                             ′
                                          
                                       
                                    
                                    
                                       X
                                       
                                          i
                                          j
                                          d
                                          +
                                          1
                                       
                                    
                                 
                                 ,
                                 
                                 ∀
                                 d
                                 ∈
                                 
                                    {
                                    
                                       1
                                       ,
                                       …
                                       ,
                                       
                                       D
                                       |
                                       −
                                       1
                                    
                                    }
                                 
                              
                           
                        
                     
                  

Computational experiments are based on two different data sets. Since, we take the blood collection activities of TRC Ankara as a benchmark scenario reflecting the current practices, real donation data of past activities in Ankara is gathered as a first set. The second set is composed of GIS data belonging to the municipal districts in the European Part of Istanbul, where each district is considered as a potential point with a blood potential that is assumed to be equal to the district's population.

The Ankara data set is obtained directly from the headquarters of TRC for the blood collection activity in years 2009 and 2010. This data set contains the date, location and the collected amount of blood. The one-time locations are eliminated after being discussed with TRC representatives through a series of meetings, and the data is refined to include only the potential stops to be considered in planning future visits of bloodmobiles. The resulting refined data includes 38 potential points in Ankara with known blood potentials. The RBC located at the TRC's headquarters in Kızılay, which serves the entire Middle Anatolian Region of Turkey, is the ultimate stop of current blood mobiles, and hence it is considered as the depot in our analysis. The distance matrix for the Ankara network is constructed by the help of TomTom Online Route Planner using the shortest route option. The 38 potential stops and the depot are shown on a map in Fig. 2
                        .

Unlike Ankara, Istanbul data is not based on past activities, but rather it is considered as an a priori analysis for future blood collection activities. For this reason, all the municipal districts in the European part of Istanbul are taken into account. The actual center of TRC in Fatih, which is a BC, is considered as the depot. The 96 district centers and the depot are shown on a map in Fig. 3
                        .

The distances between these districts are calculated via GIS software. Also, the populations are considered as the blood potentials of the districts.

In our calculations, we use a β value of 0.8, and consider a planning horizon of 7 days. Since, TRC Ankara currently has three bloodmobiles; we conduct experiments also for three bloodmobiles. All computations are performed on an Intel Core i7 2.20 gigahertz PC with 8 gigabytes RAM. The MIP models are solved using GuRoBi version 5.0.0. As an initial analysis on the effectiveness of the valid inequalities, all three of them corresponding to inequality sets (
22
)–(24) are added both individually and in all possible combinations to MinCost-B*-Blood to solve the Ankara and Istanbul problems. Since no consistent pattern was evident in these initial tests, all three inequalities are used in combination in all further analysis.

The proposed system is tested for Ankara and Istanbul cases on the data sets described in the previous section, and the results compared with those of the current system. For both cities, we first solve the MaxBlood to calculate the maximum amount of blood that can be obtained in 7 days with three vehicles. Then, we feed the optimal solution of MaxBlood to MinCost-B*-Blood, as B*
                         in constraint (15) to minimize the total logistics costs of collecting that amount.

The optimal solutions and CPU times for the Ankara problem are given in Table 1
                        .

In this solution, the bloodmobiles choose to visit only 11 of the 38 candidate points. At the end of the planning horizon bloodmobiles collect 1420 units of blood traversing a total distance of 912.5 kilometers. If these points were to be visited with direct tours, as it is in the current system, the total distance traveled would be 1011 kilometers. Thus, for the Ankara case, the proposed system performs better than the current system in terms of blood units collected per unit distance.

Next, the Istanbul case is analyzed for a possible future implementation. The results for Istanbul case are given in Table 2
                        .

The bloodmobiles visit 9 of the 96 candidate points and reach 9,004,079 people by traveling a total distance of 446 kilometers. If bloodmobiles were to perform direct tours to visit these selected nodes, the total distance would have been 661.6 kilometers. Therefore, the proposed system yields a better solution for the Istanbul case.

Various studies in the literature indicate that both time required to solve a VRP and the optimum solution of a VRP may depend on the location (centrality) of the depot. In order to evaluate the current location of TRC depots, we compared the solutions to the original instance and some other possible depot locations such as the minmax center (the location that minimizes the maximum distance to a potential stop) and the weighted center (the location that minimizes the sum of distance times the population – weight – of all potential nodes). Among these options the weighted centers achieved the best objective values whereas the actual centers are the second best options with only very small differences. Thus, it can be stated that the current depot locations in both Ankara and Istanbul are effectively chosen based on population density and traffic load resulting in reasonable transportation costs.

Since we study the two competing objectives of maximizing the amount of collected blood and minimizing the associated logistics cost, an analysis of the interaction between these two objectives is of particular interest. Such an analysis is also crucial as it allows the decision makers to perform a posteriori deductions. To this end, Fig. 4
                        a and b presents the efficient frontiers for the Ankara and Istanbul scenarios with the original depot location, respectively.

These two figures show that, if TRC opts to settle for 10 percent less of the maximum possible blood collection, they can obtain significant savings in the associated logistics costs. The steeper decrease in the Ankara case may be due to the fact that the Ankara depot is in a central location close to many nodes with a high blood potential whereas such nodes are widely dispersed in the Istanbul case.
                     

TRC Ankara currently has three bloodmobiles. To see the effect of changing this number, the analysis is conducted for two, three, four and five bloodmobiles. In order to model different donor behaviors, we also change the value of β between 0 and 1 in increments of 0.2. By changing these values, we observe the trends on the objectives as well as the number of nodes that are visited for longer than 1 day. In Table 3, the objective function values, number of nodes with 2- or 3-day visits and computational times are summarized. The table also shows the percentage marginal increment in both objectives resulting from a unit increase in number of vehicles. Since we start with two vehicles the marginal increment values are listed zero for these instances.

Both objectives increase when the number of vehicles increases or when β increases. Note however that, the marginal increments of blood are not as large as the cost increments. In other words, the increase in cost tends to be much higher than that in blood. These statistics show that introducing a new bloodmobile to the system may not be easily justified. For example, when the distance traversed per blood unit (shown in the second to rightmost column) is considered, five vehicles cannot be justified for any of the β values considered. Visiting as many different points as possible is important in terms of increasing awareness about blood donation activities. Obviously, the fraction of visited points in all potential points increases with the number of bloodmobiles; however, this increase flattens significantly when higher level of β values are considered since the bloodmobiles start spending more time on nodes with high potentials instead of visiting new nodes. All these measures in hand, we observe that in most cases three vehicles yield very efficient results.

When the β value is 1, the blood potential of a node never decreases during a visit. Thus, in those instances the bloodmobiles choose to perform as many 3-day stay overs as possible primarily at those nodes with higher blood potentials. As the β value decreases, the length of the visits gets shorter because visiting a new node becomes more advantageous than waiting in the current node in terms of the available blood potential. When the β value reaches 0.2, bloodmobiles do not wait at any of the nodes for 3 days, which may explain the long computational times of instances with lower β values. Such instances are more difficult to solve as many stay over options offer comparable blood potentials with other unvisited nodes. The change in the number of nodes that are visited for 2 and 3 days are represented in Fig. 5
                        a 
–d for two to five vehicles, respectively.

The stay-over behavior as a function of β does not seem to depend on the number of vehicles. In our experiments, the number of nodes that are visited for 2 days first increases, and then drops to 0 with any number of vehicles. Similarly, 3 day stay overs start with 0 and increases until β reaches to 1, for the cases with two, three, four and five vehicles.

To sum up, both the number of bloodmobiles and the β value have significant effects on the objectives. However, increasing the bloodmobiles may not always increase the efficiency of the system. On the other hand, if β can be controlled, the amount of blood collected can significantly increase. To maintain a higher β value may not be as difficult as it seems. Effective publicity about the activity may yield high blood potentials on the second, even the third day of activity. In mathematical terms, recall that we express the blood potential as bj
                         + bjβ + bjβ
                        2. Advertising the activity efficiently may increase either the number of people donate on the first day (bj
                        ) or may increase the level of attention to the activity on following days (β), so that on the last day of activity there are still many people who volunteer to donate. To facilitate this, tours need to be determined long before the collection activity so as to leave enough time for the announcement of the activity, and an effective for this represented in the next section.

SVRPwIT is defined for a general setting with a flexible planning horizon length, D. For different practical settings, adequate lengths can be considered ranging from a few days to several months. However, it may become very challenging to solve a SVRPwIT instance as D gets larger. In this section, we will propose a framework to handle long term planning via SVRPwIT based on TRC example, where tours are determined on a weekly basis within the framework of a monthly planning system.

TRC plans the blood collection activities mostly on a weekly basis mainly because of three reasons:

                           
                              (a)
                              Weekly maintenance and replenishments: In the current system, bloodmobiles return to the depot at the end of every day to deliver the collected blood for analysis and storage. With our recommended system, the vehicles do not have to return to the depot daily; however, they still need to visit the depot periodically (i.e., once a week) to replenish supplies such as syringes, clean sheets and blood bags. They also undergo maintenance and cleaning during these periodic depot visits.

Last minute cancellations: Most blood collection activities take place nearby big events with large participation or they are hosted by some organizations. If there is another activity in town with a larger number of expected participants, sometimes TRC cancels one of the planned activities and redeploy the assigned bloodmobile. Also, the hosting event may be cancelled or relocated due to reasons such as weather conditions or last minute schedule conflicts (mostly relevant to concerts and conferences). These cancellations and relocations are usually problematic both for the potential donors and for TRC. Cancelling the collection activity may affect the donation behavior of the associated potential donors in the future. Also, the bloodmobile dedicated to that activity may remain idle in case of the cancellation of hosting activity. To minimize these problems caused by unintended cancellations, TRC finalizes its schedule just before the beginning of the week.

Convenience for hosts: If the blood collection activity is not a public event but is hosted by an organization, the hosts usually declare the most convenient weeks for the members of the organization and let the TRC to pick an exact date. Mostly these organizations are universities, companies, military units, etc. The organization may predict that the blood potential will be low at certain times, such as final exam weeks in universities or when the due date of a big project is approaching at a company. Other than these occasions, the members of the organization are expected to be mostly available for blood donation on each day of the week. Note that, none of the hosts tend to consider a blood donation event as an urgent one. Thus, it does not have to be fulfilled in a pre-determined, strict and short time-frame. An organization is usually visited at most once a year, so we can safely assume that once a Red Cross/Crescent receives a request from a host, this request is valid for a whole year. This setting provides flexibility for TRC during its planning phase.
                              

In order to combine the benefits and avoid the shortcomings of both monthly and weekly horizon approaches, we propose a two-step approach outlined as following:

                           
                              
                                 Step 1: At the beginning of each 4-week planning horizon, TRC gathers the location information about the organizations that are willing to host blood collection day(s) and also information about other relevant activities in the city. They solve maxBlood problem on this network to determine the points that are going to be visited on the upcoming week, then remove the selected points and re-solve the model with the remaining network for the next week. We suggest to remove the nodes that are already chosen from the network because we assume that the blood potential drops to zero for a long period of time (at least for 6 months and usually for a year), since donating blood twice in a short period of time is medically not recommended and may not be desirable for most organizations due to the slight work loss on the day of activity. Solving the model consecutively in this fashion provides the points that will be visited by the bloodmobiles for each week. Then, TRC may contact these organizations and let them know on which week the visit will happen.


                                 Step 2: On the last day of each week, TRC solves the minCost-B*-Blood problem for the nodes that are assigned to next week to obtain the exact schedule and declare the schedule to organizations.

Since, we visit the nodes with high blood potentials on the first week and less potential in the following weeks, the transportation costs can be very high for the cities where nodes with high potential are homogenously spread around the center and have long distances between each other. Even though this setting is not very usual, planner may always define a penalty parameter for the distance between visited nodes by the same vehicle in the objective of maxBlood in Step 1 to prevent assigning farther nodes to the same vehicle.

The results of a 4-week plan for the Istanbul instance are given in Table 4.
                        
                     

Note that, the objective value of the first week problem is exactly the same as that in the base case discussed in Section 4.2 and Table 2. In the following weeks, bloodmobiles start visiting the remaining nodes with lower blood potentials. Since we solve the model on a fixed node set, the amount of collected blood is decreasing as the end of the month approaches. On the other hand, the distance traveled increases rapidly through the last week of the month. This result is also not surprising, as the centers with high blood potentials are very close to the depot and to each other. In a real application, one would expect new nodes to be added to the networks when new organizations volunteer to host a blood collection event and contact with TRC. These new organizations can be added to network at the beginning of each week. Also, the organizations that are visited in the previous week, and the organizations that are no longer available (due to cancellation or withdrawal) can be removed from the network, again on the first weekday. Consequently, the blood potential and costs would probably fluctuate from week to week. Thus, when working with a dynamic real life problem, a rolling horizon approach may be adopted to update the monthly plan accordingly at the beginning of each week.

Since our problem is defined on a time expanded network and it contains typical vehicle routing constraints, as the number of potential points or the stay-over period grows, the underlying network gets larger. Hence, for large instances (with long stay-over periods or many potential points) computational times may be considerably long. In view of the proposed 7-day planning period, long computational times may not be desirable. Thus, we design a two-stage IP based heuristic approach that yields good solutions with small optimality gaps, in shorter computational times.

The proposed heuristic can be summarized in three steps as follows:


                     Step 1: Solve model MaxBlood to determine the maximum amount of blood that can be obtained from the given instance (B*
                     ). If the decision maker has an a priori knowledge of the blood amount to be collected, this stage can be omitted.


                     Step 2: Plug in the optimal value of MaxBlood (B*
                     ) into the following mathematical model (NodeSelection), and solve it on the time-extended network. Note that the parameters of the model are as defined in Section 4.

Decision variable:

                        
                           
                              
                                 
                                    x
                                    i
                                 
                                 =
                                 
                                    {
                                    
                                       
                                          
                                             
                                                1
                                                ,
                                             
                                          
                                          
                                             
                                                if
                                                
                                                node
                                                
                                                i
                                                ∈
                                                
                                                   N
                                                   ′
                                                
                                                
                                                is
                                                
                                                worth
                                                
                                                to
                                                
                                                visit
                                                
                                                by
                                                
                                                a
                                                
                                                bloodmobile
                                                ,
                                             
                                          
                                       
                                       
                                          
                                             
                                                0
                                                ,
                                             
                                          
                                          
                                             
                                                otherwise
                                                .
                                             
                                          
                                       
                                    
                                 
                              
                           
                        
                     
                  


                     NodeSelection:
                     
                        
                           
                              
                                 minimize
                                 
                                    ∑
                                    i
                                 
                                 
                                    
                                       x
                                       i
                                    
                                    
                                       c
                                       
                                          1
                                          i
                                       
                                    
                                 
                                 
                                 
                                 
                                    (
                                    
                                       O
                                       3
                                    
                                    )
                                 
                              
                           
                        
                     
                  

subject to

                        
                           (25)
                           
                              
                                 
                                    ∑
                                    
                                       i
                                       ∈
                                       
                                          N
                                          ′
                                       
                                    
                                 
                                 
                                    
                                       b
                                       i
                                    
                                    
                                       x
                                       i
                                    
                                 
                                 ≥
                                 
                                    B
                                    *
                                 
                              
                           
                        
                     
                     
                        
                           (26)
                           
                              
                                 
                                    ∑
                                    
                                       i
                                       ∈
                                       
                                          N
                                          ′
                                       
                                    
                                 
                                 
                                    
                                       x
                                       i
                                    
                                    ≤
                                    m
                                    d
                                 
                              
                           
                        
                     
                     
                        
                           (27)
                           
                              
                                 
                                    x
                                    i
                                 
                                 ∈
                                 
                                    {
                                    
                                       0
                                       ,
                                       1
                                    
                                    }
                                 
                                 ∀
                                 i
                                 ∈
                                 
                                    N
                                    ′
                                 
                              
                           
                        
                     
                  

This mathematical model finds the nodes that the bloodmobiles visit to collect the desired amount of blood. Constraint (25) ensures that the visited nodes have sufficient blood potential to satisfy the blood need. Constraint (26) restricts the selected nodes to fit in the planning horizon. Constraint set (27) gives the binary restrictions on decision variables. Finally, the objective function supports the selection of those nodes that are closer to the depot among the eligible candidates.


                     Step 3: Then, feed only the nodes that are obtained in Step 2 and their copies for the stay overs into MinCost-B*-Blood.

With this approach, the model has to handle a significantly smaller network. For instance, for m collectors and a d-day planning period, the model in Step 2 (NodeSelection) can result in at most m × d nodes. Considering the original nodes and their copies, the upper bound on the network size of MinCost-B*-Blood is 3m × d with this new approach, whatever the original network is.


                     NodeSelection consists of |N′| = n′ decision variables in addition to the binary restrictions. This IP is expected to be easier than MinCost-B*-Blood, as NodeSelection has a very similar structure to the knapsack problem whereas MinCost-B*-Blood has a complicated routing problem structure. Also, in Step 3 we solve MinCost-B*-Blood on a considerably smaller network. Therefore, this IP-based heuristic approach seems more efficient than solving MinCost-B*-Blood on the extended network.

The performance of this heuristic algorithm is tested computationally on both the original and randomly generated instances of the Ankara and Istanbul networks with different depot locations. Results of heuristic applications for Ankara and Istanbul can be seen in Tables 5 and 6, respectively.

In these tables, Stg 1 and Stg 2 correspond to the CPU times of NodeSelection and MinCost-B*-Blood models, respectively. It can be seen that, this two-stage algorithm reduces the computational times significantly while still solving all instances optimally. Since this is a problem of tactical/operational planning, a 7-day planning horizon should be appropriate for most practical purposes. For the 1-week problems, optimums can be achieved within an hour and heuristic approach may seem unnecessary. However, for the sake of proposing solutions in case planning horizons are longer or maybe when the networks are larger, optimum solutions may not be as easily accessible. We remark here that the heuristic that we propose requires optimization and so for certain instances even heuristic solutions may be time wise costly. However, for the test instances the solution quality of the heuristic is really good and for different application areas, it may provide nice insights. Nevertheless, since this is an IP-based heuristic, there is still a need for a more efficient and satisficing metaheuristic which is left as a future work.

In this research, we focused on the problem of designing a new bloodmobile system in the context of a TRC application. The proposed system consists of original bloodmobiles in addition to a shuttle. With the implementation of this new system, bloodmobiles do not need to make daily returns to the depot to bring the collected blood, but instead, the shuttle visits the bloodmobiles in the field and transports the collected blood to the analysis center. As a result, the selective vehicle routing approach is extended to consider also the integrated shuttle tours and this new problem named as the Selective VRP with Integrated Tours is introduced to the literature.

First, a mathematical model, MinCost-B*-Blood, is developed to minimize the logistics cost of collecting a pre-determined blood level of B*
                     . This model decides on the stops and stop-lengths of bloodmobiles as well as the tours of both the shuttle and the bloodmobiles. Another mixed integer program, MaxBlood is proposed to calculate B*
                      for a given network and a given set of parameters. The optimal solutions for the Ankara and the Istanbul instances showed that the proposed system results in better logistics costs than the current one. The Pareto Efficient curves of both cities suggest that if TRC opts to settle for the 90 percent of the maximum amount of blood collection volumes, they can obtain a marked decrease in associated optimum logistics costs. Finally, with the help of sensitivity analysis conducted on the number of vehicles and the value of the blood potential estimation parameter β, we conclude that increasing the number of bloodmobiles is generally not effective in terms of logistics cost of collecting one unit of blood. We can also suggest that maintaining high β values yields very high blood collection amounts. Hence, TRC may want to better publicize the collection activities, for example, by making early announcements of their dates and durations by the help of a long term planning mechanism such as the one proposed in Section 4.5. Since the computational performance of the proposed exact method may not be as good in larger problems, we also design a more efficient heuristic algorithm. The main idea behind this two-stage algorithm is to put an upper bound on the network size before feeding it to the MinCost-B*-Blood model. This approach results in significant decrease in computational times while still providing the optimum solutions in our experiments.

As a future direction, one can investigate other possible alternative application areas for SVRPwIT. For instance, carrying medical supplements such as serum, antibiotics to mobile healthcare facilities may be one of these. As pointed out by Hodgson et al. (Hodgson, Laporte, & Semet, 1998) transfer of these items is a possible application due to their need for being stored in cold-chains and the lack of current technology in mobile healthcare facilities to keep them under proper conditions. Also, a shuttle can collect the blood or urine samples from the mobile healthcare vehicles for testing. Another area that may benefit from SVRPwIT can be human breast milk donation supply chains, since breast milk is also a highly perishable product. In order to prevent neonatal deaths due to malnutrition in South Africa, human milk has to be collected from donors, stored and delivered in proper conditions (Cao, Celik, Ergun, Swann, & Viljoen, 2012). Besides, one can also develop a meta-heuristic for SVRPwIT tours even though generating a feasible solution or defining neighborhoods is more complicated than the classical SVRP problems. Since, SVRPwIT is a new problem, performing its polyhedral analysis, generating valid cuts for it may also be a fruitful avenue of further research. In our problem, we used past blood collection data for blood potentials of each node, however it is possible to build a model that accurately estimates the blood potentials using behavioral and statistical models.

@&#ACKNOWLEDGEMENTS@&#

The authors sincerely thank the two anonymous referees for contributing to the improvement of this paper. The corresponding author gratefully acknowledges support from the Turkish Academy of Sciences.

@&#REFERENCES@&#

