@&#MAIN-TITLE@&#Co-simulation research of a novel exoskeleton-human robot system on humanoid gaits with fuzzy-PID/PID algorithms

@&#HIGHLIGHTS@&#


               
               
                  
                     
                        
                           
                           A novel lower extremity exoskeleton with series–parallel topology is presented.


                        
                        
                           
                           The humanoid gait characteristics decide that the control algorithm should be intelligent.


                        
                        
                           
                           A switch-typed and parameter self-tuning fuzzy-PID/PID controller is presented.


                        
                        
                           
                           Level walking, stair ascent, stair descent, side kick, squatting down and standing up co-simulations are presented.


                        
                        
                           
                           Simulation results show that the fuzzy-PID/PID controllers have great control performances.


                        
                     
                  
               
            

@&#KEYPHRASES@&#

Lower extremity exoskeleton

Wearable robotics

Humanoid gaits

Fuzzy algorithm

Co-simulation

Series–parallel mechanism

@&#ABSTRACT@&#


               
               
                  Legged exoskeletons supplement human intelligence with the strength and endurance of a pair of wearable mechanical legs that support heavy loads. The exoskeleton-type system is a nonlinear system with uncertainty of parameters, which is not easy to be identified with traditional mathematical model. This paper presents co-simulations of a novel exoskeleton-human robot system on humanoid gaits with fuzzy-PID/PID algorithms, which do not need the precise model. The lower extremity exoskeleton model with series–parallel topology was briefly described and the gait characteristics were analyzed. The co-simulation method integrates ADAMS and MATLAB/SIMULINK with fuzzy-PID/PID algorithms, which were used to develop the control schematic of the exoskeleton-human robot system. Finally, co-simulations of humanoid gaits and movements, which include level walking, stair ascent, stair descent, side kick, squatting down and standing up, were provided to confirm the performances and effectiveness of the proposed control approach.
               
            

@&#INTRODUCTION@&#

Nowadays many people, such as patients and older people, have difficulties in their mobility, needing assistive devices to accomplish certain daily life activities [1]. And sometimes people have to bear heavy loads to walk on rough terrains in many situations, such as soldiers with heavy loads, disaster relief workers and wildfire fighters [2,3]. Legged exoskeletons have been developed to enhance the physical ability to fulfill daily life or carry heavy objects [4]. During walking, the exoskeleton transfers loads to the ground, makes the operator feel that the weight of loads is far less than the actual weight and improves the carrying capacity of its operator.

Exoskeletons equipped with actuators do not have a long history. The first active exoskeleton named Hardiman [5] was developed by General Electric in the late 1960s. Almost at the same time, an anthropomorphic exoskeleton was developed at the Belgrade University and its researchers firstly proposed ZMP (Zero Moment Point) algorithm [6]. Following the 1970 attempts, due to the limitation of basic technologies, relatively few people investigated exoskeletons and no great success was achieved until 2000.

The resurgence in exoskeleton investigation is now being witnessed by the 21st century and many great exoskeletons has been invented [7–10]. Exoskeletons, which are worn by operators, can be used for two conceptually different applications: one is medical rehabilitation, such as HAL [10] (Hybrid Assistive Limb), and another is power amplifier, such as BLEEX [9] (Berkeley Lower Extremity Exoskeleton). BLEEX is one of the most advanced power amplifier, demonstrated to support up to 34kg and walk at the speed of 0.9m/s [11]. The legged exoskeletons discussed in this paper are mainly developed for power amplifier.

Almost all legged exoskeletons adopt serial mechanisms, which have larger workspace compared to parallel mechanisms. But parallel mechanisms have better load-carrying capacity, better stiffness, and better precision than serial mechanisms [12]. In order to help the operator carry heavier loads walking on rough terrains, it is a vital topic to adopt series–parallel mechanisms to design a novel legged exoskeleton [13].

The control methodology is a key technology in the exoskeleton area all the time. A master-slave control system was developed and used in the first active exoskeleton Hardiman. Due to its complex system, Hardiman could not walk, or even stably move. ZMP algorithm was developed for balancing the exoskeleton by the researchers of Belgrade University, which achieved more successes in humanoid robot area. EMG (Electromyography) signals [14] are successfully used in the control of HAL-5, but they highly rely on individual characteristics and the EMG sensors are easy to fall off from the operator. Hybrid control methodology, which includes PD (Proportional Differential) position controller and SAC (Sensitivity Amplification Controller), are used in BLEEX [9,15] for level walking. But SAC requires precise dynamic models of legged exoskeletons and human legs, so it can hardly get a wide range of applications. Nowadays, intelligent algorithms, such as fuzzy theory, have great adaptability to the exoskeleton systems with uncertain parameters [16] and arise more and more interest in exoskeleton fields [17]. At present, they are mainly used in upper limb exoskeletons, or combines with EMG signals [18,19]. Besides, intelligent algorithms need a large amount of calculation.

Exoskeletons have to follow the humanoid gaits and movements generated by operators, which always make the nonlinear exoskeleton systems more complex. Level walking [11] is the most important gait for any walking robots. Besides, slope walking is also important [20], which can examine whether a walking robot can adapt to rugged terrains or not. Moreover, some movements cost much energy, such as squatting down and standing up, which can test the battery performance and the bearing capacity. The more gaits and movements an exoskeleton can achieve, the more dexterous the exoskeleton is. However, little research is done about the simulations of humanoid gaits and movements of exoskeleton systems. Inspired by the hybrid control method in BLEEX, this paper attempts to design a new hybrid control algorithm for a novel lower extremity exoskeleton with series–parallel topology. The algorithm, which integrates fuzzy theory and the traditional PID algorithm, is switch-type and parameter self-tuning. To demonstrate the controller’s advantages and performances, several co-simulations of humanoid gaits and movements are presented.

The paper is organized as follows. Section 2 describes the lower extremity exoskeleton model with series–parallel topology and establishes the position mapping from human leg joints to the exoskeleton joints. Section 3 shows the control schematic of lower extremity exoskeletons and analyzes the gait characteristics. A hybrid algorithm, which is the switch-type parameter self-tuning fuzzy-PID/PID controller, were designed and presented in Section 4. Section 5 shows several co-simulations of humanoid gaits based on the algorithm. Finally, concluding remarks are presented in Section 6.

Before introducing the lower extremity exoskeleton, the mechanism of the human lower limb should be described. As shown in Fig. 1
                        , a single leg of the human being has 6 DOFs (degrees of freedom) and the local DOFs of the foot are not counted. These DOFs are hip external/internal, hip flexion/extension, hip abduction/adduction, knee flexion/extension, ankle flexion/extension and ankle abduction/adduction respectively, which are all revolute pairs. The space coordinate system of human body was also drawn in Fig. 1.

Our exoskeleton-human system was shown as Fig. 2
                        (a), which mainly includes loads, actuators, the exoskeleton and an operator. The mechanism topology of the right leg of the exoskeleton was shown as Fig. 2(b), which adopts a series–parallel structure. This topology can be divided into T–P, I–G and J–Q parts, where T–P and J–Q are series and I–G is parallel [13,21].

The single leg of the exoskeleton has 6 DOFs, and not all the DOFs need to be actuated [22]. In Fig. 2, joint T, joint J, link IB and link IC that can rotate around I are actuated because these joints need much more torque and power than others. In many situations, such as walking, joint P and joint Q do not need to rotate and cost little energy. To simplify the exoskeleton, they are compliant with reset springs and can follow the rotations of corresponding joints of the operator. In general, since series mechanisms cannot bear heavier loads than parallel mechanisms and parallel mechanisms have smaller workspace of mobility than series mechanisms, this series–parallel topology was designed and used in legged exoskeletons.

When the exoskeleton-human system works, the legged exoskeleton’s movements should be in accordance with human leg’s behaviors. Thus, the position mapping from the positions of human lower extremity joints to the exoskeleton joints should be established.

Since the humanoid gaits mainly generate motions in the sagittal plane (x′–y′ plane and x–y plane shown in Fig. 3
                        ), the mapping is based on the following assumptions.
                           
                              1.
                              Joint I in Fig. 3(b) is equivalent to joint H (Hip) in Fig. 3(a). As shown in Fig. 3, the x and y coordinates of joint I in the Fig. 3(b) should be equal to the x′ and y′ coordinates of joint H in the Fig. 3(a) respectively.

Joint J in Fig. 3(b) is equivalent to joint A (Ankle) in Fig. 3(a). As shown in Fig. 3, the x and y coordinates of joint J in the Fig. 3(b) should be equal to the x′ and y′ coordinates of joint A in the Fig. 3(a) respectively.

As shown in Fig. 3(a), the position of joint A can be obtained as formulae (1).
                           
                              (1)
                              
                                 
                                    
                                       
                                          
                                             
                                                
                                                   
                                                      
                                                         x
                                                      
                                                      
                                                         a
                                                      
                                                      
                                                         ′
                                                      
                                                   
                                                   =
                                                   
                                                      
                                                         l
                                                      
                                                      
                                                         t
                                                      
                                                   
                                                   sin
                                                   (
                                                   
                                                      
                                                         θ
                                                      
                                                      
                                                         hf
                                                      
                                                   
                                                   )
                                                   +
                                                   
                                                      
                                                         l
                                                      
                                                      
                                                         s
                                                      
                                                   
                                                   sin
                                                   (
                                                   
                                                      
                                                         θ
                                                      
                                                      
                                                         k
                                                      
                                                   
                                                   )
                                                
                                             
                                             
                                                
                                                   
                                                      
                                                         y
                                                      
                                                      
                                                         a
                                                      
                                                      
                                                         ′
                                                      
                                                   
                                                   =
                                                   -
                                                   
                                                      
                                                         l
                                                      
                                                      
                                                         t
                                                      
                                                   
                                                   cos
                                                   (
                                                   
                                                      
                                                         θ
                                                      
                                                      
                                                         hf
                                                      
                                                   
                                                   )
                                                   -
                                                   
                                                      
                                                         l
                                                      
                                                      
                                                         s
                                                      
                                                   
                                                   cos
                                                   (
                                                   
                                                      
                                                         θ
                                                      
                                                      
                                                         k
                                                      
                                                   
                                                   )
                                                
                                             
                                          
                                       
                                    
                                 
                              
                           
                        where θhf
                        , θk
                         and θa
                         denote the angle of each joint, and lt
                        , ls
                         and la
                         denote the length or height of thigh, shank and foot. For the height of man is 1750mm, lt
                        
                        =496mm, ls
                        
                        =396mm, la
                        
                        =105mm and these leg parameters were adopted in the following calculation and simulation.

And the position of joint J can be obtained as follows.
                           
                              (2)
                              
                                 
                                    
                                       
                                          
                                             
                                                
                                                   
                                                      
                                                         x
                                                      
                                                      
                                                         j
                                                      
                                                   
                                                   =
                                                   
                                                      
                                                         x
                                                      
                                                      
                                                         i
                                                      
                                                   
                                                   -
                                                   2
                                                   (
                                                   
                                                      
                                                         L
                                                      
                                                      
                                                         1
                                                      
                                                   
                                                   +
                                                   
                                                      
                                                         L
                                                      
                                                      
                                                         2
                                                      
                                                   
                                                   )
                                                   sin
                                                   
                                                      
                                                         
                                                            
                                                               
                                                                  
                                                                     
                                                                        α
                                                                     
                                                                     
                                                                        2
                                                                     
                                                                  
                                                                  +
                                                                  
                                                                     
                                                                        α
                                                                     
                                                                     
                                                                        1
                                                                     
                                                                  
                                                               
                                                               
                                                                  2
                                                               
                                                            
                                                         
                                                      
                                                   
                                                   sin
                                                   
                                                      
                                                         
                                                            
                                                               
                                                                  
                                                                     
                                                                        α
                                                                     
                                                                     
                                                                        2
                                                                     
                                                                  
                                                                  -
                                                                  
                                                                     
                                                                        α
                                                                     
                                                                     
                                                                        1
                                                                     
                                                                  
                                                               
                                                               
                                                                  2
                                                               
                                                            
                                                         
                                                      
                                                   
                                                   -
                                                   
                                                      
                                                         l
                                                      
                                                      
                                                         1
                                                      
                                                   
                                                   sin
                                                   
                                                      
                                                         
                                                            
                                                               
                                                                  
                                                                     
                                                                        α
                                                                     
                                                                     
                                                                        2
                                                                     
                                                                  
                                                                  -
                                                                  
                                                                     
                                                                        α
                                                                     
                                                                     
                                                                        1
                                                                     
                                                                  
                                                               
                                                               
                                                                  2
                                                               
                                                            
                                                         
                                                      
                                                   
                                                
                                             
                                             
                                                
                                                   
                                                      
                                                         y
                                                      
                                                      
                                                         j
                                                      
                                                   
                                                   =
                                                   
                                                      
                                                         y
                                                      
                                                      
                                                         i
                                                      
                                                   
                                                   -
                                                   2
                                                   (
                                                   
                                                      
                                                         L
                                                      
                                                      
                                                         1
                                                      
                                                   
                                                   +
                                                   
                                                      
                                                         L
                                                      
                                                      
                                                         2
                                                      
                                                   
                                                   )
                                                   sin
                                                   
                                                      
                                                         
                                                            
                                                               
                                                                  
                                                                     
                                                                        α
                                                                     
                                                                     
                                                                        2
                                                                     
                                                                  
                                                                  +
                                                                  
                                                                     
                                                                        α
                                                                     
                                                                     
                                                                        1
                                                                     
                                                                  
                                                               
                                                               
                                                                  2
                                                               
                                                            
                                                         
                                                      
                                                   
                                                   cos
                                                   
                                                      
                                                         
                                                            
                                                               
                                                                  
                                                                     
                                                                        α
                                                                     
                                                                     
                                                                        2
                                                                     
                                                                  
                                                                  -
                                                                  
                                                                     
                                                                        α
                                                                     
                                                                     
                                                                        1
                                                                     
                                                                  
                                                               
                                                               
                                                                  2
                                                               
                                                            
                                                         
                                                      
                                                   
                                                   -
                                                   
                                                      
                                                         l
                                                      
                                                      
                                                         1
                                                      
                                                   
                                                   cos
                                                   
                                                      
                                                         
                                                            
                                                               
                                                                  
                                                                     
                                                                        α
                                                                     
                                                                     
                                                                        2
                                                                     
                                                                  
                                                                  -
                                                                  
                                                                     
                                                                        α
                                                                     
                                                                     
                                                                        1
                                                                     
                                                                  
                                                               
                                                               
                                                                  2
                                                               
                                                            
                                                         
                                                      
                                                   
                                                
                                             
                                          
                                       
                                    
                                 
                              
                           
                        where L
                        1 denotes the length of link IB and IC, L
                        2 denotes the length of link EG and FG, and l
                        1 is the length of GJ. α
                        1, α
                        2 and α
                        3 denote the angle of the actuated joint IB, IC and J.

To know how the exoskeleton walks, α
                        1, α
                        2 and α
                        3 are required to be calculated. α
                        1 and α
                        2 can be solved by the following formulae
                           
                              (3)
                              
                                 
                                    
                                       
                                          
                                             
                                                
                                                   
                                                      
                                                         x
                                                      
                                                      
                                                         j
                                                      
                                                   
                                                   =
                                                   
                                                      
                                                         x
                                                      
                                                      
                                                         a
                                                      
                                                      
                                                         ′
                                                      
                                                   
                                                
                                             
                                             
                                                
                                                   
                                                      
                                                         y
                                                      
                                                      
                                                         j
                                                      
                                                   
                                                   =
                                                   
                                                      
                                                         y
                                                      
                                                      
                                                         a
                                                      
                                                      
                                                         ′
                                                      
                                                   
                                                
                                             
                                          
                                       
                                    
                                 
                              
                           
                        
                        
                           
                              (4)
                              
                                 
                                    
                                       
                                          
                                             
                                                
                                                   
                                                      
                                                         α
                                                      
                                                      
                                                         1
                                                      
                                                   
                                                   =
                                                   
                                                      
                                                         1
                                                      
                                                      
                                                         2
                                                      
                                                   
                                                   
                                                      
                                                         
                                                            arcsin
                                                            
                                                               
                                                                  
                                                                     
                                                                        
                                                                           1
                                                                        
                                                                        
                                                                           2
                                                                           (
                                                                           
                                                                              
                                                                                 L
                                                                              
                                                                              
                                                                                 1
                                                                              
                                                                           
                                                                           +
                                                                           
                                                                              
                                                                                 L
                                                                              
                                                                              
                                                                                 2
                                                                              
                                                                           
                                                                           )
                                                                        
                                                                     
                                                                     
                                                                        
                                                                           
                                                                              
                                                                                 
                                                                                    
                                                                                       
                                                                                          y
                                                                                       
                                                                                       
                                                                                          j
                                                                                       
                                                                                       
                                                                                          2
                                                                                       
                                                                                    
                                                                                 
                                                                                 
                                                                                    
                                                                                       
                                                                                          
                                                                                             
                                                                                                x
                                                                                             
                                                                                             
                                                                                                j
                                                                                             
                                                                                             
                                                                                                2
                                                                                             
                                                                                          
                                                                                          +
                                                                                          
                                                                                             
                                                                                                y
                                                                                             
                                                                                             
                                                                                                j
                                                                                             
                                                                                             
                                                                                                2
                                                                                             
                                                                                          
                                                                                       
                                                                                    
                                                                                 
                                                                              
                                                                              -
                                                                              
                                                                                 
                                                                                    l
                                                                                 
                                                                                 
                                                                                    1
                                                                                 
                                                                              
                                                                              +
                                                                              
                                                                                 
                                                                                    
                                                                                       
                                                                                          x
                                                                                       
                                                                                       
                                                                                          j
                                                                                       
                                                                                       
                                                                                          2
                                                                                       
                                                                                    
                                                                                 
                                                                                 
                                                                                    
                                                                                       
                                                                                          
                                                                                             
                                                                                                x
                                                                                             
                                                                                             
                                                                                                j
                                                                                             
                                                                                             
                                                                                                2
                                                                                             
                                                                                          
                                                                                          +
                                                                                          
                                                                                             
                                                                                                y
                                                                                             
                                                                                             
                                                                                                j
                                                                                             
                                                                                             
                                                                                                2
                                                                                             
                                                                                          
                                                                                       
                                                                                    
                                                                                 
                                                                              
                                                                           
                                                                        
                                                                     
                                                                  
                                                               
                                                            
                                                            -
                                                            arcsin
                                                            
                                                               
                                                                  
                                                                     -
                                                                     
                                                                        
                                                                           
                                                                              
                                                                                 x
                                                                              
                                                                              
                                                                                 j
                                                                              
                                                                           
                                                                        
                                                                        
                                                                           
                                                                              
                                                                                 
                                                                                    
                                                                                       x
                                                                                    
                                                                                    
                                                                                       j
                                                                                    
                                                                                    
                                                                                       2
                                                                                    
                                                                                 
                                                                                 +
                                                                                 
                                                                                    
                                                                                       y
                                                                                    
                                                                                    
                                                                                       j
                                                                                    
                                                                                    
                                                                                       2
                                                                                    
                                                                                 
                                                                              
                                                                           
                                                                        
                                                                     
                                                                  
                                                               
                                                            
                                                         
                                                      
                                                   
                                                
                                             
                                             
                                                
                                                   
                                                      
                                                         α
                                                      
                                                      
                                                         2
                                                      
                                                   
                                                   =
                                                   
                                                      
                                                         1
                                                      
                                                      
                                                         2
                                                      
                                                   
                                                   
                                                      
                                                         
                                                            arcsin
                                                            
                                                               
                                                                  
                                                                     
                                                                        
                                                                           1
                                                                        
                                                                        
                                                                           2
                                                                           (
                                                                           
                                                                              
                                                                                 L
                                                                              
                                                                              
                                                                                 1
                                                                              
                                                                           
                                                                           +
                                                                           
                                                                              
                                                                                 L
                                                                              
                                                                              
                                                                                 2
                                                                              
                                                                           
                                                                           )
                                                                        
                                                                     
                                                                     
                                                                        
                                                                           
                                                                              
                                                                                 
                                                                                    
                                                                                       
                                                                                          y
                                                                                       
                                                                                       
                                                                                          j
                                                                                       
                                                                                       
                                                                                          2
                                                                                       
                                                                                    
                                                                                 
                                                                                 
                                                                                    
                                                                                       
                                                                                          
                                                                                             
                                                                                                x
                                                                                             
                                                                                             
                                                                                                j
                                                                                             
                                                                                             
                                                                                                2
                                                                                             
                                                                                          
                                                                                          +
                                                                                          
                                                                                             
                                                                                                y
                                                                                             
                                                                                             
                                                                                                j
                                                                                             
                                                                                             
                                                                                                2
                                                                                             
                                                                                          
                                                                                       
                                                                                    
                                                                                 
                                                                              
                                                                              -
                                                                              
                                                                                 
                                                                                    l
                                                                                 
                                                                                 
                                                                                    1
                                                                                 
                                                                              
                                                                              +
                                                                              
                                                                                 
                                                                                    
                                                                                       
                                                                                          x
                                                                                       
                                                                                       
                                                                                          j
                                                                                       
                                                                                       
                                                                                          2
                                                                                       
                                                                                    
                                                                                 
                                                                                 
                                                                                    
                                                                                       
                                                                                          
                                                                                             
                                                                                                x
                                                                                             
                                                                                             
                                                                                                j
                                                                                             
                                                                                             
                                                                                                2
                                                                                             
                                                                                          
                                                                                          +
                                                                                          
                                                                                             
                                                                                                y
                                                                                             
                                                                                             
                                                                                                j
                                                                                             
                                                                                             
                                                                                                2
                                                                                             
                                                                                          
                                                                                       
                                                                                    
                                                                                 
                                                                              
                                                                           
                                                                        
                                                                     
                                                                  
                                                               
                                                            
                                                            +
                                                            arcsin
                                                            
                                                               
                                                                  
                                                                     -
                                                                     
                                                                        
                                                                           
                                                                              
                                                                                 x
                                                                              
                                                                              
                                                                                 j
                                                                              
                                                                           
                                                                        
                                                                        
                                                                           
                                                                              
                                                                                 
                                                                                    
                                                                                       x
                                                                                    
                                                                                    
                                                                                       j
                                                                                    
                                                                                    
                                                                                       2
                                                                                    
                                                                                 
                                                                                 +
                                                                                 
                                                                                    
                                                                                       y
                                                                                    
                                                                                    
                                                                                       j
                                                                                    
                                                                                    
                                                                                       2
                                                                                    
                                                                                 
                                                                              
                                                                           
                                                                        
                                                                     
                                                                  
                                                               
                                                            
                                                         
                                                      
                                                   
                                                
                                             
                                             
                                                
                                                   
                                                      
                                                         α
                                                      
                                                      
                                                         3
                                                      
                                                   
                                                   =
                                                   
                                                      
                                                         θ
                                                      
                                                      
                                                         a
                                                      
                                                   
                                                
                                             
                                          
                                       
                                    
                                 
                              
                           
                        where L
                        1
                        =
                        L
                        2
                        =230mm, l
                        1
                        =100mm, and other parameters in formulae (1)–(4) will be given in the simulation section.

In addition, although most energy are cost in the sagittal plane in most humanoid gaits, as shown in Fig. 4
                        , the hip abduction/adduction in the coronal plane also needs to be actuated, where θha
                        
                        ≈
                        α
                        4. This powered joint can help the operator overcome obstacles and offer more powered movements, such as side kick.

Lower extremity exoskeleton robot is integrated with an advanced man–machine intelligent system, which was shown as Fig. 5
                        . Different from humanoid robots or other biped robots, the operator also takes part in the control process, which is called “man-in-the-loop” [23]. Feedback signals collected by the operator and the exoskeleton keep interchanging bilaterally between each other. The intelligence of the exoskeleton is strengthened while the power of the operator is also enhanced.

Man–machine interaction can be regarded as the brain of the control schematic, which gives orders to other parts. The function of the brain includes sense perception and decision-making. The content of sense perception includes the environment condition, motion state of the man–machine system and signals interchanging bilaterally between the operator and the exoskeleton. The decision-making is a process to synthesize, estimate and plan the perceptual information, and then gives orders to other parts.

The control algorithm of data processing can be regarded as the heart of the control schematic, which obeys the command from the brain and processes data. Thus, the heart is essentially doing the job of signal processing. Although the exoskeleton-type system has higher integrated intelligence than traditional biped robots, the control algorithm of data processing in the exoskeleton field is far behind that of humanoid robots [24]. For example, neural network, fuzzy theory and other intelligent algorithms have already been used in the humanoid robots. However, the research of these intelligent algorithms in the exoskeleton area is inadequate.

The exoskeleton machine can be regard as the body of the control schematic, which obeys the signals and generates corresponding motions. The body behaviors also give feedback signals to both the brain and the heart. The machine should absolutely obey the orders, or may hurt the operator. Thus, the function of body can be summarized as executing the commands and giving feedback signals.

As shown in Fig. 5, the control algorithm, which is regarded as the heart, should be designed according to the gait characteristics of the exoskeleton-type system. Generally, the exoskeleton-type system has the following gait characteristics.
                           
                              (1)
                              The dynamic models of exoskeletons, which are very complex, cannot be obtained exactly by mathematics. For example, frictions and vibrations sometimes cannot be measured easily, which are always ignored. Besides, the mass and inertia distribution of each link cannot be measured accurately.

The operator is an important part of inputs of the control system, which is totally different from traditional biped robots.

The physical conditions of different operators are different, which generates different signals to the exoskeleton even though the signals are generated by the same movement of operators.

Generally the humanoid gaits are periodic [20]. In different phases during the period, the motions are different from each other [25]. For example, during the stance phase of the level walking, the ranges of motion of each joint are relatively smaller and the speed is slower than those of the swing phase.

These characteristics show that the lower extremity exoskeleton system is very complex and nonlinear, whose dynamic models cannot be described exactly by mathematics. Moreover, the unknown signals, which vary with different operators, make the system more complicated. In addition, if the control effect is not ideal, the exoskeleton machine may hurt the operator. Therefore, it is extremely important to design an intelligent control algorithm to satisfy all the requirements above.

The conventional PID control algorithm is adaptable to many controlled objects and plays a dominant role in the industrial control field [26]. However, the shortage of PID algorithm is evident that its parameters cannot be self-adjusted to control the complex and nonlinear systems well.

Intelligent algorithms, such as neural network and fuzzy theory, have been gradually developed in recent 30years. They are born to cope with the difficulty of complicated nonlinear systems, which do not need precise dynamic models. Intelligent algorithms can self-adjust their parameters during the control process, whose rules are designed by experience or experiments. They have stronger adaptability to complicated nonlinear systems than PID algorithms. However, intelligent algorithms need a large amount of calculation, so they require high speed computers.

So it is easy to think about developing an algorithm which combines intelligent algorithms with PID algorithms. This algorithm should not only integrate the advantages of both intelligent algorithms and PID algorithms, but also eliminates their disadvantages so as to realize smooth switching between the two kinds of algorithms.

Due to clear and strong logic, fuzzy theory can deal with all kinds of complicated nonlinear control problems, which is very popular among intelligent algorithms. Thus, fuzzy theory was adopted in the rest paper to develop a controller which combines fuzzy theory with PID. There are multiple combinations, such as switch-type fuzzy/PID controllers, P-fuzzy-PID controllers, fuzzy-PI controllers and parameter self-tuning fuzzy-PID controllers.

The switch-type controllers can realize smooth switching between different algorithms. Besides, the parameter self-tuning controllers have stronger adaptability to input signals. Thus, to achieve the best control effects, a switch-type parameter self-tuning fuzzy-PID/PID controller was designed as Fig. 6
                        , which will be called the fuzzy-PID/PID controller for short in the rest paper. As shown in Fig. 6, when |e| is greater than or equal to the threshold u, the fuzzy-PID/PID controller will choose the fuzzy-PID controller, which can adjust PID parameters online; otherwise, the fuzzy-PID/PID controller will choose PID controller to release the computer’s burdens.

@&#METHOD@&#

The parameters of fuzzy controllers can be divided into two categories [27]: structural parameters and tuning parameters. Structural parameters are determined off-line design, while tuning parameters can be given during on-line adjustments to enhance the process performance and reinforce the adaptive capability to system uncertainty and process disturbance. As mentioned above, the dynamic models of exoskeletons and human legs are approximate and complicated, so the structure of fuzzy-PID controllers is difficult to be constructed and the tuning parameters are not easy to be adjusted and observed through mathematical derivation. In most researches, fuzzy-PID controller design is accomplished by trial-and-error methods using computer simulations [28]. So the research method is particularly important for repeated simulations.

With fuzzy control module, MATLAB/SIMULINK can be used to design fuzzy-PID controllers conveniently, but the control object model is hard to be constructed. ADADMS, which can build 3D models easily, is popular dynamics simulation software, but the control module of ADAMS is weak because it is not convenient to use, as well as supports few advanced algorithms. Thus, this paper adopts co-simulation method of ADAMS and MATLAB/SIMULINK, which not only integrates their advantages but also eliminates the disadvantages.

Although the exoskeleton has multiple active DOFs, the joints, which need to be controlled and actuated, may be different during different gaits. The exoskeleton control schematic was shown in Fig. 7
                        , where joint α
                        1, α
                        2,…,
                        αn
                         are controlled and all the controllers adopt the fuzzy-PID/PID structure. In each control loop, the errors and error rates between input signals and feedback signals are controlled by fuzzy-PID/PID controllers, then the demand torques are calculated to drive the models.

The detailed fuzzy-PID/PID controller structure was shown as Fig. 8
                        , and the fuzzy rules was shown as Tables 1–3
                        
                        
                        , where NB, NM, NS, ZO, PS, PM and PB denote negative big, negative middle, negative small, zero, positive small, positive middle and positive big respectively. Triangle-type membership function was adopted for each fuzzy variable, which was shown as Fig. 9
                        . The ranges of 
                           
                              
                                 
                                    
                                       
                                          K
                                       
                                       
                                          ∼
                                       
                                    
                                 
                                 
                                    p
                                 
                              
                              ,
                              
                              
                                 
                                    
                                       
                                          K
                                       
                                       
                                          ∼
                                       
                                    
                                 
                                 
                                    i
                                 
                              
                              ,
                              
                              
                                 
                                    
                                       
                                          K
                                       
                                       
                                          ∼
                                       
                                    
                                 
                                 
                                    d
                                 
                              
                           
                        , Kp
                        , Ki
                         and Kd
                         in the fuzzy-PID/PID controllers were shown as Table 4
                        .

Level walking is the most common gait, which is also the most important thing to do for exoskeletons [9]. For our exoskeleton, α
                        1, α
                        2 and α
                        3 need to be controlled during the gait cycle. Due to the requirements of simulation, 
                           
                              
                                 
                                    α
                                 
                                 
                                    1
                                 
                                 
                                    ′
                                 
                              
                              ,
                              
                              
                                 
                                    α
                                 
                                 
                                    2
                                 
                                 
                                    ′
                                 
                              
                              
                              and
                              
                              
                                 
                                    α
                                 
                                 
                                    3
                                 
                                 
                                    ′
                                 
                              
                           
                         are defined as formulae (5), where they are to describe the same joint as α
                        1, α
                        2 and α
                        3 respectively. β
                        1 and β
                        2 are the initial values of α
                        1 and α
                        2 respectively. In level walking simulation, β
                        1
                        =
                        β
                        2
                        =40°.
                           
                              (5)
                              
                                 
                                    
                                       
                                          
                                             
                                                
                                                   
                                                      
                                                         α
                                                      
                                                      
                                                         1
                                                      
                                                      
                                                         ′
                                                      
                                                   
                                                   =
                                                   
                                                      
                                                         α
                                                      
                                                      
                                                         1
                                                      
                                                   
                                                   -
                                                   
                                                      
                                                         β
                                                      
                                                      
                                                         1
                                                      
                                                   
                                                
                                             
                                             
                                                
                                                   
                                                      
                                                         α
                                                      
                                                      
                                                         2
                                                      
                                                      
                                                         ′
                                                      
                                                   
                                                   =
                                                   
                                                      
                                                         β
                                                      
                                                      
                                                         1
                                                      
                                                   
                                                   -
                                                   
                                                      
                                                         α
                                                      
                                                      
                                                         2
                                                      
                                                   
                                                
                                             
                                             
                                                
                                                   
                                                      
                                                         α
                                                      
                                                      
                                                         3
                                                      
                                                      
                                                         ′
                                                      
                                                   
                                                   =
                                                   
                                                      
                                                         α
                                                      
                                                      
                                                         3
                                                      
                                                   
                                                
                                             
                                          
                                       
                                    
                                 
                              
                           
                        
                     

According to formulae (1)–(4) and Fig. 3, θhf
                        , θk
                         and θa
                         are required to be known to calculate 
                           
                              
                                 
                                    α
                                 
                                 
                                    1
                                 
                              
                              (
                              
                                 
                                    α
                                 
                                 
                                    1
                                 
                                 
                                    ′
                                 
                              
                              )
                              ,
                              
                              
                                 
                                    α
                                 
                                 
                                    2
                                 
                              
                              (
                              
                                 
                                    α
                                 
                                 
                                    2
                                 
                                 
                                    ′
                                 
                              
                              )
                              
                              and
                              
                              
                                 
                                    α
                                 
                                 
                                    3
                                 
                              
                              (
                              
                                 
                                    α
                                 
                                 
                                    3
                                 
                                 
                                    ′
                                 
                              
                              )
                           
                        . Fig. 10
                        (a) shows θhf
                        , θk
                         and θa
                         curves during the standard cycle of level walking, which were obtained from experiments by Riener et al. [20]. The standard level walking means that walking speed is about 1.3m/s and the cycle lasts about 1s. During the cycle, about former 60% is stance phase, and the rest is swing phase. Thus, the corresponding 
                           
                              
                                 
                                    α
                                 
                                 
                                    1
                                 
                                 
                                    ′
                                 
                              
                              ,
                              
                              
                                 
                                    α
                                 
                                 
                                    2
                                 
                                 
                                    ′
                                 
                              
                              
                              and
                              
                              
                                 
                                    α
                                 
                                 
                                    3
                                 
                                 
                                    ′
                                 
                              
                           
                         were calculated and drawn as input signals of three cycles in Fig. 10(b).

The feedback signals were shown as Fig. 11
                        (a) and the errors between input signals and feedback signals were dawn as Fig. 11(b). At the beginning of simulation, the error of joint 
                           
                              
                                 
                                    α
                                 
                                 
                                    1
                                 
                                 
                                    ′
                                 
                              
                           
                         is −3.7°, the error of joint 
                           
                              
                                 
                                    α
                                 
                                 
                                    2
                                 
                                 
                                    ′
                                 
                              
                           
                         is 22.9° and the error of joint 
                           
                              
                                 
                                    α
                                 
                                 
                                    3
                                 
                                 
                                    ′
                                 
                              
                           
                         is −2.14°. All the three absolute values of initial errors are larger than the threshold value 1. So the three controllers adopted fuzzy-PID controllers at first, then after the absolute values of errors dropping below the threshold, PID controllers were selected automatically. Fig. 12
                         shows the ADAMS effect pictures of one walking cycle of the co-simulation.

The slope of ground is another key factor affecting walking gaits, except loads and walking speed [29–31]. So stair ascent and descent simulations will be done in this part, which can examine whether the exoskeleton system can adapt to complex terrain or not. Similar to level walking, the joint α
                        1, α
                        2 and α
                        3 need to be controlled during the stair ascent and descent. Thus, θhf
                        , θk
                         and θa
                         of these gaits are required to be known to calculate 
                           
                              
                                 
                                    α
                                 
                                 
                                    1
                                 
                              
                              (
                              
                                 
                                    α
                                 
                                 
                                    1
                                 
                                 
                                    ′
                                 
                              
                           
                        ), 
                           
                              (
                              
                                 
                                    α
                                 
                                 
                                    2
                                 
                              
                              (
                              
                                 
                                    α
                                 
                                 
                                    2
                                 
                                 
                                    ′
                                 
                              
                           
                        ) and 
                           
                              (
                              
                                 
                                    α
                                 
                                 
                                    3
                                 
                              
                              (
                              
                                 
                                    α
                                 
                                 
                                    3
                                 
                                 
                                    ′
                                 
                              
                           
                        ), and Riener’s experiment data [20] were still adopted here, which were shown as Fig. 13
                        (a). The slope of the stair is 30°. According to formulae (1)–(5), the corresponding 
                           
                              
                                 
                                    α
                                 
                                 
                                    1
                                 
                                 
                                    ′
                                 
                              
                           
                        , 
                           
                              
                                 
                                    α
                                 
                                 
                                    2
                                 
                                 
                                    ′
                                 
                              
                           
                         and 
                           
                              
                                 
                                    α
                                 
                                 
                                    3
                                 
                                 
                                    ′
                                 
                              
                           
                         of the stair ascent and descent at the slope of 30°were calculated and drawn as input signals of three cycles in Fig. 13(b). Besides, in the following simulations, the initial values of α
                        1 and α
                        2 are still 40°, which mean that β
                        1
                        =
                        β
                        2
                        =40°.

The feedback signals of the stair ascent and descent were shown as Fig. 14
                        (a1) and (b1), and the errors between input signals and feedback signals were dawn as Fig. 14(a2) and b2). Figs. 15 and 16
                        
                         show the ADAMS effect pictures of the stair ascent and descent cycle of the co-simulation. As shown in the simulation results, the fuzzy-PID/PID controllers have great control performances and the exoskeleton can ascend and descend stairs with the slope of 30°.

The movements, which are squatting down and standing up, can change the center of gravity of the exoskeleton system directly and sharply. So they can test the battery performance and bearing capacity of exoskeletons. Many famous exoskeletons, such as XOS and BLEEX, have been researched on squatting down and standing up. Therefore, squatting down and standing up simulations will be done in this part.

The input signals of 
                           
                              
                                 
                                    α
                                 
                                 
                                    1
                                 
                                 
                                    ′
                                 
                              
                           
                        , 
                           
                              
                                 
                                    α
                                 
                                 
                                    2
                                 
                                 
                                    ′
                                 
                              
                           
                         and 
                           
                              
                                 
                                    α
                                 
                                 
                                    3
                                 
                                 
                                    ′
                                 
                              
                           
                         of a cycle are designed as formulae (6).
                           
                              (6)
                              
                                 
                                    
                                       
                                          
                                             
                                                
                                                   
                                                      
                                                         α
                                                      
                                                      
                                                         1
                                                      
                                                      
                                                         ′
                                                      
                                                   
                                                   =
                                                   
                                                      
                                                         34
                                                      
                                                      
                                                         ∘
                                                      
                                                   
                                                   |
                                                   t
                                                   -
                                                   1
                                                   |
                                                   -
                                                   
                                                      
                                                         32
                                                      
                                                      
                                                         ∘
                                                      
                                                   
                                                
                                             
                                             
                                                
                                                   
                                                      
                                                         
                                                            
                                                               
                                                                  α
                                                               
                                                               
                                                                  2
                                                               
                                                               
                                                                  ′
                                                               
                                                            
                                                            =
                                                            -
                                                            
                                                               
                                                                  α
                                                               
                                                               
                                                                  1
                                                               
                                                               
                                                                  ′
                                                               
                                                            
                                                            
                                                            0
                                                            ⩽
                                                            t
                                                            ⩽
                                                            2
                                                            s
                                                         
                                                      
                                                   
                                                
                                             
                                             
                                                
                                                   
                                                      
                                                         α
                                                      
                                                      
                                                         3
                                                      
                                                      
                                                         ′
                                                      
                                                   
                                                   =
                                                   0
                                                
                                             
                                          
                                       
                                    
                                 
                              
                           
                        
                     

Besides, the initial values of α
                        1 and α
                        2 are 60°, which mean that β
                        1
                        =
                        β
                        2
                        =60°.


                        
                           
                              
                                 
                                    α
                                 
                                 
                                    3
                                 
                              
                              =
                              
                                 
                                    α
                                 
                                 
                                    3
                                 
                                 
                                    ′
                                 
                              
                              =
                              
                                 
                                    0
                                 
                                 
                                    ∘
                                 
                              
                           
                        , which means that the ankle joint was kept at the initial angle 0° all the time during the simulation. The values of 
                           
                              
                                 
                                    α
                                 
                                 
                                    1
                                 
                                 
                                    ′
                                 
                              
                           
                         and 
                           
                              
                                 
                                    α
                                 
                                 
                                    2
                                 
                                 
                                    ′
                                 
                              
                           
                         are equal and opposite. The fuzzy-PID/PID controllers still have great control performances, which were shown as Figs. 17 and 18
                        
                        .

As mentioned above, the hip abduction/adduction of the exoskeleton in the coronal plane also costs much energy and needs to be powered. This powered joint can help the operator overcome obstacles and offer more powered gaits. In this part, side kick of the exoskeleton system will be simulated.

The motion was set as follows, which is still cyclical.
                           
                              (7)
                              
                                 
                                    
                                       
                                          
                                             
                                                
                                                   
                                                      
                                                         α
                                                      
                                                      
                                                         1
                                                      
                                                      
                                                         ′
                                                      
                                                   
                                                   =
                                                   
                                                      
                                                         α
                                                      
                                                      
                                                         2
                                                      
                                                      
                                                         ′
                                                      
                                                   
                                                   =
                                                   
                                                      
                                                         α
                                                      
                                                      
                                                         3
                                                      
                                                      
                                                         ′
                                                      
                                                   
                                                   =
                                                   
                                                      
                                                         0
                                                      
                                                      
                                                         ∘
                                                      
                                                   
                                                
                                             
                                             
                                                
                                                   
                                                      
                                                         α
                                                      
                                                      
                                                         4
                                                      
                                                   
                                                   =
                                                   25
                                                   sin
                                                   (
                                                   180
                                                   t
                                                   )
                                                   
                                                   0
                                                   ⩽
                                                   t
                                                   ⩽
                                                   1
                                                
                                             
                                          
                                       
                                    
                                 
                              
                           
                        
                     

The fuzzy-PID/PD controller was still adopted here and the simulation results were shown as Figs. 19 and 20
                        
                        . The initial error of α
                        4 is less than the threshold value 1, so only the PID loop is working and the fuzzy-PID loop is turned off during the simulation.

@&#CONCLUSION@&#

For exoskeleton-type systems, the complex gait characteristics decide that the control algorithms should better be switch-type and parameter self-tuning. In this paper, a new hybrid algorithm for controlling a novel exoskeleton-human robot system, which is the switch-type parameter self-tuning fuzzy-PID/PID controller, has been presented. Based on whether the error signals are less than the threshold values or not, the controller can easily find the appropriate algorithm to process the data and generate the demand torques to drive the model. Although designing the fuzzy rules and fuzzy parameters may be usually difficult, which needs repeated simulations, but once it is done, the co-simulations will be very smooth. Several humanoid gaits and movements of the exoskeleton-human robot system, which include level walking, stair ascent, stair descent, side kick, squatting down and standing up, were firstly co-simulated and the results show that the fuzzy-PID/PID controllers have great control performances.

Future study will focus on the optimization of fuzzy rules and fuzzy parameters in the co-simulations, which can achieve the optimal control more conveniently and strictly. Besides, the stability concerns about both the mechanical system and the control system will be investigated in the near future.

@&#ACKNOWLEDGMENTS@&#

This study has been supported by a grant from the Major State Basic Research Development Program of China (973 Program) (No. 2013CB035501), and partially by the National High Technology Research and Development Program of China (863 Program) (No. 2011AA040901).

@&#REFERENCES@&#

