@&#MAIN-TITLE@&#Generalized Nash equilibria for SaaS/PaaS Clouds

@&#HIGHLIGHTS@&#


               
               
                  
                     
                        
                           
                           The Cloud service provisioning problem is modeled as a generalized Nash game.


                        
                        
                           
                           We show that a potential function for the game exists.


                        
                        
                           
                           We propose solution methods based on the best response dynamics.


                        
                        
                           
                           Equilibria efficiency is evaluated with respect to the social optimum.


                        
                        
                           
                           Results show that our algorithms can manage at run-time very large scale systems.


                        
                     
                  
               
            

@&#KEYPHRASES@&#

Game theory

Cloud computing

Generalized Nash equilibrium problem

@&#ABSTRACT@&#


               
               
                  Cloud computing is an emerging technology that allows to access computing resources on a pay-per-use basis. The main challenges in this area are the efficient performance management and the energy costs minimization.
                  In this paper we model the service provisioning problem of Cloud Platform-as-a-Service systems as a Generalized Nash Equilibrium Problem and show that a potential function for the game exists. Moreover, we prove that the social optimum problem is convex and we derive some properties of social optima from the corresponding Karush–Kuhn–Tucker system. Next, we propose a distributed solution algorithm based on the best response dynamics and we prove its convergence to generalized Nash equilibria. Finally, we numerically evaluate equilibria in terms of their efficiency with respect to the social optimum of the Cloud by varying our algorithm initial solution. Numerical results show that our algorithm is scalable and very efficient and thus can be adopted for the run-time management of very large scale systems.
               
            

@&#INTRODUCTION@&#

Cloud computing is an emerging paradigm that aims at streamlining the on-demand provisioning of flexible and scalable services accessible through the Internet (Dikaiakos, Katsaros, Mehra, Pallis, & Vakali, 2009). The main idea is to supply users with on-demand access to computing or storage resources and charge fees for their usage. In these models, users pay only for the resources they use and they can access software applications (Software as a Service – SaaS), tools for the development and deployment of Cloud-based applications (Platform as a Service – PaaS) or even low level hardware physical resources (Infrastructure as a Service – IaaS).

In the SaaS paradigm, applications are available over the Web. The SaaS provider hosts both the application and the data, hence the end-user is able to use and access the service from all over the world. With PaaS, applications are developed and deployed on platforms transparently managed by the Cloud provider. The platform typically includes databases, middleware, and also development tools. In IaaS systems, virtual computer environments are provided as services and servers, storage, and network equipment can be outsourced by customers without the expertise to operate them.

Many companies (e.g., Google, Amazon, and Microsoft) are offering Cloud computing services such as Google’s App Engine and Amazon’s Elastic Compute Cloud (EC2) or Microsoft Windows Azure. Large data centers provide the infrastructure behind the Cloud, and virtualization technology (which allows the execution of multiple virtual machines on the same physical machine) makes Cloud computing resources more efficient and cost-effective both for providers and customers. Indeed, end-users obtain the benefits of the infrastructure without the need to implement and administer it directly adding or removing capacity almost instantaneously on a “pay-as-you-use” basis. On the other hand, Cloud providers can maximize the utilization of their physical resources also obtaining economies of scale.

The development of efficient service provisioning policies is among the major issues in Cloud research. Indeed, modern Clouds operate in a new and dynamic world, characterized by continuous changes in the environment and in the system and performance requirements that must be satisfied. Continuous changes occur without warning and in an unpredictable manner, and are outside the control of the Cloud provider. Therefore, advanced solutions need to be developed that manage the Cloud system in a dynamically adaptive fashion, while continuously providing service and performance guarantees. Recent studies (Armbrust et al., 2009; Birke, Chen, & Smirni, 2012; Dikaiakos et al., 2009) have shown that the main challenges for Cloud systems are the reduction of costs and the improvements of performance levels.

Information Technology (IT) analysts state that at the end of 2012, up to 40% of the budgets of Cloud service centers are devoted to energy costs (Cao, Hwang, Li, & Zomaya, 2013; Greenpeace, 2012). Service centers investment grew by 22.1% during 2012 and it is expected it will further grow by another 14.5% in 2013 (Datacenter Dynamics, 2012). Energy efficiency is therefore one of the main focal points on which resource management should be concerned. In addition, providers need to comply with Service Level Agreement (SLA) contracts that determine the revenues gained and penalties incurred on the basis of the level of performance achieved. Quality of Service (QoS) guarantees have to be satisfied despite workload fluctuations, which could span several orders of magnitude within the same business day (Birke et al., 2012; Cao et al., 2013).

The recent development of Cloud systems and the rapid growth of the Internet have led to a remarkable usage of game-theoretic tools. Problems arising in the IT industry, such as quality of service or resource allocation, pricing, and load shedding, cannot be handled with classical optimization approaches because each player can be affected by the actions of all players, not only by his own actions. In this setting, a natural modeling framework involves seeking an equilibrium or stable operating point for the system, provided that it exists. More precisely, each player seeks to optimize his own goal, which depends on the strategies of the other players upon his own, and this optimization is performed simultaneously by different players. An equilibrium (in the sense of Nash) is reached when no player can improve his objective function by changing unilaterally his strategy. A survey of different modeling and solution concepts of networking games, as well as a number of different applications in telecommunications and wireless networks, based on game theory, can be found in Altman, Boulogne, El-Azouzi, Jiménez, and Wynter (2006).

In Cloud computing, game theory methods have been used to provide load balancing and resource allocation solutions. A number of papers consider centralized and decentralized load balancing strategies in a system with parallel servers (see Anselmi & Gaujal (2011) and Haviv & Roughgarden (2007) and the references therein). The requests arrive as a Poisson process, and the service time of incoming jobs is assumed to be known. For such system, the load balancing problem is investigated in two different scenarios: (i) a centralized setting leading to a global optimization problem, in which a dispatcher decides where each job will get service so as to minimize the weighted mean number of jobs in the system, and (ii) a distributed non-cooperative setting leading to a non-cooperative game transformed into a standard convex optimization problem. The paper studies structural properties of both strategies, and the efficiency loss in terms of Price of Anarchy (PoA) (Koutsoupias & Papadimitriou, 1999) of the decentralized scheme relative to the global optimal (centralized) one.

In Yolken and Bambos (2008), the authors propose a pricing mechanism for resource allocation in a utility computing system among competing end-users requests. The fixed available service capacity is allocated among the different flows proportionally to their monetary bids. The paper studies the resulting equilibrium point, establishes convergence of a best-response algorithm, and bounds the efficiency loss of this distributed mechanism. More precisely: End-users requests are represented as job flows in a controlled queueing system. These jobs arrive to the system through a fixed, random process, are stored in a buffer, and then are serviced by the resource in a first come, first served manner. The service rate is set through a proportional share mechanism. Within this framework, the interactions between end-users are modeled as a game. Then, authors show that the equilibrium can be reached in a distributed, asynchronous manner. The paper also reports the sensitivity analysis with respect to the variation of problem’s parameters (e.g., load intensity and relative importance of the competing user requests). Differently from our point of view, in Yolken and Bambos (2008) the problem of the resource allocation is considered for a single virtualized server among competing user requests, while in this paper we consider the Cloud data center at a higher granularity (i.e., VMs).

In this paper we take the perspective of SaaS providers which host their applications at a PaaS provider. Each SaaS provider wants to maximize its profit while complying with QoS requirements of their end-users, which determine the revenues and the penalties on the basis of the achieved performance level. The profit of the SaaS is given by the revenues from SLAs minus the cost sustained for using the resources supplied by the PaaS. The profit maximization is challenging since on-line services see dynamic workloads that fluctuate over multiple time scales (Birke et al., 2012; Croll, 2011). Resources have to be allocated flexibly at run-time according to workload fluctuations. Furthermore, each SaaS behaves selfishly and competes with others SaaSs for the use of resources supplied by the PaaS. The PaaS, in its turn, wants to maximize the revenues obtained providing the resources. The profits are given by the revenues from the SLA with the SaaSs minus the energy costs sustained for running physical servers.

To capture the behavior of SaaSs and PaaS in this conflicting situation, we will model the run-time service provisioning problem as a Generalized Nash Equilibrium Problem (GNEP) (see e.g. Bigi, Castellani, Pappalardo, & Passacantando, 2013; Cavazzuti, Pappalardo, & Passacantando, 2002; Debreu, 1952; Facchinei & Kanzow, 2010; Rosen, 1965), which is an extension of the classical Nash equilibrium problem (Nash, 1951), in which both the objective function and the feasible region of each player depend on the strategies chosen by the other players. We then use results from game theory to develop efficient algorithms for the run-time management and allocation of PaaS resources to competing SaaSs.

In Ardagna, Panicucci, and Passacantando (2011, 2013), we have considered a problem similar to the one faced here, analysing the service provisioning problem with on spot resources. With respect to our previous work, in this paper we extend the game-theoretic model considering a new and more realistic pricing model regulating SaaS and PaaS contract. Furthermore, we explicitly model energy costs of the PaaS infrastructure which requires to include additional decision variables and a totally different solution approach.

The remainder of the paper is organized as follows. Section 2 describes the problem under study. In Section 3, we introduce our model based on the concept of Generalized Nash Equilibrium (GNE); moreover, we prove the existence of a potential function for the game and of social optimum solutions. In Section 4, we prove that the social optimum problem is convex and we derive some properties of social optima from the corresponding Karush–Kuhn–Tucker system. In Section 5, we provide a solution algorithm based on the best reply dynamics and we prove its convergence to GNE. The experimental results discussed in Section 6 demonstrate the efficiency of our algorithm by varying its initial solution. Conclusions are finally drawn in Section 7.

We consider SaaS providers using Cloud computing facilities according to the PaaS paradigm to offer multiple transactional Web-Services (WSs), each service representing a different application.

The hosted WSs can be heterogeneous with respect to resource demands, workload intensities and QoS requirements. The set of WS applications offered by SaaS provider s are denoted by 
                        
                           
                              
                                 A
                              
                              
                                 s
                              
                           
                        
                     , while 
                        
                           S
                        
                      indicates the set of SaaSs. In the following, we denote by 
                        
                           A
                        
                      the set of all WS applications hosted at the PaaS location, i.e., 
                        
                           A
                           
                              
                                 =
                              
                              
                                 def
                              
                           
                           
                              
                                 ∪
                              
                              
                                 s
                                 ∈
                                 S
                              
                           
                           
                              
                                 A
                              
                              
                                 s
                              
                           
                        
                     , and we assume 
                        
                           
                              
                                 A
                              
                              
                                 
                                    
                                       s
                                    
                                    
                                       1
                                    
                                 
                              
                           
                           ∩
                           
                              
                                 A
                              
                              
                                 
                                    
                                       s
                                    
                                    
                                       2
                                    
                                 
                              
                           
                           =
                           ∅
                        
                     , for all 
                        
                           
                              
                                 s
                              
                              
                                 1
                              
                           
                           
                           ≠
                           
                           
                              
                                 s
                              
                              
                                 2
                              
                           
                        
                     .

Each SaaS provider signs with its customers an SLA contract specifying: (i) the QoS levels that it must meet while responding to end-user requests for a given application, and (ii) the corresponding pricing scheme. In particular, we assume SaaSs have to guarantee to their end-users that the average response time when accessing application k is less than or equal to a given threshold 
                        
                           
                              
                                 R
                              
                              
                                 k
                              
                              
                                 S
                              
                           
                        
                     , while the per-request revenue for the SaaS is 
                        
                           
                              
                                 α
                              
                              
                                 k
                              
                           
                        
                      (see Fig. 1
                     ).

In turn, each SaaS provider signs an SLA contract with the PaaS: The PaaS must guarantee that the average response time for WS application k is less than or equal to 
                        
                           
                              
                                 R
                              
                              
                                 k
                              
                              
                                 P
                              
                           
                           (
                           ⩽
                           
                              
                                 R
                              
                              
                                 k
                              
                              
                                 S
                              
                           
                           )
                        
                     . Furthermore, for the execution of a single request 
                        
                           k
                           ∈
                           
                              
                                 A
                              
                              
                                 s
                              
                           
                        
                     , SaaS s pays a fee 
                        
                           
                              
                                 β
                              
                              
                                 k
                              
                           
                        
                      to the PaaS. The SaaS per-request revenue 
                        
                           
                              
                                 α
                              
                              
                                 k
                              
                           
                        
                      is greater than or equal to 
                        
                           
                              
                                 m
                              
                              
                                 k
                              
                           
                           
                           
                              
                                 β
                              
                              
                                 k
                              
                           
                        
                     , where 
                        
                           
                              
                                 m
                              
                              
                                 k
                              
                           
                           >
                           1
                        
                      is the SaaS margin for the execution of individual requests. Both 
                        
                           
                              
                                 R
                              
                              
                                 k
                              
                              
                                 P
                              
                           
                        
                      and 
                        
                           
                              
                                 β
                              
                              
                                 k
                              
                           
                        
                      may vary with the time of the day. Therefore, the SaaS can ask the PaaS provider to reduce its application response time to improve the final end-user experience and thus to increase the loyalty of its customers. However, intuitively, the more stringent are the performance requirements imposed by the SaaS, the higher is the number of resources devoted by the PaaS to the SaaS and overall the higher is the per-request fee 
                        
                           
                              
                                 β
                              
                              
                                 k
                              
                           
                        
                      payed by the SaaS. In particular, we assume that the average response times 
                        
                           
                              
                                 R
                              
                              
                                 k
                              
                              
                                 P
                              
                           
                        
                      enters the SaaS payoff function with a linear function, 
                        
                           
                              
                                 U
                              
                              
                                 k
                              
                           
                           =
                           
                              
                                 δ
                              
                              
                                 s
                              
                           
                           
                           (
                           
                              
                                 R
                              
                              
                                 k
                              
                              
                                 S
                              
                           
                           -
                           
                              
                                 R
                              
                              
                                 k
                              
                              
                                 P
                              
                           
                           )
                        
                     . Linear functions are a flexible mechanism to express the discontent of final end-users as a function of response times and have been widely used in the literature (see e.g. Ardagna, Panicucci, Trubian, & Zhang, 2012; Bennani & Menasce, 2005; Urgaonkar & Shenoy, 2004).

Current Cloud platforms are based on virtualization technology, which allows a flexible management of the overall intrastructure. Therefore, we assume that applications are executed in virtual machines (VMs), which are dynamically instantiated by the PaaS provider. We make the simplifying assumption that each VM hosts a single WS application. Multiple VMs implementing the same WS application can also run in parallel. We also assume that physical servers are dedicated to SaaS providers, i.e. every physical server runs the VMs of the same SaaS. Cloud users usually prefer dedicated servers especially for business critical applications and/or when security requirements are of paramount importance. The use of dedicated servers is becoming widespread in the Cloud market (Amazon Inc., 2013a). For example, Amazon has devoted specific data centers to run applications for US government agencies and contractors (Amazon Inc., 2013c).

For simplicity, we assume that physical servers are homogeneous, having the same processing capacity C. However, our framework can be extended relaxing this latter assumption. In the following, 
                        
                           
                              
                                 N
                              
                              
                                 P
                              
                           
                        
                      denotes the total number of physical servers used for the dedicated execution of WS applications at the PaaS site.

On each physical servers, we assume that SaaS VMs are replicated with a fixed pattern for fault-tolerance reasons (Anselmi & Verloop, 2011) (e.g., for every DBMS instance, two instances of application servers and three instances of web servers are allocated) and if any additional physical server is needed, VMs are replicated on the new server according to this fixed allocation pattern. In the following, we will denote by 
                        
                           
                              
                                 v
                              
                              
                                 sk
                              
                           
                        
                      the proportion of VMs for WS application k hosted by one server dedicated to SaaS s.

The number of physical servers that the PaaS decides to supply to SaaS provider s is denoted by 
                        
                           
                              
                                 N
                              
                              
                                 s
                              
                           
                        
                     . Since the workload of Internet applications can vary by orders of magnitude within the same business day Birke et al. (2012), the physical servers are dynamically allocated by the PaaS provider periodically, e.g., every hour, according to a short-term workload prediction. One hour is also the time unit which is usually adopted by PaaS and IaaS to bill the use of resources to their customers (Amazon Inc., 2013b). We denote by 
                        
                           
                              
                                 Λ
                              
                              
                                 k
                              
                           
                        
                      the prediction for the arrival rate of WS application k.

In this context, each SaaS provider can make the decision of accepting or rejecting a WS application execution request to maximize its own revenue. In other terms, SaaS providers can implement an admission control scheme trading off between the platform costs and the revenues they gain from their customers (Almeida et al., 2010). We assume that such decisions are taken according to some i.i.d. probabilistic law. The resulting application execution rate (or throughput, acceptance rate) is denoted by 
                        
                           
                              
                                 X
                              
                              
                                 k
                              
                           
                           ⩽
                           
                              
                                 Λ
                              
                              
                                 k
                              
                           
                        
                     . SaaS providers may possibly incur in penalties 
                        
                           
                              
                                 p
                              
                              
                                 k
                              
                           
                           ⩾
                           0
                        
                      upon rejection of request executions of k. In order to fix the rejection rate above a fixed threshold and guarantee a minimum availability, SaaS s may decide to guarantee a minimum throughput 
                        
                           
                              
                                 λ
                              
                              
                                 k
                              
                           
                        
                     .

We assume that each physical server runs a Virtual Machine Monitor (VMM) configured in work-conserving mode. The resource allocation mechanism implemented by VMMs can be modeled as a first approximation by the Generalized Processor Sharing (GPS) (Parekh & Gallager, 1994) scheduling (see e.g. Chandra, Gong, & Shenoy, 2003; VMware, 2005). Under GPS, the fraction of the available processing capacity of each server devoted to WS application k at time t is:
                        
                           (1)
                           
                              
                                 
                                    
                                       
                                          ϕ
                                       
                                       
                                          sk
                                       
                                    
                                 
                                 
                                    
                                       
                                          ∑
                                       
                                       
                                          l
                                          ∈
                                          K
                                          (
                                          t
                                          )
                                       
                                    
                                    
                                       
                                          ϕ
                                       
                                       
                                          sl
                                       
                                    
                                 
                              
                              ,
                           
                        
                     where 
                        
                           
                              
                                 ϕ
                              
                              
                                 sk
                              
                           
                        
                      denotes the CPU share, or weight, of application k of the SaaS provider s, and 
                        
                           K
                           (
                           t
                           )
                           ⊆
                           
                              
                                 A
                              
                              
                                 s
                              
                           
                        
                      is the set of WS applications with waiting requests at time t.

To estimate the per-request mean response time achieved with the GPS mechanism, we adopt the approximation proposed in Anselmi and Verloop (2011, Formula (18)). Under the assumption that the requests of a given application are evenly distributed among the physical servers in a probabilistic manner, the mean response time for application k can be approximated by
                        
                           (2)
                           
                              
                                 
                                    R
                                 
                                 
                                    k
                                 
                              
                              =
                              
                                 
                                    
                                       
                                          N
                                       
                                       
                                          s
                                       
                                    
                                 
                                 
                                    
                                       
                                          X
                                       
                                       
                                          k
                                       
                                    
                                 
                              
                              ·
                              
                                 
                                    
                                       
                                          ρ
                                       
                                       
                                          s
                                       
                                    
                                    
                                       
                                          
                                             
                                                ρ
                                             
                                             
                                                sk
                                             
                                          
                                       
                                       
                                          
                                             
                                                ϕ
                                             
                                             
                                                sk
                                             
                                          
                                       
                                    
                                 
                                 
                                    C
                                    
                                       
                                          ∑
                                       
                                       
                                          l
                                          ∈
                                          
                                             
                                                A
                                             
                                             
                                                s
                                             
                                          
                                       
                                    
                                    
                                       
                                          v
                                       
                                       
                                          sl
                                       
                                    
                                    
                                       
                                          
                                             
                                                ρ
                                             
                                             
                                                sl
                                             
                                          
                                       
                                       
                                          
                                             
                                                ϕ
                                             
                                             
                                                sl
                                             
                                          
                                       
                                    
                                    -
                                    
                                       
                                          ρ
                                       
                                       
                                          s
                                       
                                    
                                    
                                       
                                          
                                             
                                                ρ
                                             
                                             
                                                sk
                                             
                                          
                                       
                                       
                                          
                                             
                                                ϕ
                                             
                                             
                                                sk
                                             
                                          
                                       
                                    
                                 
                              
                              ,
                           
                        
                     where 
                        
                           
                              
                                 X
                              
                              
                                 k
                              
                           
                           /
                           
                              
                                 N
                              
                              
                                 s
                              
                           
                        
                      is the arrival rate of application-k requests to one physical server of SaaS s (requests are evenly distributed among the 
                        
                           
                              
                                 N
                              
                              
                                 s
                              
                           
                        
                      physical servers), 
                        
                           
                              
                                 μ
                              
                              
                                 k
                              
                           
                        
                      denotes the maximum service rate of a capacity-one server for executing a class k request, 
                        
                           
                              
                                 ρ
                              
                              
                                 sk
                              
                           
                           
                              
                                 =
                              
                              
                                 def
                              
                           
                           
                              
                                 X
                              
                              
                                 k
                              
                           
                           /
                           (
                           
                              
                                 μ
                              
                              
                                 k
                              
                           
                           
                           
                              
                                 N
                              
                              
                                 s
                              
                           
                           )
                        
                      is interpreted as the “utilization” of application k requests, and 
                        
                           
                              
                                 ρ
                              
                              
                                 s
                              
                           
                           
                              
                                 =
                              
                              
                                 def
                              
                           
                           
                              
                                 ∑
                              
                              
                                 l
                                 ∈
                                 
                                    
                                       A
                                    
                                    
                                       s
                                    
                                 
                              
                           
                           
                              
                                 v
                              
                              
                                 sl
                              
                           
                           
                           
                              
                                 ρ
                              
                              
                                 sl
                              
                           
                        
                     . Formula (2) renders the mean response time of a virtual machine when the VMM uses the GPS mechanism described above; we point the interested reader to Anselmi and Verloop (2011) for further details.

It is shown in Anselmi and Verloop (2011, Theorem 5) that the mean response time of all SaaS-s applications, that is
                        
                           
                              
                                 
                                    
                                       ∑
                                    
                                    
                                       k
                                       ∈
                                       
                                          
                                             A
                                          
                                          
                                             s
                                          
                                       
                                    
                                 
                              
                              
                                 
                                    
                                       
                                          X
                                       
                                       
                                          k
                                       
                                    
                                 
                                 
                                    
                                       
                                          ∑
                                       
                                       
                                          
                                             
                                                k
                                             
                                             
                                                ′
                                             
                                          
                                          ∈
                                          
                                             
                                                A
                                             
                                             
                                                s
                                             
                                          
                                       
                                    
                                    
                                       
                                          X
                                       
                                       
                                          
                                             
                                                k
                                             
                                             
                                                ′
                                             
                                          
                                       
                                    
                                 
                              
                              
                                 
                                    R
                                 
                                 
                                    k
                                 
                              
                           
                        
                     where 
                        
                           
                              
                                 R
                              
                              
                                 k
                              
                           
                        
                      is given by (2), is minimized when 
                        
                           
                              
                                 ϕ
                              
                              
                                 sk
                              
                           
                           =
                           
                              
                                 ρ
                              
                              
                                 sk
                              
                           
                        
                     , for all 
                        
                           k
                           ∈
                           
                              
                                 A
                              
                              
                                 s
                              
                           
                        
                     . We assume that PaaSs make this choice for the CPU shares, which implies that the average WS application k response time becomes (upon substitution in (2) and noting that 
                        
                           
                              
                                 ∑
                              
                              
                                 l
                                 ∈
                                 
                                    
                                       A
                                    
                                    
                                       s
                                    
                                 
                              
                           
                           
                              
                                 v
                              
                              
                                 sl
                              
                           
                           =
                           1
                        
                     )
                        
                           (3)
                           
                              
                                 
                                    R
                                 
                                 
                                    k
                                 
                              
                              =
                              
                                 
                                    
                                       
                                          N
                                       
                                       
                                          s
                                       
                                    
                                 
                                 
                                    
                                       
                                          X
                                       
                                       
                                          k
                                       
                                    
                                 
                              
                              ·
                              
                                 
                                    
                                       
                                          ∑
                                       
                                       
                                          l
                                          ∈
                                          
                                             
                                                A
                                             
                                             
                                                s
                                             
                                          
                                       
                                    
                                    
                                       
                                          v
                                       
                                       
                                          sl
                                       
                                    
                                    
                                       
                                          X
                                       
                                       
                                          l
                                       
                                    
                                    /
                                    
                                       
                                          μ
                                       
                                       
                                          l
                                       
                                    
                                 
                                 
                                    C
                                    
                                    
                                       
                                          N
                                       
                                       
                                          s
                                       
                                    
                                    -
                                    
                                       
                                          ∑
                                       
                                       
                                          l
                                          ∈
                                          
                                             
                                                A
                                             
                                             
                                                s
                                             
                                          
                                       
                                    
                                    
                                       
                                          v
                                       
                                       
                                          sl
                                       
                                    
                                    
                                       
                                          X
                                       
                                       
                                          l
                                       
                                    
                                    /
                                    
                                       
                                          μ
                                       
                                       
                                          l
                                       
                                    
                                 
                              
                              .
                           
                        
                     Such choice of the weights induce a fair load-balancing among the number of on-going WS execution requests. In fact, (3) implies that the number on-going WS execution requests of application k, which is 
                        
                           
                              
                                 R
                              
                              
                                 k
                              
                           
                           
                           
                              
                                 X
                              
                              
                                 k
                              
                           
                           /
                           
                              
                                 N
                              
                              
                                 s
                              
                           
                        
                      by Little’s law Lazowska, Zahorjan, Graham, and Sevcik (1984), is independent of k.
                        Remark 1
                        In the remainder of the paper, we use (3) as model of the response time of application k requests on PaaS s. However, part of the results presented below immediately follow by only using the convexity of 
                              
                                 
                                    
                                       R
                                    
                                    
                                       k
                                    
                                 
                              
                           . This lets us stipulate that they hold also for a wider class of response time functions.

Finally, we denote by c the time unit cost for a physical server when it is turned on, including its power consumption and cooling overhead (Greenpeace, 2012).


                     Table 1
                      summarizes the notation used in this paper for quick reference. Note that, the SaaS SLA contract parameters (e.g., 
                        
                           
                              
                                 R
                              
                              
                                 k
                              
                              
                                 S
                              
                           
                        
                      or 
                        
                           
                              
                                 p
                              
                              
                                 k
                              
                           
                        
                     ) are usually public available and stored in public registries (Ardagna & Pernici, 2007). Requests arrival rates and resource demands (i.e., 
                        
                           
                              
                                 Λ
                              
                              
                                 k
                              
                           
                           ,
                           
                              
                                 μ
                              
                              
                                 k
                              
                           
                        
                     ) can be determined by SaaS and PaaS by prediction methods or monitoring (Andreolini & Casolari, 2006; Ardagna, Casolari, Colajanni, & Panicucci, 2012). Vice versa, platform parameters (e.g., servers time unit costs c and the overall number of servers available N) are known only by the PaaS. Hence, the PaaS has or can determine easily the full knowledge of the system parameters.

As discussed in Section 1, the goal of the PaaS is to maximize its revenues obtained from the execution of SaaS applications minus the cost incurred with the use of the physical servers.

On the other hand, the goal of each SaaS provider is to maximize its payoff which considers the profits obtained from the execution of incoming requests, the costs incurred for the use of the platform and the penalties associated with request rejections. Each SaaS payoff function finally includes also a linear term which takes into account, for each application-k request, the impact of the response time 
                        
                           
                              
                                 R
                              
                              
                                 k
                              
                              
                                 P
                              
                           
                        
                      on the end-user loyalties and expresses the discontent of final end-users experiencing large response times.

As it will be detailed in the following, the behavior of the PaaS and the SaaSs in this conflicting situation can be modeled as a GNEP. Section 3.1 formulates the PaaS resource allocation problem, while Section 3.2 formalizes SaaS providers optimization problems. The Generalized Nash equilibria of the game which is originated with this setting are defined in Section 3.3 and a potential function for the game is described in Section 3.4.

The PaaS optimization problem is:
                           
                              (4)
                              
                                 
                                    
                                       
                                          max
                                       
                                       
                                          
                                             
                                                β
                                             
                                             
                                                k
                                             
                                          
                                          ,
                                          
                                             
                                                N
                                             
                                             
                                                s
                                             
                                          
                                       
                                    
                                 
                                 
                                 
                                    
                                       
                                          ∑
                                       
                                       
                                          k
                                          ∈
                                          A
                                       
                                    
                                 
                                 
                                    
                                       β
                                    
                                    
                                       k
                                    
                                 
                                 
                                 
                                    
                                       X
                                    
                                    
                                       k
                                    
                                 
                                 -
                                 
                                    
                                       
                                          ∑
                                       
                                       
                                          s
                                          ∈
                                          S
                                       
                                    
                                 
                                 c
                                 
                                 
                                    
                                       N
                                    
                                    
                                       s
                                    
                                 
                              
                           
                        subject to:
                           
                              (5)
                              
                                 
                                    
                                       β
                                    
                                    
                                       k
                                    
                                 
                                 ⩽
                                 
                                    
                                       
                                          
                                             α
                                          
                                          
                                             k
                                          
                                       
                                    
                                    
                                       
                                          
                                             m
                                          
                                          
                                             k
                                          
                                       
                                    
                                 
                                 ,
                                 
                                 ∀
                                 
                                 k
                                 ∈
                                 A
                                 ,
                              
                           
                        
                        
                           
                              (6)
                              
                                 
                                    
                                       
                                          ∑
                                       
                                       
                                          s
                                          ∈
                                          S
                                       
                                    
                                 
                                 
                                    
                                       N
                                    
                                    
                                       s
                                    
                                 
                                 ⩽
                                 
                                    
                                       N
                                    
                                    
                                       P
                                    
                                 
                                 ,
                              
                           
                        
                        
                           
                              (7)
                              
                                 
                                    
                                       
                                          
                                             N
                                          
                                          
                                             s
                                          
                                       
                                       
                                          
                                             ∑
                                          
                                          
                                             l
                                             ∈
                                             
                                                
                                                   A
                                                
                                                
                                                   s
                                                
                                             
                                          
                                       
                                       
                                          
                                             v
                                          
                                          
                                             sl
                                          
                                       
                                       
                                          
                                             X
                                          
                                          
                                             l
                                          
                                       
                                       /
                                       
                                          
                                             μ
                                          
                                          
                                             l
                                          
                                       
                                    
                                    
                                       C
                                       
                                       
                                          
                                             N
                                          
                                          
                                             s
                                          
                                       
                                       -
                                       
                                          
                                             ∑
                                          
                                          
                                             l
                                             ∈
                                             
                                                
                                                   A
                                                
                                                
                                                   s
                                                
                                             
                                          
                                       
                                       
                                          
                                             v
                                          
                                          
                                             sl
                                          
                                       
                                       
                                          
                                             X
                                          
                                          
                                             l
                                          
                                       
                                       /
                                       
                                          
                                             μ
                                          
                                          
                                             l
                                          
                                       
                                    
                                 
                                 ⩽
                                 
                                    
                                       R
                                    
                                    
                                       k
                                    
                                    
                                       P
                                    
                                 
                                 
                                 
                                    
                                       X
                                    
                                    
                                       k
                                    
                                 
                                 ,
                                 
                                 ∀
                                 
                                 s
                                 ∈
                                 S
                                 ,
                                 
                                 ∀
                                 
                                 k
                                 ∈
                                 
                                    
                                       A
                                    
                                    
                                       s
                                    
                                 
                                 ,
                              
                           
                        
                        
                           
                              (8)
                              
                                 
                                    
                                       
                                          ∑
                                       
                                       
                                          l
                                          ∈
                                          
                                             
                                                A
                                             
                                             
                                                s
                                             
                                          
                                       
                                    
                                 
                                 
                                    
                                       
                                          
                                             v
                                          
                                          
                                             sl
                                          
                                       
                                       
                                          
                                             X
                                          
                                          
                                             l
                                          
                                       
                                    
                                    
                                       
                                          
                                             μ
                                          
                                          
                                             l
                                          
                                       
                                    
                                 
                                 <
                                 C
                                 
                                 
                                    
                                       N
                                    
                                    
                                       s
                                    
                                 
                                 ,
                                 
                                 ∀
                                 
                                 s
                                 ∈
                                 S
                                 .
                              
                           
                        
                     

The first and second terms of the payoff function are the revenues for the execution of end-user requests and the costs of using physical servers, respectively. Constraint family (5) guarantees each SaaS with a margin for the execution of end-user requests (
                           
                              
                                 
                                    m
                                 
                                 
                                    k
                                 
                              
                              >
                              1
                           
                        ). Constraint (6) entails that the total number of servers adopted is lower than the one available. Constraints (7) guarantee that the average response time for requests execution satisfies the SLA between PaaS and SaaSs. Finally, constraint family (8) guarantees that physical servers resources are not saturated.

In the formulation of the PaaS problem, we have not imposed variables 
                           
                              
                                 
                                    N
                                 
                                 
                                    s
                                 
                              
                           
                         to be integer, as in reality they are. In fact, requiring variables to be integer makes the solution much more difficult. Therefore, we consider the continuous relaxation of the problem. However, experimental results have shown that if the optimal values of the variables are fractional and they are rounded to the closest integer solution, the gap between the solution of the real integer problem and the relaxed one is very small. This is a common assumption adopted in the literature (Zhang, Zhu, Zhani, & Boutaba, 2012) and is also intuitive for large scale data centers including thousands of servers.

We note that the objective function of the PaaS provider is linear and increasing with respect to variables 
                           
                              
                                 
                                    β
                                 
                                 
                                    k
                                 
                              
                           
                         which are bounded above by the constants 
                           
                              
                                 
                                    α
                                 
                                 
                                    k
                                 
                              
                              /
                              
                                 
                                    m
                                 
                                 
                                    k
                                 
                              
                           
                        . Hence 
                           
                              
                                 
                                    β
                                 
                                 
                                    k
                                 
                              
                              =
                              
                                 
                                    α
                                 
                                 
                                    k
                                 
                              
                              /
                              
                                 
                                    m
                                 
                                 
                                    k
                                 
                              
                           
                         in every optimal solution of the PaaS provider for any strategy chosen by the SaaS providers. Thus the PaaS revenue for the execution of end-user requests is equal to 
                           
                              
                                 
                                    ∑
                                 
                                 
                                    k
                                    ∈
                                    A
                                 
                              
                              
                                 
                                    α
                                 
                                 
                                    k
                                 
                              
                              
                              
                                 
                                    X
                                 
                                 
                                    k
                                 
                              
                              /
                              
                                 
                                    m
                                 
                                 
                                    k
                                 
                              
                           
                        , which depends only on variables 
                           
                              
                                 
                                    X
                                 
                                 
                                    k
                                 
                              
                           
                         chosen by SaaS providers and is independent from PaaS variables 
                           
                              
                                 
                                    N
                                 
                                 
                                    s
                                 
                              
                           
                        , hence this term can be deleted from the PaaS objective function. In other words, the PaaS optimization problem consists in minimizing costs of using physical servers. From now on, we assume that the PaaS optimization problem has the following form:
                           
                              (9)
                              
                                 
                                    
                                       
                                          max
                                       
                                       
                                          
                                             
                                                N
                                             
                                             
                                                s
                                             
                                          
                                       
                                    
                                 
                                 
                                 
                                    
                                       Θ
                                    
                                    
                                       p
                                    
                                 
                                 
                                    
                                       
                                          =
                                       
                                       
                                          def
                                       
                                    
                                 
                                 -
                                 
                                    
                                       
                                          ∑
                                       
                                       
                                          s
                                          ∈
                                          S
                                       
                                    
                                 
                                 c
                                 
                                 
                                    
                                       N
                                    
                                    
                                       s
                                    
                                 
                              
                           
                        subject to:
                           
                              (10)
                              
                                 
                                    
                                       
                                          ∑
                                       
                                       
                                          s
                                          ∈
                                          S
                                       
                                    
                                 
                                 
                                    
                                       N
                                    
                                    
                                       s
                                    
                                 
                                 ⩽
                                 
                                    
                                       N
                                    
                                    
                                       P
                                    
                                 
                                 ,
                              
                           
                        
                        
                           
                              (11)
                              
                                 
                                    
                                       
                                          
                                             N
                                          
                                          
                                             s
                                          
                                       
                                       
                                          
                                             ∑
                                          
                                          
                                             l
                                             ∈
                                             
                                                
                                                   A
                                                
                                                
                                                   s
                                                
                                             
                                          
                                       
                                       
                                          
                                             v
                                          
                                          
                                             sl
                                          
                                       
                                       
                                          
                                             X
                                          
                                          
                                             l
                                          
                                       
                                       /
                                       
                                          
                                             μ
                                          
                                          
                                             l
                                          
                                       
                                    
                                    
                                       
                                          
                                             CN
                                          
                                          
                                             s
                                          
                                       
                                       -
                                       
                                          
                                             ∑
                                          
                                          
                                             l
                                             ∈
                                             
                                                
                                                   A
                                                
                                                
                                                   s
                                                
                                             
                                          
                                       
                                       
                                          
                                             v
                                          
                                          
                                             sl
                                          
                                       
                                       
                                          
                                             X
                                          
                                          
                                             l
                                          
                                       
                                       /
                                       
                                          
                                             μ
                                          
                                          
                                             l
                                          
                                       
                                    
                                 
                                 ⩽
                                 
                                    
                                       R
                                    
                                    
                                       k
                                    
                                    
                                       P
                                    
                                 
                                 
                                    
                                       X
                                    
                                    
                                       k
                                    
                                 
                                 ,
                                 
                                 ∀
                                 
                                 s
                                 ∈
                                 S
                                 ,
                                 
                                 ∀
                                 
                                 k
                                 ∈
                                 
                                    
                                       A
                                    
                                    
                                       s
                                    
                                 
                                 ,
                              
                           
                        
                        
                           
                              (12)
                              
                                 
                                    
                                       
                                          ∑
                                       
                                       
                                          l
                                          ∈
                                          
                                             
                                                A
                                             
                                             
                                                s
                                             
                                          
                                       
                                    
                                 
                                 
                                    
                                       v
                                    
                                    
                                       sl
                                    
                                 
                                 
                                 
                                    
                                       X
                                    
                                    
                                       l
                                    
                                 
                                 /
                                 
                                    
                                       μ
                                    
                                    
                                       l
                                    
                                 
                                 <
                                 C
                                 
                                 
                                    
                                       N
                                    
                                    
                                       s
                                    
                                 
                                 ,
                                 
                                 ∀
                                 
                                 s
                                 ∈
                                 S
                                 .
                              
                           
                        
                     

We note that the problem (9)–(12) is easy to solve because constraints (11) and (12) can be rearranged to obtain linear constraints with respect to 
                           
                              
                                 
                                    N
                                 
                                 
                                    s
                                 
                              
                           
                         so that each variable 
                           
                              
                                 
                                    N
                                 
                                 
                                    s
                                 
                              
                           
                         can be optimized separately. Hence the PaaS optimal solution is
                           
                              (13)
                              
                                 
                                    
                                       N
                                    
                                    
                                       s
                                    
                                 
                                 =
                                 
                                    
                                       
                                          max
                                       
                                       
                                          k
                                          ∈
                                          
                                             
                                                A
                                             
                                             
                                                s
                                             
                                          
                                       
                                    
                                 
                                 
                                 
                                    
                                       
                                          
                                             R
                                          
                                          
                                             k
                                          
                                          
                                             P
                                          
                                       
                                       
                                       
                                          
                                             X
                                          
                                          
                                             k
                                          
                                       
                                       
                                       
                                          
                                             ∑
                                          
                                          
                                             l
                                             ∈
                                             
                                                
                                                   A
                                                
                                                
                                                   s
                                                
                                             
                                          
                                       
                                       
                                          
                                             v
                                          
                                          
                                             sl
                                          
                                       
                                       
                                       
                                          
                                             X
                                          
                                          
                                             l
                                          
                                       
                                       /
                                       
                                          
                                             μ
                                          
                                          
                                             l
                                          
                                       
                                    
                                    
                                       C
                                       
                                       
                                          
                                             R
                                          
                                          
                                             k
                                          
                                          
                                             P
                                          
                                       
                                       
                                       
                                          
                                             X
                                          
                                          
                                             k
                                          
                                       
                                       -
                                       
                                          
                                             ∑
                                          
                                          
                                             l
                                             ∈
                                             
                                                
                                                   A
                                                
                                                
                                                   s
                                                
                                             
                                          
                                       
                                       
                                          
                                             v
                                          
                                          
                                             sl
                                          
                                       
                                       
                                       
                                          
                                             X
                                          
                                          
                                             l
                                          
                                       
                                       /
                                       
                                          
                                             μ
                                          
                                          
                                             l
                                          
                                       
                                    
                                 
                                 ,
                                 
                                 ∀
                                 
                                 s
                                 ∈
                                 S
                                 ,
                              
                           
                        provided that the sum of the right-hand sides does not exceed the upper bound 
                           
                              
                                 
                                    N
                                 
                                 
                                    P
                                 
                              
                           
                        ; otherwise there is no feasible solution.

The SaaS s optimization problem is:
                           
                              (14)
                              
                                 
                                    
                                       
                                          max
                                       
                                       
                                          
                                             
                                                X
                                             
                                             
                                                k
                                             
                                          
                                          ,
                                          
                                             
                                                R
                                             
                                             
                                                k
                                             
                                             
                                                P
                                             
                                          
                                       
                                    
                                 
                                 
                                 
                                    
                                       Θ
                                    
                                    
                                       s
                                    
                                 
                                 
                                    
                                       
                                          =
                                       
                                       
                                          def
                                       
                                    
                                 
                                 
                                    
                                       
                                          ∑
                                       
                                       
                                          k
                                          ∈
                                          
                                             
                                                A
                                             
                                             
                                                s
                                             
                                          
                                       
                                    
                                 
                                 
                                    
                                       
                                          
                                             
                                                α
                                             
                                             
                                                k
                                             
                                          
                                          
                                          
                                             
                                                
                                                   1
                                                   -
                                                   
                                                      
                                                         1
                                                      
                                                      
                                                         
                                                            
                                                               m
                                                            
                                                            
                                                               k
                                                            
                                                         
                                                      
                                                   
                                                
                                             
                                          
                                          
                                          
                                             
                                                X
                                             
                                             
                                                k
                                             
                                          
                                          -
                                          
                                             
                                                p
                                             
                                             
                                                k
                                             
                                          
                                          
                                          (
                                          
                                             
                                                Λ
                                             
                                             
                                                k
                                             
                                          
                                          -
                                          
                                             
                                                X
                                             
                                             
                                                k
                                             
                                          
                                          )
                                          +
                                          
                                             
                                                δ
                                             
                                             
                                                s
                                             
                                          
                                          
                                          (
                                          
                                             
                                                R
                                             
                                             
                                                k
                                             
                                             
                                                S
                                             
                                          
                                          -
                                          
                                             
                                                R
                                             
                                             
                                                k
                                             
                                             
                                                P
                                             
                                          
                                          )
                                          
                                          
                                             
                                                X
                                             
                                             
                                                k
                                             
                                          
                                       
                                    
                                 
                              
                           
                        subject to:
                           
                              (15)
                              
                                 
                                    
                                       λ
                                    
                                    
                                       k
                                    
                                 
                                 ⩽
                                 
                                    
                                       X
                                    
                                    
                                       k
                                    
                                 
                                 ⩽
                                 
                                    
                                       Λ
                                    
                                    
                                       k
                                    
                                 
                                 ,
                                 
                                 ∀
                                 
                                 k
                                 ∈
                                 
                                    
                                       A
                                    
                                    
                                       s
                                    
                                 
                                 ,
                              
                           
                        
                        
                           
                              (16)
                              
                                 
                                    
                                       R
                                    
                                    
                                       k
                                    
                                    
                                       P
                                    
                                 
                                 ⩽
                                 
                                    
                                       R
                                    
                                    
                                       k
                                    
                                    
                                       S
                                    
                                 
                                 ,
                                 
                                 ∀
                                 
                                 k
                                 ∈
                                 
                                    
                                       A
                                    
                                    
                                       s
                                    
                                 
                                 ,
                              
                           
                        
                        
                           
                              (17)
                              
                                 
                                    
                                       
                                          
                                             N
                                          
                                          
                                             s
                                          
                                       
                                       
                                          
                                             ∑
                                          
                                          
                                             l
                                             ∈
                                             
                                                
                                                   A
                                                
                                                
                                                   s
                                                
                                             
                                          
                                       
                                       
                                          
                                             v
                                          
                                          
                                             sl
                                          
                                       
                                       
                                          
                                             X
                                          
                                          
                                             l
                                          
                                       
                                       /
                                       
                                          
                                             μ
                                          
                                          
                                             l
                                          
                                       
                                    
                                    
                                       
                                          
                                             CN
                                          
                                          
                                             s
                                          
                                       
                                       -
                                       
                                          
                                             ∑
                                          
                                          
                                             l
                                             ∈
                                             
                                                
                                                   A
                                                
                                                
                                                   s
                                                
                                             
                                          
                                       
                                       
                                          
                                             v
                                          
                                          
                                             sl
                                          
                                       
                                       
                                          
                                             X
                                          
                                          
                                             l
                                          
                                       
                                       /
                                       
                                          
                                             μ
                                          
                                          
                                             l
                                          
                                       
                                    
                                 
                                 ⩽
                                 
                                    
                                       R
                                    
                                    
                                       k
                                    
                                    
                                       P
                                    
                                 
                                 
                                 
                                    
                                       X
                                    
                                    
                                       k
                                    
                                 
                                 ,
                                 
                                 ∀
                                 
                                 k
                                 ∈
                                 
                                    
                                       A
                                    
                                    
                                       s
                                    
                                 
                                 ,
                              
                           
                        
                        
                           
                              (18)
                              
                                 
                                    
                                       
                                          ∑
                                       
                                       
                                          l
                                          ∈
                                          
                                             
                                                A
                                             
                                             
                                                s
                                             
                                          
                                       
                                    
                                 
                                 
                                    
                                       v
                                    
                                    
                                       sl
                                    
                                 
                                 
                                    
                                       X
                                    
                                    
                                       l
                                    
                                 
                                 /
                                 
                                    
                                       μ
                                    
                                    
                                       l
                                    
                                 
                                 <
                                 
                                    
                                       CN
                                    
                                    
                                       s
                                    
                                 
                                 .
                              
                           
                        
                     

The first terms of the payoff function compute the net revenues obtained from the execution of end-users’ request. The second terms determine the penalties incurred with request rejections. Finally, the last term evaluates the response time 
                           
                              
                                 
                                    R
                                 
                                 
                                    k
                                 
                                 
                                    P
                                 
                              
                           
                         for WS application k requests according to the utility function established in the SLA between the SaaS and each end-user. Constraint family (15) states that 
                           
                              
                                 
                                    X
                                 
                                 
                                    k
                                 
                              
                           
                         cannot be larger than the actual arrival rate 
                           
                              
                                 
                                    Λ
                                 
                                 
                                    k
                                 
                              
                           
                         and smaller than the minimum admission rate 
                           
                              
                                 
                                    λ
                                 
                                 
                                    k
                                 
                              
                           
                        . Constraint family (16) entails that the response time for application k negotiated with the PaaS is smaller than 
                           
                              
                                 
                                    R
                                 
                                 
                                    k
                                 
                                 
                                    S
                                 
                              
                           
                        . As in the previous section, constraints (17) and (18) guarantee that the application response time satisfies the SLA and that physical servers are not saturated, respectively.

The model resulting from the optimization problems described in the previous sections is a Generalized Nash Equilibrium Problem with joint constraints, where the players are the PaaS and SaaS providers: The strategies of the PaaS provider are 
                           
                              N
                              =
                              
                                 
                                    (
                                    
                                       
                                          N
                                       
                                       
                                          s
                                       
                                    
                                    )
                                 
                                 
                                    s
                                    ∈
                                    S
                                 
                              
                           
                        , the strategies of each SaaS provider s are 
                           
                              
                                 
                                    X
                                 
                                 
                                    s
                                 
                              
                              =
                              
                                 
                                    (
                                    
                                       
                                          X
                                       
                                       
                                          k
                                       
                                    
                                    )
                                 
                                 
                                    k
                                    ∈
                                    
                                       
                                          A
                                       
                                       
                                          s
                                       
                                    
                                 
                              
                           
                         and 
                           
                              
                                 
                                    R
                                 
                                 
                                    s
                                 
                                 
                                    P
                                 
                              
                              =
                              
                                 
                                    (
                                    
                                       
                                          R
                                       
                                       
                                          k
                                       
                                       
                                          P
                                       
                                    
                                    )
                                 
                                 
                                    k
                                    ∈
                                    
                                       
                                          A
                                       
                                       
                                          s
                                       
                                    
                                 
                              
                           
                        . Each SaaS provider shares constraints (17) and (18) with the PaaS provider.

In this setting, a Generalized Nash Equilibrium (GNE) is a set of strategies such that no player can improve its payoff function by changing its strategy unilaterally (Facchinei & Kanzow, 2010), i.e. a GNE is a vector 
                           
                              (
                              
                                 
                                    X
                                 
                                 
                                    ‾
                                 
                              
                              ,
                              
                                 
                                    
                                       
                                          R
                                       
                                       
                                          ‾
                                       
                                    
                                 
                                 
                                    P
                                 
                              
                              ,
                              
                                 
                                    N
                                 
                                 
                                    ‾
                                 
                              
                              )
                           
                         such that the following relations hold:
                           
                              (19)
                              
                                 
                                    
                                       Θ
                                    
                                    
                                       p
                                    
                                 
                                 (
                                 
                                    
                                       N
                                    
                                    
                                       ‾
                                    
                                 
                                 )
                                 ⩾
                                 
                                    
                                       Θ
                                    
                                    
                                       p
                                    
                                 
                                 (
                                 N
                                 )
                                 ,
                                 
                                 ∀
                                 
                                 N
                                 s
                                 .
                                 t
                                 .
                                 (
                                 
                                    
                                       X
                                    
                                    
                                       ‾
                                    
                                 
                                 ,
                                 
                                    
                                       
                                          
                                             R
                                          
                                          
                                             ‾
                                          
                                       
                                    
                                    
                                       P
                                    
                                 
                                 ,
                                 N
                                 )
                                 
                                 satisfies constraints
                                 
                                 
                                    (10)–(12),
                              
                           
                        and for all 
                           
                              s
                              ∈
                              S
                           
                        
                        
                           
                              (20)
                              
                                 
                                    
                                       
                                          
                                             
                                                Θ
                                             
                                             
                                                s
                                             
                                          
                                          (
                                          
                                             
                                                
                                                   
                                                      X
                                                   
                                                   
                                                      ‾
                                                   
                                                
                                             
                                             
                                                s
                                             
                                          
                                          ,
                                          
                                             
                                                
                                                   
                                                      R
                                                   
                                                   
                                                      ‾
                                                   
                                                
                                             
                                             
                                                s
                                             
                                             
                                                P
                                             
                                          
                                          )
                                          ⩾
                                          
                                             
                                                Θ
                                             
                                             
                                                s
                                             
                                          
                                          (
                                          
                                             
                                                X
                                             
                                             
                                                s
                                             
                                          
                                          ,
                                          
                                             
                                                R
                                             
                                             
                                                s
                                             
                                             
                                                P
                                             
                                          
                                          )
                                          ,
                                       
                                       
                                          ∀
                                          
                                          (
                                          
                                             
                                                X
                                             
                                             
                                                s
                                             
                                          
                                          ,
                                          
                                             
                                                R
                                             
                                             
                                                s
                                             
                                             
                                                P
                                             
                                          
                                          )
                                          
                                          s
                                          .
                                          t
                                          .
                                          
                                          (
                                          
                                             
                                                X
                                             
                                             
                                                s
                                             
                                          
                                          ,
                                          
                                             
                                                R
                                             
                                             
                                                s
                                             
                                             
                                                P
                                             
                                          
                                          ,
                                          
                                             
                                                N
                                             
                                             
                                                ‾
                                             
                                          
                                          )
                                       
                                    
                                    
                                       
                                       
                                          satisfies constraints
                                          
                                          
                                             (15)–(18).
                                       
                                    
                                 
                              
                           
                        
                     

Since (i) the payoff function 
                           
                              
                                 
                                    Θ
                                 
                                 
                                    p
                                 
                              
                           
                         of PaaS provider depends only on his own strategies 
                           
                              
                                 
                                    N
                                 
                                 
                                    s
                                 
                              
                           
                        , (ii) the payoff function 
                           
                              
                                 
                                    Θ
                                 
                                 
                                    s
                                 
                              
                           
                         of each SaaS provider s only depends on his own strategies 
                           
                              
                                 
                                    X
                                 
                                 
                                    s
                                 
                              
                           
                         and 
                           
                              
                                 
                                    R
                                 
                                 
                                    s
                                 
                                 
                                    P
                                 
                              
                           
                        , and (iii) constraints (17) and (18) are shared among the players, we can conclude that this game is a generalized potential game (Facchinei, Piccialli, & Sciandrone, 2011; Monderer & Shapley, 1996) where the potential function is simply the sum of the players payoff functions. This potential function represents a social welfare for the game.
                           Proposition 1
                           
                              The function
                              
                                 
                                    (21)
                                    
                                       Π
                                       (
                                       X
                                       ,
                                       
                                          
                                             R
                                          
                                          
                                             P
                                          
                                       
                                       ,
                                       N
                                       )
                                       
                                          
                                             
                                                =
                                             
                                             
                                                def
                                             
                                          
                                       
                                       
                                          
                                             
                                                ∑
                                             
                                             
                                                s
                                                ∈
                                                S
                                             
                                          
                                       
                                       
                                          
                                             
                                                ∑
                                             
                                             
                                                k
                                                ∈
                                                
                                                   
                                                      A
                                                   
                                                   
                                                      s
                                                   
                                                
                                             
                                          
                                       
                                       
                                          
                                             
                                                
                                                   
                                                      α
                                                   
                                                   
                                                      k
                                                   
                                                
                                                
                                                
                                                   
                                                      
                                                         1
                                                         -
                                                         
                                                            
                                                               1
                                                            
                                                            
                                                               
                                                                  
                                                                     m
                                                                  
                                                                  
                                                                     k
                                                                  
                                                               
                                                            
                                                         
                                                      
                                                   
                                                
                                                
                                                
                                                   
                                                      X
                                                   
                                                   
                                                      k
                                                   
                                                
                                                -
                                                
                                                   
                                                      p
                                                   
                                                   
                                                      k
                                                   
                                                
                                                
                                                (
                                                
                                                   
                                                      Λ
                                                   
                                                   
                                                      k
                                                   
                                                
                                                -
                                                
                                                   
                                                      X
                                                   
                                                   
                                                      k
                                                   
                                                
                                                )
                                                +
                                                
                                                   
                                                      δ
                                                   
                                                   
                                                      s
                                                   
                                                
                                                
                                                (
                                                
                                                   
                                                      R
                                                   
                                                   
                                                      k
                                                   
                                                   
                                                      S
                                                   
                                                
                                                -
                                                
                                                   
                                                      R
                                                   
                                                   
                                                      k
                                                   
                                                   
                                                      P
                                                   
                                                
                                                )
                                                
                                                
                                                   
                                                      X
                                                   
                                                   
                                                      k
                                                   
                                                
                                             
                                          
                                       
                                       -
                                       
                                          
                                             
                                                ∑
                                             
                                             
                                                s
                                                ∈
                                                S
                                             
                                          
                                       
                                       c
                                       
                                       
                                          
                                             N
                                          
                                          
                                             s
                                          
                                       
                                    
                                 
                              
                              is a potential for the game.
                           

We denote by 
                           
                              Ω
                           
                         the feasible region containing the variables of all the players, i.e.
                           
                              
                                 Ω
                                 =
                                 {
                                 (
                                 X
                                 ,
                                 
                                    
                                       R
                                    
                                    
                                       P
                                    
                                 
                                 ,
                                 N
                                 )
                                 :
                                 
                                 
                                    (10), (11),
                                 
                                 
                                    (12)
                                 
                                 
                                 hold and
                                 
                                 
                                    (15)
                                 
                                 
                                 and
                                 
                                 
                                    (16)
                                 
                                 
                                 hold for all
                                 
                                 s
                                 ∈
                                 S
                                 }
                                 .
                              
                           
                        Since this is a generalized potential game, we can assume that the potential 
                           
                              Π
                           
                         is the payoff function of each player; therefore each global maximizer of 
                           
                              Π
                           
                         on the set 
                           
                              Ω
                           
                        , called social optimum, is a special Generalized Nash Equilibrium (GNE). In other words, social optima represent the GNE which are optimal from a social point of view.
                           Proposition 2
                           
                              There exists at least one social optimum.
                           

First, we prove that 
                                 
                                    Ω
                                 
                               is a closed set. For any 
                                 
                                    (
                                    X
                                    ,
                                    
                                       
                                          R
                                       
                                       
                                          P
                                       
                                    
                                    ,
                                    N
                                    )
                                    ∈
                                    Ω
                                 
                               we have:
                                 
                                    
                                       
                                          
                                             
                                             
                                                
                                                   C
                                                   
                                                   
                                                      
                                                         N
                                                      
                                                      
                                                         s
                                                      
                                                   
                                                   -
                                                   
                                                      
                                                         
                                                            ∑
                                                         
                                                         
                                                            l
                                                            ∈
                                                            
                                                               
                                                                  A
                                                               
                                                               
                                                                  s
                                                               
                                                            
                                                         
                                                      
                                                   
                                                   
                                                      
                                                         
                                                            
                                                               v
                                                            
                                                            
                                                               sl
                                                            
                                                         
                                                         
                                                            
                                                               X
                                                            
                                                            
                                                               l
                                                            
                                                         
                                                      
                                                      
                                                         
                                                            
                                                               μ
                                                            
                                                            
                                                               l
                                                            
                                                         
                                                      
                                                   
                                                   ⩾
                                                   
                                                      
                                                         
                                                            
                                                               N
                                                            
                                                            
                                                               s
                                                            
                                                         
                                                         
                                                            
                                                               ∑
                                                            
                                                            
                                                               l
                                                               ∈
                                                               
                                                                  
                                                                     A
                                                                  
                                                                  
                                                                     s
                                                                  
                                                               
                                                            
                                                         
                                                         
                                                            
                                                               
                                                                  
                                                                     v
                                                                  
                                                                  
                                                                     sl
                                                                  
                                                               
                                                               
                                                                  
                                                                     X
                                                                  
                                                                  
                                                                     l
                                                                  
                                                               
                                                            
                                                            
                                                               
                                                                  
                                                                     μ
                                                                  
                                                                  
                                                                     l
                                                                  
                                                               
                                                            
                                                         
                                                      
                                                      
                                                         
                                                            
                                                               R
                                                            
                                                            
                                                               k
                                                            
                                                            
                                                               P
                                                            
                                                         
                                                         
                                                         
                                                            
                                                               X
                                                            
                                                            
                                                               k
                                                            
                                                         
                                                      
                                                   
                                                   
                                                   [
                                                   from
                                                   
                                                   
                                                      (11)
                                                   
                                                   ]
                                                
                                             
                                          
                                          
                                             
                                             
                                                
                                                   ⩾
                                                   
                                                      
                                                         
                                                            
                                                               N
                                                            
                                                            
                                                               s
                                                            
                                                         
                                                         
                                                            
                                                               ∑
                                                            
                                                            
                                                               l
                                                               ∈
                                                               
                                                                  
                                                                     A
                                                                  
                                                                  
                                                                     s
                                                                  
                                                               
                                                            
                                                         
                                                         
                                                            
                                                               
                                                                  
                                                                     v
                                                                  
                                                                  
                                                                     sl
                                                                  
                                                               
                                                               
                                                                  
                                                                     X
                                                                  
                                                                  
                                                                     l
                                                                  
                                                               
                                                            
                                                            
                                                               
                                                                  
                                                                     μ
                                                                  
                                                                  
                                                                     l
                                                                  
                                                               
                                                            
                                                         
                                                      
                                                      
                                                         
                                                            
                                                               R
                                                            
                                                            
                                                               k
                                                            
                                                            
                                                               S
                                                            
                                                         
                                                         
                                                         
                                                            
                                                               Λ
                                                            
                                                            
                                                               k
                                                            
                                                         
                                                      
                                                   
                                                   
                                                   [
                                                   from
                                                   
                                                   
                                                      (15)
                                                   
                                                   
                                                   and
                                                   
                                                      (16)
                                                   
                                                   ]
                                                
                                             
                                          
                                          
                                             
                                             
                                                
                                                   ⩾
                                                   
                                                      
                                                         
                                                            
                                                               
                                                                  
                                                                     
                                                                        
                                                                           ∑
                                                                        
                                                                        
                                                                           l
                                                                           ∈
                                                                           
                                                                              
                                                                                 A
                                                                              
                                                                              
                                                                                 s
                                                                              
                                                                           
                                                                        
                                                                     
                                                                     
                                                                        
                                                                           
                                                                              
                                                                                 v
                                                                              
                                                                              
                                                                                 sl
                                                                              
                                                                           
                                                                           
                                                                              
                                                                                 X
                                                                              
                                                                              
                                                                                 l
                                                                              
                                                                           
                                                                        
                                                                        
                                                                           
                                                                              
                                                                                 μ
                                                                              
                                                                              
                                                                                 l
                                                                              
                                                                           
                                                                        
                                                                     
                                                                  
                                                               
                                                            
                                                            
                                                               2
                                                            
                                                         
                                                      
                                                      
                                                         C
                                                         
                                                         
                                                            
                                                               R
                                                            
                                                            
                                                               k
                                                            
                                                            
                                                               S
                                                            
                                                         
                                                         
                                                         
                                                            
                                                               Λ
                                                            
                                                            
                                                               k
                                                            
                                                         
                                                      
                                                   
                                                   
                                                   [
                                                   from
                                                   
                                                   
                                                      (12)
                                                   
                                                   ]
                                                
                                             
                                          
                                          
                                             
                                             
                                                
                                                   ⩾
                                                   
                                                      
                                                         
                                                            
                                                               
                                                                  
                                                                     
                                                                        
                                                                           ∑
                                                                        
                                                                        
                                                                           l
                                                                           ∈
                                                                           
                                                                              
                                                                                 A
                                                                              
                                                                              
                                                                                 s
                                                                              
                                                                           
                                                                        
                                                                     
                                                                     
                                                                        
                                                                           
                                                                              
                                                                                 v
                                                                              
                                                                              
                                                                                 sl
                                                                              
                                                                           
                                                                           
                                                                              
                                                                                 λ
                                                                              
                                                                              
                                                                                 l
                                                                              
                                                                           
                                                                        
                                                                        
                                                                           
                                                                              
                                                                                 μ
                                                                              
                                                                              
                                                                                 l
                                                                              
                                                                           
                                                                        
                                                                     
                                                                  
                                                               
                                                            
                                                            
                                                               2
                                                            
                                                         
                                                      
                                                      
                                                         C
                                                         
                                                         
                                                            
                                                               R
                                                            
                                                            
                                                               k
                                                            
                                                            
                                                               S
                                                            
                                                         
                                                         
                                                         
                                                            
                                                               Λ
                                                            
                                                            
                                                               k
                                                            
                                                         
                                                      
                                                   
                                                   
                                                   [
                                                   from
                                                   
                                                   
                                                      (15)
                                                   
                                                   ]
                                                
                                             
                                          
                                       
                                    
                                 
                              for all 
                                 
                                    s
                                    ∈
                                    S
                                 
                               and 
                                 
                                    k
                                    ∈
                                    
                                       
                                          A
                                       
                                       
                                          s
                                       
                                    
                                 
                              . Therefore we obtain that
                                 
                                    (22)
                                    
                                       C
                                       
                                       
                                          
                                             N
                                          
                                          
                                             s
                                          
                                       
                                       -
                                       
                                          
                                             
                                                ∑
                                             
                                             
                                                l
                                                ∈
                                                
                                                   
                                                      A
                                                   
                                                   
                                                      s
                                                   
                                                
                                             
                                          
                                       
                                       
                                          
                                             
                                                
                                                   v
                                                
                                                
                                                   sl
                                                
                                             
                                             
                                                
                                                   X
                                                
                                                
                                                   l
                                                
                                             
                                          
                                          
                                             
                                                
                                                   μ
                                                
                                                
                                                   l
                                                
                                             
                                          
                                       
                                       ⩾
                                       
                                          
                                             
                                                max
                                             
                                             
                                                k
                                                ∈
                                                
                                                   
                                                      A
                                                   
                                                   
                                                      s
                                                   
                                                
                                             
                                          
                                       
                                       
                                          
                                             
                                                
                                                   
                                                      
                                                         
                                                            
                                                               
                                                                  
                                                                     
                                                                        ∑
                                                                     
                                                                     
                                                                        l
                                                                        ∈
                                                                        
                                                                           
                                                                              A
                                                                           
                                                                           
                                                                              s
                                                                           
                                                                        
                                                                     
                                                                  
                                                                  
                                                                     
                                                                        
                                                                           
                                                                              v
                                                                           
                                                                           
                                                                              sl
                                                                           
                                                                        
                                                                        
                                                                           
                                                                              λ
                                                                           
                                                                           
                                                                              l
                                                                           
                                                                        
                                                                     
                                                                     
                                                                        
                                                                           
                                                                              μ
                                                                           
                                                                           
                                                                              l
                                                                           
                                                                        
                                                                     
                                                                  
                                                               
                                                            
                                                         
                                                         
                                                            2
                                                         
                                                      
                                                   
                                                   
                                                      C
                                                      
                                                      
                                                         
                                                            R
                                                         
                                                         
                                                            k
                                                         
                                                         
                                                            S
                                                         
                                                      
                                                      
                                                      
                                                         
                                                            Λ
                                                         
                                                         
                                                            k
                                                         
                                                      
                                                   
                                                
                                             
                                          
                                       
                                       
                                       ∀
                                       
                                       s
                                       ∈
                                       S
                                       ,
                                    
                                 
                              hence in the definition of 
                                 
                                    Ω
                                 
                               we can replace constraints (12) with constraints (22), thus 
                                 
                                    Ω
                                 
                               is a closed set. Since 
                                 
                                    Ω
                                 
                               is also bounded and 
                                 
                                    Π
                                 
                               is continuous, the existence of social optima follows from the well-known Weierstrass theorem. □

The Cloud provisioning game is extremely challenging since the number of SaaS providers 
                        
                           |
                           S
                           |
                        
                      and WS applications 
                        
                           |
                           A
                           |
                        
                      characterizing problem instances of interest in practice are extremely large (i.e., hundreds of SaaS and thousands of applications (Birke et al., 2012)). In order to identify efficient solution methods, in this section we analyze the social optimum problem determining its main properties.

In particular, we will show that constraints (11) hold as equality in any social optimum and that the social optimum problem is convex. Furthermore, bounds relating the platform capacity, the energy costs and the penalties incurred in case of requests rejection will be identified for interesting system regimes.
                        Proposition 3
                        
                           If 
                           
                              
                                 (
                                 
                                    
                                       X
                                    
                                    
                                       ‾
                                    
                                 
                                 ,
                                 
                                    
                                       
                                          
                                             R
                                          
                                          
                                             ‾
                                          
                                       
                                    
                                    
                                       P
                                    
                                 
                                 ,
                                 
                                    
                                       N
                                    
                                    
                                       ‾
                                    
                                 
                                 )
                              
                            
                           is a social optimum, then the response time constraints 
                           
                              (11)
                            
                           are all active, i.e.
                           
                              
                                 (23)
                                 
                                    
                                       
                                          
                                             
                                                
                                                   
                                                      N
                                                   
                                                   
                                                      ‾
                                                   
                                                
                                             
                                             
                                                s
                                             
                                          
                                          
                                             
                                                ∑
                                             
                                             
                                                l
                                                ∈
                                                
                                                   
                                                      A
                                                   
                                                   
                                                      s
                                                   
                                                
                                             
                                          
                                          
                                             
                                                v
                                             
                                             
                                                sl
                                             
                                          
                                          
                                             
                                                
                                                   
                                                      X
                                                   
                                                   
                                                      ‾
                                                   
                                                
                                             
                                             
                                                l
                                             
                                          
                                          /
                                          
                                             
                                                μ
                                             
                                             
                                                l
                                             
                                          
                                       
                                       
                                          C
                                          
                                          
                                             
                                                
                                                   
                                                      N
                                                   
                                                   
                                                      ‾
                                                   
                                                
                                             
                                             
                                                s
                                             
                                          
                                          -
                                          
                                             
                                                ∑
                                             
                                             
                                                l
                                                ∈
                                                
                                                   
                                                      A
                                                   
                                                   
                                                      s
                                                   
                                                
                                             
                                          
                                          
                                             
                                                v
                                             
                                             
                                                sl
                                             
                                          
                                          
                                             
                                                
                                                   
                                                      X
                                                   
                                                   
                                                      ‾
                                                   
                                                
                                             
                                             
                                                l
                                             
                                          
                                          /
                                          
                                             
                                                μ
                                             
                                             
                                                l
                                             
                                          
                                       
                                    
                                    =
                                    
                                       
                                          
                                             
                                                R
                                             
                                             
                                                ‾
                                             
                                          
                                       
                                       
                                          k
                                       
                                       
                                          P
                                       
                                    
                                    
                                    
                                       
                                          
                                             
                                                X
                                             
                                             
                                                ‾
                                             
                                          
                                       
                                       
                                          k
                                       
                                    
                                    ,
                                    
                                    ∀
                                    
                                    s
                                    ∈
                                    S
                                    ,
                                    
                                    ∀
                                    
                                    k
                                    ∈
                                    
                                       
                                          A
                                       
                                       
                                          s
                                       
                                    
                                    .
                                 
                              
                           
                        

Suppose, by contradiction, that there exists an index 
                              
                                 k
                                 ∈
                                 
                                    
                                       A
                                    
                                    
                                       s
                                    
                                 
                              
                           , for some s, such that
                              
                                 
                                    
                                       
                                          
                                             
                                                
                                                   
                                                      N
                                                   
                                                   
                                                      ‾
                                                   
                                                
                                             
                                             
                                                s
                                             
                                          
                                          
                                             
                                                ∑
                                             
                                             
                                                l
                                                ∈
                                                
                                                   
                                                      A
                                                   
                                                   
                                                      s
                                                   
                                                
                                             
                                          
                                          
                                             
                                                v
                                             
                                             
                                                sl
                                             
                                          
                                          
                                             
                                                
                                                   
                                                      X
                                                   
                                                   
                                                      ‾
                                                   
                                                
                                             
                                             
                                                l
                                             
                                          
                                          /
                                          
                                             
                                                μ
                                             
                                             
                                                l
                                             
                                          
                                       
                                       
                                          C
                                          
                                          
                                             
                                                
                                                   
                                                      N
                                                   
                                                   
                                                      ‾
                                                   
                                                
                                             
                                             
                                                s
                                             
                                          
                                          -
                                          
                                             
                                                ∑
                                             
                                             
                                                l
                                                ∈
                                                
                                                   
                                                      A
                                                   
                                                   
                                                      s
                                                   
                                                
                                             
                                          
                                          
                                             
                                                v
                                             
                                             
                                                sl
                                             
                                          
                                          
                                             
                                                
                                                   
                                                      X
                                                   
                                                   
                                                      ‾
                                                   
                                                
                                             
                                             
                                                l
                                             
                                          
                                          /
                                          
                                             
                                                μ
                                             
                                             
                                                l
                                             
                                          
                                       
                                    
                                    <
                                    
                                       
                                          
                                             
                                                R
                                             
                                             
                                                ‾
                                             
                                          
                                       
                                       
                                          k
                                       
                                       
                                          P
                                       
                                    
                                    
                                    
                                       
                                          
                                             
                                                X
                                             
                                             
                                                ‾
                                             
                                          
                                       
                                       
                                          k
                                       
                                    
                                    .
                                 
                              
                           If we slightly decrease the value of 
                              
                                 
                                    
                                       
                                          
                                             R
                                          
                                          
                                             ‾
                                          
                                       
                                    
                                    
                                       k
                                    
                                    
                                       P
                                    
                                 
                              
                           , keeping fixed the values of the other variables, we obtain a new feasible vector 
                              
                                 (
                                 X
                                 ,
                                 
                                    
                                       R
                                    
                                    
                                       P
                                    
                                 
                                 ,
                                 N
                                 )
                              
                            such that 
                              
                                 Π
                                 (
                                 X
                                 ,
                                 
                                    
                                       R
                                    
                                    
                                       P
                                    
                                 
                                 ,
                                 N
                                 )
                                 >
                                 Π
                                 (
                                 
                                    
                                       X
                                    
                                    
                                       ‾
                                    
                                 
                                 ,
                                 
                                    
                                       
                                          
                                             R
                                          
                                          
                                             ‾
                                          
                                       
                                    
                                    
                                       P
                                    
                                 
                                 ,
                                 
                                    
                                       N
                                    
                                    
                                       ‾
                                    
                                 
                                 )
                              
                           , which is impossible.□

It follows from Proposition 3 that the variables 
                        
                           
                              
                                 R
                              
                              
                                 k
                              
                              
                                 P
                              
                           
                        
                      can be expressed as function of 
                        
                           
                              
                                 X
                              
                              
                                 k
                              
                           
                        
                      and 
                        
                           
                              
                                 N
                              
                              
                                 s
                              
                           
                        
                     , hence the social optimum problem can be rewritten as follows:
                        
                           (24)
                           
                              
                                 
                                    
                                       max
                                    
                                    
                                       X
                                       ,
                                       N
                                    
                                 
                              
                              
                              
                                 
                                    
                                       ∑
                                    
                                    
                                       s
                                       ∈
                                       S
                                    
                                 
                              
                              
                                 
                                    
                                       ∑
                                    
                                    
                                       k
                                       ∈
                                       
                                          
                                             A
                                          
                                          
                                             s
                                          
                                       
                                    
                                 
                              
                              
                                 
                                    
                                       
                                          
                                             α
                                          
                                          
                                             k
                                          
                                       
                                       
                                          
                                             
                                                1
                                                -
                                                
                                                   
                                                      1
                                                   
                                                   
                                                      
                                                         
                                                            m
                                                         
                                                         
                                                            k
                                                         
                                                      
                                                   
                                                
                                             
                                          
                                       
                                       
                                          
                                             X
                                          
                                          
                                             k
                                          
                                       
                                       -
                                       
                                          
                                             p
                                          
                                          
                                             k
                                          
                                       
                                       (
                                       
                                          
                                             Λ
                                          
                                          
                                             k
                                          
                                       
                                       -
                                       
                                          
                                             X
                                          
                                          
                                             k
                                          
                                       
                                       )
                                       +
                                       
                                          
                                             δ
                                          
                                          
                                             s
                                          
                                       
                                       
                                          
                                             R
                                          
                                          
                                             k
                                          
                                          
                                             S
                                          
                                       
                                       
                                          
                                             X
                                          
                                          
                                             k
                                          
                                       
                                    
                                 
                              
                              -
                              
                                 
                                    
                                       ∑
                                    
                                    
                                       s
                                       ∈
                                       S
                                    
                                 
                              
                              
                                 
                                    
                                       
                                          
                                             cN
                                          
                                          
                                             s
                                          
                                       
                                       +
                                       
                                          
                                             δ
                                          
                                          
                                             s
                                          
                                       
                                       |
                                       
                                          
                                             A
                                          
                                          
                                             s
                                          
                                       
                                       |
                                       
                                          
                                             
                                                
                                                   N
                                                
                                                
                                                   s
                                                
                                             
                                             
                                                
                                                   
                                                      ∑
                                                   
                                                   
                                                      l
                                                      ∈
                                                      
                                                         
                                                            A
                                                         
                                                         
                                                            s
                                                         
                                                      
                                                   
                                                
                                             
                                             
                                                
                                                   v
                                                
                                                
                                                   sl
                                                
                                             
                                             
                                                
                                                   X
                                                
                                                
                                                   l
                                                
                                             
                                             /
                                             
                                                
                                                   μ
                                                
                                                
                                                   l
                                                
                                             
                                          
                                          
                                             
                                                
                                                   CN
                                                
                                                
                                                   s
                                                
                                             
                                             -
                                             
                                                
                                                   
                                                      ∑
                                                   
                                                   
                                                      l
                                                      ∈
                                                      
                                                         
                                                            A
                                                         
                                                         
                                                            s
                                                         
                                                      
                                                   
                                                
                                             
                                             
                                                
                                                   v
                                                
                                                
                                                   sl
                                                
                                             
                                             
                                                
                                                   X
                                                
                                                
                                                   l
                                                
                                             
                                             /
                                             
                                                
                                                   μ
                                                
                                                
                                                   l
                                                
                                             
                                          
                                       
                                    
                                 
                              
                           
                        
                     subject to:
                        
                           (25)
                           
                              
                                 
                                    λ
                                 
                                 
                                    k
                                 
                              
                              ⩽
                              
                                 
                                    X
                                 
                                 
                                    k
                                 
                              
                              ⩽
                              
                                 
                                    Λ
                                 
                                 
                                    k
                                 
                              
                              ,
                              
                              ∀
                              
                              k
                              ∈
                              A
                              ,
                           
                        
                     
                     
                        
                           (26)
                           
                              
                                 
                                    
                                       
                                          N
                                       
                                       
                                          s
                                       
                                    
                                    
                                       
                                          ∑
                                       
                                       
                                          l
                                          ∈
                                          
                                             
                                                A
                                             
                                             
                                                s
                                             
                                          
                                       
                                    
                                    
                                       
                                          v
                                       
                                       
                                          sl
                                       
                                    
                                    
                                       
                                          X
                                       
                                       
                                          l
                                       
                                    
                                    /
                                    
                                       
                                          μ
                                       
                                       
                                          l
                                       
                                    
                                 
                                 
                                    C
                                    
                                    
                                       
                                          N
                                       
                                       
                                          s
                                       
                                    
                                    -
                                    
                                       
                                          ∑
                                       
                                       
                                          l
                                          ∈
                                          
                                             
                                                A
                                             
                                             
                                                s
                                             
                                          
                                       
                                    
                                    
                                    
                                       
                                          v
                                       
                                       
                                          sl
                                       
                                    
                                    
                                       
                                          X
                                       
                                       
                                          l
                                       
                                    
                                    /
                                    
                                       
                                          μ
                                       
                                       
                                          l
                                       
                                    
                                 
                              
                              ⩽
                              
                                 
                                    R
                                 
                                 
                                    k
                                 
                                 
                                    S
                                 
                              
                              
                              
                                 
                                    X
                                 
                                 
                                    k
                                 
                              
                              ,
                              
                              ∀
                              
                              s
                              ∈
                              S
                              ,
                              
                              ∀
                              
                              k
                              ∈
                              
                                 
                                    A
                                 
                                 
                                    s
                                 
                              
                              ,
                           
                        
                     
                     
                        
                           (27)
                           
                              
                                 
                                    
                                       ∑
                                    
                                    
                                       s
                                       ∈
                                       S
                                    
                                 
                              
                              
                                 
                                    N
                                 
                                 
                                    s
                                 
                              
                              ⩽
                              
                                 
                                    N
                                 
                                 
                                    P
                                 
                              
                              ,
                           
                        
                     
                     
                        
                           (28)
                           
                              
                                 
                                    
                                       ∑
                                    
                                    
                                       l
                                       ∈
                                       
                                          
                                             A
                                          
                                          
                                             s
                                          
                                       
                                    
                                 
                              
                              
                                 
                                    v
                                 
                                 
                                    sl
                                 
                              
                              
                                 
                                    X
                                 
                                 
                                    l
                                 
                              
                              /
                              
                                 
                                    μ
                                 
                                 
                                    l
                                 
                              
                              <
                              C
                              
                              
                                 
                                    N
                                 
                                 
                                    s
                                 
                              
                              ,
                              
                              ∀
                              
                              s
                              ∈
                              S
                              .
                           
                        
                     
                     
                        Proposition 4
                        
                           The social optimum problem 
                           (24)–(28) 
                           is convex.
                        

We have to prove that the objective function is concave and all the constraints are convex. To this end, it is sufficient to show that the functions
                              
                                 
                                    (
                                    
                                       
                                          X
                                       
                                       
                                          s
                                       
                                    
                                    ,
                                    
                                       
                                          N
                                       
                                       
                                          s
                                       
                                    
                                    )
                                    
                                    ↦
                                    
                                    
                                       
                                          
                                             
                                                N
                                             
                                             
                                                s
                                             
                                          
                                          
                                             
                                                ∑
                                             
                                             
                                                l
                                                ∈
                                                
                                                   
                                                      A
                                                   
                                                   
                                                      s
                                                   
                                                
                                             
                                          
                                          
                                             
                                                v
                                             
                                             
                                                sl
                                             
                                          
                                          
                                             
                                                X
                                             
                                             
                                                l
                                             
                                          
                                          /
                                          
                                             
                                                μ
                                             
                                             
                                                l
                                             
                                          
                                       
                                       
                                          
                                             
                                                CN
                                             
                                             
                                                s
                                             
                                          
                                          -
                                          
                                             
                                                ∑
                                             
                                             
                                                l
                                                ∈
                                                
                                                   
                                                      A
                                                   
                                                   
                                                      s
                                                   
                                                
                                             
                                          
                                          
                                             
                                                v
                                             
                                             
                                                sl
                                             
                                          
                                          
                                             
                                                X
                                             
                                             
                                                l
                                             
                                          
                                          /
                                          
                                             
                                                μ
                                             
                                             
                                                l
                                             
                                          
                                       
                                    
                                 
                              
                           are convex when constraints (28) are satisfied. Since all these functions have the same structure, we can consider only the function
                              
                                 
                                    h
                                    (
                                    
                                       
                                          x
                                       
                                       
                                          1
                                       
                                    
                                    ,
                                    …
                                    ,
                                    
                                       
                                          x
                                       
                                       
                                          n
                                       
                                    
                                    ,
                                    y
                                    )
                                    
                                       
                                          
                                             =
                                          
                                          
                                             def
                                          
                                       
                                    
                                    
                                       
                                          y
                                          
                                             
                                                ∑
                                             
                                             
                                                i
                                                =
                                                1
                                             
                                             
                                                n
                                             
                                          
                                          
                                             
                                                a
                                             
                                             
                                                i
                                             
                                          
                                          
                                             
                                                x
                                             
                                             
                                                i
                                             
                                          
                                       
                                       
                                          b
                                          
                                          y
                                          -
                                          
                                             
                                                ∑
                                             
                                             
                                                i
                                                =
                                                1
                                             
                                             
                                                n
                                             
                                          
                                          
                                             
                                                a
                                             
                                             
                                                i
                                             
                                          
                                          
                                             
                                                x
                                             
                                             
                                                i
                                             
                                          
                                       
                                    
                                    ,
                                 
                              
                           where variables 
                              
                                 x
                                 =
                                 (
                                 
                                    
                                       x
                                    
                                    
                                       1
                                    
                                 
                                 ,
                                 …
                                 ,
                                 
                                    
                                       x
                                    
                                    
                                       n
                                    
                                 
                                 )
                              
                            and y correspond to 
                              
                                 
                                    
                                       X
                                    
                                    
                                       s
                                    
                                 
                              
                            and 
                              
                                 
                                    
                                       N
                                    
                                    
                                       s
                                    
                                 
                              
                            respectively, and the constants 
                              
                                 
                                    
                                       a
                                    
                                    
                                       i
                                    
                                 
                                 >
                                 0
                              
                            and 
                              
                                 b
                                 >
                                 0
                              
                            to 
                              
                                 
                                    
                                       v
                                    
                                    
                                       sl
                                    
                                 
                                 /
                                 
                                    
                                       μ
                                    
                                    
                                       l
                                    
                                 
                              
                            and C respectively. Therefore, it is sufficient to prove that the function h is convex when 
                              
                                 b
                                 
                                 y
                                 -
                                 
                                    
                                       ∑
                                    
                                    
                                       i
                                       =
                                       1
                                    
                                    
                                       n
                                    
                                 
                                 
                                    
                                       a
                                    
                                    
                                       i
                                    
                                 
                                 
                                    
                                       x
                                    
                                    
                                       i
                                    
                                 
                                 >
                                 0
                              
                            (which corresponds to constraint (28)).

The first derivatives of h are
                              
                                 
                                    
                                       
                                          ∂
                                          h
                                       
                                       
                                          ∂
                                          
                                             
                                                x
                                             
                                             
                                                j
                                             
                                          
                                       
                                    
                                    =
                                    
                                       
                                          
                                             
                                                ba
                                             
                                             
                                                j
                                             
                                          
                                          
                                             
                                                y
                                             
                                             
                                                2
                                             
                                          
                                       
                                       
                                          
                                             
                                                (
                                                b
                                                
                                                y
                                                -
                                                
                                                   
                                                      ∑
                                                   
                                                   
                                                      i
                                                      =
                                                      1
                                                   
                                                   
                                                      n
                                                   
                                                
                                                
                                                   
                                                      a
                                                   
                                                   
                                                      i
                                                   
                                                
                                                
                                                   
                                                      x
                                                   
                                                   
                                                      i
                                                   
                                                
                                                )
                                             
                                             
                                                2
                                             
                                          
                                       
                                    
                                    ,
                                    
                                    j
                                    =
                                    1
                                    ,
                                    …
                                    ,
                                    n
                                    ,
                                    
                                    
                                       
                                          ∂
                                          h
                                       
                                       
                                          ∂
                                          y
                                       
                                    
                                    =
                                    
                                       
                                          -
                                          
                                             
                                                
                                                   
                                                      
                                                         
                                                            ∑
                                                         
                                                         
                                                            i
                                                            =
                                                            1
                                                         
                                                         
                                                            n
                                                         
                                                      
                                                      
                                                         
                                                            a
                                                         
                                                         
                                                            i
                                                         
                                                      
                                                      
                                                         
                                                            x
                                                         
                                                         
                                                            i
                                                         
                                                      
                                                   
                                                
                                             
                                             
                                                2
                                             
                                          
                                       
                                       
                                          
                                             
                                                (
                                                b
                                                
                                                y
                                                -
                                                
                                                   
                                                      ∑
                                                   
                                                   
                                                      i
                                                      =
                                                      1
                                                   
                                                   
                                                      n
                                                   
                                                
                                                
                                                   
                                                      a
                                                   
                                                   
                                                      i
                                                   
                                                
                                                
                                                   
                                                      x
                                                   
                                                   
                                                      i
                                                   
                                                
                                                )
                                             
                                             
                                                2
                                             
                                          
                                       
                                    
                                    ;
                                 
                              
                           the second derivatives of h are
                              
                                 
                                    
                                       
                                          
                                          
                                             
                                                
                                                   
                                                      
                                                         
                                                            ∂
                                                         
                                                         
                                                            2
                                                         
                                                      
                                                      h
                                                   
                                                   
                                                      ∂
                                                      
                                                         
                                                            x
                                                         
                                                         
                                                            j
                                                         
                                                      
                                                      
                                                      ∂
                                                      
                                                         
                                                            x
                                                         
                                                         
                                                            ℓ
                                                         
                                                      
                                                   
                                                
                                                =
                                                
                                                   
                                                      2
                                                      
                                                      b
                                                      
                                                      
                                                         
                                                            a
                                                         
                                                         
                                                            j
                                                         
                                                      
                                                      
                                                      
                                                         
                                                            a
                                                         
                                                         
                                                            ℓ
                                                         
                                                      
                                                      
                                                      
                                                         
                                                            y
                                                         
                                                         
                                                            2
                                                         
                                                      
                                                   
                                                   
                                                      
                                                         
                                                            (
                                                            b
                                                            
                                                            y
                                                            -
                                                            
                                                               
                                                                  ∑
                                                               
                                                               
                                                                  i
                                                                  =
                                                                  1
                                                               
                                                               
                                                                  n
                                                               
                                                            
                                                            
                                                               
                                                                  a
                                                               
                                                               
                                                                  i
                                                               
                                                            
                                                            
                                                               
                                                                  x
                                                               
                                                               
                                                                  i
                                                               
                                                            
                                                            )
                                                         
                                                         
                                                            3
                                                         
                                                      
                                                   
                                                
                                                ,
                                                
                                                j
                                                ,
                                                ℓ
                                                =
                                                1
                                                ,
                                                …
                                                ,
                                                n
                                                ,
                                             
                                          
                                       
                                       
                                          
                                          
                                             
                                                
                                                   
                                                      
                                                         
                                                            ∂
                                                         
                                                         
                                                            2
                                                         
                                                      
                                                      h
                                                   
                                                   
                                                      ∂
                                                      
                                                         
                                                            x
                                                         
                                                         
                                                            j
                                                         
                                                      
                                                      
                                                      ∂
                                                      y
                                                   
                                                
                                                =
                                                
                                                   
                                                      -
                                                      2
                                                      
                                                      b
                                                      
                                                      
                                                         
                                                            a
                                                         
                                                         
                                                            j
                                                         
                                                      
                                                      
                                                      y
                                                      
                                                      
                                                         
                                                            ∑
                                                         
                                                         
                                                            i
                                                            =
                                                            1
                                                         
                                                         
                                                            n
                                                         
                                                      
                                                      
                                                         
                                                            a
                                                         
                                                         
                                                            i
                                                         
                                                      
                                                      
                                                         
                                                            x
                                                         
                                                         
                                                            i
                                                         
                                                      
                                                   
                                                   
                                                      
                                                         
                                                            (
                                                            b
                                                            
                                                            y
                                                            -
                                                            
                                                               
                                                                  ∑
                                                               
                                                               
                                                                  i
                                                                  =
                                                                  1
                                                               
                                                               
                                                                  n
                                                               
                                                            
                                                            
                                                               
                                                                  a
                                                               
                                                               
                                                                  i
                                                               
                                                            
                                                            
                                                               
                                                                  x
                                                               
                                                               
                                                                  i
                                                               
                                                            
                                                            )
                                                         
                                                         
                                                            3
                                                         
                                                      
                                                   
                                                
                                                ,
                                                
                                                j
                                                =
                                                1
                                                ,
                                                …
                                                ,
                                                n
                                                ,
                                             
                                          
                                       
                                       
                                          
                                          
                                             
                                                
                                                   
                                                      
                                                         
                                                            ∂
                                                         
                                                         
                                                            2
                                                         
                                                      
                                                      h
                                                   
                                                   
                                                      ∂
                                                      
                                                         
                                                            y
                                                         
                                                         
                                                            2
                                                         
                                                      
                                                   
                                                
                                                =
                                                
                                                   
                                                      2
                                                      
                                                      b
                                                      
                                                      
                                                         
                                                            
                                                               
                                                                  
                                                                     
                                                                        ∑
                                                                     
                                                                     
                                                                        i
                                                                        =
                                                                        1
                                                                     
                                                                     
                                                                        n
                                                                     
                                                                  
                                                                  
                                                                     
                                                                        a
                                                                     
                                                                     
                                                                        i
                                                                     
                                                                  
                                                                  
                                                                     
                                                                        x
                                                                     
                                                                     
                                                                        i
                                                                     
                                                                  
                                                               
                                                            
                                                         
                                                         
                                                            2
                                                         
                                                      
                                                   
                                                   
                                                      
                                                         
                                                            (
                                                            b
                                                            
                                                            y
                                                            -
                                                            
                                                               
                                                                  ∑
                                                               
                                                               
                                                                  i
                                                                  =
                                                                  1
                                                               
                                                               
                                                                  n
                                                               
                                                            
                                                            
                                                               
                                                                  a
                                                               
                                                               
                                                                  i
                                                               
                                                            
                                                            
                                                               
                                                                  x
                                                               
                                                               
                                                                  i
                                                               
                                                            
                                                            )
                                                         
                                                         
                                                            3
                                                         
                                                      
                                                   
                                                
                                                .
                                             
                                          
                                       
                                    
                                 
                              
                           Thus the Hessian matrix of h is
                              
                                 
                                    
                                       
                                          ∇
                                       
                                       
                                          2
                                       
                                    
                                    h
                                    (
                                    
                                       
                                          x
                                       
                                       
                                          1
                                       
                                    
                                    ,
                                    …
                                    ,
                                    
                                       
                                          x
                                       
                                       
                                          n
                                       
                                    
                                    ,
                                    y
                                    )
                                    =
                                    
                                       
                                          2
                                          
                                          b
                                       
                                       
                                          
                                             
                                                
                                                   
                                                      b
                                                      
                                                      y
                                                      -
                                                      
                                                         
                                                            ∑
                                                         
                                                         
                                                            i
                                                            =
                                                            1
                                                         
                                                         
                                                            n
                                                         
                                                      
                                                      
                                                         
                                                            a
                                                         
                                                         
                                                            i
                                                         
                                                      
                                                      
                                                         
                                                            x
                                                         
                                                         
                                                            i
                                                         
                                                      
                                                   
                                                
                                             
                                             
                                                3
                                             
                                          
                                       
                                    
                                    
                                       
                                          
                                             
                                                
                                                   
                                                      
                                                         
                                                            a
                                                         
                                                         
                                                            1
                                                         
                                                         
                                                            2
                                                         
                                                      
                                                      
                                                         
                                                            y
                                                         
                                                         
                                                            2
                                                         
                                                      
                                                   
                                                   
                                                      ⋯
                                                   
                                                   
                                                      
                                                         
                                                            a
                                                         
                                                         
                                                            1
                                                         
                                                      
                                                      
                                                         
                                                            a
                                                         
                                                         
                                                            n
                                                         
                                                      
                                                      
                                                         
                                                            y
                                                         
                                                         
                                                            2
                                                         
                                                      
                                                   
                                                   
                                                      -
                                                      
                                                         
                                                            a
                                                         
                                                         
                                                            1
                                                         
                                                      
                                                      y
                                                      
                                                         
                                                            ∑
                                                         
                                                         
                                                            i
                                                            =
                                                            1
                                                         
                                                         
                                                            n
                                                         
                                                      
                                                      
                                                         
                                                            a
                                                         
                                                         
                                                            i
                                                         
                                                      
                                                      
                                                         
                                                            x
                                                         
                                                         
                                                            i
                                                         
                                                      
                                                   
                                                
                                                
                                                   
                                                      ⋮
                                                   
                                                   
                                                      ⋱
                                                   
                                                   
                                                      ⋮
                                                   
                                                   
                                                      ⋮
                                                   
                                                
                                                
                                                   
                                                      
                                                         
                                                            a
                                                         
                                                         
                                                            1
                                                         
                                                      
                                                      
                                                         
                                                            a
                                                         
                                                         
                                                            n
                                                         
                                                      
                                                      
                                                         
                                                            y
                                                         
                                                         
                                                            2
                                                         
                                                      
                                                   
                                                   
                                                      ⋯
                                                   
                                                   
                                                      
                                                         
                                                            a
                                                         
                                                         
                                                            n
                                                         
                                                         
                                                            2
                                                         
                                                      
                                                      
                                                         
                                                            y
                                                         
                                                         
                                                            2
                                                         
                                                      
                                                   
                                                   
                                                      -
                                                      
                                                         
                                                            a
                                                         
                                                         
                                                            n
                                                         
                                                      
                                                      y
                                                      
                                                         
                                                            ∑
                                                         
                                                         
                                                            i
                                                            =
                                                            1
                                                         
                                                         
                                                            n
                                                         
                                                      
                                                      
                                                         
                                                            a
                                                         
                                                         
                                                            i
                                                         
                                                      
                                                      
                                                         
                                                            x
                                                         
                                                         
                                                            i
                                                         
                                                      
                                                   
                                                
                                                
                                                   
                                                      -
                                                      
                                                         
                                                            a
                                                         
                                                         
                                                            1
                                                         
                                                      
                                                      y
                                                      
                                                         
                                                            ∑
                                                         
                                                         
                                                            i
                                                            =
                                                            1
                                                         
                                                         
                                                            n
                                                         
                                                      
                                                      
                                                         
                                                            a
                                                         
                                                         
                                                            i
                                                         
                                                      
                                                      
                                                         
                                                            x
                                                         
                                                         
                                                            i
                                                         
                                                      
                                                   
                                                   
                                                      ⋯
                                                   
                                                   
                                                      -
                                                      
                                                         
                                                            a
                                                         
                                                         
                                                            n
                                                         
                                                      
                                                      y
                                                      
                                                         
                                                            ∑
                                                         
                                                         
                                                            i
                                                            =
                                                            1
                                                         
                                                         
                                                            n
                                                         
                                                      
                                                      
                                                         
                                                            a
                                                         
                                                         
                                                            i
                                                         
                                                      
                                                      
                                                         
                                                            x
                                                         
                                                         
                                                            i
                                                         
                                                      
                                                   
                                                   
                                                      
                                                         
                                                            
                                                               
                                                                  
                                                                     
                                                                        ∑
                                                                     
                                                                     
                                                                        i
                                                                        =
                                                                        1
                                                                     
                                                                     
                                                                        n
                                                                     
                                                                  
                                                                  
                                                                     
                                                                        a
                                                                     
                                                                     
                                                                        i
                                                                     
                                                                  
                                                                  
                                                                     
                                                                        x
                                                                     
                                                                     
                                                                        i
                                                                     
                                                                  
                                                               
                                                            
                                                         
                                                         
                                                            2
                                                         
                                                      
                                                   
                                                
                                             
                                          
                                       
                                    
                                    .
                                 
                              
                           For any vector 
                              
                                 u
                                 =
                                 (
                                 
                                    
                                       u
                                    
                                    
                                       1
                                    
                                 
                                 ,
                                 …
                                 ,
                                 
                                    
                                       u
                                    
                                    
                                       n
                                    
                                 
                                 ,
                                 
                                    
                                       u
                                    
                                    
                                       n
                                       +
                                       1
                                    
                                 
                                 )
                                 ∈
                                 
                                    
                                       R
                                    
                                    
                                       n
                                       +
                                       1
                                    
                                 
                              
                            we have
                              
                                 
                                    
                                       
                                          u
                                       
                                       
                                          T
                                       
                                    
                                    
                                    
                                       
                                          ∇
                                       
                                       
                                          2
                                       
                                    
                                    h
                                    (
                                    
                                       
                                          x
                                       
                                       
                                          1
                                       
                                    
                                    ,
                                    …
                                    ,
                                    
                                       
                                          x
                                       
                                       
                                          n
                                       
                                    
                                    ,
                                    y
                                    )
                                    
                                    u
                                    =
                                    
                                       
                                          2
                                          
                                          b
                                       
                                       
                                          
                                             
                                                (
                                                b
                                                
                                                y
                                                -
                                                
                                                   
                                                      ∑
                                                   
                                                   
                                                      i
                                                      =
                                                      1
                                                   
                                                   
                                                      n
                                                   
                                                
                                                
                                                   
                                                      a
                                                   
                                                   
                                                      i
                                                   
                                                
                                                
                                                   
                                                      x
                                                   
                                                   
                                                      i
                                                   
                                                
                                                )
                                             
                                             
                                                3
                                             
                                          
                                       
                                    
                                    
                                    
                                       
                                          u
                                       
                                       
                                          T
                                       
                                    
                                    
                                    
                                       
                                          
                                             
                                                
                                                   
                                                      
                                                         
                                                            a
                                                         
                                                         
                                                            1
                                                         
                                                      
                                                      
                                                      
                                                         
                                                            y
                                                         
                                                         
                                                            2
                                                         
                                                      
                                                      
                                                      
                                                         
                                                            ∑
                                                         
                                                         
                                                            i
                                                            =
                                                            1
                                                         
                                                         
                                                            n
                                                         
                                                      
                                                      
                                                         
                                                            a
                                                         
                                                         
                                                            i
                                                         
                                                      
                                                      
                                                         
                                                            u
                                                         
                                                         
                                                            i
                                                         
                                                      
                                                      -
                                                      
                                                         
                                                            a
                                                         
                                                         
                                                            1
                                                         
                                                      
                                                      
                                                      y
                                                      
                                                      
                                                         
                                                            u
                                                         
                                                         
                                                            n
                                                            +
                                                            1
                                                         
                                                      
                                                      
                                                      
                                                         
                                                            ∑
                                                         
                                                         
                                                            i
                                                            =
                                                            1
                                                         
                                                         
                                                            n
                                                         
                                                      
                                                      
                                                         
                                                            a
                                                         
                                                         
                                                            i
                                                         
                                                      
                                                      
                                                         
                                                            x
                                                         
                                                         
                                                            i
                                                         
                                                      
                                                   
                                                
                                                
                                                   
                                                      ⋮
                                                   
                                                
                                                
                                                   
                                                      
                                                         
                                                            a
                                                         
                                                         
                                                            n
                                                         
                                                      
                                                      
                                                      
                                                         
                                                            y
                                                         
                                                         
                                                            2
                                                         
                                                      
                                                      
                                                      
                                                         
                                                            ∑
                                                         
                                                         
                                                            i
                                                            =
                                                            1
                                                         
                                                         
                                                            n
                                                         
                                                      
                                                      
                                                         
                                                            a
                                                         
                                                         
                                                            i
                                                         
                                                      
                                                      
                                                         
                                                            u
                                                         
                                                         
                                                            i
                                                         
                                                      
                                                      -
                                                      
                                                         
                                                            a
                                                         
                                                         
                                                            n
                                                         
                                                      
                                                      
                                                      y
                                                      
                                                      
                                                         
                                                            u
                                                         
                                                         
                                                            n
                                                            +
                                                            1
                                                         
                                                      
                                                      
                                                      
                                                         
                                                            ∑
                                                         
                                                         
                                                            i
                                                            =
                                                            1
                                                         
                                                         
                                                            n
                                                         
                                                      
                                                      
                                                         
                                                            a
                                                         
                                                         
                                                            i
                                                         
                                                      
                                                      
                                                         
                                                            x
                                                         
                                                         
                                                            i
                                                         
                                                      
                                                   
                                                
                                                
                                                   
                                                      -
                                                      y
                                                      
                                                      
                                                         
                                                            
                                                               
                                                                  
                                                                     ∑
                                                                  
                                                                  
                                                                     i
                                                                     =
                                                                     1
                                                                  
                                                                  
                                                                     n
                                                                  
                                                               
                                                               
                                                                  
                                                                     a
                                                                  
                                                                  
                                                                     i
                                                                  
                                                               
                                                               
                                                                  
                                                                     x
                                                                  
                                                                  
                                                                     i
                                                                  
                                                               
                                                            
                                                         
                                                      
                                                      
                                                      
                                                         
                                                            
                                                               
                                                                  
                                                                     ∑
                                                                  
                                                                  
                                                                     i
                                                                     =
                                                                     1
                                                                  
                                                                  
                                                                     n
                                                                  
                                                               
                                                               
                                                                  
                                                                     a
                                                                  
                                                                  
                                                                     i
                                                                  
                                                               
                                                               
                                                                  
                                                                     u
                                                                  
                                                                  
                                                                     i
                                                                  
                                                               
                                                            
                                                         
                                                      
                                                      +
                                                      
                                                         
                                                            u
                                                         
                                                         
                                                            n
                                                            +
                                                            1
                                                         
                                                      
                                                      
                                                         
                                                            
                                                               
                                                                  
                                                                     
                                                                        ∑
                                                                     
                                                                     
                                                                        i
                                                                        =
                                                                        1
                                                                     
                                                                     
                                                                        n
                                                                     
                                                                  
                                                                  
                                                                     
                                                                        a
                                                                     
                                                                     
                                                                        i
                                                                     
                                                                  
                                                                  
                                                                     
                                                                        x
                                                                     
                                                                     
                                                                        i
                                                                     
                                                                  
                                                               
                                                            
                                                         
                                                         
                                                            2
                                                         
                                                      
                                                   
                                                
                                             
                                          
                                       
                                    
                                    =
                                    
                                       
                                          2
                                          
                                          b
                                       
                                       
                                          
                                             
                                                (
                                                b
                                                
                                                y
                                                -
                                                
                                                   
                                                      ∑
                                                   
                                                   
                                                      i
                                                      =
                                                      1
                                                   
                                                   
                                                      n
                                                   
                                                
                                                
                                                   
                                                      a
                                                   
                                                   
                                                      i
                                                   
                                                
                                                
                                                   
                                                      x
                                                   
                                                   
                                                      i
                                                   
                                                
                                                )
                                             
                                             
                                                3
                                             
                                          
                                       
                                    
                                    
                                    
                                       
                                          
                                             
                                                
                                                   y
                                                
                                                
                                                   2
                                                
                                             
                                             
                                                
                                                   
                                                      
                                                         
                                                            
                                                               
                                                                  ∑
                                                               
                                                               
                                                                  i
                                                                  =
                                                                  1
                                                               
                                                               
                                                                  n
                                                               
                                                            
                                                         
                                                         
                                                            
                                                               a
                                                            
                                                            
                                                               i
                                                            
                                                         
                                                         
                                                            
                                                               u
                                                            
                                                            
                                                               i
                                                            
                                                         
                                                      
                                                   
                                                
                                                
                                                   2
                                                
                                             
                                             -
                                             2
                                             
                                             y
                                             
                                             
                                                
                                                   u
                                                
                                                
                                                   n
                                                   +
                                                   1
                                                
                                             
                                             
                                             
                                                
                                                   
                                                      
                                                         
                                                            
                                                               ∑
                                                            
                                                            
                                                               i
                                                               =
                                                               1
                                                            
                                                            
                                                               n
                                                            
                                                         
                                                      
                                                      
                                                         
                                                            a
                                                         
                                                         
                                                            i
                                                         
                                                      
                                                      
                                                         
                                                            u
                                                         
                                                         
                                                            i
                                                         
                                                      
                                                   
                                                
                                             
                                             
                                             
                                                
                                                   
                                                      
                                                         
                                                            
                                                               ∑
                                                            
                                                            
                                                               i
                                                               =
                                                               1
                                                            
                                                            
                                                               n
                                                            
                                                         
                                                      
                                                      
                                                         
                                                            a
                                                         
                                                         
                                                            i
                                                         
                                                      
                                                      
                                                         
                                                            x
                                                         
                                                         
                                                            i
                                                         
                                                      
                                                   
                                                
                                             
                                             +
                                             
                                                
                                                   u
                                                
                                                
                                                   n
                                                   +
                                                   1
                                                
                                                
                                                   2
                                                
                                             
                                             
                                                
                                                   
                                                      
                                                         
                                                            
                                                               
                                                                  ∑
                                                               
                                                               
                                                                  i
                                                                  =
                                                                  1
                                                               
                                                               
                                                                  n
                                                               
                                                            
                                                         
                                                         
                                                            
                                                               a
                                                            
                                                            
                                                               i
                                                            
                                                         
                                                         
                                                            
                                                               x
                                                            
                                                            
                                                               i
                                                            
                                                         
                                                      
                                                   
                                                
                                                
                                                   2
                                                
                                             
                                          
                                       
                                    
                                    =
                                    
                                       
                                          2
                                          
                                          b
                                       
                                       
                                          
                                             
                                                (
                                                b
                                                
                                                y
                                                -
                                                
                                                   
                                                      ∑
                                                   
                                                   
                                                      i
                                                      =
                                                      1
                                                   
                                                   
                                                      n
                                                   
                                                
                                                
                                                   
                                                      a
                                                   
                                                   
                                                      i
                                                   
                                                
                                                
                                                   
                                                      x
                                                   
                                                   
                                                      i
                                                   
                                                
                                                )
                                             
                                             
                                                3
                                             
                                          
                                       
                                    
                                    
                                       
                                          
                                             
                                                y
                                                
                                                   
                                                      
                                                         ∑
                                                      
                                                      
                                                         i
                                                         =
                                                         1
                                                      
                                                      
                                                         n
                                                      
                                                   
                                                
                                                
                                                   
                                                      a
                                                   
                                                   
                                                      i
                                                   
                                                
                                                
                                                   
                                                      u
                                                   
                                                   
                                                      i
                                                   
                                                
                                                -
                                                
                                                   
                                                      u
                                                   
                                                   
                                                      n
                                                      +
                                                      1
                                                   
                                                
                                                
                                                   
                                                      
                                                         ∑
                                                      
                                                      
                                                         i
                                                         =
                                                         1
                                                      
                                                      
                                                         n
                                                      
                                                   
                                                
                                                
                                                   
                                                      a
                                                   
                                                   
                                                      i
                                                   
                                                
                                                
                                                   
                                                      x
                                                   
                                                   
                                                      i
                                                   
                                                
                                             
                                          
                                       
                                       
                                          2
                                       
                                    
                                    .
                                 
                              
                           Therefore, if 
                              
                                 b
                                 
                                 y
                                 -
                                 
                                    
                                       ∑
                                    
                                    
                                       i
                                       =
                                       1
                                    
                                    
                                       n
                                    
                                 
                                 
                                    
                                       a
                                    
                                    
                                       i
                                    
                                 
                                 
                                    
                                       x
                                    
                                    
                                       i
                                    
                                 
                                 >
                                 0
                              
                           , then the Hessian matrix of h is positive semidefinite and hence h is convex.□

In the rest of this section we analyze the Karush–Kuhn–Tucker (KKT) system of the social optimum problem and derive some bounds for the social optima relating the platform capacity, the energy costs and the penalties incurred in case of requests rejection.

Since the social optimum problem is convex and the Slater constraint qualification holds, the KKT conditions are necessary and sufficient for the optimality. If we denote 
                        
                           
                              
                                 L
                              
                              
                                 k
                              
                              
                                 i
                              
                           
                           ⩾
                           0
                        
                     , for 
                        
                           k
                           ∈
                           A
                        
                      and 
                        
                           i
                           =
                           1
                           ,
                           2
                           ,
                           3
                        
                     , the KKT multipliers associated to constraints (25) and (26), and 
                        
                           
                              
                                 L
                              
                              
                                 4
                              
                           
                           ⩾
                           0
                        
                     , the multiplier associated to constraint (27), then the KKT system is the following:
                        
                           (29)
                           
                              
                                 
                                    
                                    
                                       
                                          
                                             
                                                α
                                             
                                             
                                                k
                                             
                                          
                                          
                                             
                                                
                                                   1
                                                   -
                                                   
                                                      
                                                         1
                                                      
                                                      
                                                         
                                                            
                                                               m
                                                            
                                                            
                                                               k
                                                            
                                                         
                                                      
                                                   
                                                
                                             
                                          
                                          +
                                          
                                             
                                                p
                                             
                                             
                                                k
                                             
                                          
                                          +
                                          
                                             
                                                δ
                                             
                                             
                                                s
                                             
                                          
                                          
                                          
                                             
                                                R
                                             
                                             
                                                k
                                             
                                             
                                                S
                                             
                                          
                                          -
                                          
                                             
                                                C
                                                
                                                
                                                   
                                                      v
                                                   
                                                   
                                                      sk
                                                   
                                                
                                                
                                                
                                                   
                                                      N
                                                   
                                                   
                                                      s
                                                   
                                                   
                                                      2
                                                   
                                                
                                             
                                             
                                                
                                                   
                                                      μ
                                                   
                                                   
                                                      k
                                                   
                                                
                                                
                                                
                                                   
                                                      (
                                                      C
                                                      
                                                      
                                                         
                                                            N
                                                         
                                                         
                                                            s
                                                         
                                                      
                                                      -
                                                      
                                                         
                                                            ∑
                                                         
                                                         
                                                            l
                                                            ∈
                                                            
                                                               
                                                                  A
                                                               
                                                               
                                                                  s
                                                               
                                                            
                                                         
                                                      
                                                      
                                                         
                                                            v
                                                         
                                                         
                                                            sl
                                                         
                                                      
                                                      
                                                         
                                                            X
                                                         
                                                         
                                                            l
                                                         
                                                      
                                                      /
                                                      
                                                         
                                                            μ
                                                         
                                                         
                                                            l
                                                         
                                                      
                                                      )
                                                   
                                                   
                                                      2
                                                   
                                                
                                             
                                          
                                          
                                          
                                             
                                                
                                                   
                                                      
                                                         δ
                                                      
                                                      
                                                         s
                                                      
                                                   
                                                   
                                                   |
                                                   
                                                      
                                                         A
                                                      
                                                      
                                                         s
                                                      
                                                   
                                                   |
                                                   +
                                                   
                                                      
                                                         
                                                            ∑
                                                         
                                                         
                                                            l
                                                            ∈
                                                            
                                                               
                                                                  A
                                                               
                                                               
                                                                  s
                                                               
                                                            
                                                         
                                                      
                                                   
                                                   
                                                      
                                                         L
                                                      
                                                      
                                                         l
                                                      
                                                      
                                                         3
                                                      
                                                   
                                                
                                             
                                          
                                          +
                                          
                                             
                                                L
                                             
                                             
                                                k
                                             
                                             
                                                1
                                             
                                          
                                          -
                                          
                                             
                                                L
                                             
                                             
                                                k
                                             
                                             
                                                2
                                             
                                          
                                          +
                                          
                                             
                                                L
                                             
                                             
                                                k
                                             
                                             
                                                3
                                             
                                          
                                          
                                          
                                             
                                                R
                                             
                                             
                                                k
                                             
                                             
                                                S
                                             
                                          
                                          =
                                          0
                                          ,
                                       
                                    
                                 
                                 
                                    
                                    
                                       
                                          
                                          ∀
                                          
                                          s
                                          ∈
                                          S
                                          ,
                                          
                                          ∀
                                          
                                          k
                                          ∈
                                          
                                             
                                                A
                                             
                                             
                                                s
                                             
                                          
                                          ,
                                       
                                    
                                 
                              
                           
                        
                     
                     
                        
                           (30)
                           
                              -
                              c
                              +
                              
                                 
                                    
                                       
                                          
                                             
                                                
                                                   
                                                      ∑
                                                   
                                                   
                                                      l
                                                      ∈
                                                      
                                                         
                                                            A
                                                         
                                                         
                                                            s
                                                         
                                                      
                                                   
                                                
                                                
                                                   
                                                      v
                                                   
                                                   
                                                      sl
                                                   
                                                
                                                
                                                
                                                   
                                                      X
                                                   
                                                   
                                                      l
                                                   
                                                
                                                /
                                                
                                                   
                                                      μ
                                                   
                                                   
                                                      l
                                                   
                                                
                                             
                                             
                                                C
                                                
                                                
                                                   
                                                      N
                                                   
                                                   
                                                      s
                                                   
                                                
                                                -
                                                
                                                   
                                                      ∑
                                                   
                                                   
                                                      l
                                                      ∈
                                                      
                                                         
                                                            A
                                                         
                                                         
                                                            s
                                                         
                                                      
                                                   
                                                
                                                
                                                   
                                                      v
                                                   
                                                   
                                                      sl
                                                   
                                                
                                                
                                                
                                                   
                                                      X
                                                   
                                                   
                                                      l
                                                   
                                                
                                                /
                                                
                                                   
                                                      μ
                                                   
                                                   
                                                      l
                                                   
                                                
                                             
                                          
                                       
                                    
                                 
                                 
                                    2
                                 
                              
                              
                              
                                 
                                    
                                       
                                          
                                             δ
                                          
                                          
                                             s
                                          
                                       
                                       
                                       |
                                       
                                          
                                             A
                                          
                                          
                                             s
                                          
                                       
                                       |
                                       +
                                       
                                          
                                             ∑
                                          
                                          
                                             l
                                             ∈
                                             
                                                
                                                   A
                                                
                                                
                                                   s
                                                
                                             
                                          
                                       
                                       
                                          
                                             L
                                          
                                          
                                             l
                                          
                                          
                                             3
                                          
                                       
                                    
                                 
                              
                              -
                              
                                 
                                    L
                                 
                                 
                                    4
                                 
                              
                              =
                              0
                              ,
                              
                              ∀
                              
                              s
                              ∈
                              S
                              ,
                           
                        
                     
                     
                        
                           (31)
                           
                              
                                 
                                    L
                                 
                                 
                                    k
                                 
                                 
                                    1
                                 
                              
                              
                              (
                              
                                 
                                    X
                                 
                                 
                                    k
                                 
                              
                              -
                              
                                 
                                    λ
                                 
                                 
                                    k
                                 
                              
                              )
                              =
                              0
                              ,
                              
                              ∀
                              
                              k
                              ∈
                              A
                              ,
                           
                        
                     
                     
                        
                           (32)
                           
                              
                                 
                                    L
                                 
                                 
                                    k
                                 
                                 
                                    2
                                 
                              
                              
                              (
                              
                                 
                                    X
                                 
                                 
                                    k
                                 
                              
                              -
                              
                                 
                                    Λ
                                 
                                 
                                    k
                                 
                              
                              )
                              =
                              0
                              ,
                              
                              ∀
                              
                              k
                              ∈
                              A
                              ,
                           
                        
                     
                     
                        
                           (33)
                           
                              
                                 
                                    L
                                 
                                 
                                    k
                                 
                                 
                                    3
                                 
                              
                              
                              
                                 
                                    
                                       
                                          
                                             
                                                
                                                   N
                                                
                                                
                                                   s
                                                
                                             
                                             
                                                
                                                   ∑
                                                
                                                
                                                   l
                                                   ∈
                                                   
                                                      
                                                         A
                                                      
                                                      
                                                         s
                                                      
                                                   
                                                
                                             
                                             
                                                
                                                   v
                                                
                                                
                                                   sl
                                                
                                             
                                             
                                                
                                                   X
                                                
                                                
                                                   l
                                                
                                             
                                             /
                                             
                                                
                                                   μ
                                                
                                                
                                                   l
                                                
                                             
                                          
                                          
                                             C
                                             
                                             
                                                
                                                   N
                                                
                                                
                                                   s
                                                
                                             
                                             -
                                             
                                                
                                                   ∑
                                                
                                                
                                                   l
                                                   ∈
                                                   
                                                      
                                                         A
                                                      
                                                      
                                                         s
                                                      
                                                   
                                                
                                             
                                             
                                                
                                                   v
                                                
                                                
                                                   sl
                                                
                                             
                                             
                                                
                                                   X
                                                
                                                
                                                   l
                                                
                                             
                                             /
                                             
                                                
                                                   μ
                                                
                                                
                                                   l
                                                
                                             
                                          
                                       
                                       -
                                       
                                          
                                             R
                                          
                                          
                                             k
                                          
                                          
                                             S
                                          
                                       
                                       
                                       
                                          
                                             X
                                          
                                          
                                             k
                                          
                                       
                                    
                                 
                              
                              =
                              0
                              ,
                              
                              ∀
                              
                              s
                              ∈
                              S
                              ,
                              
                              ∀
                              
                              k
                              ∈
                              
                                 
                                    A
                                 
                                 
                                    s
                                 
                              
                              ,
                           
                        
                     
                     
                        
                           (34)
                           
                              
                                 
                                    L
                                 
                                 
                                    4
                                 
                              
                              
                              
                                 
                                    
                                       
                                          
                                             
                                                ∑
                                             
                                             
                                                s
                                                ∈
                                                S
                                             
                                          
                                       
                                       
                                          
                                             N
                                          
                                          
                                             s
                                          
                                       
                                       -
                                       
                                          
                                             N
                                          
                                          
                                             P
                                          
                                       
                                    
                                 
                              
                              =
                              0
                              ,
                           
                        
                     
                     
                        
                           
                              constraints
                              
                              
                                 (25)–(28).
                           
                        
                     
                  

In the following we will analyze two limiting regimes for the Cloud system. In particular Proposition 5 considers that the system provides very good performance for a provider s (i.e., the constraints (26) are not active for the whole set of WS applications 
                        
                           
                              
                                 A
                              
                              
                                 s
                              
                           
                        
                      hosted at the PaaS site), which corresponds to light load conditions for the SaaS s. Vice versa, Proposition 6 considers the case a provider s is under heavy load and the minimum workload is served for every WS applications in 
                        
                           
                              
                                 A
                              
                              
                                 s
                              
                           
                        
                     . These results are used in Section 5 to identify the initial solution for our resource allocation algorithm, and, as it will be further discussed in Section 6, they allow to achieve the best efficiency in terms of PoA.

In the remainder of the paper, we will denote with 
                        
                           
                              
                                 Ψ
                              
                              
                                 sk
                              
                           
                           =
                           
                              
                                 α
                              
                              
                                 k
                              
                           
                           
                           
                              
                                 
                                    1
                                    -
                                    
                                       
                                          1
                                       
                                       
                                          
                                             
                                                m
                                             
                                             
                                                k
                                             
                                          
                                       
                                    
                                 
                              
                           
                           +
                           
                              
                                 p
                              
                              
                                 k
                              
                           
                           +
                           
                              
                                 δ
                              
                              
                                 s
                              
                           
                           
                           
                              
                                 R
                              
                              
                                 k
                              
                              
                                 S
                              
                           
                        
                      and we set 
                        
                           
                              
                                 Ω
                              
                              
                                 sk
                              
                           
                           =
                           
                              
                                 v
                              
                              
                                 sk
                              
                           
                           
                           C
                           /
                           
                              
                                 μ
                              
                              
                                 k
                              
                           
                        
                     .
                        Proposition 5
                        
                           If 
                           
                              
                                 (
                                 X
                                 ,
                                 N
                                 )
                              
                            
                           is a social optimum solution and there exists a SaaS provider s such that 
                           
                              
                                 
                                    
                                       X
                                    
                                    
                                       k
                                    
                                 
                                 =
                                 
                                    
                                       Λ
                                    
                                    
                                       k
                                    
                                 
                              
                            
                           and the response time is strictly lower than 
                           
                              
                                 
                                    
                                       R
                                    
                                    
                                       k
                                    
                                    
                                       S
                                    
                                 
                              
                            
                           for all WS applications 
                           
                              
                                 k
                                 ∈
                                 
                                    
                                       A
                                    
                                    
                                       s
                                    
                                 
                              
                           
                           , then:
                           
                              
                                 (35)
                                 
                                    
                                       
                                          
                                             
                                                ∑
                                             
                                             
                                                k
                                                ∈
                                                
                                                   
                                                      A
                                                   
                                                   
                                                      s
                                                   
                                                
                                             
                                          
                                          
                                             
                                                v
                                             
                                             
                                                sk
                                             
                                          
                                          
                                          
                                             
                                                Λ
                                             
                                             
                                                k
                                             
                                          
                                          /
                                          
                                             
                                                μ
                                             
                                             
                                                k
                                             
                                          
                                       
                                       
                                          C
                                          -
                                          
                                             
                                                
                                                   
                                                      
                                                         
                                                            δ
                                                         
                                                         
                                                            s
                                                         
                                                      
                                                      |
                                                      
                                                         
                                                            A
                                                         
                                                         
                                                            s
                                                         
                                                      
                                                      |
                                                   
                                                   
                                                      
                                                         
                                                            min
                                                         
                                                         
                                                            k
                                                            ∈
                                                            
                                                               
                                                                  A
                                                               
                                                               
                                                                  s
                                                               
                                                            
                                                         
                                                      
                                                      
                                                         
                                                            Ψ
                                                         
                                                         
                                                            sk
                                                         
                                                      
                                                      /
                                                      
                                                         
                                                            Ω
                                                         
                                                         
                                                            sk
                                                         
                                                      
                                                   
                                                
                                             
                                          
                                       
                                    
                                    ⩽
                                    
                                       
                                          N
                                       
                                       
                                          s
                                       
                                    
                                    ⩽
                                    
                                       
                                          
                                             
                                                c
                                             
                                          
                                          +
                                          
                                             
                                                
                                                   
                                                      δ
                                                   
                                                   
                                                      s
                                                   
                                                
                                                |
                                                
                                                   
                                                      A
                                                   
                                                   
                                                      s
                                                   
                                                
                                                |
                                             
                                          
                                       
                                       
                                          C
                                          
                                          
                                             
                                                c
                                             
                                          
                                       
                                    
                                    
                                    
                                       
                                          
                                             ∑
                                          
                                          
                                             k
                                             ∈
                                             
                                                
                                                   A
                                                
                                                
                                                   s
                                                
                                             
                                          
                                       
                                    
                                    
                                       
                                          v
                                       
                                       
                                          sk
                                       
                                    
                                    
                                    
                                       
                                          Λ
                                       
                                       
                                          k
                                       
                                    
                                    /
                                    
                                       
                                          μ
                                       
                                       
                                          k
                                       
                                    
                                    .
                                 
                              
                           
                        

Since for all 
                              
                                 k
                                 ∈
                                 
                                    
                                       A
                                    
                                    
                                       s
                                    
                                 
                              
                            the constraint (26) is not active and 
                              
                                 
                                    
                                       X
                                    
                                    
                                       k
                                    
                                 
                                 =
                                 
                                    
                                       Λ
                                    
                                    
                                       k
                                    
                                 
                              
                           , we obtain 
                              
                                 
                                    
                                       L
                                    
                                    
                                       k
                                    
                                    
                                       1
                                    
                                 
                                 =
                                 
                                    
                                       L
                                    
                                    
                                       k
                                    
                                    
                                       3
                                    
                                 
                                 =
                                 0
                              
                           . It follows from (29) that
                              
                                 
                                    
                                       
                                          Ψ
                                       
                                       
                                          sk
                                       
                                    
                                    -
                                    
                                       
                                          
                                             
                                                Ω
                                             
                                             
                                                sk
                                             
                                          
                                          
                                          
                                             
                                                δ
                                             
                                             
                                                s
                                             
                                          
                                          
                                          |
                                          
                                             
                                                A
                                             
                                             
                                                s
                                             
                                          
                                          |
                                          
                                          
                                             
                                                N
                                             
                                             
                                                s
                                             
                                             
                                                2
                                             
                                          
                                       
                                       
                                          
                                             
                                                (
                                                C
                                                
                                                
                                                   
                                                      N
                                                   
                                                   
                                                      s
                                                   
                                                
                                                -
                                                
                                                   
                                                      ∑
                                                   
                                                   
                                                      l
                                                      ∈
                                                      
                                                         
                                                            A
                                                         
                                                         
                                                            s
                                                         
                                                      
                                                   
                                                
                                                
                                                   
                                                      v
                                                   
                                                   
                                                      sl
                                                   
                                                
                                                
                                                   
                                                      X
                                                   
                                                   
                                                      l
                                                   
                                                
                                                /
                                                
                                                   
                                                      μ
                                                   
                                                   
                                                      l
                                                   
                                                
                                                )
                                             
                                             
                                                2
                                             
                                          
                                       
                                    
                                    =
                                    
                                       
                                          L
                                       
                                       
                                          k
                                       
                                       
                                          2
                                       
                                    
                                    ⩾
                                    0
                                    
                                    ∀
                                    
                                    k
                                    ∈
                                    
                                       
                                          A
                                       
                                       
                                          s
                                       
                                    
                                    ,
                                 
                              
                           hence we have
                              
                                 
                                    
                                       
                                          
                                             min
                                          
                                          
                                             k
                                             ∈
                                             
                                                
                                                   A
                                                
                                                
                                                   s
                                                
                                             
                                          
                                       
                                    
                                    
                                       
                                          
                                             
                                                Ψ
                                             
                                             
                                                sk
                                             
                                          
                                       
                                       
                                          
                                             
                                                Ω
                                             
                                             
                                                sk
                                             
                                          
                                       
                                    
                                    ⩾
                                    
                                       
                                          
                                             
                                                δ
                                             
                                             
                                                s
                                             
                                          
                                          
                                          |
                                          
                                             
                                                A
                                             
                                             
                                                s
                                             
                                          
                                          |
                                          
                                          
                                             
                                                N
                                             
                                             
                                                s
                                             
                                             
                                                2
                                             
                                          
                                       
                                       
                                          
                                             
                                                (
                                                C
                                                
                                                
                                                   
                                                      N
                                                   
                                                   
                                                      s
                                                   
                                                
                                                -
                                                
                                                   
                                                      ∑
                                                   
                                                   
                                                      l
                                                      ∈
                                                      
                                                         
                                                            A
                                                         
                                                         
                                                            s
                                                         
                                                      
                                                   
                                                
                                                
                                                   
                                                      v
                                                   
                                                   
                                                      sl
                                                   
                                                
                                                
                                                   
                                                      X
                                                   
                                                   
                                                      l
                                                   
                                                
                                                /
                                                
                                                   
                                                      μ
                                                   
                                                   
                                                      l
                                                   
                                                
                                                )
                                             
                                             
                                                2
                                             
                                          
                                       
                                    
                                    .
                                 
                              
                           Setting 
                              
                                 
                                    
                                       X
                                    
                                    
                                       l
                                    
                                 
                                 =
                                 
                                    
                                       Λ
                                    
                                    
                                       l
                                    
                                 
                              
                            and taking into account the equilibrium condition 
                              
                                 C
                                 
                                 
                                    
                                       N
                                    
                                    
                                       s
                                    
                                 
                                 -
                                 
                                    
                                       ∑
                                    
                                    
                                       l
                                       ∈
                                       
                                          
                                             A
                                          
                                          
                                             s
                                          
                                       
                                    
                                 
                                 
                                    
                                       v
                                    
                                    
                                       sl
                                    
                                 
                                 
                                 
                                    
                                       Λ
                                    
                                    
                                       l
                                    
                                 
                                 /
                                 
                                    
                                       μ
                                    
                                    
                                       l
                                    
                                 
                                 >
                                 0
                              
                           , we obtain the first inequality of (35).

On the other hand, it follows from (30) that
                              
                                 
                                    
                                       
                                          δ
                                       
                                       
                                          s
                                       
                                    
                                    |
                                    
                                       
                                          A
                                       
                                       
                                          s
                                       
                                    
                                    |
                                    
                                       
                                          
                                             
                                                
                                                   
                                                      
                                                         
                                                            ∑
                                                         
                                                         
                                                            l
                                                            ∈
                                                            
                                                               
                                                                  A
                                                               
                                                               
                                                                  s
                                                               
                                                            
                                                         
                                                      
                                                      
                                                         
                                                            v
                                                         
                                                         
                                                            sl
                                                         
                                                      
                                                      
                                                      
                                                         
                                                            X
                                                         
                                                         
                                                            l
                                                         
                                                      
                                                      /
                                                      
                                                         
                                                            μ
                                                         
                                                         
                                                            l
                                                         
                                                      
                                                   
                                                   
                                                      C
                                                      
                                                      
                                                         
                                                            N
                                                         
                                                         
                                                            s
                                                         
                                                      
                                                      -
                                                      
                                                         
                                                            ∑
                                                         
                                                         
                                                            l
                                                            ∈
                                                            
                                                               
                                                                  A
                                                               
                                                               
                                                                  s
                                                               
                                                            
                                                         
                                                      
                                                      
                                                         
                                                            v
                                                         
                                                         
                                                            sl
                                                         
                                                      
                                                      
                                                      
                                                         
                                                            X
                                                         
                                                         
                                                            l
                                                         
                                                      
                                                      /
                                                      
                                                         
                                                            μ
                                                         
                                                         
                                                            l
                                                         
                                                      
                                                   
                                                
                                             
                                          
                                       
                                       
                                          2
                                       
                                    
                                    -
                                    c
                                    =
                                    
                                       
                                          L
                                       
                                       
                                          4
                                       
                                    
                                    ⩾
                                    0
                                    .
                                 
                              
                           Setting 
                              
                                 
                                    
                                       X
                                    
                                    
                                       l
                                    
                                 
                                 =
                                 
                                    
                                       Λ
                                    
                                    
                                       l
                                    
                                 
                              
                            for all 
                              
                                 l
                                 ∈
                                 
                                    
                                       A
                                    
                                    
                                       s
                                    
                                 
                              
                           , we get
                              
                                 
                                    
                                       
                                          
                                             
                                                δ
                                             
                                             
                                                s
                                             
                                          
                                          |
                                          
                                             
                                                A
                                             
                                             
                                                s
                                             
                                          
                                          |
                                       
                                       
                                          c
                                       
                                    
                                    
                                    
                                       
                                          
                                             
                                                
                                                   
                                                      
                                                         ∑
                                                      
                                                      
                                                         k
                                                         ∈
                                                         
                                                            
                                                               A
                                                            
                                                            
                                                               s
                                                            
                                                         
                                                      
                                                   
                                                
                                                
                                                   
                                                      v
                                                   
                                                   
                                                      sl
                                                   
                                                
                                                
                                                
                                                   
                                                      Λ
                                                   
                                                   
                                                      l
                                                   
                                                
                                                /
                                                
                                                   
                                                      μ
                                                   
                                                   
                                                      l
                                                   
                                                
                                             
                                          
                                       
                                       
                                          2
                                       
                                    
                                    ⩾
                                    
                                       
                                          
                                             
                                                C
                                                
                                                
                                                   
                                                      N
                                                   
                                                   
                                                      s
                                                   
                                                
                                                -
                                                
                                                   
                                                      
                                                         ∑
                                                      
                                                      
                                                         l
                                                         ∈
                                                         
                                                            
                                                               A
                                                            
                                                            
                                                               s
                                                            
                                                         
                                                      
                                                   
                                                
                                                
                                                   
                                                      v
                                                   
                                                   
                                                      sl
                                                   
                                                
                                                
                                                
                                                   
                                                      Λ
                                                   
                                                   
                                                      l
                                                   
                                                
                                                /
                                                
                                                   
                                                      μ
                                                   
                                                   
                                                      l
                                                   
                                                
                                             
                                          
                                       
                                       
                                          2
                                       
                                    
                                    ,
                                 
                              
                           which, together with the equilibrium condition 
                              
                                 C
                                 
                                 
                                    
                                       N
                                    
                                    
                                       s
                                    
                                 
                                 -
                                 
                                    
                                       ∑
                                    
                                    
                                       l
                                       ∈
                                       
                                          
                                             A
                                          
                                          
                                             s
                                          
                                       
                                    
                                 
                                 
                                    
                                       v
                                    
                                    
                                       sl
                                    
                                 
                                 
                                 
                                    
                                       Λ
                                    
                                    
                                       l
                                    
                                 
                                 /
                                 
                                    
                                       μ
                                    
                                    
                                       l
                                    
                                 
                                 >
                                 0
                              
                           , implies the second inequality of (35). □


                           If 
                           
                              
                                 (
                                 X
                                 ,
                                 N
                                 )
                              
                            
                           is a social optimum solution and there exists a SaaS provider s such that 
                           
                              
                                 
                                    
                                       X
                                    
                                    
                                       k
                                    
                                 
                                 =
                                 
                                    
                                       λ
                                    
                                    
                                       k
                                    
                                 
                              
                            
                           and the response time is strictly lower than 
                           
                              
                                 
                                    
                                       R
                                    
                                    
                                       k
                                    
                                    
                                       S
                                    
                                 
                              
                            
                           for all WS applications 
                           
                              
                                 k
                                 ∈
                                 
                                    
                                       A
                                    
                                    
                                       s
                                    
                                 
                              
                           
                           , then
                           
                              
                                 (36)
                                 
                                    
                                       
                                          N
                                       
                                       
                                          s
                                       
                                    
                                    ⩽
                                    
                                       min
                                    
                                    
                                       
                                          
                                             
                                                
                                                   1
                                                
                                                
                                                   C
                                                   -
                                                   
                                                      
                                                         
                                                            
                                                               
                                                                  
                                                                     δ
                                                                  
                                                                  
                                                                     s
                                                                  
                                                               
                                                               |
                                                               
                                                                  
                                                                     A
                                                                  
                                                                  
                                                                     s
                                                                  
                                                               
                                                               |
                                                            
                                                            
                                                               
                                                                  
                                                                     max
                                                                  
                                                                  
                                                                     k
                                                                     ∈
                                                                     
                                                                        
                                                                           A
                                                                        
                                                                        
                                                                           s
                                                                        
                                                                     
                                                                  
                                                               
                                                               
                                                                  
                                                                     Ψ
                                                                  
                                                                  
                                                                     sk
                                                                  
                                                               
                                                               /
                                                               
                                                                  
                                                                     Ω
                                                                  
                                                                  
                                                                     sk
                                                                  
                                                               
                                                            
                                                         
                                                      
                                                   
                                                
                                             
                                             ,
                                             
                                                
                                                   
                                                      
                                                         c
                                                      
                                                   
                                                   +
                                                   
                                                      
                                                         
                                                            
                                                               δ
                                                            
                                                            
                                                               s
                                                            
                                                         
                                                         |
                                                         
                                                            
                                                               A
                                                            
                                                            
                                                               s
                                                            
                                                         
                                                         |
                                                      
                                                   
                                                
                                                
                                                   C
                                                   
                                                   
                                                      
                                                         c
                                                      
                                                   
                                                
                                             
                                          
                                       
                                    
                                    
                                       
                                          
                                             ∑
                                          
                                          
                                             k
                                             ∈
                                             
                                                
                                                   A
                                                
                                                
                                                   s
                                                
                                             
                                          
                                       
                                    
                                    
                                       
                                          v
                                       
                                       
                                          sk
                                       
                                    
                                    
                                    
                                       
                                          λ
                                       
                                       
                                          k
                                       
                                    
                                    /
                                    
                                       
                                          μ
                                       
                                       
                                          k
                                       
                                    
                                    .
                                 
                              
                           
                        

Since for all 
                              
                                 k
                                 ∈
                                 
                                    
                                       A
                                    
                                    
                                       s
                                    
                                 
                              
                            the constraint (26) is not active and 
                              
                                 
                                    
                                       X
                                    
                                    
                                       k
                                    
                                 
                                 =
                                 
                                    
                                       λ
                                    
                                    
                                       k
                                    
                                 
                              
                           , we obtain 
                              
                                 
                                    
                                       L
                                    
                                    
                                       k
                                    
                                    
                                       2
                                    
                                 
                                 =
                                 
                                    
                                       L
                                    
                                    
                                       k
                                    
                                    
                                       3
                                    
                                 
                                 =
                                 0
                              
                           . From (29) we obtain
                              
                                 
                                    
                                       
                                          Ψ
                                       
                                       
                                          sk
                                       
                                    
                                    -
                                    
                                       
                                          
                                             
                                                Ω
                                             
                                             
                                                sk
                                             
                                          
                                          
                                          
                                             
                                                δ
                                             
                                             
                                                s
                                             
                                          
                                          
                                          |
                                          
                                             
                                                A
                                             
                                             
                                                s
                                             
                                          
                                          |
                                          
                                          
                                             
                                                N
                                             
                                             
                                                s
                                             
                                             
                                                2
                                             
                                          
                                       
                                       
                                          
                                             
                                                (
                                                C
                                                
                                                
                                                   
                                                      N
                                                   
                                                   
                                                      s
                                                   
                                                
                                                -
                                                
                                                   
                                                      ∑
                                                   
                                                   
                                                      l
                                                      ∈
                                                      
                                                         
                                                            A
                                                         
                                                         
                                                            s
                                                         
                                                      
                                                   
                                                
                                                
                                                   
                                                      v
                                                   
                                                   
                                                      sl
                                                   
                                                
                                                
                                                   
                                                      X
                                                   
                                                   
                                                      l
                                                   
                                                
                                                /
                                                
                                                   
                                                      μ
                                                   
                                                   
                                                      l
                                                   
                                                
                                                )
                                             
                                             
                                                2
                                             
                                          
                                       
                                    
                                    =
                                    -
                                    
                                       
                                          L
                                       
                                       
                                          k
                                       
                                       
                                          1
                                       
                                    
                                    ⩽
                                    0
                                    ,
                                    
                                    ∀
                                    
                                    k
                                    ∈
                                    
                                       
                                          A
                                       
                                       
                                          s
                                       
                                    
                                    ,
                                 
                              
                           hence we have
                              
                                 
                                    
                                       
                                          
                                             max
                                          
                                          
                                             k
                                             ∈
                                             
                                                
                                                   A
                                                
                                                
                                                   s
                                                
                                             
                                          
                                       
                                    
                                    
                                       
                                          
                                             
                                                Ψ
                                             
                                             
                                                sk
                                             
                                          
                                       
                                       
                                          
                                             
                                                Ω
                                             
                                             
                                                sk
                                             
                                          
                                       
                                    
                                    ⩽
                                    
                                       
                                          
                                             
                                                δ
                                             
                                             
                                                s
                                             
                                          
                                          
                                          |
                                          
                                             
                                                A
                                             
                                             
                                                s
                                             
                                          
                                          |
                                          
                                          
                                             
                                                N
                                             
                                             
                                                s
                                             
                                             
                                                2
                                             
                                          
                                       
                                       
                                          
                                             
                                                (
                                                C
                                                
                                                
                                                   
                                                      N
                                                   
                                                   
                                                      s
                                                   
                                                
                                                -
                                                
                                                   
                                                      ∑
                                                   
                                                   
                                                      l
                                                      ∈
                                                      
                                                         
                                                            A
                                                         
                                                         
                                                            s
                                                         
                                                      
                                                   
                                                
                                                
                                                   
                                                      v
                                                   
                                                   
                                                      sl
                                                   
                                                
                                                
                                                   
                                                      X
                                                   
                                                   
                                                      l
                                                   
                                                
                                                /
                                                
                                                   
                                                      μ
                                                   
                                                   
                                                      l
                                                   
                                                
                                                )
                                             
                                             
                                                2
                                             
                                          
                                       
                                    
                                    .
                                 
                              
                           Setting 
                              
                                 
                                    
                                       X
                                    
                                    
                                       l
                                    
                                 
                                 =
                                 
                                    
                                       λ
                                    
                                    
                                       l
                                    
                                 
                              
                            and taking into account the equilibrium condition 
                              
                                 C
                                 
                                 
                                    
                                       N
                                    
                                    
                                       s
                                    
                                 
                                 -
                                 
                                    
                                       ∑
                                    
                                    
                                       l
                                       ∈
                                       
                                          
                                             A
                                          
                                          
                                             s
                                          
                                       
                                    
                                 
                                 
                                    
                                       v
                                    
                                    
                                       sl
                                    
                                 
                                 
                                 
                                    
                                       λ
                                    
                                    
                                       l
                                    
                                 
                                 /
                                 
                                    
                                       μ
                                    
                                    
                                       l
                                    
                                 
                                 >
                                 0
                              
                           , we obtain
                              
                                 (37)
                                 
                                    
                                       
                                          N
                                       
                                       
                                          s
                                       
                                    
                                    ⩽
                                    
                                       
                                          
                                             
                                                ∑
                                             
                                             
                                                l
                                                ∈
                                                
                                                   
                                                      A
                                                   
                                                   
                                                      s
                                                   
                                                
                                             
                                          
                                          
                                             
                                                v
                                             
                                             
                                                sl
                                             
                                          
                                          
                                          
                                             
                                                λ
                                             
                                             
                                                l
                                             
                                          
                                          /
                                          
                                             
                                                μ
                                             
                                             
                                                l
                                             
                                          
                                       
                                       
                                          C
                                          -
                                          
                                             
                                                
                                                   
                                                      
                                                         
                                                            δ
                                                         
                                                         
                                                            s
                                                         
                                                      
                                                      |
                                                      
                                                         
                                                            A
                                                         
                                                         
                                                            s
                                                         
                                                      
                                                      |
                                                   
                                                   
                                                      
                                                         
                                                            max
                                                         
                                                         
                                                            k
                                                            ∈
                                                            
                                                               
                                                                  A
                                                               
                                                               
                                                                  s
                                                               
                                                            
                                                         
                                                      
                                                      
                                                         
                                                            Ψ
                                                         
                                                         
                                                            sk
                                                         
                                                      
                                                      /
                                                      
                                                         
                                                            Ω
                                                         
                                                         
                                                            sk
                                                         
                                                      
                                                   
                                                
                                             
                                          
                                       
                                    
                                    .
                                 
                              
                           On the other hand, from (30) we get
                              
                                 
                                    
                                       
                                          δ
                                       
                                       
                                          s
                                       
                                    
                                    |
                                    
                                       
                                          A
                                       
                                       
                                          s
                                       
                                    
                                    |
                                    
                                       
                                          
                                             
                                                
                                                   
                                                      
                                                         
                                                            ∑
                                                         
                                                         
                                                            l
                                                            ∈
                                                            
                                                               
                                                                  A
                                                               
                                                               
                                                                  s
                                                               
                                                            
                                                         
                                                      
                                                      
                                                         
                                                            v
                                                         
                                                         
                                                            sl
                                                         
                                                      
                                                      
                                                      
                                                         
                                                            X
                                                         
                                                         
                                                            l
                                                         
                                                      
                                                      /
                                                      
                                                         
                                                            μ
                                                         
                                                         
                                                            l
                                                         
                                                      
                                                   
                                                   
                                                      C
                                                      
                                                      
                                                         
                                                            N
                                                         
                                                         
                                                            s
                                                         
                                                      
                                                      -
                                                      
                                                         
                                                            ∑
                                                         
                                                         
                                                            l
                                                            ∈
                                                            
                                                               
                                                                  A
                                                               
                                                               
                                                                  s
                                                               
                                                            
                                                         
                                                      
                                                      
                                                         
                                                            v
                                                         
                                                         
                                                            sl
                                                         
                                                      
                                                      
                                                      
                                                         
                                                            X
                                                         
                                                         
                                                            l
                                                         
                                                      
                                                      /
                                                      
                                                         
                                                            μ
                                                         
                                                         
                                                            l
                                                         
                                                      
                                                   
                                                
                                             
                                          
                                       
                                       
                                          2
                                       
                                    
                                    -
                                    c
                                    =
                                    
                                       
                                          L
                                       
                                       
                                          4
                                       
                                    
                                    ⩾
                                    0
                                    .
                                 
                              
                           Setting 
                              
                                 
                                    
                                       X
                                    
                                    
                                       l
                                    
                                 
                                 =
                                 
                                    
                                       λ
                                    
                                    
                                       l
                                    
                                 
                              
                            for all 
                              
                                 l
                                 ∈
                                 
                                    
                                       A
                                    
                                    
                                       s
                                    
                                 
                              
                           , we get
                              
                                 
                                    
                                       
                                          
                                             
                                                δ
                                             
                                             
                                                s
                                             
                                          
                                          |
                                          
                                             
                                                A
                                             
                                             
                                                s
                                             
                                          
                                          |
                                       
                                       
                                          c
                                       
                                    
                                    
                                    
                                       
                                          
                                             
                                                
                                                   
                                                      
                                                         ∑
                                                      
                                                      
                                                         k
                                                         ∈
                                                         
                                                            
                                                               A
                                                            
                                                            
                                                               s
                                                            
                                                         
                                                      
                                                   
                                                
                                                
                                                   
                                                      v
                                                   
                                                   
                                                      sl
                                                   
                                                
                                                
                                                
                                                   
                                                      λ
                                                   
                                                   
                                                      l
                                                   
                                                
                                                /
                                                
                                                   
                                                      μ
                                                   
                                                   
                                                      l
                                                   
                                                
                                             
                                          
                                       
                                       
                                          2
                                       
                                    
                                    ⩾
                                    
                                       
                                          
                                             
                                                C
                                                
                                                
                                                   
                                                      N
                                                   
                                                   
                                                      s
                                                   
                                                
                                                -
                                                
                                                   
                                                      
                                                         ∑
                                                      
                                                      
                                                         l
                                                         ∈
                                                         
                                                            
                                                               A
                                                            
                                                            
                                                               s
                                                            
                                                         
                                                      
                                                   
                                                
                                                
                                                   
                                                      v
                                                   
                                                   
                                                      sl
                                                   
                                                
                                                
                                                
                                                   
                                                      λ
                                                   
                                                   
                                                      l
                                                   
                                                
                                                /
                                                
                                                   
                                                      μ
                                                   
                                                   
                                                      l
                                                   
                                                
                                             
                                          
                                       
                                       
                                          2
                                       
                                    
                                    ,
                                 
                              
                           which, together with the equilibrium condition 
                              
                                 C
                                 
                                 
                                    
                                       N
                                    
                                    
                                       s
                                    
                                 
                                 -
                                 
                                    
                                       ∑
                                    
                                    
                                       l
                                       ∈
                                       
                                          
                                             A
                                          
                                          
                                             s
                                          
                                       
                                    
                                 
                                 
                                    
                                       v
                                    
                                    
                                       sl
                                    
                                 
                                 
                                 
                                    
                                       λ
                                    
                                    
                                       l
                                    
                                 
                                 /
                                 
                                    
                                       μ
                                    
                                    
                                       l
                                    
                                 
                                 >
                                 0
                              
                           , implies
                              
                                 (38)
                                 
                                    
                                       
                                          N
                                       
                                       
                                          s
                                       
                                    
                                    ⩽
                                    
                                       
                                          
                                             
                                                c
                                             
                                          
                                          +
                                          
                                             
                                                
                                                   
                                                      δ
                                                   
                                                   
                                                      s
                                                   
                                                
                                                |
                                                
                                                   
                                                      A
                                                   
                                                   
                                                      s
                                                   
                                                
                                                |
                                             
                                          
                                       
                                       
                                          C
                                          
                                          
                                             
                                                c
                                             
                                          
                                       
                                    
                                    
                                    
                                       
                                          
                                             ∑
                                          
                                          
                                             k
                                             ∈
                                             
                                                
                                                   A
                                                
                                                
                                                   s
                                                
                                             
                                          
                                       
                                    
                                    
                                       
                                          v
                                       
                                       
                                          sk
                                       
                                    
                                    
                                    
                                       
                                          λ
                                       
                                       
                                          k
                                       
                                    
                                    /
                                    
                                       
                                          μ
                                       
                                       
                                          k
                                       
                                    
                                    .
                                 
                              
                           Finally, the thesis follows from (37) and (38).□

In the previous section it has been proved that the social optimum problem is convex and, from a theoretical point of view, it could be solved by the PaaS which has the full knowledge of system parameters (see Section 2). However, computational results demonstrate that only small instances can be solved to optimality with commercial nonlinear optimization packages (see Section 6). To handle representative problem sizes, in this Section we provide a solution algorithm which converges to a GNE. Several different versions of the algorithm we implemented are characterized by a different choice of the initial solution.

Before describing the solution algorithm, we analyze in more details the PaaS and SaaSs problems. In Section 3.1 we have shown that PaaS problem is easy to solve. On the other hand, the SaaS problem (14)–(18) cannot be solved analytically, but it can be reformulated as a convex problem. In fact, we can prove similarly to Proposition 3 that constraints (17) are active in any SaaS optimal solution. Hence, the variables 
                        
                           
                              
                                 R
                              
                              
                                 k
                              
                              
                                 P
                              
                           
                        
                      can be expressed as function of 
                        
                           
                              
                                 X
                              
                              
                                 k
                              
                           
                        
                      by formula (23) and we can rewrite the SaaS problem as follows:
                        
                           (39)
                           
                              
                                 
                                    
                                       max
                                    
                                    
                                       
                                          
                                             X
                                          
                                          
                                             s
                                          
                                       
                                    
                                 
                              
                              
                              
                                 
                                    
                                       ∑
                                    
                                    
                                       k
                                       ∈
                                       
                                          
                                             A
                                          
                                          
                                             s
                                          
                                       
                                    
                                 
                              
                              
                                 
                                    
                                       
                                          
                                             α
                                          
                                          
                                             k
                                          
                                       
                                       
                                       
                                          
                                             
                                                1
                                                -
                                                
                                                   
                                                      1
                                                   
                                                   
                                                      
                                                         
                                                            m
                                                         
                                                         
                                                            k
                                                         
                                                      
                                                   
                                                
                                             
                                          
                                       
                                       
                                       
                                          
                                             X
                                          
                                          
                                             k
                                          
                                       
                                       -
                                       
                                          
                                             p
                                          
                                          
                                             k
                                          
                                       
                                       
                                       (
                                       
                                          
                                             Λ
                                          
                                          
                                             k
                                          
                                       
                                       -
                                       
                                          
                                             X
                                          
                                          
                                             k
                                          
                                       
                                       )
                                       +
                                       
                                          
                                             δ
                                          
                                          
                                             s
                                          
                                       
                                       
                                       
                                          
                                             R
                                          
                                          
                                             k
                                          
                                          
                                             S
                                          
                                       
                                       
                                       
                                          
                                             X
                                          
                                          
                                             k
                                          
                                       
                                    
                                 
                              
                              -
                              
                                 
                                    δ
                                 
                                 
                                    s
                                 
                              
                              |
                              
                                 
                                    A
                                 
                                 
                                    s
                                 
                              
                              |
                              
                                 
                                    
                                       
                                          N
                                       
                                       
                                          s
                                       
                                    
                                    
                                       
                                          ∑
                                       
                                       
                                          l
                                          ∈
                                          
                                             
                                                A
                                             
                                             
                                                s
                                             
                                          
                                       
                                    
                                    
                                       
                                          v
                                       
                                       
                                          sl
                                       
                                    
                                    
                                    
                                       
                                          X
                                       
                                       
                                          l
                                       
                                    
                                    /
                                    
                                       
                                          μ
                                       
                                       
                                          l
                                       
                                    
                                 
                                 
                                    C
                                    
                                    
                                       
                                          N
                                       
                                       
                                          s
                                       
                                    
                                    -
                                    
                                       
                                          ∑
                                       
                                       
                                          l
                                          ∈
                                          
                                             
                                                A
                                             
                                             
                                                s
                                             
                                          
                                       
                                    
                                    
                                       
                                          v
                                       
                                       
                                          sl
                                       
                                    
                                    
                                    
                                       
                                          X
                                       
                                       
                                          l
                                       
                                    
                                    /
                                    
                                       
                                          μ
                                       
                                       
                                          l
                                       
                                    
                                 
                              
                           
                        
                     subject to:
                        
                           (40)
                           
                              
                                 
                                    λ
                                 
                                 
                                    k
                                 
                              
                              ⩽
                              
                                 
                                    X
                                 
                                 
                                    k
                                 
                              
                              ⩽
                              
                                 
                                    Λ
                                 
                                 
                                    k
                                 
                              
                              ,
                              
                              ∀
                              
                              k
                              ∈
                              
                                 
                                    A
                                 
                                 
                                    s
                                 
                              
                              ,
                           
                        
                     
                     
                        
                           (41)
                           
                              
                                 
                                    
                                       
                                          N
                                       
                                       
                                          s
                                       
                                    
                                    
                                       
                                          ∑
                                       
                                       
                                          l
                                          ∈
                                          
                                             
                                                A
                                             
                                             
                                                s
                                             
                                          
                                       
                                    
                                    
                                       
                                          v
                                       
                                       
                                          sl
                                       
                                    
                                    
                                       
                                          X
                                       
                                       
                                          l
                                       
                                    
                                    /
                                    
                                       
                                          μ
                                       
                                       
                                          l
                                       
                                    
                                 
                                 
                                    C
                                    
                                    
                                       
                                          N
                                       
                                       
                                          s
                                       
                                    
                                    -
                                    
                                       
                                          ∑
                                       
                                       
                                          l
                                          ∈
                                          
                                             
                                                A
                                             
                                             
                                                s
                                             
                                          
                                       
                                    
                                    
                                       
                                          v
                                       
                                       
                                          sl
                                       
                                    
                                    
                                       
                                          X
                                       
                                       
                                          l
                                       
                                    
                                    /
                                    
                                       
                                          μ
                                       
                                       
                                          l
                                       
                                    
                                 
                              
                              ⩽
                              
                                 
                                    R
                                 
                                 
                                    k
                                 
                                 
                                    S
                                 
                              
                              
                              
                                 
                                    X
                                 
                                 
                                    k
                                 
                              
                              ,
                              
                              ∀
                              
                              k
                              ∈
                              
                                 
                                    A
                                 
                                 
                                    s
                                 
                              
                              ,
                           
                        
                     
                     
                        
                           (42)
                           
                              
                                 
                                    
                                       ∑
                                    
                                    
                                       l
                                       ∈
                                       
                                          
                                             A
                                          
                                          
                                             s
                                          
                                       
                                    
                                 
                              
                              
                                 
                                    v
                                 
                                 
                                    sl
                                 
                              
                              
                                 
                                    X
                                 
                                 
                                    l
                                 
                              
                              /
                              
                                 
                                    μ
                                 
                                 
                                    l
                                 
                              
                              <
                              
                                 
                                    CN
                                 
                                 
                                    s
                                 
                              
                              .
                           
                        
                     
                  

Finally, it can be proved that this problem is convex following the proof of Proposition 4.

Now, we describe the solution algorithm and prove that it converges to a GNE.


                     Solution Algorithm
                     
                        
                           1.
                           An initial value for the number of physical servers of each SaaS 
                                 
                                    
                                       
                                          N
                                       
                                       
                                          s
                                       
                                    
                                 
                               is identified.

If 
                                 
                                    
                                       
                                          ∑
                                       
                                       
                                          s
                                          ∈
                                          S
                                       
                                    
                                    
                                       
                                          N
                                       
                                       
                                          s
                                       
                                    
                                    >
                                    
                                       
                                          N
                                       
                                       
                                          P
                                       
                                    
                                 
                              , the PaaS provider reduces 
                                 
                                    
                                       
                                          N
                                       
                                       
                                          s
                                       
                                    
                                 
                               proportionally to constraint (10) violation, i.e. the PaaS sets
                                 
                                    (43)
                                    
                                       
                                          
                                             
                                                
                                                   N
                                                
                                                
                                                   ‾
                                                
                                             
                                          
                                          
                                             s
                                          
                                       
                                       =
                                       
                                          
                                             
                                                
                                                   N
                                                
                                                
                                                   s
                                                
                                             
                                             
                                             
                                                
                                                   N
                                                
                                                
                                                   P
                                                
                                             
                                          
                                          
                                             
                                                
                                                   ∑
                                                
                                                
                                                   
                                                      
                                                         s
                                                      
                                                      
                                                         ′
                                                      
                                                   
                                                   ∈
                                                   S
                                                
                                             
                                             
                                                
                                                   N
                                                
                                                
                                                   
                                                      
                                                         s
                                                      
                                                      
                                                         ′
                                                      
                                                   
                                                
                                             
                                          
                                       
                                       ,
                                       
                                       
                                       ∀
                                       
                                       s
                                       ∈
                                       S
                                       ;
                                    
                                 
                              otherwise PaaS provider set 
                                 
                                    
                                       
                                          
                                             
                                                N
                                             
                                             
                                                ‾
                                             
                                          
                                       
                                       
                                          s
                                       
                                    
                                    =
                                    
                                       
                                          N
                                       
                                       
                                          s
                                       
                                    
                                 
                               for all 
                                 
                                    s
                                    ∈
                                    S
                                 
                              .

Given 
                                 
                                    
                                       
                                          N
                                       
                                       
                                          ‾
                                       
                                    
                                 
                              , each SaaS provider s finds a optimal solution 
                                 
                                    
                                       
                                          (
                                          
                                             
                                                
                                                   
                                                      X
                                                   
                                                   
                                                      ‾
                                                   
                                                
                                             
                                             
                                                k
                                             
                                          
                                          )
                                       
                                       
                                          k
                                          ∈
                                          
                                             
                                                A
                                             
                                             
                                                s
                                             
                                          
                                       
                                    
                                 
                              , of the convex optimization problem (39)–(42) and set
                                 
                                    
                                       
                                          
                                             
                                                
                                                   R
                                                
                                                
                                                   ‾
                                                
                                             
                                          
                                          
                                             k
                                          
                                          
                                             P
                                          
                                       
                                       =
                                       
                                          
                                             1
                                          
                                          
                                             
                                                
                                                   
                                                      
                                                         X
                                                      
                                                      
                                                         ‾
                                                      
                                                   
                                                
                                                
                                                   k
                                                
                                             
                                          
                                       
                                       
                                          
                                             
                                                
                                                   
                                                      
                                                         N
                                                      
                                                      
                                                         ‾
                                                      
                                                   
                                                
                                                
                                                   s
                                                
                                             
                                             
                                                
                                                   ∑
                                                
                                                
                                                   l
                                                   ∈
                                                   
                                                      
                                                         A
                                                      
                                                      
                                                         s
                                                      
                                                   
                                                
                                             
                                             
                                                
                                                   v
                                                
                                                
                                                   sl
                                                
                                             
                                             
                                                
                                                   
                                                      
                                                         X
                                                      
                                                      
                                                         ‾
                                                      
                                                   
                                                
                                                
                                                   l
                                                
                                             
                                             /
                                             
                                                
                                                   μ
                                                
                                                
                                                   l
                                                
                                             
                                          
                                          
                                             C
                                             
                                             
                                                
                                                   
                                                      
                                                         N
                                                      
                                                      
                                                         ‾
                                                      
                                                   
                                                
                                                
                                                   s
                                                
                                             
                                             -
                                             
                                                
                                                   ∑
                                                
                                                
                                                   l
                                                   ∈
                                                   
                                                      
                                                         A
                                                      
                                                      
                                                         s
                                                      
                                                   
                                                
                                             
                                             
                                                
                                                   v
                                                
                                                
                                                   sl
                                                
                                             
                                             
                                                
                                                   
                                                      
                                                         X
                                                      
                                                      
                                                         ‾
                                                      
                                                   
                                                
                                                
                                                   l
                                                
                                             
                                             /
                                             
                                                
                                                   μ
                                                
                                                
                                                   l
                                                
                                             
                                          
                                       
                                       ,
                                       
                                       ∀
                                       
                                       k
                                       ∈
                                       
                                          
                                             A
                                          
                                          
                                             s
                                          
                                       
                                       .
                                    
                                 
                              
                           

The algorithm performs three simple steps. An initial estimate for the number of physical servers is identified. If the initial server assignment is unfeasible, then the PaaS reallocates servers among SaaSs. Finally, each SaaS computes the optimal values for 
                        
                           (
                           
                              
                                 
                                    
                                       X
                                    
                                    
                                       ‾
                                    
                                 
                              
                              
                                 s
                              
                           
                           ,
                           
                              
                                 
                                    
                                       R
                                    
                                    
                                       ‾
                                    
                                 
                              
                              
                                 s
                              
                              
                                 P
                              
                           
                           )
                        
                      accordingly to its objective. We can obtain many different versions of the algorithm according to the way and the players (SaaS or PaaS) that select the initial number of servers. We first prove that the solution algorithm converges to a GNE, then we formulate five alternative methods that will be evaluated in the next section.
                        Proposition 7
                        
                           If 
                           
                              
                                 
                                    
                                       N
                                    
                                    
                                       ‾
                                    
                                 
                              
                            
                           is such that the feasible region 
                           (40)–(42) 
                           of each SaaS provider is non-empty, then the vector 
                           
                              
                                 (
                                 
                                    
                                       X
                                    
                                    
                                       ‾
                                    
                                 
                                 ,
                                 
                                    
                                       
                                          
                                             R
                                          
                                          
                                             ‾
                                          
                                       
                                    
                                    
                                       P
                                    
                                 
                                 ,
                                 
                                    
                                       N
                                    
                                    
                                       ‾
                                    
                                 
                                 )
                              
                            
                           found by the solution algorithm is a GNE.
                        

Since each SaaS determines the best reply 
                              
                                 (
                                 
                                    
                                       
                                          
                                             X
                                          
                                          
                                             ‾
                                          
                                       
                                    
                                    
                                       s
                                    
                                 
                                 ,
                                 
                                    
                                       
                                          
                                             R
                                          
                                          
                                             ‾
                                          
                                       
                                    
                                    
                                       s
                                    
                                    
                                       P
                                    
                                 
                                 )
                              
                            to the PaaS strategy 
                              
                                 
                                    
                                       N
                                    
                                    
                                       ‾
                                    
                                 
                              
                           , we obtain that all the constraints (17) are active. Thus, by formula (13) also the strategy 
                              
                                 
                                    
                                       N
                                    
                                    
                                       ‾
                                    
                                 
                              
                            of the PaaS is the best reply to the strategies 
                              
                                 (
                                 
                                    
                                       X
                                    
                                    
                                       ‾
                                    
                                 
                                 ,
                                 
                                    
                                       
                                          
                                             R
                                          
                                          
                                             ‾
                                          
                                       
                                    
                                    
                                       P
                                    
                                 
                                 )
                              
                            of the SaaS players. Hence 
                              
                                 (
                                 
                                    
                                       X
                                    
                                    
                                       ‾
                                    
                                 
                                 ,
                                 
                                    
                                       
                                          
                                             R
                                          
                                          
                                             ‾
                                          
                                       
                                    
                                    
                                       P
                                    
                                 
                                 ,
                                 
                                    
                                       N
                                    
                                    
                                       ‾
                                    
                                 
                                 )
                              
                            is a GNE because of relations (19) and (20).□

According to the previous result, the solution algorithm finds a GNE. However, the equilibrium is found in a single best reply dynamic iteration and depends on the arbitrary choice N at step 1. Hence, finding good equilibria for the problem under study could be hard. We have implemented the following heuristic methods for defining a vector N which provides a good equilibrium.
                        
                           •
                           
                              Method 1: Each SaaS randomly selects 
                                 
                                    
                                       
                                          N
                                       
                                       
                                          s
                                       
                                    
                                 
                               at step 1. Random initialization at step 1 is considered as a benchmark for the comparison of alternative methods.


                              Method 2: At step 1, each SaaS sets 
                                 
                                    
                                       
                                          X
                                       
                                       
                                          k
                                       
                                    
                                 
                               randomly in the interval 
                                 
                                    [
                                    
                                       
                                          λ
                                       
                                       
                                          k
                                       
                                    
                                    ,
                                    
                                       
                                          Λ
                                       
                                       
                                          k
                                       
                                    
                                    ]
                                 
                               and determines 
                                 
                                    
                                       
                                          N
                                       
                                       
                                          s
                                       
                                    
                                 
                               such that physical servers average utilization is 
                                 
                                    
                                       
                                          ∑
                                       
                                       
                                          l
                                          ∈
                                          
                                             
                                                A
                                             
                                             
                                                s
                                             
                                          
                                       
                                    
                                    
                                       
                                          
                                             
                                                v
                                             
                                             
                                                sl
                                             
                                          
                                          
                                             
                                                X
                                             
                                             
                                                l
                                             
                                          
                                       
                                       
                                          C
                                          
                                          
                                             
                                                N
                                             
                                             
                                                s
                                             
                                          
                                          
                                          
                                             
                                                μ
                                             
                                             
                                                l
                                             
                                          
                                       
                                    
                                    =
                                    0.6
                                 
                              . In other words, the initial number of physical servers is determined according to the utilization thresholds principle which is an heuristic for Cloud systems resource allocation widely used in the literature (Cherkasova & Phaal, 2002; Wolke & Meixner, 2010; Zhu et al., 2009) and adopted in practice by IaaS/PaaS providers (Amazon Inc., 2013b).


                              Method 3: At step 1, each SaaS s maximizes the function
                                 
                                    
                                       
                                          
                                             
                                                ∑
                                             
                                             
                                                k
                                                ∈
                                                
                                                   
                                                      A
                                                   
                                                   
                                                      s
                                                   
                                                
                                             
                                          
                                       
                                       
                                          
                                             
                                                
                                                   
                                                      α
                                                   
                                                   
                                                      k
                                                   
                                                
                                                
                                                   
                                                      
                                                         1
                                                         -
                                                         
                                                            
                                                               1
                                                            
                                                            
                                                               
                                                                  
                                                                     m
                                                                  
                                                                  
                                                                     k
                                                                  
                                                               
                                                            
                                                         
                                                      
                                                   
                                                
                                                
                                                   
                                                      X
                                                   
                                                   
                                                      k
                                                   
                                                
                                                -
                                                
                                                   
                                                      p
                                                   
                                                   
                                                      k
                                                   
                                                
                                                (
                                                
                                                   
                                                      Λ
                                                   
                                                   
                                                      k
                                                   
                                                
                                                -
                                                
                                                   
                                                      X
                                                   
                                                   
                                                      k
                                                   
                                                
                                                )
                                                +
                                                
                                                   
                                                      δ
                                                   
                                                   
                                                      s
                                                   
                                                
                                                
                                                   
                                                      R
                                                   
                                                   
                                                      k
                                                   
                                                   
                                                      S
                                                   
                                                
                                                
                                                   
                                                      X
                                                   
                                                   
                                                      k
                                                   
                                                
                                             
                                          
                                       
                                       -
                                       
                                          
                                             cN
                                          
                                          
                                             s
                                          
                                       
                                       -
                                       
                                          
                                             δ
                                          
                                          
                                             s
                                          
                                       
                                       |
                                       
                                          
                                             A
                                          
                                          
                                             s
                                          
                                       
                                       |
                                       
                                          
                                             
                                                
                                                   N
                                                
                                                
                                                   s
                                                
                                             
                                             
                                                
                                                   ∑
                                                
                                                
                                                   l
                                                   ∈
                                                   
                                                      
                                                         A
                                                      
                                                      
                                                         s
                                                      
                                                   
                                                
                                             
                                             
                                                
                                                   v
                                                
                                                
                                                   sl
                                                
                                             
                                             
                                                
                                                   X
                                                
                                                
                                                   l
                                                
                                             
                                             /
                                             
                                                
                                                   μ
                                                
                                                
                                                   l
                                                
                                             
                                          
                                          
                                             
                                                
                                                   CN
                                                
                                                
                                                   s
                                                
                                             
                                             -
                                             
                                                
                                                   ∑
                                                
                                                
                                                   l
                                                   ∈
                                                   
                                                      
                                                         A
                                                      
                                                      
                                                         s
                                                      
                                                   
                                                
                                             
                                             
                                                
                                                   v
                                                
                                                
                                                   sl
                                                
                                             
                                             
                                                
                                                   X
                                                
                                                
                                                   l
                                                
                                             
                                             /
                                             
                                                
                                                   μ
                                                
                                                
                                                   l
                                                
                                             
                                          
                                       
                                    
                                 
                              subject to constraints (40)–(42), considering both 
                                 
                                    
                                       
                                          X
                                       
                                       
                                          s
                                       
                                    
                                 
                               and 
                                 
                                    
                                       
                                          N
                                       
                                       
                                          s
                                       
                                    
                                 
                               as decision variables.


                              Method 4: At step 1, the PaaS sets
                                 
                                    
                                       
                                          
                                             N
                                          
                                          
                                             s
                                          
                                       
                                       =
                                       
                                          
                                             
                                                
                                                   c
                                                
                                             
                                             +
                                             
                                                
                                                   
                                                      
                                                         δ
                                                      
                                                      
                                                         s
                                                      
                                                   
                                                   |
                                                   
                                                      
                                                         A
                                                      
                                                      
                                                         s
                                                      
                                                   
                                                   |
                                                
                                             
                                          
                                          
                                             C
                                             
                                             
                                                
                                                   c
                                                
                                             
                                          
                                       
                                       
                                       
                                          
                                             
                                                ∑
                                             
                                             
                                                k
                                                ∈
                                                
                                                   
                                                      A
                                                   
                                                   
                                                      s
                                                   
                                                
                                             
                                          
                                       
                                       
                                          
                                             v
                                          
                                          
                                             sk
                                          
                                       
                                       
                                       
                                          
                                             Λ
                                          
                                          
                                             k
                                          
                                       
                                       /
                                       
                                          
                                             μ
                                          
                                          
                                             k
                                          
                                       
                                       ,
                                    
                                 
                              according to Proposition 5.


                              Method 5: At step 1, the PaaS sets
                                 
                                    
                                       
                                          
                                             N
                                          
                                          
                                             s
                                          
                                       
                                       =
                                       
                                          min
                                       
                                       
                                          
                                             
                                                
                                                   
                                                      1
                                                   
                                                   
                                                      C
                                                      -
                                                      
                                                         
                                                            
                                                               
                                                                  
                                                                     
                                                                        δ
                                                                     
                                                                     
                                                                        s
                                                                     
                                                                  
                                                                  |
                                                                  
                                                                     
                                                                        A
                                                                     
                                                                     
                                                                        s
                                                                     
                                                                  
                                                                  |
                                                               
                                                               
                                                                  
                                                                     
                                                                        max
                                                                     
                                                                     
                                                                        k
                                                                        ∈
                                                                        
                                                                           
                                                                              A
                                                                           
                                                                           
                                                                              s
                                                                           
                                                                        
                                                                     
                                                                  
                                                                  
                                                                     
                                                                        c
                                                                     
                                                                     
                                                                        sk
                                                                     
                                                                  
                                                                  /
                                                                  
                                                                     
                                                                        Ω
                                                                     
                                                                     
                                                                        sk
                                                                     
                                                                  
                                                               
                                                            
                                                         
                                                      
                                                   
                                                
                                                ,
                                                
                                                
                                                   
                                                      
                                                         
                                                            c
                                                         
                                                      
                                                      +
                                                      
                                                         
                                                            
                                                               
                                                                  δ
                                                               
                                                               
                                                                  s
                                                               
                                                            
                                                            |
                                                            
                                                               
                                                                  A
                                                               
                                                               
                                                                  s
                                                               
                                                            
                                                            |
                                                         
                                                      
                                                   
                                                   
                                                      C
                                                      
                                                      
                                                         
                                                            c
                                                         
                                                      
                                                   
                                                
                                             
                                          
                                       
                                       
                                       
                                          
                                             
                                                ∑
                                             
                                             
                                                k
                                                ∈
                                                
                                                   
                                                      A
                                                   
                                                   
                                                      s
                                                   
                                                
                                             
                                          
                                       
                                       
                                          
                                             v
                                          
                                          
                                             sk
                                          
                                       
                                       
                                       
                                          
                                             λ
                                          
                                          
                                             k
                                          
                                       
                                       /
                                       
                                          
                                             μ
                                          
                                          
                                             k
                                          
                                       
                                       ,
                                    
                                 
                              according to Proposition 6.

Note that the initialization steps implemented by methods 4 and 5 are performed by the PaaS provider, since they require the knowledge of the time unit cost c of use of the physical servers, which is usually unknown by the SaaS providers. Method 3 can be implemented in practice only if the PaaS shares c with SaaSs. Methods 1–5 are suitable for a distributed implementation and require at most three messages exchange between each SaaS and PaaS (for providing the initial service demand, to communicate the effective number of physical servers, and finally set up the WS applications response time threshold and overall throughput).

The solution algorithm proposed has been evaluated for a variety of system and workload configurations. Section 6.1 is devoted to quantitatively analyze the efficiency of the equilibria achieved by our approach, while the scalability is discussed in Section 6.2. Finally, Section 6.3 illustrates the equilibria properties for a medium size system by varying application performance parameters.

To evaluate the efficiency of our algorithm we have considered a very large set of randomly generated instances. The number of SaaS providers has been varied between 100 and 1000, the number of applications (evenly shared among SaaSs) between 1000 and 10,000.
                           1
                           We have verified that the performance of our solution is not affected by the applications to SaaSs assignment cardinality (we varied the number of applications per SaaS in the range 1–100), both in terms of Price of Anarchy and execution time. Results are omitted for space limitation.
                        
                        
                           1
                        
                     

The performance parameters of the applications and infrastructural resources costs have been randomly generated uniformly in the ranges reported in Table 2
                         as in Anselmi and Verloop (2011); Ardagna et al. (2012); Kusic, Kephart, Hanson, Kandasamy, and Jiang (2008), considering also real applications (Ardagna et al., 2013), according to commercial fees applied by IaaS/PaaS Cloud providers (Amazon Inc., 2013b; Microsoft, 2013) and the energy costs available in the literature (Greenpeace, 2012). We have included in the time unit cost c of a physical server also the overhead of the cooling system according to the values reported in Greenpeace (2012), varying also the cost of energy per kWh. Furthermore, the penalty values 
                           
                              
                                 
                                    p
                                 
                                 
                                    k
                                 
                              
                           
                         have been set proportional to the revenues for single request execution 
                           
                              
                                 
                                    α
                                 
                                 
                                    k
                                 
                              
                              ,
                              
                                 
                                    p
                                 
                                 
                                    k
                                 
                              
                              =
                              
                                 
                                    γ
                                 
                                 
                                    k
                                 
                                 
                                    1
                                 
                              
                              
                                 
                                    α
                                 
                                 
                                    k
                                 
                              
                           
                        , where 
                           
                              
                                 
                                    γ
                                 
                                 
                                    k
                                 
                                 
                                    1
                                 
                              
                           
                         has been randomly generated uniformly in the range 
                           
                              [
                              5
                              ,
                              50
                              ]
                           
                        , as in Zhang and Ardagna (2004), while the upper bounds on the average response time thresholds guaranteed to the SaaS customers were set proportional to the request service demand 
                           
                              1
                              /
                              
                                 
                                    μ
                                 
                                 
                                    k
                                 
                              
                           
                        , i.e., 
                           
                              
                                 
                                    R
                                 
                                 
                                    k
                                 
                                 
                                    S
                                 
                              
                              =
                              
                                 
                                    γ
                                 
                                 
                                    k
                                 
                                 
                                    2
                                 
                              
                              /
                              
                                 
                                    μ
                                 
                                 
                                    k
                                 
                              
                           
                        , where 
                           
                              
                                 
                                    γ
                                 
                                 
                                    k
                                 
                                 
                                    2
                                 
                              
                           
                         has been randomly generated uniformly in the range [100,200], as in Ardagna and Pernici (2007). Finally, since request rejection has an important impact on SaaS provider reputation, we set 
                           
                              
                                 
                                    λ
                                 
                                 
                                    k
                                 
                              
                              =
                              0.95
                              
                                 
                                    Λ
                                 
                                 
                                    k
                                 
                              
                           
                        .

We denote with 
                           
                              
                                 
                                    x
                                 
                                 
                                    ∼
                                 
                              
                           
                         any social optimum and with 
                           
                              
                                 
                                    x
                                 
                                 
                                    ‾
                                 
                              
                           
                         the GNE found by the solution algorithm using methods 1–5. The efficiency has been measured in terms of the Price of Anarchy (PoA) evaluated as
                           
                              
                                 PoA
                                 =
                                 
                                    
                                       Π
                                       (
                                       
                                          
                                             x
                                          
                                          
                                             ‾
                                          
                                       
                                       )
                                    
                                    
                                       Π
                                       (
                                       
                                          
                                             x
                                          
                                          
                                             ∼
                                          
                                       
                                       )
                                    
                                 
                                 .
                              
                           
                        The PoA is a measure of the inefficiency due to PaaS and SaaSs selfish behavior with respect to the scenario where the social optimum is pursued. The metric is lower or equal to 1 (the greater the better).

Random instances have been generated guaranteeing that the constraint (27) is active, which corresponds to the worst case situation for a Cloud system (heavy workload) and for the proposed methods which otherwise can determine the social optimum naively (e.g., if the servers are not saturated, PoA is always equal to 1 for method 3). This has been obtained by solving the social optimum problem with an infinite number of servers and then by setting 
                           
                              
                                 
                                    N
                                 
                                 
                                    P
                                 
                              
                           
                         equal to 
                           
                              ρ
                           
                         times the total number of servers actually used. In order to evaluate the robustness of our solution, 
                           
                              ρ
                           
                         has been set equal to 0.9, 0.8 and 0.7, which corresponds to increasing workload conditions for the PaaS.

Results are reported in Tables 3–5
                        
                        
                        . The figures reported in each table are the means computed on 10 different runs.

For every method the PoA does not depend significantly on the system size, neither on the system workload conditions. Furthermore, methods 1–3 perform similarly, the PoA is around 0.4 (i.e., on average the percentage difference of the sum of the payoff functions with respect to the social optimum is lower than 60%). This means that the heuristic solution based on the utilization threshold proposed in the literature (implemented by method 2) achieves the same results of random initialization (implemented by method 1). Vice versa, methods 4 and 5, based on the analysis of the KKT system of the social optimum problem, allow to improve the PoA by 15% and 25%, respectively.

The scalability of our approach has been evaluated performing tests on a VMWare virtual machine based on Ubuntu 11.04 server, running on an Intel Nehalem dual socket quad-core system with 32gigabytes of RAM. The virtual machine has a physical core dedicated with guaranteed performance and 4gigabytes of memory reserved. KNITRO 8.0 has been used as nonlinear optimization solver, which can exploit the multi-core architecture of our system. We have considered a very large set of randomly generated instances obtained as in the previous Section varying the model parameters according to the ranges reported in Table 2.


                        Table 6
                         reports the average execution time required by our methods for problem instances of different sizes. As in the previous section, the average values reported in the table have always been computed by considering 10 instances with the same size. Results show that the proposed methods are very efficient and can solve problem instances of maximum size in less than one minute. Usually in Cloud systems resource allocation is performed periodically on a hourly basis (Almeida et al., 2010; Armbrust et al., 2009; Birke et al., 2012). Hence, a social optimum solution can be computed directly by the PaaS only for problem instances including 700 SaaSs and 7000 WS applications which are not very significant in practice.

The aim of this section is to analyze how the equilibrium changes by varying the game parameters. The results have been obtained by Method 5 only, since the methods proposed do not differ significantly in terms of execution time and Method 5 performs better in terms of PoA.

In particular, we considered three SaaSs offering five heterogeneous applications each. If not differently stated we set 
                           
                              
                                 
                                    α
                                 
                                 
                                    k
                                 
                              
                              =
                              0.5
                           
                        
                        $/req, 
                           
                              
                                 
                                    μ
                                 
                                 
                                    k
                                 
                              
                              =
                              10
                              k
                           
                        
                        req/second, 
                           
                              
                                 
                                    m
                                 
                                 
                                    k
                                 
                              
                              =
                              1.5
                              ,
                              c
                              =
                              0.09
                           
                        
                        $/hour, 
                           
                              
                                 
                                    Λ
                                 
                                 
                                    k
                                 
                              
                              =
                              450
                           
                        
                        req/second, and 
                           
                              
                                 
                                    δ
                                 
                                 
                                    s
                                 
                              
                              =
                              0.45
                           
                         (i.e., we considered the midpoint of the random intervals reported in Table 2). For the sake of simplicity, we considered the following application to SaaS provider assignment 
                           
                              
                                 
                                    A
                                 
                                 
                                    1
                                 
                              
                              =
                              {
                              1
                              ,
                              …
                              ,
                              5
                              }
                              ,
                              
                                 
                                    A
                                 
                                 
                                    2
                                 
                              
                              =
                              {
                              6
                              ,
                              …
                              ,
                              10
                              }
                              ,
                              
                                 
                                    A
                                 
                                 
                                    3
                                 
                              
                              =
                              {
                              11
                              ,
                              …
                              ,
                              15
                              }
                           
                        .

In the following we will vary one parameter at the time for the first application 
                           
                              k
                              =
                              1
                           
                        , while the parameters of the remaining ones will be held fixed. We will investigate how the parameter change will affect: (i) the throughput ratio of WS application 1, i.e., 
                           
                              
                                 
                                    X
                                 
                                 
                                    1
                                 
                              
                              /
                              
                                 
                                    Λ
                                 
                                 
                                    1
                                 
                              
                           
                        , (ii) the throughput of the remaining applications for the first provider (i.e., 
                           
                              
                                 
                                    ∑
                                 
                                 
                                    k
                                    =
                                    2
                                 
                                 
                                    5
                                 
                              
                              
                                 
                                    X
                                 
                                 
                                    k
                                 
                              
                           
                        ) and the total throughput of the remaining providers (i.e., 
                           
                              
                                 
                                    ∑
                                 
                                 
                                    k
                                    =
                                    6
                                 
                                 
                                    15
                                 
                              
                              
                                 
                                    X
                                 
                                 
                                    k
                                 
                              
                           
                        ), (iii) the number of servers of the first SaaS provider 
                           
                              
                                 
                                    N
                                 
                                 
                                    1
                                 
                              
                           
                        , and (iv) WS application 1 average response time 
                           
                              
                                 
                                    R
                                 
                                 
                                    1
                                 
                              
                           
                        .


                        Figs. 2–5
                        
                        
                        
                         show the results we achieved by varying 
                           
                              
                                 
                                    Λ
                                 
                                 
                                    1
                                 
                              
                           
                         in 
                           
                              [
                              495
                              ,
                              1165
                              ]
                           
                        
                        req/second: As 
                           
                              
                                 
                                    Λ
                                 
                                 
                                    1
                                 
                              
                           
                         increases, the number of servers used by the SaaS provider 1 increases also linearly (Fig. 4), while 
                           
                              
                                 
                                    R
                                 
                                 
                                    1
                                 
                              
                           
                         decreases non-linearly improving by around 57% (Fig. 5). Vice versa, 
                           
                              
                                 
                                    X
                                 
                                 
                                    1
                                 
                              
                              /
                              
                                 
                                    Λ
                                 
                                 
                                    1
                                 
                              
                           
                         ratio is not affected significantly and stays close to 1 (Fig. 2), as the overall throughput of the remaining applications (Fig. 3).


                        Figs. 6–9
                        
                        
                        
                         analyze how the GNE changes by varying application 1 maximum service rate 
                           
                              
                                 
                                    μ
                                 
                                 
                                    1
                                 
                              
                           
                         (the range 
                           
                              [
                              60
                              ,
                              510
                              ]
                           
                        
                        req/second has been considered). If the maximum service rate increases, the service time required to process each WS application 1 request decreases and the overall capacity required to process WS application 1 decreases accordingly (Figs. 8 and 9). Vice versa, application throughput is not affected (see Figs. 6 and 7).

Surprisingly, varying the revenue for application 1 single request execution (
                           
                              
                                 
                                    α
                                 
                                 
                                    1
                                 
                              
                           
                         varied in 
                           
                              [
                              0.17
                              ,
                              1.02
                              ]
                           
                        
                        $/req) has no impact on the metrics under analysis, see Figs. 10–13
                        
                        
                        
                         (however, recall that WS application rejection penalty 
                           
                              
                                 
                                    p
                                 
                                 
                                    1
                                 
                              
                           
                         is proportional to 
                           
                              
                                 
                                    α
                                 
                                 
                                    1
                                 
                              
                           
                        ).

Finally, we varied SaaS provider 1 utility function slope 
                           
                              
                                 
                                    δ
                                 
                                 
                                    1
                                 
                              
                           
                         in the range [0.2,1]. As 
                           
                              
                                 
                                    δ
                                 
                                 
                                    1
                                 
                              
                           
                         increases, the metrics under analysis remain almost constant but change abruptly when 
                           
                              
                                 
                                    δ
                                 
                                 
                                    1
                                 
                              
                              =
                              0.82
                           
                         (see Figs. 14–17
                        
                        
                        
                        ). For that value, the ratio 
                           
                              
                                 
                                    X
                                 
                                 
                                    1
                                 
                              
                              /
                              
                                 
                                    Λ
                                 
                                 
                                    1
                                 
                              
                           
                         drops suddenly from 100% to 95% (the minimum achievable value), which is very unintuitive.

@&#CONCLUSIONS@&#

We proposed a game-theoretic approach for the run-time management of a PaaS provider capacity among multiple competing SaaSs. The cost model consists of a class of utility functions which include revenues and penalties incurred depending on the achieved performance level and the energy costs associated with PaaS resources.

The solution methods proposed have been evaluated for a variety of system and workload configurations and have been demonstrated effective even for very large size problem instances. Systems up to thousands of applications can be managed very efficiently.

Results have shown that solution methods proposed by the literature and the one based on random initialization perform similarly from the PoA point of view. Vice versa, methods 4 and 5 which have been obtained through the analytical analysis of the social optimum problem, allow to improve PoA by 15–25%. Future work will extend the proposed solutions to consider multiple time-scales for performing resource allocation ranging from few minutes to one hour. Finally, the opportunity to allocate SaaS applications on multiple PaaS providers will be also investigated.

@&#ACKNOWLEDGEMENTS@&#

The authors wish to thank the anonymous referees for the careful reviews and valuable comments, which helped them to improve the presentation form of the paper.

@&#REFERENCES@&#

