@&#MAIN-TITLE@&#Unsupervised edge map scoring: A statistical complexity approach

@&#HIGHLIGHTS@&#


               
               
                  
                     
                        
                           
                           A statistical complexity measure for edge maps and binary images is proposed.


                        
                        
                           
                           The measure is a product of equilibrium and entropy indices.


                        
                        
                           
                           Equilibrium is measured projecting the edge map into a family of predefined edge patterns.


                        
                        
                           
                           Information is measured with the Kolmogorov–Smirnov statistic of goodness of fit.


                        
                        
                           
                           Measure can be used for specific algorithm evaluation and to identify its best parameters.


                        
                     
                  
               
            

@&#KEYPHRASES@&#

Unsupervised quality measure

Edge maps

Statistical complexity

Edge patterns

Entropy

Kolmogorov–Smirnov statistic

@&#ABSTRACT@&#


               
               
                  We propose a new Statistical Complexity Measure (SCM) to qualify edge maps without Ground Truth (GT) knowledge. The measure is the product of two indices, an Equilibrium index 
                        
                           E
                        
                      obtained by projecting the edge map into a family of edge patterns, and an Entropy index 
                        
                           H
                        
                     , defined as a function of the Kolmogorov–Smirnov (KS) statistic.
                  This new measure can be used for performance characterization which includes: (i) the specific evaluation of an algorithm (intra-technique process) in order to identify its best parameters and (ii) the comparison of different algorithms (inter-technique process) in order to classify them according to their quality.
                  Results made over images of the South Florida and Berkeley databases show that our approach significantly improves over Pratt’s Figure of Merit (PFoM) which is the objective reference-based edge map evaluation standard, as it takes into account more features in its evaluation.
               
            

@&#INTRODUCTION@&#

In most image processing techniques, the detection and handling of the edge structure of the input image is very important. From object detection to image transmission, the quality of edge manipulation takes great part in the success of the processing. Nevertheless, there is no universal definition of the notion of edge. For Abdou and Pratt, an edge is defined as a local change in luminance or discontinuity in the luminance intensity of the image [1] while Kitchen and Rosenfeld pointed out that the edge concept depends on the type of processing and analysis in which it is involved [2].

Therefore, many researchers have designed optimal Edge Detection Algorithms (EDAs) related to different properties of the edge structure, but only a few have studied how to measure the edge strength and quality of general edge maps [3]. Effective and objective Edge Detection (ED) evaluation measures must be developed in order to assess EDA performance.

In general, ED evaluation measures can be classified due to the need of a reference map called Ground Truth (GT) (supervised or unsupervised measures) and the type of score that they output, quantitative or qualitative. Some well known examples of quantitative supervised measures, also called discrepancy measures, are Pratt’s Figure of Merit (PFoM) [4], Kappa index [5], and Baddeley’s Delta Metric (BDM) [6]. A comparison between these discrepancy measures and some other supervised statistical measures were performed in [7]. Two main conclusions were drawn from their experiments: (i) up to date, there is no convincing solution for edge image comparison or quality evaluation and (ii) the biases of the measures can be helpful in applications, where there is a particular interest in penalizing or ignoring some specific kind of error. A supervised quality metric for binary documents based on structural pixel matching, taking into account global edge structures introducing a smoothness term in the matching function was proposed in [8]. Examples of binary documents are text files either photocopied, faxed or scanned, with fast publishing resolution. In this kind of binary documents, bad visual word understanding is not always related to classical low scoring. PFoM is known to give high scores to lighter maps, with high rate of false negatives, but it is not acquiescent to human perception [9].

Without the guide of a GT, assessing edge maps quality is a more difficult task. The unsupervised ED measures that are found in the literature look for specific characteristics of the input edge map, such as coherence [10], continuity [2], smoothness and good continuation [11,12], or an specific pattern identification [13], among others [14,15]. Bower et al. studied the bias introduced by the search of only one characteristic [16]. They reported a similar conclusion to the one given by [7]: there is no unique solution; moreover, selected best maps are qualitatively different, and bias cannot be estimated without further assumption of the error incurred.

Recently, Yitzhaky and Peli proposed an unsupervised evaluation procedure of ED techniques based on the consensus approach [17]. Using the correspondence between different standard EDA results, an estimated best edge map (consensus map) was obtained and later used as an estimated ground truth (EGT). Correspondence was computed by using both a receiver operating characteristics (ROC) analysis and a Chi-square test for standard binary outputs, considering a trade off between structure and noisiness in the detection results. Fernandez-Garcia et al. provided a definition of consensus edge map that is close to the notion of confidence set. They argued that in order to compare ED procedures, it is not esencial to use the best and exact GT; rather it is only necessary to use a reliable EGT that allows correct classification or ranking of the EDA to be obtained [18]. They also noted that their approach may be used to evaluate detections from different EDA (inter-technique performance characterization) only if these detectors aim at the same output format. Our proposed evaluation methods also take into account this assumption.

The consensus approach suffers from bias regarding the generation of the candidate edge maps used to define the EGT. If the majority of the edge maps considered are not of adequate quality or fail to extract certain edge structures which are detected by only a small selection of the edge maps, this will be reflected both in the consensus EGT and in the quality of the evaluation methodology derived from it. In a sense, it penalizes algorithms that do not agree with the failures of the other algorithms.

In this paper we define a new non-reference measure that does not depend, directly or indirectly, on GT data. As the previous measures, it can be used for ED performance characterization which includes: (i) the specific evaluation of an algorithm (intra-technique process) in order to identify its best parameters and (ii) the comparison of different algorithms with the same output format (inter-technique process) in order to classify them according to their quality.

Our proposal, denoted Statistical Complexity Measure (SCM) searches for a compromise between two extreme values in the space of edge maps: a map with few edge points in a perfect shape (Equilibrium) and with many edge points randomly located (Information). The new measure is the product of two indices, an Equilibrium index 
                        
                           E
                        
                      obtained by combining local correlation between the edge map and a family of predetermined edge patterns and an Entropy index 
                        
                           H
                        
                     , defined as a function of the Kolmogorov–Smirnov (KS) statistic. SCM gives value between zero and one, being zero the minimum and one the maximum quality.

Konishi et al. defined an statistical ED algorithm which relies on Chernoff information and entropy of probability distributions conditional to edge and non-edge state [15]. Their validation experiments studied elements similar to the indices that are part of our complexity measure. They also noted that maps with scattered random points may give high information regardless the real structure of the image, but the combinations of shape seeking measures with entropy functionals greatly reduces the probability of such anomalies.

The paper is organized as follows. In Section 2, a cosine based discrepancy measure 
                        
                           
                              
                                 Q
                              
                              
                                 B
                              
                           
                        
                      to score a map against a collection of hand-made GT (supervised case), or against a collection of fixed significant patterns (unsupervised case) is introduced. In Section 3 the concepts behind the Equilibrium index 
                        
                           E
                        
                      and Entropy index 
                        
                           H
                        
                      are introduced, and the final SCM 
                        
                           C
                        
                      as the product of both indices is defined. Experiments and results are discussed in Section 4 and conclusions and comments are left for Section 5.

In this section, a cosine-based similarity measure 
                        
                           
                              
                                 Q
                              
                              
                                 B
                              
                           
                        
                      is introduced as an intermediate step in the definition of the final measure 
                        
                           C
                        
                     , along with necessary notation. Let I be an image, 
                        
                           b
                        
                      an edge map associated with I, (this is, 
                        
                           b
                        
                      is a binary image with the same size as I), and 
                        
                           g
                        
                      its GT (if it is available). Fig. 1
                      shows an example of such images. A simple measure of similarity between 
                        
                           b
                        
                      and 
                        
                           g
                        
                      is the cosine of the angle between them [19], when they are seen as 1-D vectors (concatenating all columns one under another).

We define the index 
                        
                           
                              
                                 Q
                              
                              
                                 B
                              
                           
                        
                      as the maximum of all similarity values
                        
                           (1)
                           
                              
                                 
                                    Q
                                 
                                 
                                    B
                                 
                              
                              (
                              b
                              )
                              =
                              
                                 
                                    
                                       max
                                    
                                    
                                       1
                                       ⩽
                                       i
                                       ⩽
                                       n
                                    
                                 
                              
                              Q
                              (
                              
                                 
                                    g
                                 
                                 
                                    i
                                 
                              
                              ,
                              b
                              )
                              =
                              
                                 
                                    
                                       max
                                    
                                    
                                       1
                                       ⩽
                                       i
                                       ⩽
                                       n
                                    
                                 
                              
                              
                                 
                                    
                                       
                                          g
                                       
                                       
                                          i
                                       
                                       
                                          T
                                       
                                    
                                    b
                                 
                                 
                                    
                                       
                                          
                                             
                                                
                                                   g
                                                
                                                
                                                   i
                                                
                                             
                                          
                                       
                                    
                                    
                                       
                                          
                                             b
                                          
                                       
                                    
                                 
                              
                              ,
                           
                        
                     being 
                        
                           
                              
                                 
                                    x
                                 
                              
                           
                           =
                           
                              
                                 
                                    
                                       x
                                    
                                    
                                       T
                                    
                                 
                                 x
                              
                           
                        
                     , and 
                        
                           B
                           =
                           
                              
                                 
                                    
                                       
                                          g
                                       
                                       
                                          1
                                       
                                    
                                    ,
                                    
                                       
                                          g
                                       
                                       
                                          2
                                       
                                    
                                    ,
                                    …
                                    ,
                                    
                                       
                                          g
                                       
                                       
                                          n
                                       
                                    
                                 
                              
                           
                        
                      a collection of GT images (that could have only one element).

The Cauchy Schwartz inequality implies that the index is upper bounded by one thus attaining such bound only when the map is optimal 
                        
                           
                              
                                 
                                    b
                                    ∈
                                    B
                                 
                              
                           
                        
                     . Since edge maps and GT images are binary images, the index is lower bounded by 0, attained only in the absence of any similarity (when 
                        
                           b
                        
                      is orthogonal to 
                        
                           B
                        
                     ). When no GT is available, predefined edge patterns may be locally sought in the edge map with this measure.

In this section, a new SCM in the context of unsupervised evaluation of edge maps is introduced. This new measure can be used to identify the optimal parameters of a given algorithm, but also to compare and rank the results of different algorithms. In this framework, the concepts of Equilibrium and Information can be discussed and scoring indices for such qualities in edge maps can be proposed.

Following the general structure of complexity measures described by [20], SCM is defined as
                        
                           (2)
                           
                              C
                              (
                              b
                              )
                              =
                              E
                              (
                              b
                              )
                              H
                              (
                              b
                              )
                              ,
                           
                        
                     where 
                        
                           E
                        
                      is an Equilibrium index, 
                        
                           H
                        
                      is an Entropy index, and 
                        
                           b
                        
                      is an edge map. To define such indices, the concepts of Equilibrium and Information in the context of ED must be discussed. An edge map is well balanced (reached Equilibrium) if it is structurally simple. In this sense, the map in panel 
                        
                           (
                           d
                           )
                        
                      of Fig. 2
                      is better balanced than the edge map in panel 
                        
                           (
                           c
                           )
                        
                      and in turn, the one in 
                        
                           (
                           c
                           )
                        
                      is better balanced than the one in 
                        
                           (
                           b
                           )
                        
                     . Regarding Entropy, one map has more information than another if the discontinuities, textures and shapes of the analyzed image are better characterized. The overabundance of information produces chaotic (cluttered) edge maps like in 
                        
                           (
                           b
                           )
                        
                     , but the absence of information produces poor edge maps like in 
                        
                           (
                           d
                           )
                        
                     . Thus, Equilibrium and Information are two complementary concepts, and the Complexity searches for a balance point between them.

Thus, to quantify the Equilibrium of an edge map, we measured local correlation against a family of specific edge patterns assessing the correct identification and value of the usual local characteristics of edges. Since Entropy should measure the amount of information of a system, which is maximized when the system reaches a random state, we assess the randomness of an edge map with an index based on contrasting the statistical distribution of the spatial edge positions against the bidimensional uniform distribution.

Abdou and Pratt introduced in their seminal paper the notion of Figure of Merit in order to score fragmented, offset and smeared edge patterns in comparison with the ideal edges present in the GT [1]. The Equilibrium index should perform a similar task in the unsupervised case, thus the GT will be replaced by a family 
                           
                              B
                           
                         of carefully chosen binary edge patterns.

Abusing notation, let 
                           
                              B
                              =
                              {
                              
                                 
                                    b
                                 
                                 
                                    1
                                 
                              
                              ,
                              
                                 
                                    b
                                 
                                 
                                    2
                                 
                              
                              ,
                              …
                              ,
                              
                                 
                                    b
                                 
                                 
                                    n
                                 
                              
                              }
                           
                         be a collection of 
                           
                              N
                              ×
                              N
                           
                         edge patterns transformed into column vectors. Sliding a 
                           
                              N
                              ×
                              N
                           
                         window over the edge map 
                           
                              b
                           
                        , centered in each edge pixel position k, edge sub-maps 
                           
                              
                                 
                                    b
                                 
                                 
                                    (
                                    k
                                    )
                                 
                              
                           
                         are extracted and transformed into column vectors. The CSM of each sub-maps with respect to the family of edge patterns 
                           
                              B
                           
                         is computed by
                           
                              (3)
                              
                                 
                                    
                                       Q
                                    
                                    
                                       B
                                    
                                 
                                 (
                                 
                                    
                                       b
                                    
                                    
                                       (
                                       k
                                       )
                                    
                                 
                                 )
                                 =
                                 
                                    
                                       
                                          max
                                       
                                       
                                          1
                                          ⩽
                                          j
                                          ⩽
                                          n
                                       
                                    
                                 
                                 
                                    
                                       
                                          
                                             b
                                          
                                          
                                             j
                                          
                                          
                                             T
                                          
                                       
                                       
                                          
                                             b
                                          
                                          
                                             (
                                             k
                                             )
                                          
                                       
                                    
                                    
                                       ‖
                                       
                                          
                                             b
                                          
                                          
                                             j
                                          
                                       
                                       ‖
                                       
                                          
                                             
                                                
                                                   
                                                      b
                                                   
                                                   
                                                      (
                                                      k
                                                      )
                                                   
                                                
                                             
                                          
                                       
                                    
                                 
                                 .
                              
                           
                        
                     

The Equilibrium of 
                           
                              b
                           
                         with respect to the family of edge patterns 
                           
                              B
                           
                         is defined as the average of the local CSM computed only on edge pixels k,
                           
                              (4)
                              
                                 E
                                 (
                                 b
                                 )
                                 =
                                 
                                    
                                       1
                                    
                                    
                                       |
                                       
                                          
                                             E
                                          
                                          
                                             b
                                          
                                       
                                       |
                                    
                                 
                                 
                                    
                                       
                                          ∑
                                       
                                       
                                          k
                                          =
                                          1
                                       
                                       
                                          |
                                          
                                             
                                                E
                                             
                                             
                                                b
                                             
                                          
                                          |
                                       
                                    
                                 
                                 
                                    
                                       Q
                                    
                                    
                                       B
                                    
                                 
                                 (
                                 
                                    
                                       b
                                    
                                    
                                       (
                                       k
                                       )
                                    
                                 
                                 )
                                 ,
                              
                           
                        where 
                           
                              
                                 
                                    E
                                 
                                 
                                    b
                                 
                              
                           
                         is the set of all edge pixels in the binary edge map 
                           
                              b
                           
                        , and 
                           
                              |
                              
                                 
                                    E
                                 
                                 
                                    b
                                 
                              
                              |
                           
                         is the cardinal number of such set.

The family 
                              
                                 B
                              
                            of edge patterns could be very general, but in this paper, as in [2], only line-like edge patterns are considered (Fig. 3
                           ). Being a line segment an essential primitive graphic, it can be used to construct many other objects. Our line patterns are made with an accurate and efficient raster line-generating algorithm defined in [21]. Bresenham stated that his line algorithms provide the best-fit approximations to the true lines by minimizing the error (distance) to the true primitive. Beginning with ray traces that go through the origin, 140 edge patterns of size 
                              
                                 7
                                 ×
                                 7
                              
                            were constructed and stored in the present database (Fig. 3).

In Fig. 4
                           , the values of 
                              
                                 
                                    
                                       Q
                                    
                                    
                                       B
                                    
                                 
                              
                            on different patterns that appear in a Sobel edge map (computed from image block) are shown. The edge pattern 
                              
                                 (
                                 c
                                 )
                                 ,
                                 (
                                 f
                                 )
                                 ,
                                 (
                                 g
                                 )
                              
                            and 
                              
                                 (
                                 h
                                 )
                              
                            show the performance of the index when the edges are close to line segments. The maps 
                              
                                 (
                                 h
                                 )
                              
                           –
                              
                                 (
                                 k
                                 )
                              
                            show the behavior of (Eq. (4)) in presence of thick edges. The maximum value is reached in 
                              
                                 (
                                 h
                                 )
                              
                           , a pattern of a line of one pixel width. Noisy patterns 
                              
                                 (
                                 b
                                 )
                              
                           –
                              
                                 (
                                 e
                                 )
                              
                            reach an index value lower than 0.54.

Shannon stated that the information provided by an observation is proportional to how improbable it was [22]. Relating this notion with the edge detection problem, having three points aligned in an edge map implies that the probability of having a fourth point next to them is higher than the probability of having a point further away. Therefore, observing a point in a place with low probability gives more information than observing a point in an expected place. Randomness in space positions is at the core of the notion of edge information.

Testing randomness in space is a task usually done by testing the null hypothesis of uniform distribution in the unit square with the use the KS statistic. Such statistic takes values between 0 and 1, rejecting the uniform hypothesis for values close to 1.

For a given edge map 
                           
                              b
                           
                        , let 
                           
                              ϕ
                              =
                              (
                              
                                 
                                    ϕ
                                 
                                 
                                    1
                                 
                              
                              ,
                              
                                 
                                    ϕ
                                 
                                 
                                    2
                                 
                              
                              )
                           
                         be an injective function that maps the edge positions 
                           
                              (
                              i
                              ,
                              j
                              )
                              ∈
                              E
                           
                         to the unit square 
                           
                              [
                              0
                              ,
                              1
                              ]
                              ×
                              [
                              0
                              ,
                              1
                              ]
                           
                        , defined by 
                           
                              ϕ
                              (
                              i
                              ,
                              j
                              )
                              =
                              
                                 
                                    
                                       
                                          
                                             2
                                             i
                                             -
                                             1
                                          
                                          
                                             2
                                             N
                                          
                                       
                                       ,
                                       
                                          
                                             2
                                             j
                                             -
                                             1
                                          
                                          
                                             2
                                             M
                                          
                                       
                                    
                                 
                              
                           
                        , where 
                           
                              N
                              ×
                              M
                           
                         is the image size. Let 
                           
                              D
                           
                         be the KS bidimensional statistic defined by
                           
                              (5)
                              
                                 D
                                 (
                                 b
                                 )
                                 =
                                 
                                    
                                       
                                          max
                                       
                                       
                                          (
                                          x
                                          ,
                                          y
                                          )
                                          ∈
                                          
                                             
                                                R
                                             
                                             
                                                2
                                             
                                          
                                       
                                    
                                 
                                 |
                                 
                                    
                                       F
                                    
                                    
                                       b
                                    
                                 
                                 (
                                 x
                                 ,
                                 y
                                 )
                                 -
                                 F
                                 (
                                 x
                                 ,
                                 y
                                 )
                                 |
                                 ,
                              
                           
                        where F is the cumulative distribution function of an uniform distributed bidimensional vector, and 
                           
                              
                                 
                                    F
                                 
                                 
                                    b
                                 
                              
                           
                         the empirical distribution function of the sample 
                           
                              ϕ
                              (
                              E
                              )
                           
                         given by
                           
                              (6)
                              
                                 
                                    
                                       F
                                    
                                    
                                       b
                                    
                                 
                                 (
                                 x
                                 ,
                                 y
                                 )
                                 =
                                 
                                    
                                       |
                                       {
                                       (
                                       i
                                       ,
                                       j
                                       )
                                       ∈
                                       E
                                       /
                                       
                                          
                                             ϕ
                                          
                                          
                                             1
                                          
                                       
                                       (
                                       i
                                       )
                                       ⩽
                                       x
                                       ,
                                       
                                          
                                             ϕ
                                          
                                          
                                             2
                                          
                                       
                                       (
                                       j
                                       )
                                       ⩽
                                       y
                                       }
                                       |
                                    
                                    
                                       |
                                       E
                                       |
                                    
                                 
                                 .
                              
                           
                        
                     

The entropy measure 
                           
                              H
                           
                         is defined as
                           
                              (7)
                              
                                 H
                                 (
                                 b
                                 )
                                 =
                                 1
                                 -
                                 D
                                 (
                                 b
                                 )
                                 .
                              
                           
                        
                        
                           
                              D
                              (
                              b
                              )
                           
                         was computed using the efficient algorithm by [23].

@&#RESULTS AND ANALYSIS@&#

The computational experiments shown in this section are designed to investigate both the edge discrimination power of the concepts of Information and Equilibrium implemented by 
                           
                              H
                           
                         and 
                           
                              E
                           
                         and the use of 
                           
                              C
                           
                         for ED performance characterization which includes: (i) the specific evaluation of an algorithm (intra-technique process) in order to identify its best parameters and (ii) the comparison of different algorithms (inter-technique process) in order to classify them according to their quality.

In order to do so, images from benchmark databases, compiled specifically for edge detection and object boundary detection were selected, and for each image, a database of edge maps was made by sampling the parameter space of several well known gradient based ED algorithms (EDAs). On such database, 
                           
                              C
                           
                         scoring is compared against reference-based measures, i.e. measures that take into account the GT provided by the image benchmark database.

The reference-based measures considered are our 
                           
                              
                                 
                                    Q
                                 
                                 
                                    B
                                 
                              
                           
                        , defined in Section 2 and the golden standard PFoM discrepancy measure given by
                           
                              
                                 
                                    
                                       P
                                    
                                    
                                       α
                                    
                                 
                                 (
                                 g
                                 ,
                                 b
                                 )
                                 =
                                 
                                    
                                       1
                                    
                                    
                                       
                                          max
                                       
                                       {
                                       |
                                       
                                          
                                             E
                                          
                                          
                                             b
                                          
                                       
                                       |
                                       ,
                                       |
                                       
                                          
                                             E
                                          
                                          
                                             g
                                          
                                       
                                       |
                                       }
                                    
                                 
                                 
                                    
                                       
                                          ∑
                                       
                                       
                                          k
                                          ∈
                                          
                                             
                                                E
                                             
                                             
                                                b
                                             
                                          
                                       
                                    
                                 
                                 
                                    
                                       1
                                    
                                    
                                       1
                                       +
                                       α
                                       
                                          
                                             d
                                          
                                          
                                             2
                                          
                                       
                                       (
                                       k
                                       ,
                                       
                                          
                                             E
                                          
                                          
                                             g
                                          
                                       
                                       )
                                    
                                 
                                 ,
                              
                           
                        where 
                           
                              α
                              =
                              1
                              /
                              9
                           
                        , d is the Euclidean measure, 
                           
                              
                                 
                                    E
                                 
                                 
                                    g
                                 
                              
                           
                         and 
                           
                              
                                 
                                    E
                                 
                                 
                                    b
                                 
                              
                           
                         are the edge pixels subset of maps 
                           
                              g
                           
                         and 
                           
                              b
                           
                         respectively [1,7].

The performance of 
                           
                              C
                           
                         in the intra technique evaluation process was done by studying the edge map selected for the maximum value of the scoring curves over the database and the actual scoring value. The former gives visual evidence and the later gives information about the balance between Equilibrium and Entropy (in the case of our unsupervised measure) and which of them is the closest to the GT in the case of PFoM and 
                           
                              
                                 
                                    Q
                                 
                                 
                                    B
                                 
                              
                           
                        . The scoring curves 
                           
                              C
                              ,
                              
                              E
                           
                         and 
                           
                              H
                           
                         also shed light on how each index reflects the degradations produced by excess or absence of edge pruning.

Several reference-based measures were compared in [7] by using a database of degraded images made by applying three different degradation operators to a single output of Canny EDA, with specific parameters selected to provide an overall good edge map related to the GT. The operators were addition of false positives, addition of false negatives, and diagonal displacements in a random fashion.

The experiments considered in this paper do not include random modifications in the map; all edges are true edges if they are considered in an appropriate scale. Also, all other EDA considered here, besides Canny, aim at the same output format as in [17,18]. They are all gradient based EDA, thus they can be compared using quality curves [9].

Canny EDA was also used as a benchmark detector in [24]. The model presented as a baseline was Matlab’s implementation of the Canny edge detector, with and without hysteresis. For both cases, standard deviation 
                           
                              σ
                           
                         was the only parameter to fit, since the thresholding parameters were considered parameters of the Precision–Recall (ROC) curve defined as reference-based evaluation methodology.

We follow the method of [9] to describe the quality of an EDA that produces an edge map 
                           
                              b
                              (
                              p
                              )
                           
                        , being p parameters in a one dimensional section S of the EDA parametric space. Given the EDA, we produce an evaluation curve where each point on the curve is independently computed by first setting the parameters p of the EDA to produce a binary map and then computing the evaluation measure on such map. When a single performance measure is required or is sufficient, the maximal value of the evaluation measure 
                           
                              M
                           
                        
                        
                           
                              (8)
                              
                                 
                                    
                                       b
                                    
                                    
                                       S
                                    
                                 
                                 =
                                 arg
                                 
                                    
                                       
                                          max
                                       
                                       
                                          p
                                          ∈
                                          S
                                       
                                    
                                 
                                 M
                                 (
                                 b
                                 (
                                 p
                                 )
                                 )
                                 ,
                              
                           
                        is reported as a summary of the detector performance.

To construct the database, five gradient based EDA were considered: Canny [25], Prewitt [26], Sobel [27], Roberts [28] and Laplacian of Gaussian (LoG) [29], all provided by the Matlab edge function from Matlab’s Image Processing Toolbox.

According to Matlab’s help, Canny EDA has three parameters: 
                           
                              σ
                           
                        , Gaussian standard deviation of the derivative filter, and low and high hysteresis thresholding parameters. Edge thinning by non maxima suppression was previously performed to thresholding. The LoG EDA has two parameters: 
                           
                              σ
                           
                         (standard deviation of the Gaussian Laplacian filter) and T (thresholding parameter). Prewitt, Roberts and Sobel EDA are computed by convolving the image with their corresponding gradient operators along the x and y direction. Thresholding is later applied to the gradient module. Images are not preprocessed with smoothing or denoising algorithms, since Matlab applies a private function to thinner edges and clean spurious points after thresholding.

For all images, a collection of 100 edge maps were generated by moving each EDA parameters as follows:
                           
                              •
                              Canny EDA: standard deviation is set at 
                                    
                                       σ
                                       =
                                       
                                          
                                             2
                                          
                                       
                                    
                                 , high threshold hysteresis parameter (
                                    
                                       
                                          
                                             T
                                          
                                          
                                             h
                                          
                                       
                                    
                                 ) is (equally spaced) sampled 100 times from zero to one, and the low threshold parameter (
                                    
                                       
                                          
                                             T
                                          
                                          
                                             l
                                          
                                       
                                    
                                 ) is set as 
                                    
                                       
                                          
                                             T
                                          
                                          
                                             l
                                          
                                       
                                       =
                                       0.4
                                       ×
                                       
                                          
                                             T
                                          
                                          
                                             h
                                          
                                       
                                    
                                 .

Sobel, Prewitt and Roberts EDA: threshold parameter (T) is sampled 100 times from 0.004 to 0.396. Edge thinning is turned on.

LoG EDA: standard deviation is set at 
                                    
                                       σ
                                       =
                                       
                                          
                                             2
                                          
                                       
                                    
                                  and the threshold parameter (T) is sampled 100 times from 0.0004 to 0.0396.

The final database has 500 edge maps for each real image considered. Moving each EDA threshold from the smallest to the largest value generally produces edge maps with a varying number of featured points. The maximum value of 
                           
                              C
                           
                         over such EDA outputs selects the edge map with optimal balance between Equilibrium and Information.

The South Florida database is a public database provided by [16] specifically for edge detection assessment. It largely consists of indoor images with little background texture. It includes two collections: one of 50 natural images and other with 10 aerial images. Each of the fifty images of the first collection contains a single object approximately centered in the image and set against a natural background. The second collection has images of man made constructions.

For each of the 60 images, we constructed a database of 500 edge maps and all measures 
                           
                              E
                              ,
                              
                              H
                              ,
                              
                              C
                              ,
                              
                              
                                 
                                    Q
                                 
                                 
                                    B
                                 
                              
                           
                         and PFoM were computed on them, the latest two by using the GT available in the database.

We selected two images for a qualitative performance discussion: image 109, good quality grayscale indoor image with a central object (Fig. 5
                        
                        
                           
                              (
                              a
                              )
                           
                        ) and image woods, a good quality outdoors aerial image which depicts several buildings surrounded by woods and country roads (Fig. 8). The first image has little texture while the second contains a lot of vegetation (e.g., grass, shrubs, trees), which corresponds to texture in the image. The GT depicts edges only related to object boundary, which do not include the trees present in the image. Overall, this image is a challenge for edge detectors, in particular, for those which only use grayscale information.

In Fig. 5, image 109 and its GT are shown along with two extreme edge maps computed with Canny EDA, with 
                           
                              
                                 
                                    T
                                 
                                 
                                    h
                                 
                              
                              =
                              0.01
                           
                         and 
                           
                              
                                 
                                    T
                                 
                                 
                                    h
                                 
                              
                              =
                              0.99
                           
                        . The first edge map has many texture details transformed in short edges, and the second has almost no edges. The other 98 edge maps are comprised in between these two extreme edge maps.

The evaluation curves, constructed with the values of the 
                           
                              E
                              ,
                              
                              H
                           
                         and 
                           
                              C
                           
                         over the collection of EDA outputs as a function of the 
                           
                              
                                 
                                    T
                                 
                                 
                                    h
                                 
                              
                           
                         values, are shown in Fig. 6
                         along with a plot of PFoM and 
                           
                              
                                 
                                    Q
                                 
                                 
                                    B
                                 
                              
                           
                         over the same parameter range. The 
                           
                              C
                           
                         evaluation curve displays the usual behavior of complexity measures; it shows a peak when both measures are balanced. Qualitative comparisons between best edge maps according to 
                           
                              C
                           
                         and PFoM are made, see Fig. 7
                        . The boundary in the lower part of the coach is missing in the edge map selected by PFoM (Fig. 7
                        
                           
                              (
                              d
                              )
                           
                        ). Our measure selected a more defined edge map, i.e. with more edge points, (Fig. 7
                        
                           
                              (
                              c
                              )
                           
                        ), thus showing a more defined contour around the couch. Also, comparing the thresholds value, the 
                           
                              C
                           
                         measure selected a map with 
                           
                              
                                 
                                    T
                                 
                                 
                                    h
                                 
                              
                              =
                              0.08
                           
                         and PFoM a map with higher threshold, 
                           
                              
                                 
                                    T
                                 
                                 
                                    h
                                 
                              
                              =
                              0.14
                           
                        . PFoM was reported as a measure with a bias towards false negatives, i.e. it gives higher scores to edge maps with few edges [7]. This account for the missing edge boundary points around the main object in the PFoM edge map.

The second image, woods, provides a challenge to all the detectors. The edge maps selected by 
                           
                              C
                           
                        , PFoM and 
                           
                              
                                 
                                    Q
                                 
                                 
                                    B
                                 
                              
                           
                         are shown in Fig. 8
                        . Maps are qualitatively different, selected from different quartiles of the parameter range. Reference-based measures select: PFoM to Robert EDA as the best edge detector and 
                           
                              
                                 
                                    Q
                                 
                                 
                                    B
                                 
                              
                           
                         to Sobel EDA. Table 1
                         shows their parameters value and scores. The scores are low, i.e. indicating low agreement between the outputs and GT.

The analysis of the scores given by PFoM and 
                           
                              
                                 
                                    Q
                                 
                                 
                                    B
                                 
                              
                           
                         to the edge maps selected by 
                           
                              C
                           
                         (Table 2
                        , sixth to seventh column) reveals that the reference-based measures heavily penalize the false positives that are introduced by outlining the woods and country road surrounding the buildings in the image, which are not depicted in the GT. Table 2, third to fifth column, show 
                           
                              E
                              ,
                              
                              H
                           
                         and 
                           
                              C
                           
                         scores, revealing that the most balanced map related to 
                           
                              E
                           
                         is given by LoG EDA; the map with most edge entropy, i.e. related to 
                           
                              H
                           
                        , is given by Canny EDA and the one that shows better statistical complexity, i.e. related to 
                           
                              C
                           
                        , is also Canny EDA. The scores given by PFoM and 
                           
                              
                                 
                                    Q
                                 
                                 
                                    B
                                 
                              
                           
                         to such maps select as the best map the one given by Prewitt EDA. An interesting comparison is given by the scores of 
                           
                              E
                           
                         and 
                           
                              
                                 
                                    Q
                                 
                                 
                                    B
                                 
                              
                           
                        . The Equilibrium index is based on 
                           
                              
                                 
                                    Q
                                 
                                 
                                    B
                                 
                              
                           
                         by replacing the GT with a family of preselected local patterns, sought in the whole image. The provided GT, which does not outline all the objects in the image, misleads the reference-based measures towards lighter maps while the use of pre-defined edge patterns helps preventing such problem.

An enlarged view of the southeast corner of the image woods depicting a country road is shown in Fig. 9
                        )
                           
                              (
                              a
                              )
                           
                         with its corresponding GT in panel 
                           
                              (
                              b
                              )
                           
                        . Panel 
                           
                              (
                              c
                              )
                           
                         and 
                           
                              (
                              d
                              )
                           
                         are Canny edge maps, 
                           
                              (
                              e
                              )
                           
                         and 
                           
                              (
                              f
                              )
                           
                         LoG edge maps, 
                           
                              (
                              g
                              )
                           
                         and 
                           
                              (
                              h
                              )
                           
                         Prewitt edge maps, 
                           
                              (
                              i
                              )
                           
                         and 
                           
                              (
                              j
                              )
                           
                         Sobel edge maps, 
                           
                              (
                              k
                              )
                           
                         and 
                           
                              (
                              l
                              )
                           
                         Roberts edge maps. The first of each pair was selected by 
                           
                              C
                           
                         and the second of each pair by PFoM.

In each edge map selected by the reference-based measures, the country road is poorly defined. Instead, every edge map selected by 
                           
                              C
                           
                         
                        Fig. 9
                        
                           
                              (
                              c
                              )
                              ,
                              
                              (
                              e
                              )
                              ,
                              
                              (
                              g
                              )
                              ,
                              
                              (
                              i
                              )
                           
                         and 
                           
                              (
                              k
                              )
                           
                         have the country road well defined, as well as the vegetation surrounding it.

Finally, we discuss the empirical statistical distribution of the maximum 
                           
                              C
                           
                         scorings on all EDA maps computed with all South Florida images. Boxplots of such values are shown in Fig. 10
                         along with boxplots of PFoM scores computed on the same edge maps, the ones selected by our 
                           
                              C
                           
                         measure. We infer from comparison between all 
                           
                              C
                           
                         empirical distributions that Canny EDA produces slightly better maps than the other detectors. PFoM score differently such maps giving the same moderately low mean (around 0.5 value) to all gradient detectors but LoG EDA. We show examples of such images and best EDA maps in Fig. 12. Each row displays outputs from a different EDA. Last panel of each row shows a plot of the 
                           
                              C
                           
                         curve as a function of high threshold. The different shapes of the 
                           
                              C
                           
                         curves can be accounted for the differences in the sampling of each EDA parameter space.

Some authors believe that the manual GT approach is essential for performance characterization because most researchers do not regard results on synthetic images as convincing and still wish to see results on real images, see [18] and references therein. Unfortunately, manual GT annotation is dubious, tedious and time-consuming. In addition, different annotators often give different GT or the same annotator can give different GT to the same real image at different times [30]. The use of consensus GT for real images avoids both (1) the subjective generation of manual GT for real images and (2) the generation of artificial GT for artificial images, which probably do not faithfully represent the real scenes. On the other hand, the consensus GT allows many real images to be used for performance characterization [18,17].

In this experiment, we show that the use of our measure gives results similar to the ones obtained when a pool of GT images are used in the intra-technique and in the inter-technique evaluation problem.

We selected an image from the Berkeley Segmentation Database [30], a benchmark database for boundary detection algorithms that provides images with several hand made segmentations offered as GT. Thus, the level of detail of the different GT segmentations is diverse, and it represents the human opinion on what the boundary edges of the objects in images are. Besides, edge detection is not the same as boundary detection; boundary maps show only the outline of main objects while edge maps show the whole structure of the image. In Fig. 11
                         five different GT images available for the image 86000 are shown.

All supervised measures depend on the level of detail of the GT, thus any supervised measure computed with GT1 (highly detailed) will give high marks to a more cluttered edge map, but if computed by using GT5 (little detailed) it will certainly give a maximum score to a map with very few edge points.

Unsupervised measures score differently; they search general characteristics in the map, determined in this case by the specific database of edge patterns and the KS statistic. This example aims at exploring the degree of matching of 
                           
                              C
                           
                         scoring with human observation and supervised measures. Thus we use only the gold standard supervised measure, PFoM, and the gold standard EDA, Canny EDA, to elaborate the example.

We obtained 
                           
                              C
                           
                         scores for the five GT images and the 100 edge maps outputs of Canny EDA computed with parameters described in the previous subsection. The same 100 Canny edge maps were scored with PFoM, by using all different hand-made GT images and they were scored with 
                           
                              
                                 
                                    Q
                                 
                                 
                                    B
                                 
                              
                           
                         using different collections of GT images. Our reference-based measure 
                           
                              
                                 
                                    Q
                                 
                                 
                                    B
                                 
                              
                           
                         provides a consensus score in this framework. In Fig. 11
                        
                           
                              (
                              a
                              )
                           
                        , the best map selected by 
                           
                              C
                           
                         is shown. In panel 
                           
                              (
                              b
                              )
                           
                         the optimal edge map selected using PFoM with GT1 image is shown. That map was also selected with the supervised measure 
                           
                              
                                 
                                    Q
                                 
                                 
                                    B
                                 
                              
                           
                         using the collection of all man-made GT images available. In panel 
                           
                              (
                              c
                              )
                           
                        , the edge map selected by 
                           
                              
                                 
                                    Q
                                 
                                 
                                    B
                                 
                              
                           
                         by using GT2, GT3, GT4 and GT5 is shown. In panel 
                           
                              (
                              d
                              )
                           
                        , the edge map using PFoM with GT5 is shown.

Visual inspection tells us that the maps selected by PFoM and 
                           
                              C
                           
                         are almost identical when the GT is the most detailed one (GT1). But the differences are very striking when PFoM is using GT5 (the least detailed one) as GT, i.e. the map selected lost the structure of the building.

In Table 3
                        , the values of 
                           
                              E
                              ,
                              
                              C
                           
                         and 
                           
                              H
                           
                         over the collection of five GT images are shown. Our 
                           
                              C
                           
                         measure gives the maximum scoring to the most detailed GT. In this example, three mayor conclusions are drawn:
                           
                              •
                              By using supervised measures, the degree of details of the GT impacts on the quality of the edge map selected. PFoM selects a better map using a detailed GT than using a less detailed GT. Our reference-based measure 
                                    
                                       
                                          
                                             Q
                                          
                                          
                                             B
                                          
                                       
                                    
                                  selects edge maps that are as good as the ones selected by PFoM, and it accommodates the use of a whole collection of GT images to select the best edge map when moving parameters in a fixed range.


                                 
                                    
                                       C
                                    
                                  selects edge maps that are as good as the ones selected by PFoM at its best (when the GT is detailed enough) but selects better maps than PFoM when the GT is very simple (almost a boundary). The Equilibrium index 
                                    
                                       E
                                    
                                  is based on the 
                                    
                                       
                                          
                                             Q
                                          
                                          
                                             B
                                          
                                       
                                    
                                  measure computed over a rich database of patterns; this operation is better than correlating with a simple (or inaccurate) GT.

@&#CONCLUSIONS@&#

In this paper, new ideas of edge Equilibrium and edge Information are discussed. They lead to the definition of a new SCM for scoring binary maps. To measure edge Equilibrium, a similarity index was defined by projecting the edge map into a family of edge patterns that scores the continuity and width of edges in fixed size windows of the edge map. To measure Information, a new Entropy index based on the KS statistic was defined. The SCM is the product of the Equilibrium and Entropy indices and it is effectively used for performance characterization which includes: (i) the specific evaluation of an algorithm (intra-technique process) in order to identify its best parameters and (ii) the comparison of different algorithms (inter-technique process) in order to classify them according to their quality.

Our experiments were made with common edge detectors that are used by a large number of practitioners. More complex edge detectors aim at specific characteristics in the images, thus the measure should be modified accordingly with a pattern database that accommodates those general characteristics. Active contour methods as applied in [31] are based on the statistical distribution of the noise present in PolSAR images. A measure like ours must carefully be modified to score such EDA outputs, which is the scope of another paper. We are also studying alternative definitions for the Entropy index based on edge map histogram functionals that could be tailored to measure the performance of boundary detection algorithms more accurately.

@&#ACKNOWLEDGMENTS@&#

This paper has been partially supported by the Argentinean Grants PICT 2008-00291, and SeCyT-UNC. JM was partially supported by a SGCyT-UNS grad student travel fellowship. JM wants to thanks Famaf-UNC for its hospitality while the preparation of this manuscript. JG was supported by a Conicet graduate student fellowship. The authors want to thank the four anonymous referees who made valuable comments to improve the quality of this paper, and Prof. Alejandro Frery for enriching discussions that lead to the definition of the measure. All measure related Matlab code was written by the authors and it is available to be downloaded from the Reproducible Research repository of AGF at University of Cordoba.

@&#REFERENCES@&#

